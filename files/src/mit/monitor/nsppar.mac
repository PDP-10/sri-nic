; UPD ID= 292, SNARK:<5.MONITOR>P2-NSPPAR.MAC.28,  22-Oct-81 16:52:03 by GRANT
;Put SEGSIZ back to its Release 4 value of 256.
; UPD ID= 233, SNARK:<5.MONITOR>NSPPAR.MAC.27,  29-Sep-81 16:06:50 by GRANT
;More TCO 5.1545 - restore MAXNOD
; UPD ID= 224, SNARK:<5.MONITOR>NSPPAR.MAC.26,  29-Sep-81 09:03:36 by GRANT
;TCO 5.1545 - recreate LLMSG and move LLLAK into word 31 of LL block
; UPD ID= 219, SNARK:<5.MONITOR>NSPPAR.MAC.25,  28-Sep-81 12:34:45 by GRANT
;TCO 5.1537 - add LLTIMO to LL block
; UPD ID= 200, SNARK:<5.MONITOR>NSPPAR.MAC.24,  21-Sep-81 10:01:51 by GRANT
;TCO 5.1503 - make MAXDSC be 39
; UPD ID= 192, SNARK:<5.MONITOR>NSPPAR.MAC.23,  17-Sep-81 13:18:52 by GRANT
;TCO 5.1490 - Reinstate  LLLAK, LLPSR, LLNSR, LLISR, and MSACK; eliminate LLMSG
; UPD ID= 168, SNARK:<5.MONITOR>NSPPAR.MAC.22,  13-Sep-81 08:30:14 by GRANT
;TEMPORARILY UNDO PREVIOUS EDIT
; UPD ID= 150, SNARK:<5.MONITOR>NSPPAR.MAC.21,   8-Sep-81 17:24:54 by GRANT
;Eliminate LLMSG;  add LLLAK, LLPSR, LLNSR, LLISR, AND MSACK
; UPD ID= 2202, SNARK:<5.MONITOR>NSPPAR.MAC.20,  17-Jun-81 09:35:17 by GRANT
;TCO 5.1371 - Add RESHLD
; UPD ID= 2134, SNARK:<5.MONITOR>NSPPAR.MAC.19,   7-Jun-81 21:40:55 by GRANT
;ADD CKNSTM
; UPD ID= 2112, SNARK:<5.MONITOR>NSPPAR.MAC.18,   1-Jun-81 12:43:50 by GRANT
;Fix some confusing comments regarding segment numbers
; UPD ID= 2078, SNARK:<5.MONITOR>NSPPAR.MAC.17,  25-May-81 21:59:25 by GRANT
;ADD LLINAC, NSINTM, AND CKINTM
; UPD ID= 1908, SNARK:<5.MONITOR>NSPPAR.MAC.16,  30-Apr-81 13:29:56 by GRANT
;Change SEGSIZ from 576. to 290.
; UPD ID= 1888, SNARK:<5.MONITOR>NSPPAR.MAC.15,  26-Apr-81 20:59:08 by GRANT
;TCO 5.1279 - DECNET PHASE II+ STUFF
; UPD ID= 1359, SNARK:<5.MONITOR>NSPPAR.MAC.13,  17-Dec-80 15:45:53 by MURPHY
;LLTTA
; UPD ID= 1317, SNARK:<5.MONITOR>NSPPAR.MAC.12,  26-Nov-80 07:00:21 by GRANT
;ADD NETWORK MANAGEMENT DEFINITIONS
; UPD ID= 1224, SNARK:<5.MONITOR>NSPPAR.MAC.11,   3-Nov-80 16:29:30 by GRANT
;TCO 5.1187 - Create symbol for NSP overhead bytes
; UPD ID= 1185, SNARK:<5.MONITOR>NSPPAR.MAC.10,  21-Oct-80 15:45:41 by GRANT
;MAKE SEGSIZ 576.
; UPD ID= 1177, SNARK:<5.MONITOR>NSPPAR.MAC.9,  20-Oct-80 17:12:06 by MURPHY
;GETBYM DEFINITION
; UPD ID= 1167, SNARK:<5.MONITOR>NSPPAR.MAC.8,  15-Oct-80 16:14:47 by GRANT
;Add FLOHLD
; UPD ID= 951, SNARK:<5.MONITOR>NSPPAR.MAC.7,  22-Aug-80 15:54:15 by GRANT
;Put SEGSIZ back to 256.
; UPD ID= 929, SNARK:<5.MONITOR>NSPPAR.MAC.5,  20-Aug-80 12:16:11 by MURPHY
;Add SMLSEG
; UPD ID= 886, SNARK:<5.MONITOR>NSPPAR.MAC.4,  13-Aug-80 13:37:27 by MURPHY
;ADD LLTTY, ETC.
; UPD ID= 749, SNARK:<5.MONITOR>NSPPAR.MAC.3,  10-Jul-80 10:00:14 by GRANT
;INCREASE SEGSIZ FROM 256. TO 520.
; UPD ID= 560, SNARK:<5.MONITOR>NSPPAR.MAC.2,  27-May-80 13:05:27 by ENGEL
;MOVE MCBDTE BIT DEFNITIONS TO PROLOG
;<4.MONITOR>NSPPAR.MAC.26, 13-Sep-79 14:40:38, EDIT BY GRANT
;EXPAND THE LENGTH OF DATA, LS, AND INT MESSAGES TO INCLUDE A FULL
;NSP ROUTE HEADER
;<4.MONITOR>NSPPAR.MAC.25, 17-Aug-79 12:59:45, EDIT BY GRANT
;TCO 4.2411 - CHANGE LINK PRIORITY FIELD OF CI MESSAGE
;<4.MONITOR>NSPPAR.MAC.24, 18-Apr-79 13:10:33, EDIT BY KIRSCHEN
;MAKE ISEGSZ GLOBAL
;<4.MONITOR>NSPPAR.MAC.23, 11-Apr-79 11:43:57, EDIT BY KIRSCHEN
;ADD ISEGSZ FOR INTERNAL LINKS
;<4.MONITOR>NSPPAR.MAC.22,  4-Mar-79 18:41:26, EDIT BY KONEN
;UPDATE COPYRIGHT FOR RELEASE 4
;<4.MONITOR>NSPPAR.MAC.21, 16-Feb-79 21:28:38, EDIT BY ENGEL
;MOVE LLQUN AND LLQOU TO WORD 23 AND ENLARGE TO 9 BITS APIECE
;<4.MONITOR>NSPPAR.MAC.20, 13-Feb-79 08:41:14, EDIT BY ENGEL
;ADD LLMQO AND LLMQI
;<4.MONITOR>NSPPAR.MAC.19, 12-Feb-79 14:27:16, EDIT BY ENGEL
;CHANGE VALUES OF MAXSEG,MAXSG1 AND MAXSGQ
;<4.MONITOR>NSPPAR.MAC.18, 10-Jan-79 13:58:17, EDIT BY KIRSCHEN
;MAKE ROUTINE VERSION 3 FOR VAX COMPATIBILITY
;<4.MONITOR>NSPPAR.MAC.17, 20-Dec-78 13:38:09, EDIT BY HALL
;MAKE SEGSIZ GLOBAL
;<4.MONITOR>NSPPAR.MAC.16, 27-Sep-78 11:20:43, EDIT BY ENGEL
;ADD NTCFRK AND NTCCHN
;<4.MONITOR>NSPPAR.MAC.15, 21-Sep-78 10:20:19, EDIT BY ENGEL
;ADD LLDED FOR DEAD MCB'S (INDICATES BLOCK ALREADY PROCESSED)
;<4.MONITOR>NSPPAR.MAC.14, 28-Aug-78 08:46:29, EDIT BY KIRSCHEN
;ADD LLLOC
;<4.MONITOR>NSPPAR.MAC.13, 11-Aug-78 13:43:54, Edit by KIRSCHEN
;<4.MONITOR>NSPPAR.MAC.12, 31-Jul-78 09:11:10, Edit by KIRSCHEN
;ADD MAXNOD
;<4.MONITOR>NSPPAR.MAC.11, 23-Jun-78 09:19:09, Edit by KIRSCHEN
;<4.MONITOR>NSPPAR.MAC.10, 20-Jun-78 08:43:06, Edit by KIRSCHEN
;ADD REQVER - VERIFICATION MSG NEEDED ON THIS LINE
;<4.MONITOR>NSPPAR.MAC.9, 14-Jun-78 14:15:27, Edit by KIRSCHEN
;<4.MONITOR>NSPPAR.MAC.8, 13-Jun-78 15:10:48, Edit by KIRSCHEN
;ADD LLQUE
;<4.MONITOR>NSPPAR.MAC.7, 26-May-78 11:19:34, Edit by KIRSCHEN
;ADD LLCIP
;<4.MONITOR>NSPPAR.MAC.6, 23-May-78 13:53:47, EDIT BY MILLER
;DEFINE MSRLS AND MSPST
;<4.MONITOR>NSPPAR.MAC.5, 16-May-78 13:53:16, Edit by KIRSCHEN
;<4.MONITOR>NSPPAR.MAC.4, 15-May-78 10:36:53, Edit by KIRSCHEN
;<4.MONITOR>NSPPAR.MAC.3, 15-May-78 10:35:27, Edit by KIRSCHEN
;<4.MONITOR>NSPPAR.MAC.2, 15-May-78 10:34:42, Edit by KIRSCHEN
;<4.MONITOR>NSPPAR.MAC.1, 15-May-78 10:23:29, Edit by KIRSCHEN
;CREATE NSPPAR



;THIS SOFTWARE IS FURNISHED UNDER A LICENSE AND MAY ONLY BE USED
;  OR COPIED IN ACCORDANCE WITH THE TERMS OF SUCH LICENSE.
;
;COPYRIGHT (C) 1976,1977,1978,1979 BY DIGITAL EQUIPMENT CORPORATION, MAYNARD, MASS.

	UNIVERSAL NSPPAR
	SEARCH PROLOG
	SALL


; NSP UNIVERSAL DEFINITION FILE

; This module contains data structure and symbol definitions
; required by NSP.

SUBTTL	Logical Link Block Definition

DEFSTR (LLUPL,0,35,30)		;UP POINTER
	DEFSTR (LLDED,0,0,1)	;LINK BLOCK ALREADY ABORTED (FOR DEAD MCB'S)
        DEFSTR (LLLKP,0,2,2)	;OTHER END'S NSP VERSION (0 = 3.2, 1= 3.1)
DEFSTR (LLDWN,1,35,30)		;DOWN POINTER
	DEFSTR (LLCIL,1,0,1)	;CONNECTED TO AN INTERNAL LINK AT THE OTHER END
	DEFSTR (LLRES,1,1,1)	;THIS LINK RESERVED FOR FORK IN LLRFK
	DEFSTR (LLLWC,1,2,1)	;LINK WAS CONNECTED (I.E. CC WAS RECEIVED)
DEFSTR (LLRCT,1,5,3)		;RESERVE COUNT
DEFSTR (LLQUE,2,0,1)		;LINK IS ON OUTQUE
DEFSTR (LLLOC,2,1,1)		;THIS IS A LOCAL LINK
DEFSTR (LLSTA,2,5,4)		;STATE OF THIS LINK
	LLSTRN==0		;LINK IN TRANSITION. NON-EXISTANT
	LLSLIS==1		;OBJECT IS LISTENING
	LLSCIS==2		;CONNECT-INITIATE SENT
	LLSCIR==3		;CONNECT-INITIATE RECEIVED
	LLSRUN==4		;LINK IS ACTIVE.
	LLSDIS==5		;DI SENT
	LLSDIQ==6		;DI IS QUEUED
	LLSDIR==7		;DI RECIEVED
	LLSCCS==10		;CC SENT
	LLSABT==11		;CONNECTION ABORTED/REFUSED BY LOCAL NSP
;DEFSTR (LLFLG,2,17,12)		;LINK FLAGS
DEFSTR (LLFOB,2,17,1)		;THIS IS AN OBJECT
DEFSTR (LLFEM,2,16,1)		;EOM
DEFSTR (LLFII,2,15,1)		;INPUT INTERRUPT NEEDED
DEFSTR (LLFDI,2,14,1)		;DI WAS AN ABORT
DEFSTR (LLTRN,2,13,1)		;NEED INTIAL LS MESSAGE
DEFSTR (LLFIM,2,12,1)		;EOM IN INPUT BUFFER
DEFSTR (LLFNA,2,11,1)		;IF SET, BLOCK WAITING FOR ACK TO GO
DEFSTR (LLOPW,2,10,1)		;LINK IS OPEN FOR WRITE
DEFSTR (LLOPI,2,9,1)		;LINK IS OPEN FOR READ
DEFSTR (LLFNN,2,8,1)		;IF ON, DATA MESSAGE WAS THROWN AWAY
DEFSTR (LLSDE,2,7,1)		;IF ON, LL BLOCK DISASSOCIATED FROM PROCESS
DEFSTR (LLINT,2,6,1)		;THIS IS AN INTERNAL LINK
DEFSTR (LLLNK,2,35,18)		;LINK I.D. OF THIS LINK
DEFSTR (LLFRK,3,17,18)		;OWNING FORK
DEFSTR (LLDRC,3,23,6)		;PI FOR DATA RECEIVED
DEFSTR (LLPII,3,29,6)		;PI CHANNEL FOR INTERRUPT MESSAGES
DEFSTR (LLPIC,3,35,6)		;PI FOR CONNECT-INITITATE
DEFSTR (LLIIN,4,11,12)		;LAST LS/INT SEGMENT RECEIVED
DEFSTR (LLFNM,4,19,8)		;REMOTE OBJECT NUMBER
DEFSTR (LLHLK,4,35,16)		;LINK I.D. ON FOREIGN HOST
LLMSG==5			;RAW MESSAGE QUEUE
LLMSI==6			;POINTER TO INTERRUPT MESSAGE
DEFSTR (LLBRP,7,0,1)		;BACK-PRESSURE BIT FOR TRANSMIT
DEFSTR (LLBRL,7,1,1)		;BACK-PRESSURE FOR RECEIVE
DEFSTR (LLMFC,7,3,2)		;0=NO FLOW CONTROL
				;1=SEGMENT FLOW CONTROL
				;2=MESSAGE FLOW CONTROL
DEFSTR (LLSWG,7,19,16)		;MAX SEGMENT SIZE FOR MESSAGE
DEFSTR (LLMSM,7,27,8)		;MAX SEGMENTS THIS LINK CAN HAVE

;**** EIGHT BITS AVAILABLE AT END OF WORD 7

DEFSTR (LLBOM,10,0,1)		;AT BEGINNING OF MESSAGE
DEFSTR (LLPRT,10,2,2)		;DTE # FOR THIS CONNECTION
DEFSTR (LLFLI,10,3,1)		;INPUT DIRECTION
DEFSTR (LLFLO,10,4,1)		;OUTPUT DIRECTION
DEFSTR (LLIMS,10,5,1)		;INPUT IS MESSAGE-TYPE
DEFSTR (LLOPT,10,35,30)		;OPTIONAL DATA STORAGE
DEFSTR (LLDSN,11,11,12)		;LAST DATA SEGMENT SENT
DEFSTR (LLISN,11,23,12)		;LAST LS/INT SEGMENT SENT
DEFSTR (LLIDN,11,35,12)		;LAST DATA SEGMENT RECEIVED
LLOMSG==12			;ORDERED DATA QUEUE
DEFSTR (LLUCT,13,5,6)		;# OF BYTES IN OPTDATA FIELD
DEFSTR (LLTSK,13,35,30)		;POINTER TO TASK NAME
DEFSTR (LLHST,14,35,36)		;POINTER TO REMOTE HOST NAME
DEFSTR (LLMIC,15,5,6)		;COUNT OF INT SEGMENTS ALLOWED TO SEND
DEFSTR (LLFDS,15,35,30)		;REMOTE DESCRIPTOR BLOCK
LLBPTR==16			;WORK CELL CONTAINING BYTE POINTER
LLBPCT==17			;CURRENT BYTE COUNT
DEFSTR (LLBSZ,20,5,6)		;BYTE SIZE OF OPENING
DEFSTR (LLDRW,20,9,4)		;COUNT OF RAW DATA MESSAGES
DEFSTR (LLDMT,20,14,5)		;COUNT OF TOTAL DATA MESSAGES ON QUEUES
DEFSTR (LLLSA,20,15,1)		;SPECIAL FLAG USED TO CONTROL DATA INTS
				; FROM SCHED WHILE DOING LS MESSAGES
DEFSTR (LLLSC,20,19,4)		;COUNT OF LS BUFFERS TO REQUEST
DEFSTR (LLRSN,20,35,16)		;DISCONNECT REASON
LLSEGQ==21			;HEADER FOR SENT QUEUE
DEFSTR (LLHSN,22,17,18)		;REMOTE HOST NUMBER
DEFSTR (LLRFK,22,35,18)		;RESERVED PROCESS ID
DEFSTR (LLMQI,23,8,9)		;MAXIMUM INPUT TO QUEUE FOR LINK
DEFSTR (LLMQO,23,17,9)		;MAXIMUM OUTPUT TO QUEUE FOR LINK
DEFSTR (LLQUN,23,26,8)		;# SEGS IN QUEUER TO RESEND
DEFSTR (LLQOU,23,35,8)		;# OF SEGS IN QUEUER
DEFSTR (LLTTA,24,0,1)		;TTY IS ACTIVE ON THIS LL
DEFSTR (LLTTY,24,35,23)		;TTY ASSOCIATED WITH THIS LL
LLHNM1==25			;STORAGE FOR REMOTE
LLHNM2==26			; HOST NAME STRING
LLINAC==27			;INACTIVITY TIME STAMP, 0 IF TIMER IS OFF
DEFSTR (LLISR,30,0,1)		;"IN LLSRVQ CHAIN" FLAG
DEFSTR (LLPSR,30,35,23)		;PREVIOUS LL BLOCK IN LLSRVQ CHAIN
DEFSTR (LLLAK,31,11,12)		;LAST DATA SEG ACKED
DEFSTR (LLNSR,31,35,23)		;NEXT LL BLOCK IN LLSRVQ CHAIN
LLTIMO==32			;CURRENT RESEND TIME OUT VALUE

LKSIZE==33			;SIZE OF A STANDARD ENTRY
;DEFINITIONS FOR OBJECT PART OF TABLE

DEFSTR (LLSOB,LKSIZE,35,18)	;OBJECT USED IN CI BY REMOTE
DEFSTR (LLNAM,LKSIZE,17,18)	;NUMBER OF THIS OBJECT
DEFSTR (LLDSC,LKSIZE+1,35,36)	;POINTER TO DESCRIPTOR BLOCK
DEFSTR (LLUSR,LKSIZE+2,35,36)	;POINTER TO USER NAME BLOCK
DEFSTR (LLACT,LKSIZE+3,35,36)	;POINTER TO ACCOUTN STRING BLOCK
DEFSTR (LLPCT,LKSIZE+4,5,6)	;COUNT OF BYTES IN PASSWORD
DEFSTR (LLPSW,LKSIZE+4,35,30)	;POINTER TO PASSWORD BLOCK
LKOBJS==6			;EXTRA ENTRIES NEEDED FOR OBJECT
LLUSGP==LKSIZE+5		;SAVE USER,GROUP FROM CI

; DEFINITIONS FOR INTERNAL LINKS

DEFSTR (LLDRV,LKSIZE+00,35,36)	;DRIVER CORRELATION CODE (INTERNAL LINKS ONLY)
DEFSTR (LLVEC,LKSIZE+01,35,36)	;DRIVER FUNCTION VECTOR (INTERNAL LINKS ONLY)
DEFSTR (LLBFO,LKSIZE+02,35,36)	;DRIVER OUTPUT BUFFER ADDRESS
DEFSTR (LLBPO,LKSIZE+03,35,36)	;BYTE POINTER TO NEXT BYTE TO BE OUTPUT
DEFSTR (LLOCT,LKSIZE+04,35,18)	;OUTPUT BUFFER DATA COUNT
	DEFSTR (LLTRC,LKSIZE+04,00,01)	;TRUNCATE INPUT MESSAGE
	DEFSTR (LLNDO,LKSIZE+04,01,01)	;NOTIFY DRIVER WHEN OUTPUT MAY BE SENT
	DEFSTR (LLTRM,LKSIZE+04,02,01)	;TRUNCATE REMAINDER OF THIS NSP MESSAGE
	DEFSTR (LLDRB,LKSIZE+04,03,01)	;DRIVER REFUSED TO PROVIDE BUFFER
	DEFSTR (LLWAT,LKSIZE+04,04,01)	;DRIVER WANTS TO WAIT
	DEFSTR (LLEOM,LKSIZE+04,05,01)	;DRIVER SENDING A COMPLETE MESSAGE
	DEFSTR (LLCIP,LKSIZE+04,05,01)	;SYNCHRONOUS CLOSE IS IN PROGRESS
DEFSTR (LLOUT,LKSIZE+05,35,36)	;OUTPUT QUEUE OF LINK BLOCKS
DEFSTR (LLBFI,LKSIZE+06,35,36)	;DRIVER INPUT BUFFER ADDRESS
DEFSTR (LLBPI,LKSIZE+07,35,36)	;BYTE POINTER TO NEXT BYTE ON INPUT
DEFSTR (LLICT,LKSIZE+10,35,18)	;CURRENT COUNT OF INPUT BYTES LEFT TO FILL
DEFSTR (LLIIC,LKSIZE+10,17,18)	;INITIAL COUNT OF BYTES IN INPUT BUFFER

LKISIZ==11			;ADDITIONAL WORDS NEEDED FOR INTERNAL LINKS

SUBTTL

;DEFINITIONS FOR INTERNAL MESSAGE HEADER

MSHDR==7			;SIZE OF MESSAGE HEADER
DEFSTR (MSRLS,0,0,1)		;RELEASE MESSAGE WHEN POSTED
DEFSTR (MSPST,0,1,1)		;MESSAGE AWAITING POSTING
DEFSTR (MSTRY,0,4,3)		;NUMBER OF SEND RETRIES
DEFSTR (MSACK,0,5,1)		;ACK BUFFER FLAG:  1=IN USE, 0=AVAILABLE
DEFSTR (MSLNK,0,35,18)		;LINK WORD
DEFSTR (MSPRT,1,2,2)		;DTE # OR ALL ONES FOR LOCAL CONNECITON
DEFSTR (MSLCL,1,3,1)		;IF A LOCAL MESSAGE
DEFSTR (MSNAK,1,4,1)		;MESSAGE HAS BEEN NAK'ED
DEFSTR (MSMS1,1,5,1)		;MESSAGE ALREADY SENT IF 1
SEGMSK==7777			;MASK FOR SEGMENT NUMBER
MSKSTR MSSEG,1,<<SEGMSK>B17>	;SEG NUMBER OF MESSAGE
DEFSTR (MSLLA,1,33,16)		;LL ADDRESS
DEFSTR (MSTOM,1,35,2)		;TYPE OF THIS MESSAGE
	MSCTL==0		;CONTROL MESSAGE
	MSLSI==1		;LS/INT MESSAGE
	MSDAT==2		;DATA MESSAGE
DEFSTR (MSCNT,2,35,12)		;# OF BYTES IN MESSAGE
DEFSTR (MSDTC,2,23,12)		;# OF BYTES EXCLUDING NSP OVERHEAD BYTES
DEFSTR (MSMFL,2,11,12)		;MESSAGE FLAGS
MSBPTR==3			;BYTE POINTER TO DATA PART OF MESSAGE
MSTIM==4			;TIME STAMP WHEN SENT TO DRIVER
MSPRV==5			;"PREVIOUS POINTER" ON NSSNTQ OR SMSGQ
MSNXT==6			;"NEXT POINTER" ON NSSNTQ OR SMSGQ


;DEFINITIONS FOR FILE SPECS

MAXDSC==^D39			;MAX CHARS. IN USERID, PASSWORD, ACCOUNT

;GENERAL NSP PARAMETERS

MAXNOD==^D20			;MAX NUMBER OF NODES IN KNOWN NODES TABLE
NSPEXT==200			;EXTENSIBLE BIT IN FIELD DEFINITIONS
NSPLCH==53			;STANDARD LINK CHARACTERISTICS
NSPSEG==^D181			;MAXIMUM USER DATA SEGMENT
MAXSEG==11			;MAX SEGS TO RECEIVE ON RONLY LINK
MAXSG1==8			;MAX SEGS TO RECIEVE ON READ/WRITE LINK
MAXSGQ==8			;MAX SEGMENTS IN QUEUER
FLOHLD==3			;FLOW CONTROL THRESHOLD
RESHLD==100			;RESIDENT FREE SPACE THRESHOLD
NSPTRY==4			;NUMBER OF TIMES TO RETRY TIMED OUT MESSAGES
NSPTIM==^D7000			;NSP TIME OUT VALUE
CKNSTM==^D2000			;INTERVAL FOR CHECKING MESSAGE TIME OUT QUEUE
NSINTM==^D20000			;DEFAULT INACTIVITY TIMEOUT VALUE
CKINTM==^D5000			;INTERVAL FOR CHECKING INAVTIVITY TIMERS

;MESSAGE AND ROUTING FLAGS

RTFLG==106			;ROUTING FLAGS
CNMRFL==10			;BASIC CONTROL MESSAGE TYPE
 NDIFLG==5B31			;NODE INIT MESSAGE
 CNMCI==20			;CI
 CNMCF==40			;CONNECT-CONFIRM
 CNMDI==60			;DI
 CNMDC==100			;DC
CIMMFL==30			;CI MESSAGE FLAGS
DATMFL==0			;BASIC DATA MESSAGE FLAGS
 DATFLI==20			;INT/LS FLAGS
 DATINT==40			;INTERRUPT MESSAGE FLAG
 DATBOM==40			;BEGINNING OF MESSAGE SEGMENT
 DATEOM==100			;END OF MESSAGE SEGEMENT
NSPOVR==:30			;MAX NUMBER OF NSP OVERHEAD BYTES IN A MSG
NODMAX==6			;MAX # OF CHARS IN NODE NAME
CISRVS==1			;CI BASIC SERVICES
 CIMCNT==10			;MESSAGE COUNTS
 CIMSCT==4			;SEGEMENT COUNTS
LNKPRI==1			;DEFAULT LINK PRIORITY
SEGSIZ==:^D256			;MAX SEGMENT SIZE
SMLSEG==:^D64			;Small segment size for TTY links
MAXRSZ==300			;MAX SEG SIZE TO SEND IN A NODE INIT
OBJZRO==0			;OBJECT TYPE 0 (NO DESCRIPTOR)
OBJONE==1			;OBJECT TYPE 1 (WITH DESCRIPTOR)
OBJTWO==2
OBJTSK==0			;OBJECT # FOR TASK
RTHLEN==4			;# OF WORDS NEEDED FOR ROUTING HEADER
DTMLEN==2+RTHLEN		;# OF WORDS NEEDED FOR DATA MESSAGE HEADER
CCLEN==13			;# OF WORDS NEEDED FOR CC MESSAGE
LSLEN==3+RTHLEN			;# OF WORDS FOR LS MESSAGE
WSEGSZ==<SEGSIZ/11>*11		;SEG SIZE IF OPEN IN WORD MODE
ISEGSZ==:403			;SEGMENT SIZE FOR INTERNAL LINKS
OPTSIZ==5			;# OF WORDS FOR OPTDATA BLOCK
MAXDIF==^D30			;MAX # OF OUTSTANDING SEGEMENTS
ACKBIT==10000			;BIT TO SAY IF ACK OR NACK
ACKIND==100000			;FIELD IS ACK BIT
ACKFLM==4			;MESSAGE FLAG FOR ACK MESSAGE
 ACKLSI==20			;SUB-TYPE FOR LS/INT ACK
DILEN==^D10
CONLEN==^D27			;SIZE OF CI BLOCK
ACKLEN==6			;LENGTH OF AN ACK MESSAGE
INTLEN==6+RTHLEN		;LENGTH OF AN INTERRUPT MESSAGE
NSPHDR==7			;# OF BYTES IN HEADER OF DATA MESSAGE

;COMM VERSION DEFINITIONS

COMVER==3			;VERSION OF NSP
COMECO==1			;ECO LEVEL
COMCST==0			;CUSTOMER LEVEL

ROUVER==3			;ROUTING VERSION
ROUECO==0			;ECO LEVEL
ROUCST==0			;CUSTOMER LEVEL
NDISIZ==7			;SIZE OF A NODE INIT MESSAGE
STRTYP==1			;INIT MESSAGE TYPE
VERTYP==2			;VERIFICATION MESSAGE TYPE
OURCAP==0			;OUR CAPABILITIES
OURREQ==6			;REQUIRED CAPS
OURNED==6			;WE NEED THESE FROM MCB
VERIF==1			;VERIFY MESSAGE NEEDED BIT
CNTFLD==77B5			;COUNT FIELD IN ARG TO SNDDI




;DEFINITIONS FOR NETWORK TOPOLOGY CHANGE TABLES
;THESE DEFINITIONS ARE FOR NTCTAB.

DEFSTR (NTCFRK,0,17,18)		;FORK WANTING INTERRUPT AT TOPOLOGY CHANGE
DEFSTR (NTCCHN,0,35,18)		;CHANNEL ON WHICH TO INTERRUPT FORK



;OPEN GET BYTE CODE - JUMPS TO 'NONE' IF COUNT GONE

DEFINE GETBYM (BCNT,BBYP,NONE)<
	SOSGE BCNT		;HAVE ANOTHER BYTE?
	JRST NONE		;NO
	ILDB T2,BBYP		;GET A BYTE
   >


SUBTTL Network Management Definitions

;DATA ID FORMAT

NTMDIL==:2			;NUMBER OF BYTES IN DATA ID
NT%DAT==:1B0			;DATA TYPE FIELD
NT%PNM==:7777B15		;PARAMETER OR COUNTER NUMBER FIELD
NT%CWD==:3B2			;COUNTER WIDTH INDICATOR FIELD
				; 0 = RESERVED
				; 1 = 8 BITS
				; 2 = 16 BITS
				; 3 = 32 BITS

;FORMAT FOR DATA ID ARGUMENT PASSING

DEFSTR (DIDDA,,0,1)		;DATA TYPE
	NTPAR==:0		;PARAMETER
	NTCOU==:1		;COUNTER
DEFSTR (DIDWD,,7,6)		;WIDTH (NUMBER OF BITS) IN COUNTER DATA
DEFSTR (DIDNO,,17,11)		;PARAMETER OR COUNTER NUMBER

;DATA TYPE FORMAT

NTMDTL==:1			;NUMBER OF BYTES IN DATA TYPE
NT%COD==:1B0			;CODE TYPE FIELD
NT%TYP==:1B1			;TYPE FIELD
NT%CNT==:77B7			;COUNT FIELD FOR "NOT CODED"
NT%LEN==:17B7			;COUNT FIELD FOR "CODED"
NT%FMT==:3B3			;FORMAT FIELD FOR "CODED"

;FORMAT FOR DATA TYPE ARGUMENT PASSING

DEFSTR (DTYCD,,0,1)		;CODE TYPE
	NTNCD==:0		;NOT CODED
	NTCOD==:1		;CODED
DEFSTR (DTYTY,,1,1)		;FORMAT TYPE
	NTSNG==:0		;SINGLE FIELD
	NTMUL==:1		;MULTIPLE FIELDS
	NTBIN==:0		;BINARY
	NTASC==:1		;ASCII IMAGE
DEFSTR (DTYCN,,7,5)		;NUMBER OF FIELDS OR BYTES
DEFSTR (DTYBF,,3,2)		;BINARY NUMBER FORMAT TYPE
	NTUDN==:0		;UNSIGNED DECIMAL NUMBER
	NTSDN==:1		;SIGNED DECIMAL NUMBER
	NTHEX==:2		;HEXADECIMAL NUMBER
	NTOCT==:3		;OCTAL NUMBER
DEFSTR (DTYLN,,7,4)		;NUMBER OF BYTES IN BINARY NUMNER


;NETWORK MANAGEMENT RETURN CODES

NTXGUD==:1			;SUCCESS
NTXUFO==:-1			;UNRECOGNIZED FUNCTION OR OPTION
NTXMPE==:-5			;MANAGEMENT PROGRAM ERROR
NTXUPT==:-6			;UNRECOGNIZED PARAMETER TYPE
NTXUC==:-10			;UNRECOGNIZED COMPONENT
NTXII==:-11			;INVALID IDENTIFICATION
NTXLCE==:-12			;LINE COMMUNICATION ERROR
NTXCWS==:-13			;COMPONENT IN WRONG STATE
NTXRE==:-17			;RESOURCE ERROR
NTXIPV==:-20			;INVALID PARAMETER VALUE
NTXPNA==:-26			;PARAMETER NOT APPLICABLE
NTXOF==:-31			;OPERATION FAILURE
NTXPM==:-35			;PARAMETER MISSING

;NODE ENTITY PARAMETERS

.NDSTT==:0			;NODE STATE
	.NDON==:0		;ON
	.NDOFF==:1		;OFF
	.NDSHT==:2		;SHUT
	.NDRST==:3		;RESTRICTED
	.NDREA==:4		;REACHABLE
	.NDUNR==:5		;UNREACHABLE
.NDNID==:^D100			;IDENTIFICATION
.NDNNA==:^D500			;NODE NAME
.NDCNN==:^D501			;CIRCUIT FOR NODE NAME
.NDNNU==:^D502			;NODE NUMBER
.NDITM==:^D510			;INCOMING TIMER
.NDOTM==:^D511			;OUTGOING TIMER
.NDALK==:^D600			;ACTIVE LINKS
.NDDLY==:^D601			;DELAY
.NDVRS==:^D700			;VERSION
.NDLML==:^D710			;LOCAL MAXIMUM LINKS
.NDLDF==:^D720			;LOCAL DELAY FACTOR
.NDLDW==:^D721			;LOCAL DELAY WEIGHT
.NDIAT==:^D722			;INACTIVITY TIMER
.NDRTF==:^D723			;RETRANSMIT FACTOR
.NDTYP==:^D901			;TYPE
	ROUTER==:0		;ROUTING
	NOROUT==:1		;NONROUTING
	PHASE2==:2		;PHASE II


;NODE COUNTERS

.NSBYR==:^D600			;BYTES RECEIVED
.NSBYS==:^D601			;BYTES SENT
.NSMGR==:^D610			;MESSAGES RECEIVED
.NSMGS==:^D611			;MESSAGES SENT
.NSCNR==:^D620			;CONNECTS RECEIVED
.NSCNS==:^D621			;CONNECTS SENT
.NSRTO==:^D630			;RESPONSE TIMEOUTS
.NSRCE==:^D640			;RECEIVED CONNECT RESOURCE ERROR
.NSALL==:^D700			;ACTIVE LOGICAL LINKS


;COUNTER WIDTHS

.NSW40==:40			;40 BITS WIDE
.NSW20==:20			;20 BITS WIDE


	END
