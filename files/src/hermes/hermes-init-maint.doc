




      Report No. 4996





      INITIALIZATION AND MAINTENANCE GUIDE      INITIALIZATION AND MAINTENANCE GUIDE
      FOR THE HERMES MESSAGE SYSTEM      FOR THE HERMES MESSAGE SYSTEM




      Charlotte D. Mooers








      August 1982











      Prepared by:

      Bolt Beranek and Newman Inc.
      10 Moulton Street
      Cambridge, Massachusetts  02238


      Prepared for:

      DEFENSE ADVANCED RESEARCH PROJECTS AGENCY      Report No. 4996                      Bolt Beranek and Newman Inc.



      1.  INTRODUCTION      1.  INTRODUCTION


      The Hermes Message System is an advanced electronic mail system
      which has been written at Bolt Beranek and Newman Inc., under the
      sponsorship of the Defense Advanced Research Projects Agency, and
      is currently installed on twenty-five host computers on the
      ARPANET.  Hermes runs on Digital Equipment Corporation DEC-10 and
      DEC-20 computers, under the TENEX or TOPS-20 operating systems.

      All versions of Hermes before 4.2.1 (released in November 1981)
      were installed by BBN personnel.  In the older versions, Hermes
      security provisions required each initialization to be performed
      in the directory where the HERMES.EXE file was to reside
      permanently.  If the HERMES.EXE file were copied or renamed into
      another directory, the initialization was voided, and the program
      no longer worked.

      Beginning with Hermes version 4.2.1, the security provisions were
      relaxed so that it is now possible to copy or rename Hermes into
      other directories on the same host computer.

      These changes make it feasible for the host computer staff to
      assume responsibility for installing new version of Hermes.  This
      manual is a guide for initializing and installing Hermes.


          CAUTION          CAUTION:  The examples in this manual show Hermes
          installed on a TOPS-20 host, but the places where
          the TOPS-20 and TENEX versions of Hermes differ are
          clearly indicated.


          In the examples:
               <cr> = carriage return
               <esc> = escape key
               Characters typed by the user are underlined.


      Please send any questions or corrections to


                   The HERMES Project
                   U.S. Mail: Bolt Beranek and Newman Inc.
                              10 Moulton Street
                              Cambridge, Massachusetts 02238
                   Telephone: 617-497-3654
                   ARPAnet:   HERMES at BBNA







                                      1   Bolt Beranek and Newman Inc.                      Report No. 4996



   1.1  The Hermes Distribution   1.1  The Hermes Distribution


   The Hermes distribution includes a program for building Hermes
   for a particular host computer.  Hermes requires a number of
   auxiliary programs and files, and has different options for modes
   of operation.  The initialization program has built-in defaults,
   but some of these usually have to be changed.


     1.  Some files are Hermes-specific, and are used by Hermes
         during initialization.  We distribute these with the
         filename "$HERMES", and the version and program
         information in the extension.

     2.  Other files are standard programs that are run from
         within Hermes as lower forks.  These are either editors
         such as EMACS or XED, or utilities such as MAILER or
         SPELL.

         In some cases, it is important to initialize Hermes to
         use versions of these programs that have been modified
         to run as lower forks under Hermes as well as stand-
         alone.

         Wherever possible, we have persuaded the people who
         maintain these programs to include the Hermes
         modifications in the standard versions distributed over
         the ARPAnet.  If you have any problems, please get in
         touch with the HERMES Project staff.

     3.  Two other files, FIX-HERMES.EXE and POINTR.EXE, are
         useful as Hermes helpers, but are used outside of the
         Hermes program.



   1.2  Initialization Limitations   1.2  Initialization Limitations


   We recommend that you NOT transfer HERMES.SAV or HERMES.EXE files
   from one host computer to another, even through the
   initialization options are the same on both hosts.  There is a
   serious known incompatibility for TENEX hosts, and you are likely
   to run into other, smaller, problems with both TENEX and TOPS-20.

   On TENEX hosts, Hermes stores an internal table of directories,
   in the form of directory numbers, at the time that Hermes is
   initialized.  Since this list is different for each host
   computer, Hermes usually gives the wrong answer whenever it has
   to check to see whether a local directory exists on the system.




                                   2      Report No. 4996                      Bolt Beranek and Newman Inc.



      In addition, on a TENEX system, Hermes must be re-initialized
      whenever a directory number on a host computer is re-assigned to
      a new username.  It is not necessary to re-initialize on TENEX
      when new directory numbers are added to the system, however, but
      only when a number is re-used.


















































                                      3   Bolt Beranek and Newman Inc.                      Report No. 4996


























































                                   4      Report No. 4996                      Bolt Beranek and Newman Inc.



      2.  INITIALIZATION OVERVIEW      2.  INITIALIZATION OVERVIEW



      2.1  Checklist of Prerequisites      2.1  Checklist of Prerequisites


      To install Hermes, you need the items on the following list:


        1.  A directory with 2000 working pages and at least 500
            permanent pages.  The directory can have any name. (The
            examples use a directory named <HERMES>.)  Of course,
            you will want to have the the primary HERMES.EXE or
            HERMES.SAV file in the <SUBSYS> directory, so that
            users can invoke Hermes without typing a directory
            name.  This file can be (a) the file produced by the
            initialization procedure, or (b) a copy of that file,
            or (c) a "pointer" file (see Chapter 8, page 35).

        2.    A set of $HERMES files for the new version of Hermes,
            provided by the Hermes Project.  Files are marked with
            the Hermes version number (shown here as "0000"):


            Default Filename   Name of Distribution File on TOPS-20            Default Filename   Name of Distribution File on TOPS-20

                HERMES.INIT    $HERMES.INIT-T20-0000
            HERMES.SYSG        $HERMES.SYSG-T20-0000
            HERMES.DESSTR      $HERMES.DESSTR-0000
            HERMES.HLPSTR      $HERMES.HLPSTR-0000
            ---                $HERMES.SETUP-MINIMAL-T20-0000


            Default Filename   Name of Distribution File on TENEX            Default Filename   Name of Distribution File on TENEX

            HERMES.INIT        $HERMES.INIT-10X-0000
            HERMES.SYSG        $HERMES.SYSG-10X-0000
            HERMES.DESSTR      $HERMES.DESSTR-0000
            HERMES.HLPSTR      $HERMES.HLPSTR-0000
            ---                $HERMES.SETUP-MINIMAL-10X-0000


        3.  A setup file tailored for your host computer.  The
            setup file allows you to use a command-file program to
            run the entire initialization and give the customizing
            commands.  We suggest that you produce a setup file by
            editing one of the minimal setup files distributed by
            BBN, or the setup file for a previous version of
            Hermes.  You can run the setup file with either the
            RUNFIL or DO programs.  On TOPS-20, a similar setup
            file can run in batch mode, using the SUBMIT command
            and the conventions for SUBMIT files.


                                      5   Bolt Beranek and Newman Inc.                      Report No. 4996



     4.    Files for the optional programs that Hermes is to
         invoke.  These need not reside in the same directory,
         as HERMES; usually they will not.  See Section 2.4,
         page 7, for a discussion of the use of TOPS-20 logical
         device names with Hermes.

         None of these files is required.  See Section 3.1, page
         9, for a description of what each of these programs
         adds to the basic Hermes capabilities.


         Default Filenames for TOPS-20      Distributed by

         PS:<SUBSYS>TECO.EXE                BBN
         PS:<SUBSYS>XED.EXE                 ISI
         PS:<SUBSYS>NETED.EXE               ???
         PS:<SUBSYS>WE.EXE                  Hermes, BBN
         PS:<SUBSYS>EMACS.EXE               MIT
         PS:<SUBSYS>TV.EXE                  BBN
         PS:<SYSTEM>EXEC.EXE                DEC
         PS:<SUBSYS>MAILER.EXE              BBN
         PS:<SUBSYS>MAILBOX.EXE             BBN
         PS:<SUBSYS>SPELL.EXE               BBN
         PS:<SUBSYS>SECURE.EXE              BBN


         If you want Hermes to use a specific program, you must
         have a file for that program on the host computer when
         Hermes is initialized.  If you do not have the actual
         program, you can create a dummy file with the correct
         name.  Hermes does not check to see that the contents
         of the file is correct.  Later, you can slip in the
         working program, or a pointer to the working program,
         as a new version of the dummy filename.

         TENEX filenames differ from TOPS-20 only in that they
         have the extension .SAV instead of .EXE, and no file
         structure element, such as PS:.  The TENEX EXEC.SAV is
         distributed by BBN.



   2.2  Summary of the Initialization Procedure   2.2  Summary of the Initialization Procedure


   You can run the setup command file, using RUNFIL, DO or SUBMIT.
   This creates and saves a new version of Hermes, using the
   filename specified as part of the GO command in the setup.

   You should make sure that all the directory and file protections
   are set appropriately.  The sample setup files include commands
   for setting the file protections.  At this time, you can move the



                                   6      Report No. 4996                      Bolt Beranek and Newman Inc.



      INIT, SYSG and SETUP files to backup storage, if necessary, to
      conserve disk space.  They are no longer needed.

      You can verify the installation by giving the command HERMES to
      start the program.  When the Hermes program appears to be running
      correctly, you should give the command VERSION LONGFORM, and then
      compose and send a test message.

      See Chapter 4, page 15, for details of this procedure.



      2.3  Other Files Used with Hermes      2.3  Other Files Used with Hermes


      The following files are not required at the time of
      initialization, but should be part of the set of Hermes files.


      FIX-HERMES.EXE
                A program for users which repairs damaged Hermes
                "parseq" (index) files.  FIX-HERMES.EXE can be stored
                either in SUBSYS, or in the HERMES directory, with a
                "pointer" file in SUBSYS.  See Chapter 9, page 37, for
                a discussion of common Hermes maintenance problems.
                (Distributed by the Hermes Project, BBN.)

      POINTR.EXE
                A program supplied by BBN for creating "pointer" files.
                Pointers are usually placed in the SUBSYS directory to
                allow users to access HERMES.EXE and FIX-HERMES.EXE
                when these programs are stored in the HERMES directory.
                They are also important for programs such as EMACS.EXE
                which are invoked in a lower fork by Hermes.

                A pointer program is a short program which, when
                executed, calls another program, the target program.
                For some target programs, the pointer program must be
                able to pass not only the filename but the contents of
                an accumulator register.  The pointer created by
                POINTR.EXE passes the contents of the first two
                accumulators.  (Distributed by the Hermes Project,
                BBN.)



      2.4  File Specification Issues on TOPS-20      2.4  File Specification Issues on TOPS-20


      In Hermes versions 4.2.2 and higher, the filename is always
      explicit, e.g., PS:<SUBSYS>TECO.EXE.  If you use a TOPS-20
      logical device name, such as SYS:TECO.EXE, Hermes will resolve



                                      7   Bolt Beranek and Newman Inc.                      Report No. 4996



   the name to the explicit filename that is defined by SYS: -- at
   the moment and in the login directory used to perform the Hermes
   action.  Thus, although you may use logical device names to
   define a file during initialization, the file stored in the
   HERMES.EXE file that is created will have the explicit value that
   it had during initialization.  You cannot change the file that an
   initialized Hermes uses for a program invoked in a lower fork
   simply by changing the system logical device definition.  You
   must either re-initialize Hermes, or place a "pointer" file at
   the location where the file used to be.  (See Chapter 8, page
   35.)

   This is generally true in Hermes versions 4.2.2 and higher.
   Logical device names "work" only for the situation in which they
   are first invoked by the user.

   For example, if you have a TOPS-20 logical device, AB:  which is
   defined to be PS:<ALPHA>BIRDWATCHERS.TXT, the command


        ___ _______        ___ _______        GET AB:<cr>       >GET AB:<cr>


   gets PS:<ALPHA>BIRDWATCHERS.TXT.  This is a command that is
   executed immediately.

   On the other hand, the command


        ___ ____         _______        ___ ____         _______        SET FDES         AB:<cr>       >SET FDESTINATION AB:<cr>


   sets the value of a Hermes object, FDESTINATION, which is part of
   your Hermes Active-Environment, and is used as the default
   destination for the FILE and MOVE commands.  When you QUIT
   Hermes, the value of the FDESTINATION, PS:<ALPHA>BIRDWATCHERS, is
   stored in your Hermes Profile (assuming that the UPDATE-PROFILE
   switch is set to its initial value of YES).

   If you later change the TOPS-20 definition of AB: to
   PS:<ALPHA>BIRDERS.TXT, any subsequent GET command will get the
   BIRDERS file but any subsequent FILE or MOVE command will use the
   BIRDWATCHERS file because the FDESTINATION remains set to the
   previous value in your Hermes Profile.











                                   8      Report No. 4996                      Bolt Beranek and Newman Inc.



      3.  INITIALIZATION OPTIONS      3.  INITIALIZATION OPTIONS



      3.1  Description of Individual Commands      3.1  Description of Individual Commands


      This section lists the commands that are available when you run
      the Hermes sysgen program.  (See Chapter 4, page 15, for examples
      of their use.)


      -----------------------------------------------------------------

      SHOW      SHOW      Shows the current state of the options available in the
                sysgen program.

      -----------------------------------------------------------------
      ?      ?         Lists the commands that are available in the sysgen
                program.

      -----------------------------------------------------------------
      NO      NO <command>
                Turns off an option.  Some options default to the NO
                form.

      -----------------------------------------------------------------
      ;      ;         Comment.  Everything on the line following the ";" is a
                comment and is ignored by the sysgen program.

      -----------------------------------------------------------------
      GO      GO        Tells the sysgen program to build a new version of
                Hermes using the options specified.

      -----------------------------------------------------------------


      Each of the remaining commands in this section is an option that
      can be set when Hermes is initialized.  Most of the options
      depend upon auxiliary files.  Hermes always searches for default
      filenames for each of these options.  If any default filename is
      missing, the option is automatically disabled.  The sysgen
      program then allows you to enable the option by specifying
      another filename.

      In the following list, the first entry in the right-hand column
      for each option is the default option, if any, including the
      default filename, as displayed in the output of the SHOW command.
      The second entry is the output when the option default is
      reversed, either because the default file is missing, or because
      the user has given a specific command.  (Also see The Hermes
      command VERSION LONGFORM, Section 4.2, page 18.)



                                      9   Bolt Beranek and Newman Inc.                      Report No. 4996



   -----------------------------------------------------------------

   Describe   Describe  . Describe file is HERMES.DESSTR
             . No describe file

             File containing text for Hermes DESCRIBE, EXAMPLE and
             DOCUMENT commands.  (Supplied by BBN for each version
             of Hermes.)

   -----------------------------------------------------------------
   Help   Help      . Help file is HERMES.HLPSTR
             . No help file

             File containing text for the Hermes herald, and for the
             HELP and NEWS commands.  (Supplied by BBN for each
             version of Hermes.)

   -----------------------------------------------------------------
   TECO   TECO      . TECO file is PS:<SUBSYS>TECO.EXE
             . No TECO file.

             BBN TECO editor to be run inside Hermes.  (Available
             from BBN.  The MIT TECO will not run under Hermes.)

   -----------------------------------------------------------------
   XED   XED       . XED file is PS:<SUBSYS>XED.EXE
             . No XED file.

             XED editor. (Standard ARPANET XED, distributed from
             ISI.)

   -----------------------------------------------------------------
   NETED   NETED     . NETED file is PS:<SUBSYS>NETED.EXE
             . No NETED editor

             NETED editor.  (Standard ARPANET NETED.)

   -----------------------------------------------------------------
   WE   WE        . WE file is PS:<SUBSYS>WE.EXE
             . No WE editor

             BBN display editor named WE.  (Available from BBN by
             special arrangement with the Hermes group.)

   -----------------------------------------------------------------










                                  10      Report No. 4996                      Bolt Beranek and Newman Inc.



      -----------------------------------------------------------------

      EMACS      EMACS     . EMACS file is PS:<SUBSYS>EMACS.EXE
                . No EMACS editor

                MIT display editor. (Requires an EMACS support library
                named HERMES.:EJ, which is available as part of the
                EMACS distribution from MIT.)

      -----------------------------------------------------------------
      TV      TV        . TV file is PS:<SUBSYS>TV.EXE
                . No TV file

                DEC screen-oriented editor.  This is a straight-forward
                screen-oriented form of DEC Teco.  (A version of TV
                modified to run under Hermes is supplied by BBN [to
                sites that already have DEC TV].)

      -----------------------------------------------------------------
      EXEC      EXEC      . EXEC file is PS:<SYSTEM>EXEC.EXE
                . No EXEC file

                This feature allows Hermes to invoke Exec as a lower
                process.

      -----------------------------------------------------------------
      Lock-Terminal      Lock-Terminal
                . Lock-Terminal file is PS:<SUBSYS>SECURE.EXE
                . No Lock-Terminal file.

                Allows the user to lock the keyboard of the terminal
                with a password.  (See page 16.)

      -----------------------------------------------------------------
      MAILER      MAILER    . MAILER file is PS:<SUBSYS>MAILER.EXE
                . No MAILER file

                This is the standard ARPANET mail transfer program for
                queued messages.  (See Section 6.4, page 26.)

      -----------------------------------------------------------------
      MFDB      MFDB      . MFDB (Mail Forwarding DataBase) finder file is
                PS:<SUBSYS>MAILBOX.EXE
                . No MFDB (Mail Forwarding DataBase) finder file

                MAILBOX.EXE is the program for checking the Mail
                Forwarding DataBase (MFDB).)  (See Section 6.3, page
                25.

      -----------------------------------------------------------------





                                     11   Bolt Beranek and Newman Inc.                      Report No. 4996



   -----------------------------------------------------------------

   Spelling-Corrector   Spelling-Corrector
             . Spelling-Corrector file is PS:<SUBSYS>SPELL.EXE
             . No Spelling-Corrector file

             The Hermes SPELL command runs SPELL from within Hermes
             to check spelling in any field in the message.  Not
             quite as many options are available when SPELL is run
             from within Hermes as when it is run stand-alone.
             (Standard ARPANET SPELL program, Version 145 or later,
             distributed from BBN.)

   -----------------------------------------------------------------
   Local-Cluster-Hosts   Local-Cluster-Hosts
             . Local-Cluster-Hosts list contains <local hostname>
             . No Local-Cluster-Hosts list

             The Hermes sysgen program inserts the local hostname as
             the default.  You can add the names of other hosts by
             giving the command LOCAL followed by the names of the
             hosts.  It is not necessary to repeat the name of the
             local host.  Separate the hostnames with spaces, commas
             or both.  Continue the list to another line by typing a
             comma at the end of the line.  (See Section 6.3, page
             25.)

   -----------------------------------------------------------------
   Warning   Warning   . Warning given for local-cluster addresses not in MFDB
             . No Warning given for local-cluster-addresses not in
             MFDB

             The Warning option is enabled only if the MFDB option
             is also enabled.  You should leave the default Warning
             enabled only if the local operations staff makes a
             serious effort to include all addresses for all local-
             cluster-hosts in the MFDB.  (See Section 6.3, page 25.)

   -----------------------------------------------------------------
   Top-Level-Only   Top-Level-Only
             . No Top-Level-Only
             . Top-Level-Only

             Causes Hermes to act like a top-level process.  Once
             you enter a Top-Level-Only Hermes, you cannot QUIT to
             the higher Exec, whether or not one exists.  You can
             only LOGOUT.  (See Section 7.3, page 31.)

   -----------------------------------------------------------------






                                  12      Report No. 4996                      Bolt Beranek and Newman Inc.



      -----------------------------------------------------------------

      Encryption      Encryption
                . No Encryption
                . Encryption

                The encryption option allows users to use the commands
                ENCRYPT and DECRYPT to perform encryption/decryption on
                the Text: field.

      -----------------------------------------------------------------
      Network (ARPANET) interface      Network (ARPANET) interface
                . Network (ARPANET) interface
                . No Network (ARPANET) interface

                Hermes prepares messages for transmission over the
                ARPANET.  (See Section 6.5, page 26.)

      -----------------------------------------------------------------
      Name      Name      . Name HERMES
                . (none)

                Any name is valid; HERMES is merely the default.  This
                option is the internal name of the program (displayed
                in the herald line), and not the file name.  The file
                name is inserted in a later step in the sysgen
                procedure.

      -----------------------------------------------------------------


























                                     13   Bolt Beranek and Newman Inc.                      Report No. 4996


























































                                  14      Report No. 4996                      Bolt Beranek and Newman Inc.



      4.  THE INITIALIZATION PROCEDURE      4.  THE INITIALIZATION PROCEDURE


      In this section, we describe the Hermes initialization process by
      examining the steps in a sample initialization, for the BBNA host
      computer, which runs the TOPS-20 operating system.

      We begin with the distribution files:


          $HERMES.SYSG-T20-0000
          $HERMES.INIT-T20-0000
          $HERMES.DESSTR-0000
          $HERMES.HLPSTR-0000


          b<CAUTION>: There is nothing special about these
          distribution names; they are merely a convention for
          matching the files to the version.  For example, the
          sysgen file for Hermes 4.2.2 is $HERMES.SYSG-T20-4202,
          and the corresponding file for Hermes 4.3.5 is
          $HERMES.SYSG-T20-4305.



      4.1  Example: Initializing Hermes on a TOPS-20 Host      4.1  Example: Initializing Hermes on a TOPS-20 Host


      We log into BBNA and CONNECT to the <HERMES> directory.  First,
      we run the "sysgen" program, $HERMES.SYSG-T20-0000.



           ___ _________________________           ___ _________________________           Run $HERMES.SYSG-T20-0000<cr>          @Run $HERMES.SYSG-T20-0000<cr>


      The sysgen program has the same prompt ">" as the Hermes program
      itself.  We respond to the first > prompt with the name of the
      "init" file, $HERMES.INIT-T20-0000.  The program prints a herald,
      then looks for a set of default filenames and reports any that
      are missing:


           _________________________           _________________________           $HERMES.INIT-T20-0000<cr>          >$HERMES.INIT-T20-0000<cr>
          HERMES 0.0.0 initialization
          Type "GO" to initialize.
           No Describe file -- Can't find HERMES.DESSTR,
           No Help file -- Can't find HERMES.HLPSTR,
           No NETED file -- Can't find PS:<SUBSYS>NETED,
           No WE file -- Can't find PS:<SUBSYS>WE,
           No Lock-Terminal file -- Can't find PS:<SUBSYS>SECURE
          >



                                     15   Bolt Beranek and Newman Inc.                      Report No. 4996



   The DESCRIBE and HELP files are listed as missing because Hermes
   looks for them using the default names (mentioned in the previous
   section) rather than the distribution names.  NETED file is
   missing because BBNA does not have a copy of that editor.  The WE
   file is missing because that editor is stored in a directory
   other than PS:<SUBSYS>.

   The "Lock-Terminal" file is a special case. This feature allows a
   Hermes user to lock the keyboard of the terminal by typing <ctrl-
   Y> followed by a password.  The keyboard immediately becomes
   unusable until someone types the password again.  This feature
   was designed for use with military security.  In non-security
   situations, it seems to have no real use, and it has proved to be
   a distinct hazard to people who are not aware that it exists.
   For this reason, the default for Lock-Terminal is set to disable
   the Lock-Terminal feature.

   We now use the SHOW command to see the current state of the
   initialization commands.


        ________        ________        show<cr>       >show<cr>
       Initialized for a TOPS-20 (Release 3 or later) site.
        No Describe file.
        No Help file.
       TECO file is PS:<SUBSYS>TECO.EXE
       XED file is PS:<SUBSYS>XED.EXE
        No NETED file.
        No WE file.
       EMACS file is PS:<SUBSYS>EMACS.EXE
       TV file is PS:<SUBSYS>TV.EXE
       EXEC file is PS:<SYSTEM>EXEC.EXE
       MAILER file is PS:<SUBSYS>MAILER.EXE
       MFDB (Mail Forwarding DataBase) finder file is:
         PS:<SUBSYS>MAILBOX.EXE
       Spelling-Corrector file is PS:<SUBSYS>SPELL.EXE
        No Lock-Terminal file.
       Network (ARPANET) interface.
        No encryption.
       Warning given for local-cluster addresses not in MFDB.
       Local-Cluster-Hosts list contains BBNA.
        No Top-Level-Only.
       Name of System is HERMES.


   We can show the commands that are available by typing "?" at the
   > prompt:








                                  16      Report No. 4996                      Bolt Beranek and Newman Inc.



           _           _           ?          >?
          Describe
          Help
          TECO
          XED
          NETED
          WE
          EMACS
          TV
          EXEC
          Lock-Terminal
          MAILER
          MFDB
          Spelling-Corrector
          Local-Cluster-Hosts
          Warning
          Top-Level-Only
          Encryption
          Network
          Name
          No
          Show
          Go
          >


      An explanation for each of these commands is given in Section
      3.1.  Here, we will simply show how to correct the filenames for
      the nonstandard files, and add the BBN Local-Cluster-Hosts, in
      addition to BBNA.


           ___      _________            ____           ___      _________            ____           DES      $HERMES.D            <cr>          >DESCRIBE $HERMES.DESCRIBE-0000<cr>
           ____ ____             ____           ____ ____             ____           HELP $HER             <cr>          >HELP $HERMES.HELP-0000<cr>
           __ __________________           __ __________________           WE <HERMES>WE.EXE<cr>          >WE <HERMES>WE.EXE<cr>
           _____ _____ ____ _____ _________           _____ _____ ____ _____ _________           LOCAL BBNA, BBNB BBNC, BBNF,<cr>          >LOCAL BBNA, BBNB BBNC, BBNF,<cr>
          _________________          _________________          BBNG,BBN-UNIX<cr>          BBNG,BBN-UNIX<cr>
           ______________           ______________           ENCRYPTION<cr>          >ENCRYPTION<cr>


      Now that all the commands are set to the desired values, we can
      complete the initialization by typing GO.  The program responds
      by prompting for the name of the file for the completed Hermes
      program.

      We then hit the <esc> key to insert the default name, which is
      HERMES.EXE in the connected directory.








                                     17   Bolt Beranek and Newman Inc.                      Report No. 4996



        ______        ______        GO<cr>       >GO<cr>
                                 _____          ____                                 _____          ____                                 <esc>          <cr>       Filename of new system is <esc>HERMES.EXE<cr>
       Program saved.
       System construction complete.
       @



   4.2  Display the State of the Initialized Hermes   4.2  Display the State of the Initialized Hermes


   After the initialization is completed, we can check the state of
   the Hermes initialization by entering Hermes and using the
   command VERSION LONGFORM.


    __________    __________    Hermes<cr>   @Hermes<cr>
    ___     _       ____    ___     _       ____    Ver     l       <cr>   >Version longform<cr>
   Friday, December 4, 1981  16:36:21
   HERMES 0.0.0
   Welcome to Hermes!
   Describe file is PS:<HERMES>$HERMES.DESSTR-0000
   Help file is PS:<HERMES>$HERMES.HLPSTR-0000
   TECO file is PS:<SUBSYS>TECO.EXE
   XED file is PS:<SUBSYS>XED.EXE
   WE file is PS:<HERMES>WE.EXE
   EMACS file is PS:<SUBSYS>EMACS.EXE
   TV file is PS:<SUBSYS>TV.EXE
   EXEC file is PS:<SYSTEM>EXEC.EXE
   MAILER file is PS:<SUBSYS>MAILER.EXE
   MFDB (Mail Forwarding DataBase) finder file is:
     PS:<SUBSYS>MAILBOX.EXE
   Spelling-Corrector file is PS:<SUBSYS>SPELL.EXE
   Network (ARPANET) interface.
   Encryption.
   Warning given for local-cluster addresses not in MFDB.
   Local-Cluster-Hosts list contains BBNA,BBNB,BBNC,BBNF,
     BBNG,BBN-UNIX


   VERSION LONGFORM omits most of the features that are not part of
   the installation, i.e., there is no line for "No NETED file."
   However, since Hermes is usually installed with a network
   interface, VERSION LONGFORM shows either "Network (ARPANET)
   Interface" and "No Network (ARPANET) Interface".










                                  18      Report No. 4996                      Bolt Beranek and Newman Inc.



      5.  CONSTRUCTING AND USING A SETUP FILE      5.  CONSTRUCTING AND USING A SETUP FILE


      Since Hermes has a large number of options, it is a good idea to
      automate the initialization process by preparing a command file
      for the RUNFIL or DO command.  This file starts the sysgen and
      gives the commands required to set up Hermes for the local host.

      BBN distributes minimal, or skeleton, command files for each
      version of Hermes or the TOPS-20 and TENEX operating systems.



      5.1  Minimum RUNFIL or DO Command File for TOPS-20      5.1  Minimum RUNFIL or DO Command File for TOPS-20


      The minimum command file for Hermes version 4.2.2 and higher for
      the TOPS-20 has the name:


          $HERMES.SETUP-MINIMAL-T20-0000


      The minimum setup file will initialize Hermes versions 4.2.2 and
      higher for the distribution filenames.  The Hermes program that
      is produced recognizes local users on a basis of directory names,
      but does not attempt to check addresses in an MFDB file.


      ;Beginning of file.  NOTE: This is a TOPS-20 comment line.
      RUN PS:<HERMES>$HERMES.SYSG-T20-0000
      PS:<HERMES>$HERMES.INIT-T20-0000
      DESCRIBE PS:<HERMES>$HERMES.DESSTR-0000
      HELP PS:<HERMES>$HERMES.HLPSTR-0000
      ENCRYPTION
      NO MFDB
      ;It is necessary to insert the NO MFDB command because
      ;the host may have a PS:<SUBSYS>MAILBOX.EXE file that
      ;contains only a subset of the usernames.
      ;NOTE: This is a Hermes sysgen program comment line.
      GO
      HERMES.EXE
      ;End of file.  NOTE: This is a TOPS-20 comment line.



      5.2  Example: RUNFIL or DO Command File for a BBN TOPS-20 Host      5.2  Example: RUNFIL or DO Command File for a BBN TOPS-20 Host


      The command file used to initialize Hermes versions 4.2.2 and
      higher on BBNA has the name:




                                     19   Bolt Beranek and Newman Inc.                      Report No. 4996



       $HERMES.SETUP-T20-BBN-0000


   Since BBNA, BBNF and BBNG -- the three BBN hosts that use the
   TOPS-20 operating system -- are configured in a uniform manner,
   this setup file can be used on all of them.


   ;Beginning of file.  NOTE: This is a TOPS-20 comment line.
   PS:<HERMES>$HERMES.SYSG-T20-0000
   PS:<HERMES>$HERMES.INIT-T20-0000
   DESCRIBE PS:<HERMES>$HERMES.DESSTR-0000
   HELP PS:<HERMES>$HERMES.HLPSTR-0000
   WE PS:<HERMES>WE.EXE
   ENCRYPTION
   ;For Local-Cluster-Hosts, separate local hostnames with
   ;spaces or commas.  Continue with comma at end of line.
   ;NOTE: This is a Hermes sysgen comment line.
   LOCAL-CLUSTER-HOSTS BBNA, BBNB,BBNC BBNF,
   BBNG BBN-UNIX
   ;It is not necessary to insert the MFDB command because
   ;the default filename, PS:MAILBOX.EXE, exists.
   GO
   HERMES.EXE
   ;End of file.  NOTE: This is a TOPS-20 comment line.



   5.3  Minimal SUBMIT Command File for TOPS-20   5.3  Minimal SUBMIT Command File for TOPS-20


   The SUBMIT program for running batch jobs on the TOPS-20 requires
   special characters at the beginning of each line:


   !Beginning of file.  NOTE: This is a SUBMIT comment line.
   @PS:<HERMES>$HERMES.SYSG-T20-0000
   *PS:<HERMES>$HERMES.INIT-T20-0000
   *DESCRIBE PS:<HERMES>$HERMES.DESSTR-0000
   *HELP PS:<HERMES>$HERMES.HLPSTR-0000
   *ENCRYPTION
   *NO MFDB
   *;It is necessary to insert the NO MFDB command because
   *;the host may have a PS:<SUBSYS>MAILBOX.EXE file that
   ;contains only a subset of the usernames.
   *;NOTE: This is a Hermes sysgen comment line.
   *GO
   *HERMES.EXE
   *
   ::END
   !End of file.  NOTE: This is a SUBMIT comment line.




                                  20      Report No. 4996                      Bolt Beranek and Newman Inc.



      5.4  Minimum RUNFIL or DO Command File for TENEX      5.4  Minimum RUNFIL or DO Command File for TENEX


      The minimum command file for Hermes versions 4.2.2 and higher for
      TENEX has the name:


          $HERMES.SETUP-MINIMAL-10X-0000


      The minimum setup file initializes a Hermes versions 4.2.2 and
      higher for the distribution filenames.  The Hermes program that
      is produced recognizes local users on a basis of directory names,
      but does not attempt to check addresses in an MFDB file.

      Note that the TENEX file requires a blank line after each file
      name, including the name HERMES.SAV at the end of the file.


      ;Beginning of file.  NOTE: This is a TENEX comment line.
      RUN <HERMES>$HERMES.SYSG-10X-0000

      <HERMES>$HERMES.INIT-10X-0000

      DESCRIBE <HERMES>$HERMES.DESSTR-0000

      HELP <HERMES>$HERMES.HLPSTR-0000

      ENCRYPTION
      NO MFDB
      ;It is necessary to insert the NO MFDB command because
      ;the host may have a <SUBSYS>MAILBOX.SAV file that
      ;contains only a subset of the usernames.
      ;NOTE: This is a Hermes sysgen program comment line.
      GO
      HERMES.SAV

      ;End of file.  Leave a blank line after the filename.
      ;NOTE: This is a TENEX comment line.



      5.5  Example: RUNFIL Command File for TENEX      5.5  Example: RUNFIL Command File for TENEX


      The command file used to initialize Hermes versions 4.2.2 and
      higher on BBNB and other BBN TENEX hosts is:

      $HERMES.SETUP-10X-BBN-0000

      Note that the TENEX file requires a blank line after each file
      name, including the name HERMES.SAV at the end of the file.



                                     21   Bolt Beranek and Newman Inc.                      Report No. 4996



   ;Beginning of file.  NOTE: This is a TENEX comment line.
   <HERMES>$HERMES.SYSG-10X-0000

   <HERMES>$HERMES.INIT-10X-0000

   DESCRIBE <HERMES>$HERMES.DESSTR-0000

   HELP <HERMES>$HERMES.HLPSTR-0000

   WE <HERMES>WE.SAV

   ENCRYPTION
   ;For Local-Cluster-Hosts, separate local hostnames with
   ;spaces or commas.  Continue with comma at end of line.
   ;NOTE: This is a Hermes sysgen program comment line.
   LOCAL-CLUSTER-HOSTS BBNA, BBNB,BBNC BBNF,
   BBNG BBN-UNIX
   :It is not necessary to insert the MFDB command because
   ;the default filename, PS:MAILBOX.SAV, exists.
   GO
   HERMES.SAV

   ;End of file.  Leave a blank line after the filename.
   ;NOTE: This is a TENEX comment line.































                                  22      Report No. 4996                      Bolt Beranek and Newman Inc.



      6.  OPTIONS FOR MAIL ADDRESSING AND DELIVERY      6.  OPTIONS FOR MAIL ADDRESSING AND DELIVERY


      Hermes, like other message systems on the ARPANET, has been
      designed to co-operate with a set of network-wide addressing
      conventions and mail protocols.

      Hermes version 4.3.4 and lower versions make use of the address
      conventions of RFC 733 [1], the MAILBOX program [2] and the
      MAILER program [3].  These operate under the Network Protocol,
      NCP.

      When the new TCP protocol [4] becomes the ARPANET standard,
      Hermes will be modified to work with the new addressing
      conventions, address-checking programs and mail delivery
      programs.

      At present, Hermes can be used with the XMAILER [5] program, if
      XMAILER is installed to recognise the queued mail files that
      Hermes produces.  Hermes can also be used with XMAILBOX [6], with
      certain limitations.

      Hermes is not able to take advantage of the mailing-list feature
      of XMAILBOX, but substantially the same feature will be included
      in the new TCP address-checking program.  It has not yet been
      decided whether other features of XMAILBOX, especially the use of
      nicknames for user identities, will be carried over into the new
      TCP programs.



      6.1  Addressee Fields      6.1  Addressee Fields


      The addressee-fields (To:, Cc: and Bcc:) contain the names of
      mailboxes to which messages are to be delivered.  All addressees
      have the form "NAME@HOST" or "NAME at HOST".  If the hostname is
      defaulted, Hermes supplies the local hostname as a default, and
      then checks it against the MFDB (if one is used) and the names of
      local directories (if the MFDB is not used, or if the MFDB does
      not contain the name of the mailbox).

            _______              ____________            _______              ____________            to<esc>              Bobolink<cr>          >>to<esc> (Addressees) Bobolink<cr>
            ________            ________            show<cr>          >>show<cr>
          To: Bobolink at BBNG
            _________                        __        ____            _________                        __        ____            show<esc>                        ty        <cr>          >>show<esc> (line number or field) typed-form<cr>
          To: Bobolink

      When the message is actually sent, Hermes fills in the addressee
      field with the explicit hostname:





                                     23   Bolt Beranek and Newman Inc.                      Report No. 4996



         __ _________         __ _________         cc Robin<cr>       >>cc Robin<cr>
         _______ ________         _______ ________         subject test<cr>       >>subject test<cr>
         ________         ________         send<cr>       >>send<cr>
       Message <[BBNA]18-Jul-82 11:40:25.ROBIN>:
       Bobolink delivered.
       Robin delivered.
       1 new message has just arrived
       -+  45   231  18 Jul 82 To: Bobolink at BBNA test
       CMESSAGE(=.) = 44



   6.2  The Local-Cluster-Hosts Option   6.2  The Local-Cluster-Hosts Option


   During initialization, the Local-Cluster-Hosts option defaults to
   the local host.  If you wish to add additional host names to the
   Local-Cluster-Hosts list, you can give the command

        _____ _______________________ ________________        _____ _______________________ ________________        LOCAL <hostname1>,<hostname2> <hostname3>,<cr>       >LOCAL <hostname1>,<hostname2> <hostname3>,<cr>
       ____________ _______________       ____________ _______________       <hostname4>, <hostname5><cr>       <hostname4>, <hostname5><cr>


       b<CAUTION>: Separate the <hostname> entries with spaces
       and/or commas.  Continue the list to a new line by typing
       ",<cr>" at the end of the current line.


   After a Hermes program has been initialized, the Local-Cluster-
   Hosts list controls some, but not all, of the actions performed
   by Hermes when a user types a name into an addressee field.


     1.  If the hostname is on the Local-Cluster-Hosts list, and
         if the MFDB option is NOT enabled, Hermes checks the
         local directories on the host computer to see whether
         there is a directory with the name of addressee, and,
         if so, whether the directory has a "mailbox", i.e., a
         MAIL.TXT.1 or MESSAGE.TXT;1 file.  (See Section 6.3.)

     2.  If the name of the local host computer is NOT in the
         Local-Cluster-Hosts list, Hermes does not check to see
         whether a local directory and mailbox exists.


   There are two reasons why the local host computer might not be in
   the Local-Cluster-Hosts list.


     1.  Hermes was initialized with the option NO LOCAL-
         CLUSTER-HOSTS.




                                  24      Report No. 4996                      Bolt Beranek and Newman Inc.



        2.  Hermes was initialized on one host computer, with one
            Local-Cluster-Hosts list, and then transferred to
            another host computer.


                CAUTION                CAUTION: NEVER TRANSFER HERMES.SAV OR
                HERMES.EXE FILES FROM ONE COMPUTER TO ANOTHER.


            This is especially dangerous on TENEX systems because
            Hermes builds an internal table of directory names when
            the HERMES.SAV file is initialized.  If the HERMES.SAV
            file is transferred to another host, Hermes cannot
            check local directory names against its internal table,
            and the CONNECT command in Hermes does not work.



      6.3  The Mail Forwarding DataBase (MFDB) Program      6.3  The Mail Forwarding DataBase (MFDB) Program


      The MFDB option enables Hermes to check certain addresses with
      the standard ARPANET MFDB program, MAILBOX.EXE.  An alternative
      program, XMAILBOX.EXE may also be used with Hermes to check
      individual addresses only, but not to send messages to
      centralized mailing lists.


      6.3.1  Local-Cluster-Hosts      6.3.1  Local-Cluster-Hosts


      If the MFDB is enabled, and if the host is on the list of Local-
      Cluster-Hosts, HERMES checks the MFDB:


        1.  If the username is local but is not in the MFDB, Hermes
            checks to see whether there is a local directory of
            that name.

              __ _______              __ _______              to System,            >>to System,
            System recognized as a local directory, but
             not found in the mailbox database.
            Type <control-W> to erase this name, otherwise continue input.
            To: System,

        2.  Hermes will not accept a local name that is not in the
            MFDB and does not exist as a local directory:

              __ ______              __ ______              to Nobody            >>to Nobody
            Name as typed not recognized as a local user: Nobody
            To:




                                     25   Bolt Beranek and Newman Inc.                      Report No. 4996



     3.  If the WARNING option is enabled, Hermes warns about
         names in the Local-Cluster that are not in the MFDB:

           __ ______ __ _____           __ ______ __ _____           to Nobody at bbng,         >>to Nobody at bbng,
         Nobody@BBNG not found in the mailbox database.
         Type <control-W> to erase this name, otherwise continue input.
         To: Nobody@BBNG,


   6.3.2  Hosts Not in the Local Cluster   6.3.2  Hosts Not in the Local Cluster


   Hermes will accept any name at a host that is not a Local-Cluster
   host.

         __ ______ __ ________         __ ______ __ ________         to Nobody at isia<cr>       >>to Nobody at isia<cr>
         ____ ______         ____ ______         show to<cr>       >>show to<cr>
       To: Nobody at ISIA


   6.3.3  Unknown Hosts   6.3.3  Unknown Hosts


   In Hermes 4.2.2, the system will not accept a host that is not in
   the table of hosts on the local host computer:

         __ ______ __ ___________         __ ______ __ ___________         to Nobody at nowhere<cr>       >>to Nobody at nowhere<cr>
       Not a host: nowhere
       To:

   If there is an MFDB but it is used only for mail forwarding for a
   small group of users, you may want to experiment with enabling
   the MFDB and the Local-Cluster-Hosts, but disabling the Warning.



   6.4  The MAILER Program   6.4  The MAILER Program


   Hermes creates one file for each queued addressee for each
   message, with a filename such as [--UNSENT-MAIL--].BOBOLINK@BBNG.
   MAILER programs that accept these files are MAILER.EXE,
   NMAILR.EXE and, with suitable initialization, XMAILER.EXE.



   6.5  The Network Option   6.5  The Network Option


   Hermes defaults to the Network Option. If the Network option is
   disabled, the resulting Hermes program will append the local
   hostname to each addressee, but will not allow any other
   hostnames.


                                  26      Report No. 4996                      Bolt Beranek and Newman Inc.



      We can disable the network option by giving the command NO
      NETWORK during sysgen.  After we type GO, the sysgen process
      prompts for the name of the host computer.  Sysgen does not not
      allow us either to omit or to default this local host name:

          .
          .
           __ ___________           __ ___________           NO NETWORK<cr>          >NO NETWORK<cr>
          .
          .
           ______           ______           GO<cr>          >GO<cr>
                          ____                          ____                          <cr>          Local host name <cr>
           ?
                          _____                          _____                          <esc>          Local host name <esc>
                          ________                          ________                          BBNA<cr>          Local host name BBNA<cr>
                   ____                   ____                   <cr>          [Confirm]<cr>
                                    _____ ______________                                    _____ ______________                                    <esc> HERMES.EXE<cr>          Filename of new system is <esc> HERMES.EXE<cr>
          Program saved.
          System construction complete.
          @

      Since Hermes requires confirmation (with <cr>) of the local host
      name, the RUNFIL used to create a NO NETWORK Hermes must contain
      an extra blank line:

          .
          .
          NO NETWORK
          .
          .
          GO
          ;Hermes will prompt for the local host name.
          ;This is a Hermes comment line.
          BBNA

          ;Leave a blank line after the local host name.
          ;This is a Hermes comment line.
          HERMES.EXE

          ;End of file.  Leave a blank line after the filename.
          ;This is a TOPS-20 comment line.














                                     27   Bolt Beranek and Newman Inc.                      Report No. 4996


























































                                  28      Report No. 4996                      Bolt Beranek and Newman Inc.



      7.  METHODS FOR ALLOWING USERS TO ENTER HERMES AT LOGIN      7.  METHODS FOR ALLOWING USERS TO ENTER HERMES AT LOGIN


      There are two methods that users or systems managers can use to
      make arrangements so that a user enters an existing Hermes
      program as soon as he or she logs in.


            LOGIN.CMD        1.  LOGIN.CMD.  The user uses the host computer primarily
            for running Hermes and usually does not want to be
            bothered with interacting with the Exec.  Probably the
            best method is to put the HERMES command as the last
            command in the LOGIN.CMD file.

            LOGIN.EXE        2.  LOGIN.EXE.  THe system manager wishes to control the
            user's access the to Exec. The user cannot QUIT to a
            higher EXEC because Hermes, and not the Exec program,
            runs as the top-level process in the user's job.  This
            is achieved by placing a pointer to a HERMES.EXE file
            in a file named LOGIN.EXE in the user's login
            directory.



      7.1  The LOGIN.CMD Method      7.1  The LOGIN.CMD Method


      We place the command HERMES as the last line in the LOGIN.CMD
      file.  All the other commands in the LOGIN.CMD file should be
      commands that execute completely, such as, for example, TERMINAL
      VT100.  The Exec executes the LOGIN.CMD file as soon as we log
      in.  We enter Hermes AFTER the system notices and the other
      commands in the LOGIN.CMD file have been executed but BEFORE the
      end of the LOGIN.CMD file.


           BBN-SYSTEM-A, TOPS-20 Monitor 4M(3247)
           ___ _____ ______________           ___ _____ ______________           LOG ROBIN <password><cr>          @LOG ROBIN <password><cr>
          Job 32 on TTY440 28-Dec-81 09:13:48
           System down Tue 29-DEc-81 04:00 to Tue 29-Dec-81 07:38
           You have new mail
          HERMES 0.0.0  21-Dec-81
          Getting <ROBIN>MAIL

          -+  37  720 24 Dec 81 OPERATOR Archived files

          >


      At any time, we can type one of the commands for leaving Hermes
      -- QUIT, EXIT (synonym of QUIT) or SUSPEND, or the interrupt
      character <ctrl-C> -- and be returned to the top-level Exec.



                                     29   Bolt Beranek and Newman Inc.                      Report No. 4996



        ________        ________        QUIT<cr>       >QUIT<cr>
       Stopping HERMES
        End of LOGIN.CMD.16
       @

       or

        ________        ________        <ctrl-C>       ><ctrl-C> ^C while reading LOGIN.CMD.16, file aborted.
       ^C
       @


   We can continue with the CONTINUE command.

   This is the simplest method.  It has the advantage that we see
   the same system notices and use the same LOGIN.CMD file as other
   Hermes users.  At any time, we can quit Hermes and continue to
   use the top-level Exec.

   The LOGIN.CMD file is used to give system commands that set the
   terminal type for session on the host computer on both TENEX and
   TOPS-20.  Some people also use the LOGIN.CMD file to execute a
   wide variety of short programs for their information or
   amusement.  In addition, on TOPS-20 only, the LOGIN.CMD file may
   be used to define individual "logical devices"; these are
   symbols, such as AB:, which stand for for disk structures,
   directories or files.



   7.2  The LOGIN.EXE method   7.2  The LOGIN.EXE method


   This method by-passes the top-level Exec entirely, and forces
   Hermes to act as the top-level process.  To do this, we must
   place a file named LOGIN.EXE on TOPS-20 (or LOGIN.SAV on TENEX)
   in the login directory.  This file must contain either a pointer
   to Hermes (see Chapter 8, page 35) or a copy of the Hermes
   program itself.  A pointer created by the program POINTR.EXE has
   the advantage that it executes the LOGIN.CMD file (if any) before
   calling the Hermes program.

   When we log on the host computer, the LOGIN.EXE file is
   automatically executed, and the program called by that file
   becomes the top-level process.  Any executable program can be
   placed in a LOGIN.EXE file; however, Hermes is probably the only
   program, aside from experimental Execs such as MFEXEC, that is
   prepared to act as a top-level process.







                                  30      Report No. 4996                      Bolt Beranek and Newman Inc.



      7.3  Hermes as a Top-Level Process      7.3  Hermes as a Top-Level Process


      We can force an ordinary Hermes program to act as a top-level
      process by using the LOGIN.EXE method.  A HERMES.EXE program,
      initialized with the NO TOP-LEVEL-ONLY option, will as act as
      either a top-level process or a lower-level process, under an
      Exec, depending upon how it is entered.  As a top-level process,
      Hermes will perform a number of important functions that are
      usually handled by the top-level Exec.  These include checking
      for new mail and system messages, and handling errors from Hermes
      and lower processes.


          BBN-SYSTEM-A, TOPS-20 Monitor 4M(3247)
           ___ _____ ______________           ___ _____ ______________           LOG ROBIN <password><cr>          @LOG ROBIN <password><cr>
          HERMES 0.0.0  21-Dec-81
          Type NEWS<cr>

          Previous login: 28-Dec-81 09:13:48
          System scheduled down Tue 29-Dec-81 0400 to 0730
          [You have new mail]
          [There are new system messages in <SYSTEM>MAIL.TXT]

          Getting <ROBIN>MAIL

          -+  37   720 24 Dec 81 OPERATOR Archived files
          >


      Once we are in a Hermes that acts as a top-level process, we
      cannot leave except by logging out of the system.
      If we type <ctrl-C>, Hermes does nothing:


           ________           ________           <ctrl-C>          ><ctrl-C>
          >


      The Suspend command is like <ctrl-C> at a > prompt, but the
      response from Hermes is a bit more formal.


           ___________           ___________           SUSPEND<cr>          >SUSPEND<cr>
           ? No higher fork to suspend to.


      If we type QUIT or EXIT, Hermes asks whether we wish to logout.







                                     31   Bolt Beranek and Newman Inc.                      Report No. 4996



       _________       _________       >QUIT<cr>       >QUIT<cr>
                _______                _______                YES<cr>        Logout?:YES<cr>
       Stopping HERMES

       Killed Job 25, User ROBIN ...



   7.4  Top-Level-Only Hermes   7.4  Top-Level-Only Hermes


   In this section, we describe a Hermes that always acts like a
   top-level process no matter how it is entered.  This is a Hermes
   that is initialized with the Top-Level-Only option enabled.  A
   Top-Level-Only Hermes, like an ordinary Hermes, may be entered in
   one of three ways:


     1.  We can log in to the directory in the usual way, and
         then give the command to start up the top-level Hermes.

     2.  We can place a command to enter Top-Level-Only Hermes
         in your LOGIN.CMD file.

     3.  We can place the Top-Level-Only Hermes itself, or a
         pointer to it, in the LOGIN.EXE file.


   Regardless of how we enter Hermes, we will not thereafter be able
   to QUIT to the higher Exec, even if one exists.

   The only difference in the user interface, is the response if we
   type QUIT or EXIT.  Top-Level-Only Hermes tells us to use the
   LOGOUT command instead.


        ________        ________        QUIT<cr>       >QUIT<cr>
       ? Not possible; use Logout
        __________        __________        LOGOUT<cr>       >LOGOUT<cr>
       Stopping HERMES

       Killed Job 11, User ROBIN ...



   7.5  Top-Level-Only Hermes with Restricted Access to the Host   7.5  Top-Level-Only Hermes with Restricted Access to the Host


   For some applications, the system manager may desire to give
   users access only to Hermes, and may not want to allow normal
   access to the Exec.




                                  32      Report No. 4996                      Bolt Beranek and Newman Inc.



            AN INFORMATION DATABASE.        1.  AN INFORMATION DATABASE.

            The information is stored in messages, and users access
            the information with the SURVEY, PRINT and LIST
            commands.  Users are able to COMPOSE and SEND messages,
            and to FORWARD or REDISTRIBUTE messages to other users,
            but the system manager may discourage them from doing
            so.

            CONTROLLED ACCESS TO ANOTHER PROGRAM.        2.  CONTROLLED ACCESS TO ANOTHER PROGRAM.

            The controlled program, or a pointer to the program, is
            stored in the login directory.  Users access the
            program by using the Hermes RUN command.


      The sysgen options that may be used in restricted versions of
      Hermes are:


        o        o  TOP-LEVEL-ONLY, which prevents users from using the QUIT
           or EXIT commands to go to a higher Exec.

        o        o  NO EXEC, which prevents users from using the PUSH or
           EXEC commands to go to a lower Exec.

        o        o  NO NETWORK, which prevents users from addressing
           messages to users on other hosts.


      7.5.1  The Use of Hermes Filenames in Restricted-Access      7.5.1  The Use of Hermes Filenames in Restricted-Access
             Installations             Installations


      For applications with restricted access, the FILENAME-INPUT
      switch should be set to HERMES in the user's profile.

      The user is able to see files (in the connected directory only)
      by using the Hermes commands SHOW MESSAGE-FILES and SHOW DRAFT-
      FILES.  Filenames of the form NAME.TXT are recognized as message-
      files, and appear as NAME (without the .TXT extension).
      Filenames of the form NAME.HRM are recognized as draft-files, and
      also are shown as single-word names (without the extension .HRM).
      This switch setting Hermes avoids the confusion of TOPS-20 or
      TENEX style filenames.  It is particularly appropriate when
      Hermes is used in a restricted application, such as an
      information database, and the users are not familiar with the
      Exec commands and filenames.







                                     33   Bolt Beranek and Newman Inc.                      Report No. 4996



   7.5.2  Hermes Filenames vs. TENEX/TOPS-20 Filenames   7.5.2  Hermes Filenames vs. TENEX/TOPS-20 Filenames


   If your FILENAME-INPUT switch is set to HERMES, the Hermes
   program takes over the management of the files that you use,
   instead of simply passing through the filenames from the TENEX or
   TOPS-20 operating system.  Hermes recognizes three types of
          message-files  draft-files     profile-files   files: message-files, draft-files and profile-files.

   You can escape from Hermes filenames by typing "!" before you
   type in a filename.

   There are two major advantages of Hermes filenames:


      1.  Hermes recognizes filenames in the same way that it
          recognizes the names of Hermes objects.  It extends them
          and spelling-corrects them.

      2.  You can type "?" at any point, even within a filename,
          e.g., ">GET ?" or ">FILE 10:25 SAV?".  Hermes responds
          with all appropriate files in your connected directory.


   Message-files   Message-files created in Hermes are given the extension .TXT,
   e.g., BIRDERS.TXT.1.  Hermes recognizes only .TXT files as
   message-files, but displays them as single-word names, e.g.,
   BIRDERS.  You can SHOW MESSAGE-FILES.

   There is a MESSAGE-FILES editor.  To enter, type EDIT MESSAGE-
   FILES.  The prompt is m->, and the significant commands are
   DELETE and UNDELETE.  The DELETE command marks a message-file for
   deletion.  When you leave the editor with DONE, Hermes deletes
   both the message-file and its corresponding parseq file, e.g.,
   ^BIRDERS.TXT^.1, at the same time.

   Draft-files   Draft-files are given the extension .HRM, i.e., CORMORANTS.HRM.1.
   Hermes recognizes only .HRM files as draft-files, but displays
   them as single-word names, e.g., CORMORANTS.  You can SHOW DRAFT-
   FILES, and there is DRAFT-FILES editor, similar to the MESSAGE-
   FILES editor.

   Profile-files   Profile-files created by EXPORT ACTIVE-ENVIRONMENT <file> are
   given the extension .PRFL, e.g., ORNITHOLOGY-BIBLIO.PRFL.1.
   Hermes recognizes .PRFL files as profile-files, and displays them
   as single-word names, e.g., ORNITHOLOGY-BIBLIO.  The default
   Hermes profile file, ^-HERMES'-^.PROFILE, is displayed as ^-
   HERMES'-^.  There is no profile-files editor.  To see the display
   of profile-files, type


        ___ ___                _        ___ ___                _        SET ACT                ?       >SET ACTIVE-ENVIRONMENT ?



                                  34      Report No. 4996                      Bolt Beranek and Newman Inc.



      8.  POINTERS FOR PROGRAMS INVOKED BY HERMES      8.  POINTERS FOR PROGRAMS INVOKED BY HERMES


      The program POINTR.EXE is distributed with Hermes to help the
      system operating staff construct "pointer" files that work with
      the Hermes system and its auxiliary files.

      We can construct a pointer file named PS:<SUBSYS>HERMES.EXE which
      points to PS:<HERMES>HERMES.EXE, by giving the command


       ___ ______________       ___ ______________       RUN POINTR.EXE<cr>      @RUN POINTR.EXE<cr>
                                        _________________________                                        _________________________                                        PS:<SUBSYS>HERMES.EXE<cr>      Program to be started by pointer: PS:<SUBSYS>HERMES.EXE<cr>
                                               _________________________                                               _________________________                                               PS:<HERMES>HERMES.EXE<cr>      File in which to write finished pointer: PS:<HERMES>HERMES.EXE<cr>


      The program that is created has two uses:


        1.  As a pointer permanently installed in <SUBSYS> to some
            frequently changing subsystem such as HERMES -- if the
            latest version of the subsystem is kept in a directory
            belonging to the maintainers, then installation of each
            new version does not require intervention by computer
            center personnel.

        2.  As a very small program for the LOGIN.EXE file of a
            user who wants a large subsystem, such as HERMES, in
            his or her LOGIN.EXE file, but clearly should not store
            an entire Hermes program in his or her own login
            directory.


      When used as the top process in the job (in the LOGIN.EXE
      method), this program causes execution of the login directory's
      LOGIN.CMD file (if any) as an EXEC would, before loading and
      starting the target program, which becomes the top process in the
      job.

      POINTR can also be used to start programs for most lower-process
      uses and other special purposes because it preserves and passes
      on to the target program:


        o        o  The location within the entry vector at which is was
           started (0-9),

        o        o  The contents of ACs 0 through 5.


      The fully commented source code for this program is available
      from the Hermes Project at BBN, upon request.



                                     35   Bolt Beranek and Newman Inc.                      Report No. 4996


























































                                  36      Report No. 4996                      Bolt Beranek and Newman Inc.



      9.  HERMES TROUBLESHOOTING AND MAINTENANCE      9.  HERMES TROUBLESHOOTING AND MAINTENANCE



      9.1  Troubleshooting Routine      9.1  Troubleshooting Routine



        1.  Hermes fails for one user only.

              a.  Run Hermes without a message-file, using the
                  commands that override the input of the Inbox
                  file.

                       ___________ ____                       ___________ ____                       Hermes<esc> <cr>                      @Hermes<esc> <cr>          (TENEX)

                       ___________                       ___________                       Hermes,<cr>                      @Hermes,<cr>               (TOPS-20)
                      ____                      ____                      <cr>                      <cr>

                  If  Hermes runs correctly without a message-file,
                  the problem is probably a serious defect  in  the

                  Inbox file, MESSAGE.TXT;1 on TENEX and MAIL.TXT.1
                  on TOPS-20, or its companion parseq file,
                  ^MESSAGE.TXT^;1 or ^MAIL.TXT^.1.

              b.  If Hermes does not run correctly without a
                  message-file, the problem is probably in the file
                  {-MAILSYSTEMS'-}.PROFILE.1.

        2.  Hermes fails for all users.
            Check the protection of all files and directories
            associated with Hermes, including any pointer files.
            If these are correct, try re-initializing Hermes.

      Refer to the following sections for more information about fixing
      these problems.



      9.2  Problems with Files in Users' Directories      9.2  Problems with Files in Users' Directories


      9.2.1  Archived Files      9.2.1  Archived Files


      Hermes does not work correctly on TOPS-20 if either of the
      following files has been "archived" or "migrated" and has left
      behind a filename with zero contents.






                                     37   Bolt Beranek and Newman Inc.                      Report No. 4996



       MAIL.TXT.1;OFFLINE
       {-MAILSYSTEMS'-}.PROFILE.1;OFFLINE


   Since each of these files must always have a version number of
   "1", Hermes cannot construct new versions to replace the files
   that are offline.  You must use the TOPS-20 command RETRIEVE to
   return the file to the disk and then discard the tape information
   with the command


       ____       ____       DISC       DISCCARD (tape information for files)
       ______________       ______________       MAIL.TXT.1<cr>       MAIL.TXT.1<cr>


   Alternatively, you can delete the archived file completely:
        ___            _______________________________        ___            _______________________________        DEL            {-MAILSYSTEMS'-}.PROFILE.1,<cr>       @DELETE (FILES) {-MAILSYSTEMS'-}.PROFILE.1,<cr>
         ____                    ____         ____                    ____         ARCH                    <cr>       @@ARCHIVE (FILES INCLUDED)<cr>
         ____         ____         <cr>       @@<cr>


   9.2.2  The Hermes Profile   9.2.2  The Hermes Profile


   The Hermes profile file is ^-HERMES'-^.PROFILE.  If Hermes has
   trouble accessing this file, for any reason, Hermes simply
   constructs a new profile with a new version number.  This is
   significant for the system maintainer.  If a user complains that
   his or her individual switch settings and user-created templates
   have suddenly disappeared, you should check the directory to see
   whether there is a new version of the Hermes profile file.  The
   old one may be intact, or it may have been archived or injured in
                                                   THE HERMES GUIDE   a system crash.  (See Section 11.2 in Part A of THE HERMES GUIDE
   [7] for instructions on creating backups for Hermes profiles.)


   9.2.3  How to Use the FIX-HERMES Program   9.2.3  How to Use the FIX-HERMES Program


   When Hermes encounters a fatal error, the error message printed
   on the user's terminal usually includes instructions for running
   the program FIX-HERMES (formerly called KILLPARSE).


   Technical error message:   Technical error message:
    <This varies according to the type of error.>    <This varies according to the type of error.>

   HERMES cannot continue.   HERMES cannot continue.
   ... But first-aid is available!  Run the program FIX-HERMES:   ... But first-aid is available!  Run the program FIX-HERMES:
           FIX-HERMES<cr>           FIX-HERMES<cr>
   The program will print:   The program will print:
           Hermes parseq file eraser, version 2.           Hermes parseq file eraser, version 2.



                                  38      Report No. 4996                      Bolt Beranek and Newman Inc.



              Message file name:              Message file name:
      Fill in the message file name, in the form NAME.TXT<cr>.      Fill in the message file name, in the form NAME.TXT<cr>.
      The program should reply: "Done.  Be sure to check sequences."      The program should reply: "Done.  Be sure to check sequences."
      Enter HERMES, and GET the message file.  Hermes will pause to      Enter HERMES, and GET the message file.  Hermes will pause to
      "reparse" the file.  (Type DESCRIBE FIX-HERMES for more info.)      "reparse" the file.  (Type DESCRIBE FIX-HERMES for more info.)

      FIX-HERMES fixes most crashes; however, if it doesn't work...      FIX-HERMES fixes most crashes; however, if it doesn't work...
      ... Report to the HERMES staff,  Bolt Beranek and Newman, Inc.      ... Report to the HERMES staff,  Bolt Beranek and Newman, Inc.
              Netaddress: HERMES at BBNA    Telephone: (617)497-3654              Netaddress: HERMES at BBNA    Telephone: (617)497-3654
              U.S. Mail: 10 Moulton St., Cambridge, Mass.  02238              U.S. Mail: 10 Moulton St., Cambridge, Mass.  02238


      FIX-HERMES removes the "parse" portion of the "parseq" file,
      which is a "companion file" for your message-file.  The "parse"
      contains information about the location of the messages and their
      individual fields.  This information is constantly updated by
      Hermes, and may become deranged if the parseq file is open when
      the host computer crashes or a Hermes session ends with <ctrl-C>.

      After you run FIX-HERMES, and then enter Hermes again, the parse
      must be reconstructed.  The parse information is kept in a
      separate file to protect the messages in the message-file.
      Hermes automatically constructs a parseq file for each message-
      file, and names it to correspond to the message-file.  For
      example, the message-file named MAIL.TXT.1 has a parseq file
      named ^MAIL.TXT^.1.  FIX-HERMES requires you to type ONLY the
      message-file name, i.e., MAIL.TXT.


          b<CAUTION>: The FIX-HERMES instructions do not appear if
          there is no current message-file (CMESSAGE-FILE).  The
          fact that the FIX-HERMES instructions do appear does NOT
          mean that the error is actually in the "parse" portion of
          the parseq file, or even in the parse file at all.

          Nevertheless, FIX-HERMES has proved to fix a large
          majority of errors currently reported by Hermes users.


      9.2.4  How Hermes Corrects Character Counts in Messages      9.2.4  How Hermes Corrects Character Counts in Messages


      Hermes includes a "fixer" that can repair most "broken" message-
      files.  Message-files are "broken" when the character-counts of
      one or more messages do not match the actual length of the
      message.

      The "fixer" is controlled by a Hermes switch:


        FIX-BROKEN-FILE   [X]Ask          Yes          No




                                     39   Bolt Beranek and Newman Inc.                      Report No. 4996



   The character-count is stored in the machine-readable header that
   (a) precedes every message in a message-file, and  (b)  is  never
   printed  by  Hermes,  although  you  can  see  it  if you place a
   message-file in an ordinary text editor.

   Example:   Example:

   11-Jul-1982 12:43:28,863;000000000001
   Mail-from: BBN ...


   In this machine-readable header, the character-count is 863,
   which means that the number of characters between the beginning
               _____   of the line after the machine-readable header and the end of the
   message is 863.

   The most frequent cause of an unexpected broken message is a
   network or system crash or similar disaster.  Such crashes may
   insert a block of ASCII nulls in the message-file, usually one or
   more computer "pages" in length.  Message-files may also be
   broken because someone has edited the file with a text editor,
   and changed the length of a message.

   Be sure to check the message that was reported not to "parse".
   There may be some text missing, or two messages may be combined.


   9.2.5  How to Recover from Disk Errors   9.2.5  How to Recover from Disk Errors


   If you get an error that indicates the message-file on the disk
   is damaged, the best thing to do is to try to copy the file,
   using one or another of the commands or programs available on the
   system.


     o     o  The COPY command on TENEX or TOPS-20.

     o     o  The TECO editor.

        BBN Teco has a "switch" that lets it accept "binary"
        files, i.e., files containing 36-bit "computer words"
        with bit 35 set to 1.  Normal ASCII files do not contain
        such computer words, but damaged files may contain
        "garbage" that includes some computer words with bit 35
        set.

        Before you input the file, give the command

         ____         ____         ^B1$        *^B1$

        where "^" is the ASCII character "^", named "caret" or
        "uparrow".


                                  40      Report No. 4996                      Bolt Beranek and Newman Inc.



           Test to see that the switch is set with

            ____            ____            ^B=$           *^B=$

           Teco returns -1 if the switch is set or 0 if it is not.

        o        o  The BEDIT editor.

           BEDIT is a binary editor, intended for editing program
           files rather than text.  It has one important virtue:
           Unlike most editors, BEDIT does NOT copy the file into a
           buffer before it lets you begin to edit.  Instead, BEDIT
           places pointers to positions in the file, and does not
           actually copy any portion of the file until you give it
           a command.  Thus, if a portion of the file cannot be
           copied, you can still use BEDIT to copy the rest of the
           file, before and after the bad portion.  If you cannot
           pass the entire file through BEDIT, you can still use
           BEDIT to carve the file into sections and rescue the
           sections that are still good.

           BEDIT is a simple program, with adequate documentation
           if you type ? to the > prompt.  Note that the byte size
           is 7 for message-files (ASCII text).

            _________            _________            BEDIT<cr>           @BEDIT<cr> Binary File Editor 11/13/78

           Use ^E (instead of rubout) to return to command level.
           New H(exadecimal) mode in T(ype), L(ist), E(nter), and
           P(Overlay).

            _            _            ?           >? I: Input file name O: Output file name S: Set byte
           size or pointer C: Copy from input file to output T:
           Type bytes from input file L: List bytes from input file
           onto a file E: Enter bytes from TTY into output file P:
           Overlay bytes from TTY into output file.  NEW!  X:
           Search for byte sequence.  NEW!  K: Klose output file F:
           File status V: Verbose typeouts N: Nonverbose Q: Quit,
           closing files


      Passing the file through COPY, or into and out of one of the
      editors usually puts the file into a state where Hermes will
      accept it as input.  You may find that the message contains a
      section of ASCII nulls, which show up as "@"s in BEDIT or in Teco
      with the ^B switch set.  These are thrown away when the file is
      output from Teco.








                                     41   Bolt Beranek and Newman Inc.                      Report No. 4996



   9.2.6  Archived PARSEQ files   9.2.6  Archived PARSEQ files


   The "parseq" files, such as ^MAIL.TXT^.1, must each have the same
   version number as the corresponding message-file.  On TOPS-20, if
   a parseq file has been "archived" or "migrated", Hermes renames
   the parseq file to another distinctive name tied to the name and
   version number of the message-file.

   For example, suppose that the message-file BIRDERS.TXT.3 exists
   on disk, but the corresponding parseq file is archived:


        ___ ____       ____        ___ ____       ____        GET BIRD       <cr>       >GET BIRDERS.TXT<cr>
       The file <ROBIN>^BIRDERS.TXT^.3, the
        companion or "parseq" file for the desired messge-file,
        has been archived.
       It has been renamed <ROBIN>BIRDERS.ARCHIVED-PARSEQ,
        and a new parseq file will be created.  For information
       about deleting the archived file or retrieving and
       restoring it, give the command
          >DESCRIBE ARCHIVED-PARSEQ-FILES.


   Hermes then constructs a new parseq file, with the name
   ^BIRDERS.TXT^.3.  The renamed archived file is BIRDERS.ARCHIVED-
   PARSEQ.1;OFFLINE.  You can delete it if you wish (see Section
   9.2.1.)



   9.3  Problems with Files in the HERMES Directory   9.3  Problems with Files in the HERMES Directory


   If the file, <SUBSYS>HERMES.EXE is a small "pointer" file that
   transfers control to the actual file, such as <HERMES>HERMES.EXE,
   you must make sure that the file protection of the files in the
   <HERMES> directory is set correctly.  The following files should
   have their protection set to 775252 or 777752:


       HERMES.EXE
       $HERMES.HLPSTR-0000
       $HERMES.DESSTR-0000
       FIX-HERMES.EXE


   If your host computer is a TOPS-20 with an automatic "archive" or
   "migration" feature that leaves ";OFFLINE" filenames with 0
   contents in the directory, you must also protect these files
   against being automatically "archived" or "migrated".  This is
   especially true of the FIX-HERMES.EXE file, which may be used
   very infrequently.


                                  42      Report No. 4996                      Bolt Beranek and Newman Inc.



      9.4  When Hermes Must be Re-Initialized      9.4  When Hermes Must be Re-Initialized


      Hermes must be re-initialized under the following conditions:

        1.  Hermes is to be installed on a new host computer.

        2.  The HERMES.EXE file has been injured in a system
            crash, so that it no longer runs, and you have no
            backup copy of Hermes that was initialized on the
            same host.

        3.  On TENEX hosts, some directory numbers have been
            assigned to new usernames.

        4.  On TENEX hosts, a new table of host numbers has
            been installed on the host computer.






































                                     43   Bolt Beranek and Newman Inc.                      Report No. 4996


























































                                  44      Report No. 4996                      Bolt Beranek and Newman Inc.



                                BIBLIOGRAPHY                                BIBLIOGRAPHY




        1.  RFC 733.

                       _____ ______ _____        2.  "MAILBOX", TENEX USERS' GUIDE, Bolt Beranek and Newman
            Inc., Cambridge, Mass. 1971,1977.

                      _____ ______ ______ ___ ____        3.  "MAILER", TENEX USERS' GUIDE, op. cit.

        4.  Ref to TCP.

        5.  Ref to XMAILR.

        6.  Ref to XMAILBX.

            ___ ______ _____        7.  THE HERMES GUIDE, by Charlotte D. Mooers, BBN Report
            No. 4995, Project Hermes, Bolt Beranek and Newman Inc.,
            10 Moulton St., Cambridge, Mass. 02238, August 1982.

            _____ ______ ___ ______ _____        8.  EMACS MANUAL FOR TWENEX USERS, by Richard M. Stallman,
            AI Memo 555, Massachusetts Institute of Technology,
            Artificial Intelligence Laboratory, 7 October 1981.

            _____ _____ ____ ______ ___ _________ ______        9.  TENEX TECO: TEXT EDITOR AND CORRECTOR MANUAL, Bolt
            Beranek and Newman Inc., October 1973.

            _______ __ ______ ______       10.  TOPS-20 TV EDITOR MANUAL, AA-H181A-TM, Digital
            Equipment Corporation, Marlboro, Massachusetts, January
            1980.  (Order from nearest DEC Technical Documentation
            Center.)

            ______ _____ __ ___ __ ______ ___ ___ ___________ ___       11.  USER'S GUIDE TO THE WE EDITOR FOR THE CONCEPT-100 AND
            _____ _________            OTHER TERMINALS, by Charlotte D. Mooers, BBN Report No.
            4365, Bolt Beranek and Newman Inc. unpublished: draft
            copy April 1980.

            ___ ______ _______ _________ ___________       12.  XED USER'S MANUAL: BEGINNING INSTRUCTION, Report TM-76-
            3, University of Southern California, Information
            Sciences Institute, Marina del Rey, California, May
            1976.

                     _____ ______ ______ ___ ____       13.  "SPELL", TENEX USERS' GUIDE, op. cit.

                     _____ ______ ______ ___ ____       14.  "BEDIT", TENEX USERS' GUIDE, op. cit.

       15.  Commented source code for POINTR is available from the
            Hermes Project, Bolt Beranek and Newman.





                                     45   Bolt Beranek and Newman Inc.                      Report No. 4996


























































                                  46      Report No. 4996                      Bolt Beranek and Newman Inc.



                                    INDEX                                    INDEX





                $HERMES   15

                $HERMES files   2, 5

                Archived files   42

                BEDIT editor   41
                Binary files   41
                Broken files   39

                Character count   39
                COPY command, TENEX/TOPS-20   40

                DESCRIBE function   5, 15
                DESSTR files   5
                Directory numbers on TENEX   2
                Disk errors   40
                DO program   5, 6

                EMACS editor   6
                Exec program   6

                Files in the HERMES directory   42
                Files, broken   39
                FIX-BROKEN-FILE switch   39
                FIX-HERMES program   2

                Header, machine-readable   40
                HELP function   5, 15
                Hermes distribution   2
                Hermes, differences between versions of   1
                HLPSTR files   5

                Init files   5, 6, 15
                Initialization   2, 5

                Local-Cluster Hosts   26
                Local-Cluster-Hosts   12
                Lock-terminal feature   11, 16
                Logical devices, TOPS-20   6
                Lower-fork programs   2, 6

                Machine-readable header   40
                MAILBOX program   6
                MAILER program   6
                Migrated files   42



                                     47   Bolt Beranek and Newman Inc.                      Report No. 4996




             NETED editor   6

             Optional programs   6

             Parseq files   42
             Parsing messages   40
             Pointer files   2, 42
             POINTR program   2

             Re-initialization of Hermes   2
             Re-initializing Hermes   43
             RUNFIL program   5, 6

             SECURE program   6
             Setup files   5, 6
             SPELL program   6
             SUBMIT program, TOPS-20   5, 6
             Sysgen files   5, 6, 15

             TECO editor   6, 40
             TENEX directory numbers   2
             TENEX hosts   43
             TENEX/TOPS-20 differences   1
             TV editor   6

             VERSION LONGFORM   7

             WE editor   6

             XED editor   6
























                                  48      Report No. 4996                      Bolt Beranek and Newman Inc.



                              TABLE OF CONTENTS                              TABLE OF CONTENTS




                                                                   Page



      1.  INTRODUCTION      1.  INTRODUCTION                                                1


          1.1  The Hermes Distribution                                2
          1.2  Initialization Limitations                             2



      2.  INITIALIZATION OVERVIEW      2.  INITIALIZATION OVERVIEW                                     5


          2.1  Checklist of Prerequisites                             5
          2.2  Summary of the Initialization Procedure                6
          2.3  Other Files Used with Hermes                           7
          2.4  File Specification Issues on TOPS-20                   7



      3.  INITIALIZATION OPTIONS      3.  INITIALIZATION OPTIONS                                      9


          3.1  Description of Individual Commands                     9



      4.  THE INITIALIZATION PROCEDURE      4.  THE INITIALIZATION PROCEDURE                               15


          4.1  Example: Initializing Hermes on a TOPS-20 Host        15
          4.2  Display the State of the Initialized Hermes           18



      5.  CONSTRUCTING AND USING A SETUP FILE      5.  CONSTRUCTING AND USING A SETUP FILE                        19


          5.1  Minimum RUNFIL or DO Command File for TOPS-20         19
          5.2  Example: RUNFIL or DO Command File for a BBN TOPS-    19
               20 Host
          5.3  Minimal SUBMIT Command File for TOPS-20               20
          5.4  Minimum RUNFIL or DO Command File for TENEX           21





                                      i   Bolt Beranek and Newman Inc.                      Report No. 4996



       5.5  Example: RUNFIL Command File for TENEX                21



   6.  OPTIONS FOR MAIL ADDRESSING AND DELIVERY   6.  OPTIONS FOR MAIL ADDRESSING AND DELIVERY                   23


       6.1  Addressee Fields                                      23
       6.2  The Local-Cluster-Hosts Option                        24
       6.3  The Mail Forwarding DataBase (MFDB) Program           25
            6.3.1  Local-Cluster-Hosts                            25
            6.3.2  Hosts Not in the Local Cluster                 26
            6.3.3  Unknown Hosts                                  26
       6.4  The MAILER Program                                    26
       6.5  The Network Option                                    26



   7.  METHODS FOR ALLOWING USERS TO ENTER HERMES AT LOGIN   7.  METHODS FOR ALLOWING USERS TO ENTER HERMES AT LOGIN        29


       7.1  The LOGIN.CMD Method                                  29
       7.2  The LOGIN.EXE method                                  30
       7.3  Hermes as a Top-Level Process                         31
       7.4  Top-Level-Only Hermes                                 32
       7.5  Top-Level-Only Hermes with Restricted Access to the   32
            Host
            7.5.1  The Use of Hermes Filenames in Restricted-     33
                   Access Installations
            7.5.2  Hermes Filenames vs. TENEX/TOPS-20 Filenames   34



   8.  POINTERS FOR PROGRAMS INVOKED BY HERMES   8.  POINTERS FOR PROGRAMS INVOKED BY HERMES                    35



   9.  HERMES TROUBLESHOOTING AND MAINTENANCE   9.  HERMES TROUBLESHOOTING AND MAINTENANCE                     37


       9.1  Troubleshooting Routine                               37
       9.2  Problems with Files in Users' Directories             37
            9.2.1  Archived Files                                 37
            9.2.2  The Hermes Profile                             38
            9.2.3  How to Use the FIX-HERMES Program              38
            9.2.4  How Hermes Corrects Character Counts in        39
                   Messages
            9.2.5  How to Recover from Disk Errors                40
            9.2.6  Archived PARSEQ files                          42
       9.3  Problems with Files in the HERMES Directory           42





                                  ii      Report No. 4996                      Bolt Beranek and Newman Inc.



          9.4  When Hermes Must be Re-Initialized                    43



      BIBLIOGRAPHY      BIBLIOGRAPHY                                                   45



      INDEX      INDEX                                                          47














































                                     iii