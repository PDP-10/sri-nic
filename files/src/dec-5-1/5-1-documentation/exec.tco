
TOPS20 Change Order Number 4.1.1001

Written by: OSMAN		31-Oct-79 09:04:18

Edit checked: NO			   Document: NO
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	execmt

Related TCO's:
Related SPR's: 


Problem: DISMOUNT TAPE followed by "?" says you can type "TAPE" again!

	Also, DISMOUNT TTY: causes internal trap.

Diagnosis: Exec is messed up by me when I removed CCHKPT

Solution: Call GETKEY before dispatching, and if device isn't tape or disk,
	give error message.

[End of TCO 4.1.1001]


TOPS20 Change Order Number 4.1.1002

Written by: OSMAN		31-Oct-79 10:08:18

Edit checked: NO			   Document: NO
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXECED

Related TCO's:
Related SPR's: 


Problem: EDIT /ISAVE:5 FOO.BAR works fine, but EDIT with no args gets error
	after that.

Diagnosis: Exec doesn't put in a space between switches and filespec.
This probably broke recently when some of the EDIT stuff was redone.

Solution: Put space in after switch list.

[End of TCO 4.1.1002]


TOPS20 Change Order Number 4.1.1005

Written by: OSMAN		 1-Nov-79 13:38:36

Edit checked: NO			   Document: NO
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXECSU

Related TCO's:
Related SPR's: 


Problem: I MEM falls over if restricted jfn's have been mapped into core

Diagnosis: COJFN gets clobbered after JFNS in %S

Solution: Don't try to update COJFN if the JFNS fails

[End of TCO 4.1.1005]


TOPS20 Change Order Number 4.1.1006

Written by: OSMAN		 2-Nov-79 15:31:49

Edit checked: NO			   Document: YES
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	execin

Related TCO's:
Related SPR's: 


Problem: HELP command says "INVALID" merely because item is not found

Diagnosis: yes

Solution: Use CMERRX instead of ERROR so user gets reason when he types
"HELP FOO" instead of just "?Invalid help request"

[End of TCO 4.1.1006]


TOPS20 Change Order Number 4.1.1007

Written by: OSMAN		 5-Nov-79 09:40:55

Edit checked: NO			   Document: NO
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXEC3

Related TCO's:
Related SPR's: 


Problem: If XTND is turned on, then DIRECTORY with EVERYTHING and OUTPUT FOO.BAR
gets illegal instruction trap in %M.

Diagnosis: This only happens with XTND turned on due to DFDAEX calling DFNA1
which expects good data for %M.

Solution: Change JRST DFNA1 at DFDAEX to RET.

[End of TCO 4.1.1007]


TOPS20 Change Order Number 4.1.1011

Written by: OSMAN		 9-Nov-79 09:21:37

Edit checked: NO			   Document: NO
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXEC1

Related TCO's:
Related SPR's: 


Problem: ^C out of LOGIN command can leave you in a state where every
command says

	?Login please

except LOGIN, which says

	?You are already logged in

Diagnosis: If ^C after LOGIN jsys logs the job in but before the exec sets
CUSRNO to the user number, exec thinks the job isn't logged in.

Solution: Disallow ^C during LOGIN jsys and setting up CUSRNO.

[End of TCO 4.1.1011]


TOPS20 Change Order Number 4.1.1023

Written by: OSMAN		20-Nov-79 09:32:21

Edit checked: NO			   Document: YES
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXEC1	EXECPR	EXECSU	EXECGL

Related TCO's:
Related SPR's: 


Problem: The SET DEFAULT TAKE stuff is very confusing.

Diagnosis: It wasn't thought out very well

Solution: 
1)	Add SET DEFAULT TAKE ALLOW/DISALLOW (errors during TAKE file)
	INFO DEFAULT TAKE will display this setting.

2)	The settings for a specific TAKE command will affect that TAKE command
	only.  Other TAKES, including nested ones, will use the default settings
	or specific subcommands.

[End of TCO 4.1.1023]


TOPS20 Change Order Number 4.1.1045

Written by: OSMAN		 5-Dec-79 10:43:29

Edit checked: NO			   Document: YES
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	execqu

Related TCO's:
Related SPR's: 


Problem: If you PRINT file FOO$.BAR (for instance) and you try to cancel
	it by saying

	CANCEL PRINT  FOO$

	you lose.

Diagnosis: The break set for reading the job name on CANCEL (and friends)
	was set wrong.

Solution: Use FILBx. breakset instead of FLDBx. break set.

[End of TCO 4.1.1045]


TOPS20 Change Order Number 4.1.1055

Written by: OSMAN		19-Dec-79 16:48:45

Edit checked: NO			   Document: YES
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	execin

Related TCO's:
Related SPR's: 


Problem: QAR number 20-01030 from customer REDC user Paetzold wants
INFO SYSTEM to tell about workspace preloading.

Diagnosis: It's easy to do and useful to somebody so why not.

Solution: Yes.

[End of TCO 4.1.1055]


TOPS20 Change Order Number 4.1.1060

Written by: OSMAN		 8-Jan-80 14:05:49

Edit checked: NO			   Document: YES
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXEC4

Related TCO's:
Related SPR's: 


Problem: INFO DIR silently returns if given directory name is one to
which you don't have access.

Diagnosis: Exec tries to ignore such directories for case of wildcarded
directories.

Solution: Print warning about directories that GTDIR fails for.

[End of TCO 4.1.1060]


TOPS20 Change Order Number 4.1.1061

Written by: OSMAN		 8-Jan-80 14:22:53

Edit checked: NO			   Document: YES
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXEC0	rdmail

Related TCO's:
Related SPR's: 


Problem: If there's a SYSTEM:MAIL.TXT.n where n is not 1, the system gets
confused.

Diagnosis: Some components always look for generation number 1 but others
don't.

Solution: Make exec and RDMAIL always look for generation 1.

[End of TCO 4.1.1061]


TOPS20 Change Order Number 4.1.1063

Written by: OSMAN		10-Jan-80 11:17:08

Edit checked: NO			   Document: YES
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXECED

Related TCO's:
Related SPR's: 


Problem: If user says

	@EDIT FOO.BAR$<cr>

which of course echoes as

	@EDIT FOO.BAR.n (OUTPUT AS) <cr>

and his editor is TV, and user later says

	@EDIT<cr>

TV doesn't ask for an output filespec on ;X which it would have id user had
originally said

	@EDIT FOO.BAR<cr>

Diagnosis: The $ is causing the line to be

	@EDIT FOO.BAR (OUTPUT AS)

so the subsequent <cr> defaults the output spec as though the user had typed

	@EDIT FOO.BAR (OUTPUT AS) FOO.BAR

so TV assumes the user typed an output spec!

Solution: Make the exec check for .CMCFM (confirmation) in lieu of an output
spec.  That way,

	@EDIT FOO.BAR (OUTPUT AS)<cr>

will be equivalent to

	@EDIT FOO.BAR<cr>

and TV will know that the output spec should be prompted for on ;X.

[End of TCO 4.1.1063]


TOPS20 Change Order Number 4.1.1064

Written by: OSMAN		10-Jan-80 14:40:59

Edit checked: NO			   Document: YES
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXEC4

Related TCO's:
Related SPR's: 


Problem: If BUILD command is used and CRDIR requires a password, the exec
tells user to "fix incorrect subcommands", but there's no incorrect
subcommand!

Diagnosis: exec is dumb

Solution: Teach exec to input a password if password is missing or wrong.

[End of TCO 4.1.1064]


TOPS20 Change Order Number 4.1.1075

Written by: OSMAN		28-Jan-80 10:38:30

Edit checked: NO			   Document: NO
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXECSU

Related TCO's:
Related SPR's: 


Problem: IPCIDX seems to be 20, but fortunately exec runs anyway.

Diagnosis: I found this by inspection.  We're just lucky that noone else
uses 20!

Solution: Put IPCIDX in STKVAR list of IPCFND routine in EXECSU.

[End of TCO 4.1.1075]


TOPS20 Change Order Number 4.1.1076

Written by: OSMAN		 1-Feb-80 08:50:21

Edit checked: NO			   Document: YES
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXEC0

Related TCO's:
Related SPR's: 


Problem: 
The FOREIGN-HOST subcommand of SYSTAT doesn't wait for confirmation.

Diagnosis: It's missing a call to CONFIRM, most likely since FOREIGN-HOST
can be a SYSTAT keyword too, and the keyword flavor doesn't want to do
CONFIRM.

Solution: Do CONFIRM for the subcommand case.

[End of TCO 4.1.1076]


TOPS20 Change Order Number 4.1.1078

Written by: OSMAN		 4-Feb-80 11:07:10

Edit checked: NO			   Document: NO
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXECSU

Related TCO's:
Related SPR's: 


Problem: An error in a TAKE file doesn't necessarily cause the erroneous
command to be echoed.

Diagnosis: The ECHCMD routine is being called only for errors detected
by the exec.  Ones detected by the system (like file not found) sometimes
don't take the same path.

Solution: Call ECHCMD in ERFRS1 instead of CMERR$ so that echoing happens
all the time if requested.

[End of TCO 4.1.1078]


TOPS20 Change Order Number 4.1.1079

Written by: OSMAN		14-Feb-80 08:46:35

Edit checked: NO			   Document: YES
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXEC0	execmt	EXECGL

Related TCO's:
Related SPR's: 


Problem: SMOUNT, TMOUNT, and SDISMOUNT still exist.

Diagnosis: We superseded them with MOUNT STR, MOUNT TAPE, and DISMOUNT but
left SMOUNT-class commands in for users to get used to the new commands.
For this new release, we should get rid of the SMOUNT-class commands.

Solution: Get rid.

[End of TCO 4.1.1079]


TOPS20 Change Order Number 4.1.1080

Written by: OSMAN		14-Feb-80 09:35:47

Edit checked: NO			   Document: NO
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	execqu

Related TCO's:
Related SPR's: 


Problem: 

	@MOD PR CMD/NOHEADER

cause pushdown overflow.

Diagnosis: The dispatch table neglected to dispatch MOD /NOHEADER to the
correct place.  Since the wrong place was an existent tag for something
else, it was a classical case of "no errors detected" by MACRO!

Solution: Dispatch to .MNOHE which already existed but was never correctly
referenced.

[End of TCO 4.1.1080]


TOPS20 Change Order Number 4.1.1090

Written by: OSMAN		27-Feb-80 08:34:24

Edit checked: NO			   Document: YES
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXECED

Related TCO's:
Related SPR's: 


Problem: On EDIT command, the error saying

	?Input filespec expected

and other errors like this are too abridged.

Diagnosis: They ought to tell what the problem was.

Solution: Augment them with the monitor's description of why the filespec
or switch was no good.

[End of TCO 4.1.1090]


TOPS20 Change Order Number 4.1.1095

Written by: OSMAN		29-Feb-80 09:31:09

Edit checked: NO			   Document: YES
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXEC0

Related TCO's:
Related SPR's: 


Problem: It would be nice to be able to say

	SYS FOO NO .

to quickly see if other jobs are logged in as me if I am FOO.

Diagnosis: We already allow "." and "NO other-things" so "NO ." is a consistent
extentsion.  Helliwell requested it too.

Solution: Do it!

[End of TCO 4.1.1095]


TOPS20 Change Order Number 4.1.1097

Written by: OSMAN		29-Feb-80 13:42:44

Edit checked: NO			   Document: NO
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXECSU

Related TCO's:
Related SPR's: 


Problem: If you do many many DELETE commands for nonexistent files, you
eventually get

	?Exec string space exhausted

Diagnosis: Exec buffers the strings and a buffer and forgets to release them

Solution: release the storage in RLJFNS routine.

[End of TCO 4.1.1097]


TOPS20 Change Order Number 4.1.1099

Written by: OSMAN		 5-Mar-80 11:23:33

Edit checked: NO			   Document: NO
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXEC2

Related TCO's:
Related SPR's: 


Problem: If you try to copy a disk file to disk and the file is exactly one
section long, the COPY command copies forever until the disk or directory
fills up!

Diagnosis: PMAP that fails in middle due to crossing section boundary
leaves old stuff mapped in buffer.  Hence subsequent BLT doesn't fail which
is what exec depends on.

Solution: When nonexistent section is encountered, set up for smaller BLT,
and then if smaller BLT was done, do what would have been done if large BLT
had failed.

[End of TCO 4.1.1099]


TOPS20 Change Order Number 4.1.1101

Written by: OSMAN		 7-Mar-80 17:00:15

Edit checked: NO			   Document: YES
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXEC0

Related TCO's:
Related SPR's: 


Problem: SYSTAT FOOBAZAAR
says

	?ILLEGAL CHARACTER IN PROGRAM NAME, OR NAME TOO LONG

Diagnosis: All caps

Solution: Make error message small case with only first character capitalized
[End of TCO 4.1.1101]


TOPS20 Change Order Number 4.1.1103

Written by: OSMAN		10-Mar-80 13:34:44

Edit checked: NO			   Document: YES
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXECSU

Related TCO's:
Related SPR's: 


Problem: "I think this should be a CAML instead.  MM updates the read date
to be "now", which very often coincides with the last write, causing EXEC
to spuriously claim that there is new mail.

MS kludges around this by doing a GTAD, then doing anothher GTAD and
repeatedly looping back until it has changed.  I think this is horrible!"

Diagnosis: Mark Crispin at SU-SCORE gave this.

Solution: Change it to CAML.

[End of TCO 4.1.1103]


TOPS20 Change Order Number 4.1.1108

Written by: OSMAN		13-Mar-80 10:49:52

Edit checked: NO			   Document: YES
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXEC0

Related TCO's:
Related SPR's: 


Problem: Exec prints program and its own versions as 4A etc.

Diagnosis: Corporate standard demands 4.1 etc.

Solution: Change exec.

[End of TCO 4.1.1108]


TOPS20 Change Order Number 4.1.1111

Written by: OSMAN		14-Mar-80 11:42:40

Edit checked: NO			   Document: NO
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	execin

Related TCO's:
Related SPR's: 


Problem: On system 1031, the INFO AVAIL DEV command doesn't correctly list
the plotters.

Diagnosis: The device loop looks at first character of sixbit name to see
if devices are the same type.  (It can't use DVCHR device type because spooled
and nonspooled devices have identical types).  This algorithm worked fine to
discern between PLPT and LPT but loses for PLT and PPLT.

Solution: Shoot the programmer.  Also, compare entire sixbit name with unit
blotted out instead of just first letter.

[End of TCO 4.1.1111]


TOPS20 Change Order Number 4.1.1117

Written by: TOMCZAK		19-Mar-80 15:08:14

Edit checked: NO			   Document: NO
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXEC1

Related TCO's:
Related SPR's: 	 13716


Problem: 1) SET DIRECTORY PASSWORD <directory>
Will accept any kind of garbage for passwords.

2) LOG$ name$ <CR> doe no CRLF but types noise for next field

Diagnosis: 1) Since this SET command is not using the normal prompt
"Password: ", a separate routine PASSX was being called that handled
things a little differently from PASLIN, the standard routine for this
kind of password entry

2) LOGIN calls the common code PASWD that does all of its full/half duplex
checking to determine how to handle the confirmation whether one is desired
or not.


Solution: 1) clean up the code at PASLIN and PASSX to be more alike

2) Add a new routine PASFLD and use AC C as a flag for the desirability
of a CRLF after the password.


[End of TCO 4.1.1117]


TOPS20 Change Order Number 4.1.1133

Written by: TOMCZAK		 1-Apr-80 16:34:57

Edit checked: NO			   Document: NO
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXECCS

Related TCO's:
Related SPR's: 


Problem: Using a virgin system (built from the installation/distribution
tapes), any LOAD-class command that tries to invoke the COBOL-74 compiler
gives the error "?Cannot find process"

Diagnosis: The COBOL developers distribute COBOL-74 on the file CBL74.EXE
because they are limited to 5 character file names on TOPS-10. The EXEC
looks for the COBOL-74 compiler on the file 74-COBOL.EXE

Solution: Have EXEC look for the file CBL74.EXE

[End of TCO 4.1.1133]


TOPS20 Change Order Number 4.1.1139

Written by: OSMAN		 8-Apr-80 13:43:03

Edit checked: NO			   Document: YES
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXECCS

Related TCO's:
Related SPR's: 


Problem: When a COMPIL-class command fails to find LINK or the compiler,
or CREF fails to find the CREF program, the unclear error

	?Can't find process

results.

Diagnosis: yes

Solution: Make the message say

	?Can't find <file> - reason

[End of TCO 4.1.1139]


TOPS20 Change Order Number 4.1.1140

Written by: OSMAN		 8-Apr-80 14:17:56

Edit checked: NO			   Document: YES
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXEC1

Related TCO's:
Related SPR's: 


Problem: The following command causes "?Invalid guide words":

	$^ESEND 34 (this is a parenthesized message)

Diagnosis: The open parenthesis causes the text to be interpreted as wrong
guide words.

Solution: One solution would be to ignore failure return from the guideword
parse.  However, this would mean that the loser that is trying to enter the
guidewords and misspells them will cause them to unintentionally be sent as
part of the message.

The solution to be used is to remove the guideword parse completely!  Note that
the dumby will still get the guide words prompting for the terminal number, and
"?" will still work at the beginning of the text field.

[End of TCO 4.1.1140]


TOPS20 Change Order Number 4.1.1141

Written by: OSMAN		 9-Apr-80 13:46:25

Edit checked: NO			   Document: NO
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXEC4	EXECSU

Related TCO's:
Related SPR's: 


Problem: Exec BUILD command can screw up when the ACCOUNT subcommand is used.

Diagnosis: The new account is written over the old string without regard to
possible lengthening!

Solution: Do it right.

[End of TCO 4.1.1141]


TOPS20 Change Order Number 4.1.1145

Written by: OSMAN		22-Apr-80 10:24:20

Edit checked: NO			   Document: YES
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXEC1

Related TCO's:
Related SPR's: 


Problem: ADVISE command gets weird errors, particularly if terminal is not
active.

Diagnosis: When Judy Hall put in dynamic terminal allocation, certain jsyes,
like TLINK and STI started working differently.

Solution: Make exec check for TTYX01 and attempt to do the right thing.

[End of TCO 4.1.1145]


TOPS20 Change Order Number 4.1.1146

Written by: OSMAN		22-Apr-80 13:30:07

Edit checked: NO			   Document: YES
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXEC0	EXECGL	EXEC1

Related TCO's:
Related SPR's: 


Problem: When advising another terminal that's in page mode, if its
output stops, the advisor can't get things going again with CTRL/Q.

Diagnosis: The advisor's terminal is sucking up the CTRL/Q.

Solution: Make CTRL/Q and CTRL/S be passed to advisee's terminal.

[End of TCO 4.1.1146]


TOPS20 Change Order Number 4.1.1147

Written by: TOMCZAK		24-Apr-80 15:32:06

Edit checked: NO			   Document: NO
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXECSU

Related TCO's:
Related SPR's: 	 14211


Problem: I STR MTA0: looses the error message and causes an illegal
instruction trap due to lost device designator.

Diagnosis: EXECIN confuses T1 from the GALAXY modules with T1 as EXEC thinks
it should be (GALAXY defines T1 as AC3 not AC1)

Solution: Replace all references in EXECIN  to T1 with A, the GALAXY version
of AC1.

[End of TCO 4.1.1147]


TOPS20 Change Order Number 4.1.1148

Written by: OSMAN		24-Apr-80 15:37:52

Edit checked: NO			   Document: YES
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	execin

Related TCO's:
Related SPR's: 


Problem: When class scheduling enabled BY POLICY PROGRAM, then INFO SYSTEM
doesn't say so

Diagnosis: yes

Solution: Change exec to either say BY ACCOUNTS or BY POLICY PROGRAM

[End of TCO 4.1.1148]


TOPS20 Change Order Number 4.1.1151

Written by: TOMCZAK		28-Apr-80 15:42:07

Edit checked: NO			   Document: NO
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXEC3

Related TCO's:
Related SPR's: 	 14208


Problem: CRAM subcommand to DIRECTORY commands doesn't parse CRLFs.

Diagnosis: Someone forgot to put it in or someone accidentally took it out.

Solution: Put in a CONFIRM at .CRAM.

[End of TCO 4.1.1151]


TOPS20 Change Order Number 4.1.1152

Written by: TOMCZAK		29-Apr-80 16:09:03

Edit checked: NO			   Document: NO
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXEC2

Related TCO's:
Related SPR's: 	 14210


Problem: COPY TTY: PTY61: can cause an illegal instruction interrupt
when the PTY is unassigned.

Diagnosis: No ERJMP after the SOUT% or SOUTR% being used for this flavor of
COPY.

Solution: Add the ERJMP!

[End of TCO 4.1.1152]


TOPS20 Change Order Number 4.1.1163

Written by: KROSENBLUH		18-Nov-81 09:53:24

Edit checked: NO			   Document: NO
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	execqu

Related TCO's:
Related SPR's: 


Problem: SUBMIT FOO /ASSISTANCE:BAR works, although the only choices for
/ASSISTANCE: should be YES, NO or null.

Diagnosis: A check should be performed to make sure the /assistance switch
is what it should be. (Null defaults to YES, but other things should not
default to YES.)

Solution: Execute a CMERRX after finding out that the switch entered by
user is other than YES or NO.  (In module EXECQU.)

[End of TCO 4.1.1163]


TOPS20 Change Order Number 5.1021

Written by: LYONS		 9-Apr-80 16:52:04

Edit checked: NO			   Document: YES
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXEC4

Related TCO's:
Related SPR's: 


Problem: BUILD does not allow the setting of priv bits SC%ANA and SC%DNA.

Diagnosis: These are new priv bits, and there is no code.

Solution: Add code for BUILD and DIR PRINT routines to understand this
feature.

[End of TCO 5.1021]


TOPS20 Change Order Number 5.1028

Written by: OSMAN		30-Apr-80 13:41:46

Edit checked: NO			   Document: YES
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXECSU

Related TCO's:
Related SPR's: 


Problem: If you get an error in a TAKE file, you don't know what command caused
it.

Diagnosis: Input isn't from terminal, so you don't see the command.

Solution: Make exec always echo erroneous commands issued from a nonterminal (a
	take file).

[End of TCO 5.1028]


TOPS20 Change Order Number 5.1029

Written by: OSMAN		30-Apr-80 14:54:29

Edit checked: NO			   Document: NO
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	execin

Related TCO's:
Related SPR's: 


Problem: If terminal width is 10, INFO DECNET does weird things, like putting
"Accessible DECNET nodes are:" in front of every entry, and saying
"%No DECNET nodes accessible" after the list.

Diagnosis: Exec was trying to multiplex F1 for "none printed on this line
yet" and "none printed yet".

Solution: Use new TRVAR variable for the latter.

[End of TCO 5.1029]


TOPS20 Change Order Number 5.1034

Written by: OSMAN		 8-May-80 14:07:51

Edit checked: NO			   Document: YES
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	lots

Related TCO's:
Related SPR's: 


Problem: There are alot of archiving features, like SET FILE RESIST
and TAPE RECYCLE period that weren't on for release 4.

Diagnosis: Someone thought we shouldn't give the customer so much at once.

Solution: Turn them on

[End of TCO 5.1034]


TOPS20 Change Order Number 5.1057

Written by: OSMAN		 2-Jun-80 16:34:25

Edit checked: NO			   Document: YES
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXEC1	EXEC4

Related TCO's:
Related SPR's: 


Problem: Two of them:

1)	If you are in the middle of a BUILD, and you forgot to ENABLE, there's
	no subcommand to get you out of trouble.

2)	If something more drastic is needed during the BUILD, there's nothing
	to get you out of trouble.

Diagnosis: yes

Solution: 

1)	Allow ENABLE and DISABLE as subcommands under BUILD.

2)	Allow PUSH as a subcommand under BUILD.

[End of TCO 5.1057]


TOPS20 Change Order Number 5.1058

Written by: OSMAN		 3-Jun-80 10:35:05

Edit checked: NO			   Document: NO
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXECSU

Related TCO's:
Related SPR's: 


Problem: Typeing ^T during command execution can cause strange errors.

Diagnosis: USEX uses STKVAR which can clobber some else's 16.

Solution: Instead of ATSAVE in USEX, call SAVACS and RESACS around the
call to USEX to save everything.

[End of TCO 5.1058]


TOPS20 Change Order Number 5.1072

Written by: OSMAN		20-Jun-80 11:05:18

Edit checked: NO			   Document: YES
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXEC3

Related TCO's:
Related SPR's: 


Problem: Can't get DIRECTORY of only online files

Diagnosis: OFFLINE subcommand exists but no ONLINE subcommand.

Solution: Add ONLINE (Files only) subcommand

[End of TCO 5.1072]


TOPS20 Change Order Number 5.1080

Written by: OSMAN		25-Jun-80 16:01:15

Edit checked: NO			   Document: YES
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXEC3

Related TCO's:
Related SPR's: 


Problem: TIMES of OFFLINE and TIMES of ONLINE expiration don't work right.
Like you can get byte size and count instead!

Diagnosis: It was never really implemented!

Solution: Do it

[End of TCO 5.1080]


TOPS20 Change Order Number 5.1086

Written by: OSMAN		 1-Jul-80 10:40:11

Edit checked: NO			   Document: YES
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	execin

Related TCO's:
Related SPR's: 


Problem: When BUILD complains that directory's offline-expiration-default may
not exceed system's, there's no way to find out system's.

Diagnosis: It should be displayed by INFO SYSTEM-STATUS

Solution: do it!

[End of TCO 5.1086]


TOPS20 Change Order Number 5.1097

Written by: OSMAN		 8-Jul-80 08:53:32

Edit checked: NO			   Document: YES
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXECPR

Related TCO's:
Related SPR's: 


Problem: If exec save fails after loading, retry doesn't work.  The exec starts
instead.

Diagnosis: Exec changes entry vector before attempting the save.
Hence restart doesn't retry.

Solution: If failure during save, do SEVEC to set entry vector back to save-start
address.

[End of TCO 5.1097]


TOPS20 Change Order Number 5.1111

Written by: OSMAN		23-Jul-80 15:24:12

Edit checked: NO			   Document: NO
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXEC0

Related TCO's:
Related SPR's: 


Problem: SYSTAT bombs if job logs out between GETJI and SKED%

Diagnosis: SKED% bombs and exec doesn't handle it

Solution: Do SKED% before starting to print the job line.  If job logs out
and SKED% croaks, skip that job entirely!

[End of TCO 5.1111]


TOPS20 Change Order Number 5.1113

Written by: OSMAN		25-Jul-80 10:17:50

Edit checked: NO			   Document: YES
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXEC2	EXECSU

Related TCO's:
Related SPR's: 


Problem: On COPYs, [OK] gets printed before the CLOSF is done.

Diagnosis: This could be bad, if CLOSF fails.

Also, it probably didn't used to happen.  I probably broke it
when I reduced code in exec.

Solution: Don't call TYPOK until after RLJFNS in COPY code.  Make RLJFNS
return error indication in AC1.

For output side, call OPENX instead of $OPENF so that COPY can continue if
a failure on the OPENF for the output fails.

[End of TCO 5.1113]


TOPS20 Change Order Number 5.1114

Written by: OSMAN		28-Jul-80 10:23:30

Edit checked: NO			   Document: YES
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	execse

Related TCO's:
Related SPR's: 


Problem: Exec gives "error" on SET NO ALERT if there are none.

Diagnosis: This error is undesirable, since you
don't want your TAKE files getting errors.

Solution: Remove the check.  (This may show some future problems
regarding how the code handles empty lists, but we'll fix them if
we discover them!)

P.S.	At the time of this bug fix, I notice that the code calls STREM
	without calling PIOFF.  This is bad, since the user might ^C out
	in the middle of cleanup, leaving a damaged list.  I am not fixing
	this now...

[End of TCO 5.1114]


TOPS20 Change Order Number 5.1115

Written by: OSMAN		30-Jul-80 10:01:37

Edit checked: NO			   Document: NO
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXECSU

Related TCO's:
Related SPR's: 


Problem: If swapping space gets used up, you get infinite

	?File or Swapping space exceeded internal trap at ...

messages.

Diagnosis: Exec's main command loop touches one page while initializing
free space.

Solution: When unmapping free space in routine UNMAP, leave the first
page in the map.

[End of TCO 5.1115]


TOPS20 Change Order Number 5.1116

Written by: OSMAN		30-Jul-80 11:15:13

Edit checked: NO			   Document: NO
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	execmt

Related TCO's:
Related SPR's: 


Problem: If you say

	SKIP MT0: 5 FILE

the exec does it without waiting for confirmation.

Diagnosis: booboo

Solution: Fix it

[End of TCO 5.1116]


TOPS20 Change Order Number 5.1120

Written by: OSMAN		 1-Aug-80 14:43:38

Edit checked: NO			   Document: YES
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXECGL	EXEC0	execin

Related TCO's:
Related SPR's: 


Problem: Make INFO VERSION show names and versions of all PDVs for
current fork.

Diagnosis: 

Solution: 
[End of TCO 5.1120]


TOPS20 Change Order Number 5.1122

Written by: OSMAN		 4-Aug-80 09:04:09

Edit checked: NO			   Document: YES
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXECCS

Related TCO's:
Related SPR's: 


Problem: If you want to COMPILE your program and run something else, you
currently have to type ^T while the COMPILE is in progress, wait for the ^T to
indicate that the compiler has started, then ^C out and CONTINUE,STAY.

Diagnosis: lack of generality

Solution: Make /STAY a valid switch during COMPIL-class commands.

[End of TCO 5.1122]


TOPS20 Change Order Number 5.1123

Written by: OSMAN		 5-Aug-80 08:54:46

Edit checked: NO			   Document: NO
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXECSU

Related TCO's:
Related SPR's: 


Problem: SET MAIL-WATCH allows * in user name but does nothing with it.

Diagnosis: Exec shouldn't be allowing * there.

Solution: Make USER$ routine clear .CMDAT word so COMND won't allow *.

[End of TCO 5.1123]


TOPS20 Change Order Number 5.1124

Written by: OSMAN		 5-Aug-80 10:20:47

Edit checked: NO			   Document: YES
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXEC0

Related TCO's:
Related SPR's: 


Problem: If COMAND.CMD references logical names that are defined in LOGIN.CMD,
you lose, since when you log in, COMAND.CMD happens before LOGIN.CMD.
Logical names want to be defined in LOGIN.CMD instead of COMAND.CMD, since they
are job-wide, and hence it would be a waste to define them in COMAND.CMD

Diagnosis: LOGIN.CMD should happen before COMAND.CMD.

Solution: Do it.

[End of TCO 5.1124]


TOPS20 Change Order Number 5.1128

Written by: OSMAN		10-Aug-80 14:42:48

Edit checked: NO			   Document: YES
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXEC1

Related TCO's:
Related SPR's: 


Problem: If you say "SET ENTRY 2000 2000"
you get a nonsensical error.

Diagnosis: The exec is correctly detecting that the length (the second 2000)
is unreasonable, and it is transferring off to CERR which used to merely
print "?".  However, now CERR prints an error message but there is none in
this case.

Solution: Use ERROR macro instead of going to CERR.

[End of TCO 5.1128]


TOPS20 Change Order Number 5.1129

Written by: OSMAN		10-Aug-80 15:11:08

Edit checked: NO			   Document: YES
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXEC0	EXEC1	execse	EXECSU	execin	EXECP
			execse	EXECGL	EXECPR

Related TCO's:
Related SPR's: 


Problem: Exec doesn't handle symbolic addresses and contents

Diagnosis: never done

Solution: do it.  See My memo of Mar 2, 1980 for details.

[End of TCO 5.1129]


TOPS20 Change Order Number 5.1137

Written by: ZIMA		24-Aug-80 21:08:11

Edit checked: NO			   Document: NO
  TCO Tested: NO		Maintenance Release: YES
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXECQU

Related TCO's:
Related SPR's: 


Problem: SET DEFAULT PLOT<return> blow up.

Diagnosis: No entry in BADDEF table.

Solution: Put one in.

[End of TCO 5.1137]


TOPS20 Change Order Number 5.1138

Written by: DONAHUE		27-Aug-80 15:51:11

Edit checked: NO			   Document: NO
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC

Related TCO's:
Related SPR's: 


Problem: 
Embedded nulls in ASCII file are flagged in a TYPE command after
an aborted VDIR, DIR etc...

Diagnosis: 
Control/C trap routine neglects to reset the CCOC word if we were
at EXEC command level

Solution: 
Make certain CCPSI routine resets the CCOC word

[End of TCO 5.1138]


TOPS20 Change Order Number 5.1140

Written by: OSMAN		 3-Sep-80 14:39:30

Edit checked: NO			   Document: NO
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXECCS

Related TCO's:	5.1567	5.1571
Related SPR's: 


Problem: 

	COMPILE /COMP/LAN:"/DEB:(B,L)" RAD.FOR,RADY.FOR

	?SCNDFN Double file name illegal RAD.FO

Diagnosis: Exec was not handling quoted strings correctly

Solution: Redo code at RDQS

[End of TCO 5.1140]


TOPS20 Change Order Number 5.1147

Written by: OSMAN		16-Sep-80 15:36:42

Edit checked: NO			   Document: YES
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXECP

Related TCO's:
Related SPR's: 


Problem: If PCL procedure does INVOKE and user ^C's out, exec fails to freeze
the fork.

Diagnosis: PCL calls WAITA, circumventing other paths which set RUNF.  ^C
checks RUNF and doesn't see it on!

Solution: Move the setting of RUNF into the WAITA routine itself.

[End of TCO 5.1147]


TOPS20 Change Order Number 5.1148

Written by: OSMAN		17-Sep-80 10:35:06

Edit checked: NO			   Document: YES
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXEC1

Related TCO's:
Related SPR's: 


Problem: Write a program that merely doesn an ATI to trap ^C.
If you run this program disabled, it works.  However, if you ENABLE, DISABLE,
and then START the program, it fails because it lacks ^C capabilities.

Diagnosis: The exec was inconsistent, in that at fork creation the exec merely
uses CR%CAP to set prog's caps same as exec.  However, on DISABLE command, exec
clears all the right half cap bits for the fork.

Solution: Make DISABLE merely set fork's caps to same as exec's, after exec's
have been set up correctly.

[End of TCO 5.1148]


TOPS20 Change Order Number 5.1150

Written by: OSMAN		22-Sep-80 10:31:41

Edit checked: NO			   Document: YES
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXECDE	EXEC0	EXECP	execin	EXECSU

Related TCO's:
Related SPR's: 


Problem: several:

1)	People disagree about which programs on the disk should be
	automatically "kept" or be ephemerons.

2)	When a program FOO is kept, users disagree about how FOO should be
	restarted when

	FOO

	is typed.

Diagnosis: Implement the command

	SET PROGRAM name KEEP (AND)	REENTER (WHEN INVOKED AS A COMMAND)
					START
					CONTINUE

	which causes program called "name" to be automatically kept, and
	restarted in the specified manner when invoked.

Implement

	SET PROGRAM name	EPHEMERAL
				NO-EPHEMERAL
				NO-KEEP

which allows override of possible "SET FILE EPHEMERAL" or "SET FILE AUTOKEEP".

These commands should be put in COMAND.CMD if you want them to always prevail.

The INFO PROG command will show what SET PROGRAM settings are currently in
effect.

Solution: Whoops, I typed all that in on "ANALYSIS".  That was the solution!

[End of TCO 5.1150]


TOPS20 Change Order Number 5.1151

Written by: OSMAN		23-Sep-80 14:03:14

Edit checked: NO			   Document: NO
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXEC0

Related TCO's:
Related SPR's: 


Problem: The "INFO MON" command can cause spurious errors

Diagnosis: Near CLLUP it was using SYCLB instead of CLBLK (wrong local variable)

Solution: Use right one!

[End of TCO 5.1151]


TOPS20 Change Order Number 5.1156

Written by: OSMAN		24-Sep-80 14:57:49

Edit checked: NO			   Document: YES
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	execse	execin	EXECGL	EXEC0	EXECP

Related TCO's:
Related SPR's: 


Problem: No way to cause SET PROGRAM to be in effect regardless of name.

Diagnosis: needed

Solution: Implement

	SET DEFAULT PROGRAM (ATTRIBUTE)

	which takes the same attributes as SET PROGRAM and tells what
	prevails if no SET PROGRAM has been done for a particular program.

	If no SET DEFAULT PROGRAM or SET PROGRAM is in effect, a SET FILE
	will be acknowledged if it's been done.

	Use

	SET NO DEFAULT PROGRAM

	to undo SET DEFAULT PROGRAM.

[End of TCO 5.1156]


TOPS20 Change Order Number 5.1158

Written by: OSMAN		25-Sep-80 15:08:53

Edit checked: NO			   Document: YES
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXECSU

Related TCO's:
Related SPR's: 


Problem: Some people would like ^T to show current time.

Diagnosis: Why not?  ^T would still only be one-line long.


Solution: Make it happen!

[End of TCO 5.1158]


TOPS20 Change Order Number 5.1162

Written by: OSMAN		 2-Oct-80 09:39:54

Edit checked: NO			   Document: YES
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXEC0

Related TCO's:
Related SPR's: 


Problem: When MS0 is an existent kept fork, and you say

	@MS0

you get an error.

Diagnosis: Exec actually only looks up system program filespecs, and later
realizes string matches a fork name.  So, since there's no SYS:MS0.EXE, you
lose.

Solution: Parse program names as real keywords.

[End of TCO 5.1162]


TOPS20 Change Order Number 5.1163

Written by: OSMAN		 2-Oct-80 09:54:37

Edit checked: NO			   Document: NO
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXEC1

Related TCO's:
Related SPR's: 


Problem: Very minor, ^ESEND at DETSND+5 is missing CONFIRM.

Diagnosis: Mark Crispin reported this.  I'm not convinced a user typing
at the exec can prove the CONFIRM is missing, since .CMTXT which reads
the message waits for confirmation anyway!

Solution: Put in the CONFIRM to be a purist!

[End of TCO 5.1163]


TOPS20 Change Order Number 5.1167

Written by: OSMAN		 6-Oct-80 10:05:29

Edit checked: NO			   Document: YES
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXECDE	EXEC0	EXECP

Related TCO's:
Related SPR's: 


Problem: People don't like the "autokeep" feature of FDB

Diagnosis: 

Solution: Get rid of that feature.  Also, reduce SET PROGRAM choices to

KEEP, EPHEMERAL, NO-EPHEMERAL, NONE

[End of TCO 5.1167]


TOPS20 Change Order Number 5.1168

Written by: OSMAN		 6-Oct-80 10:34:38

Edit checked: NO			   Document: YES
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXECP

Related TCO's:
Related SPR's: 


Problem: The message

	[Keeping]

is rather mysterious.

Diagnosis: What is being kept?

Solution: Change the message to

	[Keeping "name"]

where "name" is the fork name.

[End of TCO 5.1168]


TOPS20 Change Order Number 5.1172

Written by: DONAHUE		14-Oct-80 10:21:55

Edit checked: NO			   Document: NO
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXECCS	TCR

Related TCO's:
Related SPR's: 	 14462


Problem: Invoking an indirect file with "@FOO.CMD" can get
missing files, when all files are there.

Diagnosis: Routine CMPRES in EXECCS expects the command string to
be terminated by a null.

Solution: Deposit a null at the end of the command string when
the carriage return is seen, at TCR.

[End of TCO 5.1172]


TOPS20 Change Order Number 5.1176

Written by: DONAHUE		20-Oct-80 16:36:42

Edit checked: NO			   Document: NO
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXECSU	LFJFNS

Related TCO's:
Related SPR's: 	 14034


Problem: 
When COPYing/RENAMEing a file with a null extension to a directory with a 
file with the same name but a real extension, the extension of the new file
defaults to the already existing extension, rather than null.

Diagnosis: 
Routine LFJFNS returns a byte pointer to the default extension for the
GTJFN block, or 0 if no extension. The Monitor sees there is no pointer
and assumes that there is no default, when there really is (null).

Solution: 
Let LFJFNS return a pointer to a null string.

[End of TCO 5.1176]


TOPS20 Change Order Number 5.1178

Written by: TILLSON		21-Oct-80 14:10:30

Edit checked: NO			   Document: YES
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXEC2

Related TCO's:
Related SPR's: 


Problem: WHEN COPYING FROM AN ANSI LABELLED ANSI-ASCII TAPE TO DISK WITHOUT
USING AN ASCII OR BYTE SUBCOMMAND, THE RESULTANT DISK FILE IS UNREADABLE.

Diagnosis: COPDEF, THE ROUTINE WHICH DEFAULTS COPY MODE AND BYTESIZE, ALWAYS
USES A BYTESIZE OF 36 BITS WITH A MAGTAPE SOURCE.  AN ANSI-ASCII TAPE MUST BE 
READ WITH A BYTESIZE OF 7.

Solution: ADD CODE TO COPDEF TO CALL LBLSKP (ROUTINE WHICH DOES AN MTOPR%
TO SEE IF A TAPE IS LABELLED).  IF THE TAPE IS A LABELLED ANSI-ASCII TAPE,
SET THE BYTESIZE TO 7.

[End of TCO 5.1178]


TOPS20 Change Order Number 5.1179

Written by: OSMAN		24-Oct-80 15:41:31

Edit checked: NO			   Document: NO
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	execmt

Related TCO's:
Related SPR's: 


Problem: The

	%CLOSE JFN?

	routine no longer closes the jfn.

Diagnosis: KEYWD no longer preserves temps so it clobbered jfn in A causing
	JFNRLA to receive garbage.

Solution: Reload jfn before calling JFNRLA.

[End of TCO 5.1179]


TOPS20 Change Order Number 5.1181

Written by: SCHMITT		27-Oct-80 09:31:53

Edit checked: NO			   Document: NO
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXECSU

Related TCO's:
Related SPR's: 	 14218


Problem: 
EXEC does not precede all prompts with a space so BATCON will
confuse exec prompt with OPERATOR mode character.  EXEC batch
prompts not preceeded by a space are "@", "@@", and "$$".

Diagnosis: 
The READY and READY2 routines simply do not attempt to precede
these prompts with a space for batch jobs.

Solution: 
Have the READY and READY2 routines do this.

[End of TCO 5.1181]


TOPS20 Change Order Number 5.1183

Written by: TILLSON		29-Oct-80 15:40:20

Edit checked: NO			   Document: NO
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	execqu

Related TCO's:
Related SPR's: 	 14958


Problem: 

If the PRINT command is given for a file with a .DAT extension and a
global /DELETE or /PRESERVE the file gets treated as /FILE:ASCII.

Diagnosis: 
If there is a global /DELETE or /PRESERVE, the file's extension is 
checked before the JFNS is done to retrieve it.

Solution: 
Move the test for /DELETE and /PRESERVE to after the JFNS.

[End of TCO 5.1183]


TOPS20 Change Order Number 5.1186

Written by: FBROWN		31-Oct-80 16:08:21

Edit checked: NO			   Document: NO
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXECMI

Related TCO's:
Related SPR's: 


Problem: The DO command does not handle @ERROR and @OPERATOR correctly

Diagnosis: Missing JFCL after NOUT causing ":" to be missed off PTYnnn:

Solution: Put JFCL in.

[End of TCO 5.1186]


TOPS20 Change Order Number 5.1189

Written by: OSMAN		 5-Nov-80 15:16:58

Edit checked: NO			   Document: YES
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXECP

Related TCO's:
Related SPR's: 


Problem: SAVE command gives wrong error when second page of block is not as
large as first page

2)	We need /USE-SECTION: switch on GET command.

Diagnosis: PUt them in

Solution: yes

[End of TCO 5.1189]


TOPS20 Change Order Number 5.1190

Written by: LCAMPBELL		 5-Nov-80 15:34:11

Edit checked: NO			   Document: YES
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXEC0

Related TCO's:
Related SPR's: 


Problem: 
Non-fancy program is used to print system messages at login time.

Diagnosis: 
The EXEC calls RDMAIL, not MS (even though the INFO MAIL SYSTEM command
calls MS).

Solution: 
Do the same thing at login time that the INFO MAIL SYSTEM command
does -- run MS as an ephemeron.

[End of TCO 5.1190]


TOPS20 Change Order Number 5.1191

Written by: DONAHUE		 6-Nov-80 11:39:17

Edit checked: NO			   Document: NO
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXEC1

Related TCO's:
Related SPR's: 	 14209


Problem: 
An invisible file that gets superceded is lost to the user as it cannot
be set visible or undeleted.

Diagnosis: 
The UNDELETE command ignores invisible files.

Solution: 
Allow UNDELETE to manipulate invisible files

[End of TCO 5.1191]


TOPS20 Change Order Number 5.1192

Written by: FBROWN		 7-Nov-80 08:43:54

Edit checked: NO			   Document: NO
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXECP	EXECMI	EXECGL

Related TCO's:
Related SPR's: 


Problem: The inferior fork created by EXEC on a DO command does not
have a name

Diagnosis: No code to give it a name

Solution: Make the ADDNAM routine in EXECP global and call it from
EXECMI after creating the fork.  Also change the flag in EXECMI on the
create from FK%KPT to FK%KEP so users are told the the fork is
being kept.

[End of TCO 5.1192]


TOPS20 Change Order Number 5.1197

Written by: FBROWN		17-Nov-80 09:12:36

Edit checked: YES			   Document: YES
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXECMI

Related TCO's:
Related SPR's: 


Problem: It is impossible to pass certain characters (such as @) as a
parameter on a DO command

Diagnosis: The DO command does nothing special with the quote character "^V",
simply passing it through to the parameter.

Solution: Make the parameter handling code on a DO command check for a "^V" and
pass the next character on to the parameter without any special checking.

[End of TCO 5.1197]


TOPS20 Change Order Number 5.1201

Written by: DONAHUE		21-Nov-80 14:09:35

Edit checked: NO			   Document: NO
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXEC1

Related TCO's:
Related SPR's: 	 14986


Problem: 
If the LOGIN.CMD has a PUSH in it and the user types CLOSE and POP,
EXEC gets Illegal instruction interrupt.

Diagnosis: 
The inferior EXEC is allowed to manipulate the JFN on LOGIN.CMD.

Solution: 
Create a routine TRYGTL to set bit GJ%ACC and then fall into TRYGTJ.

[End of TCO 5.1201]


TOPS20 Change Order Number 5.1207

Written by: TILLSON		 4-Dec-80 14:53:01

Edit checked: NO			   Document: NO
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXECCS

Related TCO's:
Related SPR's: 


Problem: LOAD-class commands do not step logical names when
defaulting extensions.


Diagnosis: The code which finds the best default extension uses GNJFN%.
It is a restriction that GNJFN% does not step logical names.


Solution: Change the code to step through the language table and use GTJFN%
instead of using GNJFN%.


[End of TCO 5.1207]


TOPS20 Change Order Number 5.1209

Written by: FBROWN		 8-Dec-80 09:22:52

Edit checked: NO			   Document: NO
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXECMI

Related TCO's:
Related SPR's: 


Problem: It is impossible to diagnose problems in the inferior fork
of EXECMI created on a DO command.

Diagnosis: No symbols in inferior fork.

Solution: Change the way the inferior is mapped so that symbols are included.

Change the checking for depth of nesting to make use of MICFPG, the first
page assigned to the inferior.

[End of TCO 5.1209]


TOPS20 Change Order Number 5.1210

Written by: ACARLSON		 8-Dec-80 09:29:06

Edit checked: NO			   Document: YES
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXECSE	EXECSU	EXECGL

Related TCO's:
Related SPR's: 


Problem: With release 4 og GALAXY, users can run multiple
private GALAXY subsystems. There is, however, no convient
way to get the EXEC to talk to one of these private worlds.

Diagnosis: There is no easy way to get the EXEC to talk to
a private GALAXY subsystem.

Solution: Add a ^ESET option to cause the EXEC to go out 
and look for a private GALAXY subsystem being run by this
user. The EXEC will go out and ask SYSINF for the PID
of [USERNAME]QUASAR, where USERNAME is the ascii name of
the user issueing the ^ESET command. A ^SET NO PRIVATE-
QUASAR will cause the EXEC to revert back to normal.

[End of TCO 5.1210]


TOPS20 Change Order Number 5.1211

Written by: FBROWN		 8-Dec-80 13:13:48

Edit checked: NO			   Document: NO
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXECMI

Related TCO's:
Related SPR's: 


Problem: ERROR and OPERATOR checking do not work correctly in a DO command
if the terminal type requires fillers to be sent on form motion characters
(<CR>, <LF> etc.).

Diagnosis: No check is made for filler characters in the PTY buffer, so the
ERROR/OPERATOR character is never "seen" by the PTY code.

Solution: Be more smart and ignore nulls at either end of the PTY buffer.

[End of TCO 5.1211]


TOPS20 Change Order Number 5.1212

Written by: FBROWN		 9-Dec-80 10:59:45

Edit checked: NO			   Document: NO
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXECMI

Related TCO's:
Related SPR's: 


Problem: "batch" commands in a "DO" file do not work if there is no "@"
at the beginning of the input line.

Diagnosis: No check is made for the job being in "monitor mode".

Solution: Add a check and check for batch commands if either the job is in
monitor mode or the input line contains the "@" character as the first
character.

[End of TCO 5.1212]


TOPS20 Change Order Number 5.1214

Written by: OSMAN		12-Dec-80 15:03:25

Edit checked: NO			   Document: YES
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXECSU

Related TCO's:
Related SPR's: 


Problem: When exec gives error messages, such as

	?Not confirmed

or

	?File not found

the user isn't so clear what was mistyped.

Diagnosis: Exec should give more info

Solution: Have exec augment error message with erroneous atom if available,
or remainder of command line, causing error messages to look like this:

	?Not confirmed - "foo"

or

	?File not found - "FOO.BAR"

[End of TCO 5.1214]


TOPS20 Change Order Number 5.1220

Written by: OSMAN		23-Dec-80 16:58:56

Edit checked: NO			   Document: YES
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXECCS

Related TCO's:
Related SPR's: 


Problem: Exec needs to talk to native compilers

Diagnosis: needs to write tops-20-style filespecs and new tmpcor names

Solution: do it

[End of TCO 5.1220]


TOPS20 Change Order Number 5.1221

Written by: DONAHUE		30-Dec-80 14:40:48

Edit checked: NO			   Document: NO
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXECCS

Related TCO's:
Related SPR's: 	 15328


Problem: 
When setting /MAP (or /STAY) as a default compile switch, any compile
command will get "No such switch: programname" error message.

Diagnosis: 
Routine HANSWI checks for bit S%DSP and RETSKP's, which causes the
EXEC to concatenate the atom buffer to what it has already stored into
the default switch's buffer - leaving "/MAPMAP".

Solution: 
Make HANSWI check for bits S%VAL or S%QUO, which say the switch expects
a value or a quoted string to follow.

[End of TCO 5.1221]


TOPS20 Change Order Number 5.1223

Written by: OSMAN		31-Dec-80 15:19:39

Edit checked: NO			   Document: YES
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	execin

Related TCO's:
Related SPR's: 


Problem: Can't do INFO TERM on other terminals

Diagnosis: laziness?

Solution: Expand INFO TERM to

		@INFO TERM (OF TERMINAL) {number}

which defaults to yours but allows others!

[End of TCO 5.1223]


TOPS20 Change Order Number 5.1224

Written by: LYONS		31-Dec-80 16:58:29

Edit checked: NO			   Document: YES
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXECIN

Related TCO's:
Related SPR's: 


Problem: USER CANT GET THE NODE NAME OF "THEIR" NODE

Diagnosis: NO WAY TO GET IT FROM THE EXEC

Solution: HAVE THE "INFORMATION DECNET" COMMAND TYPE A * JUST BEFORE
THE NAME OF THE LOCAL NODE.

[End of TCO 5.1224]


TOPS20 Change Order Number 5.1225

Written by: OSMAN		 6-Jan-81 10:17:17

Edit checked: NO			   Document: YES
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXECSE	EXECIN	EXECGL	EXECSU	EXECP	EXECDE

Related TCO's:
Related SPR's: 


Problem: It would be useful to be able to see file openings and jsys execution
within programs.

Diagnosis: The monitor supports it but not the exec!

Solution: 
Implement

	SET {NO} TRAP JSYS name		!Control trapping of specific JSYS
	SET {NO} TRAP JSYS /ALL		!Say to trap or not trap ALL JSYS
	SET {NO} TRAP FILE-OPENINGS	!Show all file-openings by programs
	SET TRAP {NO} PROCEED		!Control whether to stop on each trap

Expand

	INFO PROG

to show the current settings.

	SET TRAP FILE-OPENINGS is equivalent to
	SET TRAP JSYS OPENF

and causes a line looking like

	[Fork <name> opening <file> for <modes>]

to appear whenever any fork opens a file with OPENF.

	SET TRAP JSYS name or /ALL causes a line looking like

	[Fork <name> <location>/ <jsys name> ac 1-4: <contents of ac>]

to appear whenever the specified jsys is executed.

After the line is displayed, the program proceeds or not according to the
setting of SET TRAP PROCEED / SET TRAP NO PROCEED.  The default is PROCEED.

[End of TCO 5.1225]


TOPS20 Change Order Number 5.1231

Written by: OSMAN		 9-Jan-81 14:21:14

Edit checked: NO			   Document: YES
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXEC3

Related TCO's:
Related SPR's: 


Problem: There's no way to know which files resist or are prohibited from
migration

Diagnosis: BBN never expanded the DIRECTORY command enough.

Solution: Add the RESIST-MIGRATION (Files only) and PROHIBIT-MIGRATION (Files only)
subcommands to DIRECTORY.

[End of TCO 5.1231]


TOPS20 Change Order Number 5.1233

Written by: OSMAN		13-Jan-81 16:44:42

Edit checked: NO			   Document: YES
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXECGL	EXECPR	EXECP	execse	execin

Related TCO's:
Related SPR's: 


Problem: Users expect SET TRAP {NO} FILE-OPENINGS
and SET TRAP {NO} JSYS OPENF
to be independent

Diagnosis: Exec was treating them synonymously

Solution: Make exec treat them independently

[End of TCO 5.1233]


TOPS20 Change Order Number 5.1274

Written by: SCHMITT		17-Mar-81 13:12:53

Edit checked: NO			   Document: NO
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXEC2

Related TCO's:
Related SPR's: 


Problem: 
When copying from an EBCDIC format labelled tape, the same problem
mentioned in TCO 5.1178 occurs.  That is, the resulting file is
of the format where each word contains one 7 bit byte.

Diagnosis: 
TCO 5.1178 fixed it for ASCII tapes but not EBCDIC.

Solution: 
Check to see if the tape is EBCDIC along with ASCII.  If
the tape is either, set the default byte size to seven.

[End of TCO 5.1274]


TOPS20 Change Order Number 5.1278

Written by: TILLSON		 7-Apr-81 17:05:35

Edit checked: NO			   Document: NO
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXECCS

Related TCO's:
Related SPR's: 


Problem: DEBUG /74-COBOL gets ?SCNUNV Unknown switch value 74 from LINK.

Diagnosis: The wrong debugger name is used in the language table entry for COBOL-74.

Solution: Change the 74-COBOL entry from "74-COBOL" to "COBOL".

[End of TCO 5.1278]


TOPS20 Change Order Number 5.1282

Written by: TILLSON		15-Apr-81 11:02:03

Edit checked: NO			   Document: NO
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXEC2

Related TCO's:
Related SPR's: 


Problem: When copying a 512-page file, bit FB%LNG is set in the file's FDB.

Diagnosis: The EXEC PMAPs chunks of 25 pages from the destination file
without checking to see if there is a full set of 25 pages left to be 
copied.

Solution: Add code to the disk copy routine to see if it is necessary to map in
less than a full 25-page chunk.

[End of TCO 5.1282]


TOPS20 Change Order Number 5.1286

Written by: TILLSON		16-Apr-81 18:18:07

Edit checked: NO			   Document: NO
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXEC2

Related TCO's:
Related SPR's: 


Problem: Cannot COPY from ANSI labelled tapes.

Diagnosis: EXEC is passing LBLSKP a device type instead of a JFN in the 
literal at COPDEF+15.

Solution: Pass LBLSKP a JFN.

[End of TCO 5.1286]


TOPS20 Change Order Number 5.1295

Written by: PAETZOLD		22-Apr-81 10:36:20

Edit checked: NO			   Document: NO
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXEC0

Related TCO's:
Related SPR's: 


Problem: SYSTAT sometimes types a large number of extra spaces before the 
foreign host name when the user is logged in on an ARPANET NVT.

Diagnosis: Current tty position is allready past the HDRPOS.

Solution: Range check the results of the calculation

[End of TCO 5.1295]


TOPS20 Change Order Number 5.1306

Written by: TILLSON		 5-May-81 12:45:50

Edit checked: NO			   Document: YES
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXEC0

Related TCO's:
Related SPR's: 


Problem: A user does not receive a system message at login time if he has a 
batch job which runs between the time the message is sent and the time the user logs in for interactive use.


Diagnosis: The routine which prints system messages returns without printing if the job is a batch job.


Solution: Remove the code from the PNTMES routine which checks if the job is a 
batch job.  This will cause system messages to appear in the log file.


[End of TCO 5.1306]


TOPS20 Change Order Number 5.1307

Written by: GROUT		 5-May-81 13:29:41

Edit checked: NO			   Document: NO
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXEC3

Related TCO's:
Related SPR's: 


Problem: CTRL/V's are counted as taking up output room.

Diagnosis: DFILL counts CTRL/V's as taking up output room.

Solution: Skip SOJX's decrementing D in DFILL if CTRL/V seen.

[End of TCO 5.1307]


TOPS20 Change Order Number 5.1309

Written by: SCHMITT		 5-May-81 15:21:49

Edit checked: NO			   Document: NO
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXEC0	EXECSU

Related TCO's:
Related SPR's: 


Problem: 
When TCO 5.1308 is installed, DWNTIM GETTAB entries can return a -1.
The exec should be modified so it will understand this and print a
message ' System is shutdown'.

Diagnosis: 
none

Solution: 
The routines SYSDWN and DWNPNT should be modified to check for
-1 and print the above message

[End of TCO 5.1309]


TOPS20 Change Order Number 5.1313

Written by: GROUT		 6-May-81 08:42:18

Edit checked: NO			   Document: NO
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	execin

Related TCO's:
Related SPR's: 	 15996


Problem: HELP keywords are implicitly completed.

Diagnosis: COMND implicitly completes keywords, but HELP keywords are really
file names, so this is undesirable.

Solution: If keyword was not explicitly completed (check CM%ESC), then if
input keyword (in atom buffer) is a substring of complete keyword, then it's
an error.

[End of TCO 5.1313]


TOPS20 Change Order Number 5.1315

Written by: MURPHY		 6-May-81 18:12:16

Edit checked: NO			   Document: YES
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXEC0

Related TCO's:
Related SPR's: 


Problem: NEED TO SPECIFY TERMINAL PAUSE AND UNPAUSE CHARACTERS.

Diagnosis: COMMAND NEEDED.

Solution: ADD OPTION TO 'TERMINAL' COMMAND:
	@TERMINAL PAUSE (ON) CHARACTER x (AND UNPAUSE ON) y
where x and y can be specified as:
	an ASCII code in octal;
	a literal character within doublequotes
	the word CONTROL followed by the printing representation of
	  a control character in doublequotes (e.g. CONTROL "A")
	the word SPACE to specify the 'space' character

[End of TCO 5.1315]


TOPS20 Change Order Number 5.1316

Written by: GRANT		 7-May-81 09:15:22

Edit checked: NO			   Document: NO
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXECIN

Related TCO's:
Related SPR's: 


Problem: The @INF VER command does not give you the version number of the
	program if the program is in a non-0 section.

Diagnosis: The EXEC's processing of @INF VER doesn't allow for an entry
	vector's address to be more than 18 bits.

Solution: Make @INF VER be able to handle an entry vector in a non-0
	section.
[End of TCO 5.1316]


TOPS20 Change Order Number 5.1317

Written by: GROUT		 7-May-81 11:29:47

Edit checked: NO			   Document: NO
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXECP

Related TCO's:
Related SPR's: 


Problem: SET ADDRESS-BREAK doesn't work when AFTER > 2 (blows up
with pushdown overflow trap).

Diagnosis: Routine FRKTRM uses STKVAR to allocate storage, but some exits
from routines it jumps to don't fix up the stack, so the stack is eaten up
until it's all gone.

Solution: Fix up the exits from routines FKTRM1 and FKTRM2 so the stack is
cleaned up.

[End of TCO 5.1317]


TOPS20 Change Order Number 5.1332

Written by: BASS		19-May-81 12:35:45

Edit checked: NO			   Document: NO
  TCO Tested: NO		Maintenance Release: YES
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXECQU

Related TCO's:
Related SPR's: 	 16176


Problem: THE COMMAND:

	CANCEL <request-type> (ID) 0

ACTS THE SAME AS:

	CANCEL <request-type> (ID) *


Diagnosis: QUASAR-20 assumes that a zero request number means that a request-id
was not typed.

Solution: MAKE .CANCEL REQUIRE THAT THE REQUEST-ID BE POSITIVE

[End of TCO 5.1332]


TOPS20 Change Order Number 5.1343

Written by: GROUT		22-May-81 11:36:50

Edit checked: NO			   Document: NO
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXEC0	EXECDE	EXECGL	EXECMT	EXECPR	EXECSU

Related TCO's:
Related SPR's: 


Problem: INFORMATION queue commands fail when queues are too large.

Diagnosis: IPCF code tries to read in all outstanding messages at once,
and flushes buffers to do it.

Solution: Rewrite IPCF code to read in messages only when there's room for them,
and flush only when the buffers are full, a message is waiting to be read in,
and a search for a particular message has just failed (we'll hang otherwise).

[End of TCO 5.1343]


TOPS20 Change Order Number 5.1351

Written by: GROUT		28-May-81 10:56:32

Edit checked: NO			   Document: NO
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXEC0

Related TCO's:
Related SPR's: 	 16239


Problem: TERMINAL terminal type changes duplex mode.

Diagnosis: As above.

Solution: Make it not do so.

[End of TCO 5.1351]


TOPS20 Change Order Number 5.1368

Written by: MOSER		11-Jun-81 15:58:47

Edit checked: NO			   Document: NO
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXEC3

Related TCO's:
Related SPR's: 


Problem: TCO 5.1307 CAUSED A DIRECT COMMAND TO HANG WHEN A FILE NAME
CONTAINED A CNTRL-V

Diagnosis: A LINE WAS ADDED AND A LATER LINE CONTAINED A JUMP TO .-2
THIS ADDED LINE CAUSED THE .-2 TO BE IN THE WRONG PLACE. THE REAL PROBLEM
IS THAT THE EXEC CONTAINS SUCH THINGS AS .-n INSTEAD OF LABELS.

Solution: USE LABELS.

[End of TCO 5.1368]


TOPS20 Change Order Number 5.1374

Written by: GROUT		18-Jun-81 10:47:18

Edit checked: NO			   Document: NO
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXECQU

Related TCO's:
Related SPR's: 


Problem: PRINT FOO.* doesn't take default actions indicated by file extensions.

Diagnosis: The code doesn't check the extensions in this case.

Solution: Change the logic around so it can do so, and implement the checking.

[End of TCO 5.1374]


TOPS20 Change Order Number 5.1377

Written by: GROUT		22-Jun-81 15:04:02

Edit checked: NO			   Document: NO
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXEC3

Related TCO's:
Related SPR's: 


Problem: Sequential checksums on disk are very slow, especially on discontinuous
files.

Diagnosis: Sequential checksum routine uses SIN, even if the file is on disk,
thus resulting in large delays if the file is discontinuous and/or has a large
unrealistic EOF pointer (DBS files, for example).

Solution: Use the disk reading code (which uses FFUFP and PMAP) to handle both
sequential and by-pages checksumming.

[End of TCO 5.1377]


TOPS20 Change Order Number 5.1378

Written by: OSMAN		23-Jun-81 09:46:49

Edit checked: NO			   Document: NO
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXECP

Related TCO's:
Related SPR's: 


Problem: Address breaks aren't being announced

Diagnosis: Exec is checking wrong. I broke it when I put in jsys trapping.

Solution: Do error analysis unless status is .rfhlt.

[End of TCO 5.1378]


TOPS20 Change Order Number 5.1379

Written by: LEACHE		23-Jun-81 15:12:06

Edit checked: NO			   Document: YES
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXEC1

Related TCO's:
Related SPR's: 


Problem: CANCEL ARCHIVE issued after archive run-1 and before archive run-2
leaves file in odd state.

Diagnosis: cancelling the request cannot be done after run-1 has started.

Solution: Make it an error to cancel a request after FB%ARC has been set.
If CANCEL ARCHIVE is issued for a file that has AR%RAR (archive requested)
set and FB%ARC (file has archive status) set, the EXEC responds with:

?File has archive status: filename

for each file in the CANCEL ARCHIVE command meeting the previously specified
criteria.  An error on a multi-file CANCEL ARCHIVE command will not terminate
the command:  the EXEC will continue processing each remaining filename in
the request.


[End of TCO 5.1379]


TOPS20 Change Order Number 5.1387

Written by: CHALL		26-Jun-81 09:19:55

Edit checked: YES			   Document: YES
  TCO Tested: YES		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXECIN

Related TCO's:
Related SPR's: 


Problem: THERE'S NO WAY OF FINDING OUT WHAT THE CURRENT PAUSE-NO PAUSE
ON END OF PAGE CHARACTERS ARE.

Diagnosis: (NOT AS AN EXEC COMMAND, ANYWAY)

Solution: ADD A LINE TO INFO TERMINAL WHICH SAYS:

" TERMINAL PAUSE (ON) CHARACTER MUMBLE (AND UNPAUSE ON) MUMBLE1"

MUMBLE CAN BE <"X">, <CONTROL "X">, <SPACE>, OR <ESCAPE>.
MUMBLE1 DOESN'T COME OUT IF IT'S THE SAME AS MUMBLE.
THE ABOVE LINE IS TYPED ONLY IF TERM PAUSE END-OF-PAGE IS IN EFFECT.

[End of TCO 5.1387]


TOPS20 Change Order Number 5.1388

Written by: CHALL		26-Jun-81 09:28:39

Edit checked: YES			   Document: YES
  TCO Tested: YES		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXECSE

Related TCO's:
Related SPR's: 


Problem: TWO ALERTS SET FOR THE SAME TIME WILL BOTH BE STORED. HOWEVER, ONLY
THE LATEST IS OUTPUT, BUT THEN THEY ALL ARE PURGED. 

Diagnosis: AT LEAST, SUPERCEDING ALERTS SHOULD CAUSE THE PRECEDING ALERTS
TO BE REMOVED FROM THE ALERT TABLE.

(THIS CAME FROM A GRUMP WHERE A PERSON HAD ALERTS SET UP IN LOGIN.CMD
AND KEPT GETTING NEW COPIES EVERY TIME THEY LOGGED IN).

Solution: ALLOW ONLY ONE ALERT TO BE SET FOR EACH TIME INCREMENT. NEW
SETTINGS SUPERCEDE OLDER ONES.

[End of TCO 5.1388]


TOPS20 Change Order Number 5.1389

Written by: CHALL		26-Jun-81 09:30:26

Edit checked: YES			   Document: YES
  TCO Tested: YES		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXECIN

Related TCO's:
Related SPR's: 


Problem: IT WOULD BE NICE TO SEE IF ALERTS ARE AUTOMATIC OR NOT

Diagnosis: 

Solution: ADD A LINE TO INFO ALERT SAYING:

 " ALERTS ARE AUTOMATIC"  OR
 " ALERTS ARE NOT AUTOMATIC"

[End of TCO 5.1389]


TOPS20 Change Order Number 5.1391

Written by: CHALL		 2-Jul-81 09:58:15

Edit checked: YES			   Document: NO
  TCO Tested: YES		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXECSU

Related TCO's:
Related SPR's: 


Problem: EXEC GETS HUNG EXECUTING A TAKE COMMAND WITHIN A PCL COMMAND.

Diagnosis: WHEN THE TAKE COMMAND IS OVER THE EXEC CLEARS PART, BUT NOT
ALL OF THE PCL STATUS. WHEN IT WANTS TO READ FROM THE PCL FILE PART OF
THE EXEC THINKS IT'S STILL IN PCL AND ANOTHER PART THINKS IT ISN'T. THEY
THRASH BACK AND FORTH FOREVER (OR UNTIL A CONTROL-C).

Solution: AT LABEL CIOREL:, PUT THE CALL TO PCMPOS BEFORE THE CALL 
TO FIXIO. FIXIO CLEARS THINGS THAT PCMPOS NEEDS IN ORDER TO WORK.

[End of TCO 5.1391]


TOPS20 Change Order Number 5.1400

Written by: TILLSON		 8-Jul-81 14:15:44

Edit checked: NO			   Document: NO
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXEC1

Related TCO's:
Related SPR's: 


Problem: A USER CAN SOMETIMES CTRL/C OUT OF LOGIN LEAVING HIM IN AN 
INDETERMINATE STATE WHERE ANY COMMAND REQUIRING HIM TO BE LOGGED IN GIVES
THE MESSAGE "?LOGIN PLEASE", AND ANY ATTEMPT TO LOGIN AGAIN GIVES HIM 
"?JOB IS ALREADY LOGGED IN"


Diagnosis: THE EXEC TESTS A MEMORY LOCATION FOR PRESENCE OF A NON-ZERO USER
NUMBER BEFORE PERFORMING ANY COMMAND REQUIRING A USER TO BE LOGGED IN.  THERE
IS A TWO-INSTRUCTION WINDOW BETWEEN THE TIME THE LOGIN% JSYS IS COMPLETED
AND USER NUMBER IS MOVED INTO THIS MEMORY LOCATION.  SHOULD THE USER CTRL/C
DURING THE EXECUTION OF THESE TWO INSTRUCTIONS, THE EXEC WILL THINK HE IS NOT 
LOGGED IN, WHILE THE MONITOR, SINCE LOGIN% HAS ALREADY SUCESSFULLY COMPLETED, 
WILL NOT LET HIM LOGIN AGAIN.


Solution: TURN OFF PSI FOR THIS CODE.

[End of TCO 5.1400]


TOPS20 Change Order Number 5.1404

Written by: GROUT		 9-Jul-81 13:39:47

Edit checked: NO			   Document: NO
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXECSU

Related TCO's:
Related SPR's: 


Problem: EXEC loops uncontrollably after CTRL/C.

Diagnosis: CTRL/C interrupt during free list manipulation can trash free list
and lead to infinite looping when it's next used.

Solution: Put PIOFF-PION pairs around free list manipulation code of GETMEM
and RETMEM.

[End of TCO 5.1404]


TOPS20 Change Order Number 5.1405

Written by: GRANT		 9-Jul-81 18:08:38

Edit checked: NO			   Document: NO
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXECP

Related TCO's:
Related SPR's: 


Problem: EXEC didn't print out message when an Address Break was encountered.

Diagnosis: Fork termination wasn't being recognized properly.

Solution: In FRKTRM do the appropriate checking.
[End of TCO 5.1405]


TOPS20 Change Order Number 5.1410

Written by: MURPHY		13-Jul-81 15:59:29

Edit checked: NO			   Document: YES
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXECCA	EXECSU	EXECP

Related TCO's:
Related SPR's: 


Problem: If swapping space full condition occurrs, EXEC usually goes
into infinite loop typing error message.

EXEC does not distinguish DISK FULL and OVER QUOTA conditions; monitor
now does.

Diagnosis: 

Solution: 
Change code for .ICQTA to say only 'quota exceeded'.

Change code for .ICMSE to indicate Disk Full or Swap Space Full.

[End of TCO 5.1410]


TOPS20 Change Order Number 5.1411

Written by: CHALL		13-Jul-81 17:17:14

Edit checked: YES			   Document: NO
  TCO Tested: YES		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXECSE

Related TCO's:
Related SPR's: 


Problem: SET DIRECT ARCHIVE  FAILS INEVITABLY WITH A "NO ACCESS TO
DIRECTORY" MESSAGE.

Diagnosis: AT DMODE: (IN EXECSU) THE GTDIR BLOCK IS SUPPOSED TO START WITH 
A COUNT. IT STARTS WITH J-RANDOM DATA, SINCE IT WAS NEVER INITIALIZED.
THIS CAUSES AN ERROR RETURN FROM GTDIR.

Solution: BEFORE THE GTDIR CALL SET THE LENGTH OF THE DATA BLOCK TO
.CDMOD (SINCE THE DMODE: ROUTINE CHANGES THE MODE WORD)

[End of TCO 5.1411]


TOPS20 Change Order Number 5.1414

Written by: CHALL		15-Jul-81 12:38:37

Edit checked: YES			   Document: NO
  TCO Tested: YES		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXEC3

Related TCO's:
Related SPR's: 


Problem: 

Diagnosis: 

Solution: IN THE DIRECTORY SIZE SUBCOMMAND, CHANGED THE "(IN PAGES OR BLOCKS)"
NOISE TO "(IN PAGES)".

[End of TCO 5.1414]


TOPS20 Change Order Number 5.1417

Written by: CHALL		16-Jul-81 11:16:34

Edit checked: YES			   Document: NO
  TCO Tested: YES		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXECIN

Related TCO's:
Related SPR's: 


Problem: DOING AN "I PSI" CAN CAUSE AN ERROR

Diagnosis: I PSI DOES A RIR JSYS, WHICH WILL FAIL IF THE INTERRUPT TABLES
WERE SET UP USING AN XSIR% JSYS.

Solution: IF THE RIR (IN ROUTINE .PISTA:) FAILS TRY DOING AN XRIR%.

[End of TCO 5.1417]


TOPS20 Change Order Number 5.1420

Written by: CHALL		17-Jul-81 16:03:01

Edit checked: YES			   Document: NO
  TCO Tested: YES		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXEC1

Related TCO's:
Related SPR's: 


Problem: THERE'S NO WAY FOR THE RECEIVER TO TELL IF A SEND MESSAGE IS
FOR HIM OR FOR EVERYBODY.

Diagnosis: 

Solution: IF THE MESSAGE IS A SEND * HAVE THE TAG READ:

[FROM CHALL ON LINE 200 TO ALL:

[End of TCO 5.1420]


TOPS20 Change Order Number 5.1421

Written by: CHALL		17-Jul-81 16:05:15

Edit checked: YES			   Document: YES
  TCO Tested: YES		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXECIN

Related TCO's:
Related SPR's: 


Problem: IT WOULD BE NICE TO HAVE AN "INFO DEFAULTS ALL" COMMAND,
WHICH LISTED ALL THE DEFAULTS FOR ALL THE OTHER OPTIONS. ALSO,
"INFO DEFAULTS" COULD DEFAULT TO "INFO DEFAULTS ALL".

Diagnosis: 

Solution: DO IT

[End of TCO 5.1421]


TOPS20 Change Order Number 5.1426

Written by: GROUT		21-Jul-81 11:30:28

Edit checked: NO			   Document: NO
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXEC0

Related TCO's:
Related SPR's: 


Problem: SYS * yields "?Too many arguments"

Diagnosis: The user number (or directory number) returned by .CMUSR (or .CMDIR)
field is stepped at parse time, and all the user (or directory) numbers are
stored on the stack; obviously, when all users on the system are returned, the
stack overflows.

Solution: Make SYSTAT store the wild string if it can be stepped successfully,
and compare against it at job scan time with WILD% (note: if it can't be
stepped, store user (or directory) number instead to save time).

[End of TCO 5.1426]


TOPS20 Change Order Number 5.1427

Written by: MURPHY		21-Jul-81 12:26:46

Edit checked: NO			   Document: NO
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXECP	EXEC1

Related TCO's:
Related SPR's: 


Problem: System mail printed before terminal parameters set up.

Diagnosis: Terminal parameters may be set up by TTYINI or other
commands in LOGIN.CMD file.  However, EXEC forces printing
of system mail before running any program.

Solution: Take out call to system mail in run program logic.
Ditto PUSH command.

[End of TCO 5.1427]


TOPS20 Change Order Number 5.1443

Written by: CHALL		 4-Aug-81 15:18:37

Edit checked: YES			   Document: YES
  TCO Tested: YES		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXECSE

Related TCO's:
Related SPR's: 


Problem: A USER CAN'T SET TRAPPING FOR A JSYS WHICH DOESN'T HAVE A NAME.

Diagnosis: SET TRAP JSYS ACCEPTS ONLY /ALL OR A NAME.

Solution: TEACH IT ALSO TO ACCEPT OCTAL VALUES. THUS SET TRAP JSYS 544
IS THE SAME AS SET TRAP JSYS COMND. AND SET TRAP JSYS <OCTAL> CAN ALWAYS
BE DONE, EVEN FOR BRAND NEW, NAMELESS, JSYI.

[End of TCO 5.1443]


TOPS20 Change Order Number 5.1454

Written by: CHALL		14-Aug-81 18:16:34

Edit checked: YES			   Document: NO
  TCO Tested: YES		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXECMI	EXECVR

Related TCO's:
Related SPR's: 


Problem: EXEC PROGRAM NAMES ARE NOT ALL THE SAME AS THEIR TITLES

Diagnosis: WHICH CONFUSES AUTOPATCH AS WELL AS HUMAN READERS OF GLOBS.

Solution: CHANGE ALL THE EXEC TITLES TO MATCH THE NAMES OF THE PROGRAMS.
THE TITLES CHANGED ARE: XDEF (EXECDE), CANDE (EXECED), PRIV (EXECPR),
CSCAN (EXECCS), SUBRS (EXECSU), VER (EXECVR), AND MIC (EXECMI).

THE FACT THAT THE NAME OF THE UNIVERSAL FILE (XDEF) IS CHANGED REQUIRES
THAT EVERY EXEC MODULE BE EDITED.

[End of TCO 5.1454]


TOPS20 Change Order Number 5.1455

Written by: CHALL		14-Aug-81 18:28:19

Edit checked: YES			   Document: NO
  TCO Tested: YES		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXECSU

Related TCO's:
Related SPR's: 


Problem: PIOFF/PION, IF CALLED WHILE PROCESSING A CONTROL-C, CAN HANG THE
EXEC.

Diagnosis: WHILE CONTROL-C PROCESSING THE DID-I-SEE-A-CONTROL-C FLAGS
CTLCF1 AND CTLCF2 ARE SET. THE PION ROUTINE LOOKS AT CTLCF1; IF IT IS
ON IT JUMPS TO THE CONTROL-C PROCESSING ROUTINE. RESULT: LOOP.

NOTE: THIS IS WHY CONTROL-C-ING A PCL COMMAND HUNG THE EXEC. PIOFF/PION
WAS RECENTLY ADDED TO A ROUTINE CALLED BY THE PCL CONTROL-C CODE (TCO 5.1404).
THE REST IS HISTORY.

Solution: HAVE PIOFF CLEAR THE TWO CONTROL-C FLAGS.

[End of TCO 5.1455]


TOPS20 Change Order Number 5.1456

Written by: CHALL		14-Aug-81 18:31:27

Edit checked: YES			   Document: YES
  TCO Tested: YES		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXECQU

Related TCO's:
Related SPR's: 


Problem: THE "MODIFY MUMBLE" COMMAND DOESN'T TELL ABOUT ALL ITS OPTIONS.
"*" IS LEGAL IN THE JOB NUMBER FIELD, TO REPRESENT ALL JOBS.

Diagnosis: 

Solution: ADD SOME NOISE ABOUT "*".

ALERT: "MODIFY PRINT *" MEANS MODIFY *ALL* THE PRINTER JOBS IN THE DESIRED
WAY. IS THE USER IS NOT ENABLED IT WILL CHANGE ONLY HIS JOBS, SINCE THAT'S
ALL HE CAN LEGALLY DO. BUT IF HE'S ENABLED EVERY BLOOMING JOB WILL BE MODIFIED.
THIS DANGER SHOULD BE MADE CLEAR.

[End of TCO 5.1456]


TOPS20 Change Order Number 5.1459

Written by: CHALL		26-Aug-81 16:15:20

Edit checked: YES			   Document: YES
  TCO Tested: YES		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXECMI

Related TCO's:
Related SPR's: 


Problem: MIC DOESN'T BEHAVE LIKE IT DOES ON TOPS-10.

Diagnosis: WELL, ONE PROBLEM, ANYWAY, IS THAT THE MIC FILE NAME SHOULD
DEFAULT TO "MIC" AS WELL AS THE EXTENSION. IE, DO<CR> SHOULD TAKE COMMANDS
FROM MIC.MIC, IF THERE'S SUCH A FILE IN THE USER'S SEARCH LIST.

Solution: CHANGE THE LUUO WHICH SETS UP THE DEFAULT EXTENSION IN THE 
GTJFN BLOCK, AT LABEL .DO: IN EXECMI, TO BE CODE WHICH SETS UP THE 
DEFAULT FILE NAME AND EXTENSION (BOTH TO "MIC", OF COURSE).

[End of TCO 5.1459]


TOPS20 Change Order Number 5.1463

Written by: CHALL		27-Aug-81 09:35:34

Edit checked: YES			   Document: NO
  TCO Tested: YES		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXECSE	EXECCA

Related TCO's:
Related SPR's: 


Problem: THE "SET DEFAULT PROGRAM" AND "SET NO DEFAULT PROGRAM"
COMMANDS SHOULD NOT EXIST WHEN MULTIFORKING IS TURNED OFF.

Diagnosis: 

Solution: MOVE THE "SET NO DEFAULT" OPTIONS TABLE FROM EXECSE TO EXECCA
AND SURROUND THE "PROGRAM" OPTION IN BOTH THE "DEFAULT" AND "NO DEFAULT"
TABLES WITH MFRK CONDITIONALS.

[End of TCO 5.1463]


TOPS20 Change Order Number 5.1464

Written by: CHALL		27-Aug-81 09:35:39

Edit checked: YES			   Document: NO
  TCO Tested: YES		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXECP	EXECCA

Related TCO's:
Related SPR's: 


Problem: THE FORK COMMAND TAKES DIFFERENT OPTIONS WHEN MULTIFORKING
IS TURNED ON AND WHEN IT IS TURNED OFF.

Diagnosis: 

Solution: MOVE THE FORK OPTIONS TABLE FROM EXECP TO EXECCA AND MAKE IT TWO
TABLES UNDER CONDITIONALS MFRK AND NOMFRK.

[End of TCO 5.1464]


TOPS20 Change Order Number 5.1465

Written by: CHALL		27-Aug-81 09:35:43

Edit checked: YES			   Document: NO
  TCO Tested: YES		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXECP	EXECCA

Related TCO's:
Related SPR's: 


Problem: THE OPTIONS AND PARSING FOR THE RESET COMMAND ARE DIFFERENT WHEN
MULTIFORKING IS TURNED ON AND WHEN IT IS TURNED OFF.

Diagnosis: 

Solution: MOVE THE CODE WHICH PARSES THE RESET COMMAND FROM EXECP TO
EXECCA AND PUT IT UNDER CONDITIONALS MFRK AND NOMFRK. CODE HAS TO BE
MOVED, NOT JUST THE OPTIONS TABLES, BECAUSE UNDER NOMFRK RESET JUST WANTS
TO CONFIRM, WHEREAS UNDER MFRK RESET CAN TAKE ARGUMENTS.

[End of TCO 5.1465]


TOPS20 Change Order Number 5.1466

Written by: CHALL		27-Aug-81 09:35:47

Edit checked: YES			   Document: NO
  TCO Tested: YES		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXECSU

Related TCO's:
Related SPR's: 


Problem: USING A PCL EXEC, IF YOU TYPE "ORIGINAL ?", THEN CONTROL-U,
THEN "?" YOU GET A LIST OF ORIGINAL COMMANDS. YOU SHOULD GET A LIST OF
COMMANDS AS MODIFIED BY PCL CONSTRUCTS.

Diagnosis: THE ORIGINAL COMMAND JUST SETS A FLAG (PCLDCO) AND GOES BACK
TO THE TOP-LEVEL COMMAND PARSER. IF THE COMMAND LINE IS RE-PARSED (AS FOR
A CONTROL-U) THE FLAG IS LEFT ON. ANY COMMAND YOU TYPE AFTER TYPING
"ORIGINAL ?", "CONTROL-U" WILL BE EXECUTED AS ORIGINAL INCORRECTLY.

Solution: IN THE REPARSE ROUTINE, REPARS:, IN EXECSU, CLEAR THE PCLDCO
FLAG.

[End of TCO 5.1466]


TOPS20 Change Order Number 5.1472

Written by: CHALL		27-Aug-81 09:36:15

Edit checked: YES			   Document: NO
  TCO Tested: YES		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXECPM

Related TCO's:
Related SPR's: 


Problem: PCL COMMANDS CONTAINING THE CONSTRUCT "DOCOMMAND MUMBLE TO FOO"
HANG THE EXEC.

Diagnosis: THE CODE AT PCEXC1 TRIES TO DO A BLT WHICH RESULTS IN AN ERROR
TRAP. THE ERROR ROUTINE TRIES TO CLEAN UP THE WORLD, AND IN THE PROCESS
TAKLEN (WHATEVER THAT IS) GETS SET TO 0, THEN -1. TAKLEN IS CHECKED BY
A SOJE, AND IF IT NEGATIVE THE EXEC LOOPS.

Solution: THE CODE AT PCEXC1 LOADS AC B, THEN (MAYBE) CALLS FIXIO, WHICH
MERRILY FRAGS B. THEREFORE, AFTER THE CALL TO FIXIO, RE-LOAD AC B.

[End of TCO 5.1472]


TOPS20 Change Order Number 5.1476

Written by: CHALL		27-Aug-81 09:36:36

Edit checked: YES			   Document: YES
  TCO Tested: YES		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXEC3

Related TCO's:
Related SPR's: 


Problem: THE VARIOUS FLAVORS OF DIRECTORY COMMANDS ARE HARD TO TELL APART

Diagnosis: CAN *YOU* TELL ME WHAT A VDIR DOES? REALLY?

Solution: MAKE THE NOISE FOR EACH DIRECTORY FLAVOR REFLECT THE KIND IF
DIRECTORY THE USER WILL GET. THE NOISE NOW READS AS FOLLOWS:

DIRECT		(OF FILES)
TDIRECT		(OF FILES BY WRITE DATE)
VDIRECT		(VERBOSE, OF FILES)
FDIRECT		(FULL, OF FILES)

ALSO, THERE ARE SOME DIRECTORY COMMANDS IN EXEC3 WHICH HAVE CODE, BUT CAN
BE INVOKED AT THIS TIME. FOR COMPLETENESS, THEIR NOISES ARE:

WDIRECT		(OF FILES BY WRITE DATE)	*
RDIRECT		(OF FILES BY CREATION DATE)
QDIRECT		(OF DELETED FILES)

WDIR IS SIMILAR TO TDIR, BUT DIFFERENT.

[End of TCO 5.1476]


TOPS20 Change Order Number 5.1477

Written by: GROUT		27-Aug-81 09:36:40

Edit checked: NO			   Document: NO
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXECSE

Related TCO's:
Related SPR's: 


Problem: SET NO UUO-SIMULATION fails with an illegal instruction trap
on an execute-only process.

Diagnosis: The SCVEC which attempts to set no uuo-simulation (and fails) has
no error handling.

Solution: Add an ERJMP CJERRE after the SCVEC (error mes is self-explanatory)

[End of TCO 5.1477]


TOPS20 Change Order Number 5.1480

Written by: CHALL		31-Aug-81 11:52:57

Edit checked: YES			   Document: NO
  TCO Tested: YES		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXECGL	EXECCA	EXECP

Related TCO's:
Related SPR's: 


Problem: TYPING "CONTINUE 0 ?" GIVES HELP WHICH SAYS TO TYPE A FORK NUMBER,
A COMMA, OR A CARRIAGE RETURN.

Diagnosis: AFTER AN ARGUMENT HAS BEEN TYPED TO "CONTINUE" THE CODE WANTS
TO ALLOW ONLY COMMA OR CARRIAGE RETURN. IT DOES TWO HRRZ T2,(T2)'S TO GET
RID OF THE FIRST TWO OPTIONS. UNFORTUNATELY, THERE ARE THREE OPTIONS TO
GET RID OF. ALSO, IN THE NON-MULTIFORKING CASE THERE ARE ONLY TWO OPTIONS
TOTAL.

Solution: DEFINE ANOTHER CONTINUE OPTIONS TABLE, $CONT1, IN EXECCA, WHICH
CONTAINS THE OPTIONS TO BE USER AFTER THE FIRST ARGUMENT HAS BEEN TYPED.
FOR MULTIFORKING THAT TABLE CONTAINS "," AND <CR>; FOR NON-MULTIFORKING,
JUST <CR>. REPLACE THOSE HORRIBLE HRRZ'S WITH A FRIENDLY MOVEI.

[End of TCO 5.1480]


TOPS20 Change Order Number 5.1483

Written by: CHALL		 1-Sep-81 18:00:43

Edit checked: YES			   Document: NO
  TCO Tested: YES		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXEC0

Related TCO's:
Related SPR's: 


Problem: "SYS:" OR "SYS:X" TYPED TO THE EXEC GETS "INVALID SYSTAT ARGUMENT"
ERRORS WHEN THE USER KNOWS FULL WELL THAT HE TYPED A DEVICE NAME.

Diagnosis: IF SYS:XX IS AN INVALID FILESPEC IT DISPATCHES TO THE SYSTAT
ROUTINE. ":" IS AN INVALID ARG FOR SYSTAT, SO A SYSTAT-FLAVORED ERROR IS
GENERATED.

Solution: KLUGE THE SYSTAT ERROR ROUTINE SO THAT IF THE USER TYPED "SYS:"
AS THE START OF HIS COMMAND THEN MAKE THE ERROR MESSAGE READ "UNRECOGNIZED
COMMAND", WHICH IS MORE TO THE POINT.

[End of TCO 5.1483]


TOPS20 Change Order Number 5.1488

Written by: GROUT		 3-Sep-81 15:13:31

Edit checked: NO			   Document: NO
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXECED

Related TCO's:
Related SPR's: 


Problem: EDIT /RUN:foobar works with any file as foobar.

Diagnosis: File spec is parsed with a .CMOFI FDB.

Solution: Parse it with a .CMIFI FDB instead.

[End of TCO 5.1488]


TOPS20 Change Order Number 5.1489

Written by: TILLSON		 3-Sep-81 18:23:01

Edit checked: NO			   Document: NO
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXECQU

Related TCO's:
Related SPR's: 


Problem: CANCEL RETRIEVE ? doesn't tell about * to cancel all requests.
Same for other CANCEL flavors.


Diagnosis: Help text passed to COMND incomplete.


Solution: Add appropriate information to help text


[End of TCO 5.1489]


TOPS20 Change Order Number 5.1492

Written by: CHALL		 9-Sep-81 09:39:14

Edit checked: YES			   Document: NO
  TCO Tested: YES		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXECMT

Related TCO's:
Related SPR's: 


Problem: THE BACKSPACE COMMAND DOESN'T WAIT FOR A CONFIRM WHEN THE "FILES"
OR "RECORDS" KEYWORDS ARE RECOGNIZED WITH AN ESCAPE.

Diagnosis: THE CODE AT $BACKS (IN EXECMT) DOESN'T PICK UP THE CONFIRM

Solution: PUT ONEWRD FLAGS ON THE BACKSPACE KEYWORD TABLE ENTRIES

[End of TCO 5.1492]


TOPS20 Change Order Number 5.1493

Written by: CHALL		 9-Sep-81 09:41:45

Edit checked: YES			   Document: NO
  TCO Tested: YES		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXECSU

Related TCO's:
Related SPR's: 


Problem: IF YOU'RE IN FORK 0 AND TYPE A CONTROL-T THERE IS NO SPACE BETWEEN
THE TIME AND THE WORD "RUNNING".

Diagnosis: THE CONTROL-T CODE THOUGHT THERE'D ALWAYS BE SOMETHING TO SAY
ABOUT THE CURRENT PROGRAM, BUT IN FORK 0 THAT FIELD IS SKIPPED.

Solution: FORCE A SPACE AFTER THE PROGRAM-RUNNING FIELD RATHER THAN INCLUDING
IT IN THE PROGRAM STRINGS.

[End of TCO 5.1493]


TOPS20 Change Order Number 5.1496

Written by: GROUT		 9-Sep-81 14:17:43

Edit checked: NO			   Document: NO
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXECSU

Related TCO's:
Related SPR's: 


Problem: /AFTER:800 WHEN IT'S PAST 8:00 AM STILL DOES AFTER TODAY AT 8:00 AM.

Diagnosis: COMND defaults the date typed in as today's date, and the date-time
input routines don't fix up this case, even though they are called with a time
sense (so they know which way, if any, to fix up the time).

Solution: Make the date-time input routines fix up the time if no explicit date
or day is typed and if there is a time sense (future or past) to do it with
respect to.

[End of TCO 5.1496]


TOPS20 Change Order Number 5.1497

Written by: GROUT		 9-Sep-81 15:23:30

Edit checked: NO			   Document: NO
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXECSU

Related TCO's:
Related SPR's: 


Problem: Infinite illegal instruction trap messages

Diagnosis: If location 41 gets trashed, in some circumstances it isn't restored
early enough, so ERROR UUO loops

Solution: Restore location 41 earlier, at ILIPSI.

[End of TCO 5.1497]


TOPS20 Change Order Number 5.1500

Written by: CHALL		10-Sep-81 14:00:19

Edit checked: YES			   Document: NO
  TCO Tested: YES		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXECP

Related TCO's:
Related SPR's: 


Problem: RUN A PROGRAM IN A NON-0 SECTION, CONTROL-C IT, AND TYPE DDT.
DDT DIES WITH AN "ILLEGAL OPCODE OF 0,,0 AT 4,,770000" MESSAGE (IF THE
PROGRAM WAS IN SECTION 4).

Diagnosis: DDT IS BEING LOADED INTO SECTION ZERO BECAUSE NO ONE BOTHERED
TO SET UP CODSEC IN THE FORK TABLE WITH THE SECTION NUMBER. THE SIMILAR CASE
OF "@GET PROGRAM, @DDT" SUCCEEDS BECAUSE THE CODE AT GET1: (IN EXECP) DOES
SET UP CODSEC.

Solution: MOVE THE SECTION-SET-UPPING CODE FROM GET1: TO UNDER $GET0: AND
$GET2: (WHICH ARE THE ENTRY POINTS FOR GETTING ANY PROGRAM). NOW CODSEC IS
SET UP ANY TIME SOMETHING IS GETTED AND CODSEC IS -1.

[End of TCO 5.1500]


TOPS20 Change Order Number 5.1504

Written by: CHALL		14-Sep-81 11:07:07

Edit checked: YES			   Document: NO
  TCO Tested: YES		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXECP

Related TCO's:
Related SPR's: 


Problem: IF A KEPT-CONTINUE FORK IS RUN, ARGUMENTS TO IT GET LOST. IE, IF
YOU TYPE "MS SEN CHALL" AND MS IS KEPT, THE SEND CHALL DROPS THROUGH THE
CRACKS.

Diagnosis: THE ARGUMENT IS SET UP BY THE EXEC ALL RIGHT, BUT IT FORGETS TO
SEND THE STRING TO THE MONITOR'S RESCAN BUFFER.

Solution: HAVE THE CODE AT ..CONT: JUMP TO WAITR INSTEAD OF WAITF.
WAITR MERELY CALLS CRSCAN TO DO THE RSCAN JSYS AND FLOWS INTO WAITF.

THIS TCO DOES THE SAME THING AS TCO 6.1003, WHICH WAS NEVER RETROFITTED 
INTO VERSION 5. SIGH.

[End of TCO 5.1504]


TOPS20 Change Order Number 5.1518

Written by: CHALL		21-Sep-81 08:23:52

Edit checked: YES			   Document: NO
  TCO Tested: YES		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXECSU

Related TCO's:
Related SPR's: 


Problem: WHEN A PCL COMMAND IS CONTROL-C'ED IT GIVES THE USER A MESSAGE
TO THAT EFFECT.

Diagnosis: USERS COMPLAIN THAT THE MESSAGE MAKES PCL COMMANDS LOOK UNLIKE
NORMAL COMMANDS; WHEN THE COMMAND ENDS THE EXEC SHOULD JUST PROMPT THE USER.

Solution: REMOVE THE "^C OF PCL ..." MESSAGE.

[End of TCO 5.1518]


TOPS20 Change Order Number 5.1519

Written by: CHALL		21-Sep-81 08:28:57

Edit checked: YES			   Document: NO
  TCO Tested: YES		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXECP

Related TCO's:
Related SPR's: 


Problem: IF THE USER IS ENABLED, TYPING "FREEZE 0" RESULTS IN A MONITOR ERROR.

Diagnosis: THE SUBROUTINE THAT COLLECTS THE FORK NAME ALLOWS THE RANGE 0-777,
EVENT THOUGH THE FREEZE COMMAND ALLOWS ONLY 1-777. 

Solution: THE SUBROUTINE'S RANGE CHECK IS CORRECT SINCE IT IS USED FOR THE FORK
COMMAND, ETC. SO IN THE FREEZE COMMAND (.FREEZ) CHECK SPECIALLY FOR FORK = 0 AND
GIVE THE "MUST BE IN 1-777" ERROR.

[End of TCO 5.1519]


TOPS20 Change Order Number 5.1520

Written by: CHALL		21-Sep-81 08:32:10

Edit checked: YES			   Document: NO
  TCO Tested: YES		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXECCS

Related TCO's:
Related SPR's: 


Problem: THE EXEC ALLOWS FILE NAMES FOR COMPILE-CLASS COMMANDS TO BE UP TO
7 (NOT 6) CHARACTERS. COMPILERS (EXCEPT MACRO) CHOKE ON A 7-CHARACTER NAME.

Diagnosis: TYPO.

Solution: AT GTASC: CHANGE THE "7" FOR THE LENGTH OF A FILE NAME TO "6" (THE 
"7" FOR DEVICE NAME IS O.K. BECAUSE IT INCLUDES THE ":"; SIMILARLY THE "4"
FOR EXTENSION INCLUDES THE ".").

[End of TCO 5.1520]


TOPS20 Change Order Number 5.1521

Written by: CHALL		21-Sep-81 08:54:11

Edit checked: YES			   Document: YES
  TCO Tested: YES		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXEC0

Related TCO's:
Related SPR's: 


Problem: A NEW TABLE OF FORK STATISTICS WAS INVENTED, AND OUGHT TO BE TYPED
OUT IN AN "INFO SUBSYS". IT'S THE SCOUNTS TABLE, WHICH HOLDS THE NUMBER OF 
SETSN JSYS'S THAT HAVE BEEN DONE FOR THAT SUBSYSTEM.

Diagnosis: SCOUNTS CAN BE A USEFUL STATISTIC SINCE IT RELATES TO THE NUMBER
OF TIMES A SUBSYSTEM PROGRAM HAS BEEN RUN.

Solution: ADD SCOUNTS TO THE "INFO SUBSYS" OUTPUT. NOTE: THE EXEC DOES A SETSN
EVERY TIME AN INFERIOR FORK HAS STOPPED RUNNING (AND OTHER TIMES, TOO) TO SET
THE NAME BACK TO "EXEC". THEREFORE THE SCOUNT FOR THE EXEC IS EXTREMELY HIGH,
AND IS MEANINGLESS AS A REFLECTION OF THE NUMBER OF TIMES THE EXEC HAS BEEN
RUN. THEREFORE OMIT THE SCOUNT NUMBER FOR THE EXEC (OUTPUT BLANKS INSTEAD).

[End of TCO 5.1521]


TOPS20 Change Order Number 5.1524

Written by: CHALL		21-Sep-81 14:51:40

Edit checked: YES			   Document: NO
  TCO Tested: YES		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXECIN

Related TCO's:
Related SPR's: 


Problem: THE HELP TEXT FOR THE "INFO FILE" COMMAND IS "OCTAL JFN NUMBER OR
BLANK FOR ALL" SHOULD BE "... OR CARRIAGE RETURN FOR ALL" SINCE BLANKS ARE
NOT MEANINGFUL.

Diagnosis: 

Solution: MAKE THE CHANGE, AT .FILST: IN EXECIN

[End of TCO 5.1524]


TOPS20 Change Order Number 5.1525

Written by: CHALL		21-Sep-81 14:54:20

Edit checked: YES			   Document: NO
  TCO Tested: YES		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXECIN

Related TCO's:
Related SPR's: 


Problem: "INFO DECNET" FORGETS TO OUTPUT A "," AFTER THE LAST NODE ON EACH LINE
OF OUTPUT. THIS CAN CONFUSE PCL COMMANDS (AND OTHER THINGS) THAT WANT A COMMA
BETWEEN EACH NODE.

Diagnosis: THE ROUTINE BEFORE: IN EXECIN JUST OUTPUTS A <CR><SPACE> WHEN IT
THINKS IT'S AT THE END OF THE LINE.

Solution: MAKE BEFORE: OUTPUT A <,><CR><SPACE> AT THE END OF THE LINE.

NOTE: THIS CHANGE ALSO AFFECTS THE "INFO AVAIL LINES" AND "INFO AVAIL DEV"
COMMANDS.

[End of TCO 5.1525]


TOPS20 Change Order Number 5.1532

Written by: CHALL		24-Sep-81 14:56:20

Edit checked: YES			   Document: YES
  TCO Tested: YES		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXECIN

Related TCO's:
Related SPR's: 


Problem: WHEN "INFO DECNET NODES" TYPES OUT A LOT OF NODES THE LIST
IS HARD TO READ.

Diagnosis: THE LIST SHOULD BE SORTED.

Solution: RE-WRITE THE CODE AT .DNTOP: TO OUTPUT A SORTED LIST OF NODES.
ALSO, CHANGE THE INDICATION OF THE CURRENT NODE FROM "*KL2102" (WHICH IS 
HARD TO FIND AND TAKES AN INCREDIBLE AMOUNT OF PROCESSING TO OUTPUT) TO
A LINE WHICH SAYS "Local DECNET Node: KL2102".

[End of TCO 5.1532]


TOPS20 Change Order Number 5.1539

Written by: CHALL		28-Sep-81 13:43:50

Edit checked: NO			   Document: NO
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXECCS

Related TCO's:
Related SPR's: 


Problem: IN THE COMPILE-CLASS COMMANDS, THE MESSAGES "%SOURCE FILE MISSING"
AND "%OBJECT FILE MISSING" SHOULD BEGIN WITH "?"S SO AS TO BE FATAL TO BATCH
STREAMS (THE COMPILERS GIVE A FATAL MESSAGE ON MISSING FILES, SO THIS 
PROPOSAL MAKES THINGS CONSISTENT).

Diagnosis: 

Solution: CHANGE THE TWO "%"S TO "?"S (AT P1SRC1: AND PASS2: IN EXECCS).

[End of TCO 5.1539]


TOPS20 Change Order Number 5.1540

Written by: CHALL		28-Sep-81 13:54:02

Edit checked: NO			   Document: NO
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXECDE	EXECED

Related TCO's:
Related SPR's: 


Problem: THERE'S CODE UNDER XTND IN EXECED, SUPPORTING EMACS, WHICH OUGHT
TO BE TURNED ON ALL THE TIME (IF YOU'VE GOT EMACS).

Diagnosis: 

Solution: CREATE A NEW CONDITIONAL, EMCSSW, IN EXECDE (DEFAULT: OFF), AND
CHANGE THE XTND'S IN EXECED TO EMCS'S.

[End of TCO 5.1540]


TOPS20 Change Order Number 5.1542

Written by: CHALL		28-Sep-81 13:57:04

Edit checked: NO			   Document: NO
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXECDE

Related TCO's:
Related SPR's: 


Problem: THE EMCSSW AND MICSW SWITCHES IN EXECDE SHOULD BE TURNED OFF FOR
THE DISTRIBUTED EXEC BUT ON FOR KL2102.

Diagnosis: 

Solution: MAKE THE DEFAULT SETTINGS OF EMCSSW AND MICSW BE OFF, AND CREATE
A NEW FILE: EXECD1.MAC, WHICH IS ASSEMBLED WITH EXECDE, AND WHICH TURNS
THOSE SWITCHES ON. EXECD1 IS NOT INTENDED TO BE DISTRIBUTED.

CHANGE ASEXEC.CMD TO USE EXECD1 IN ASSEMBLING EXECDE.

[End of TCO 5.1542]


TOPS20 Change Order Number 5.1543

Written by: CHALL		28-Sep-81 14:49:20

Edit checked: NO			   Document: NO
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXECP

Related TCO's:
Related SPR's: 


Problem: IF YOU TYPE "SAVE$" YOU GET JUST A SPACE; THE (ON FILE) NOISE
HAS GONE AWAY. THE SAME APPLIES TO CSAVE.

Diagnosis: ACTUALLY, THE (ON FILE) NOISE IS DEFERRED UNTIL AFTER THE USER
TYPES THE /ENV OR /EXEC SWITCH. IF HE JUST TYPES A FILE NAME HE GETS NO NOISE.
BUT TYPING A FILE NAME IS THE MOST FREQUENT USE OF THE SAVE COMMAND, SO IT
LOOKS WRONG NOT TO GET THE NOISE.

Solution: PUT THE (ON FILE) BACK. THIS MEANS THE USER CAN TYPE "SAV$/ENV$"
AND GET "SAVE (ON FILE) /ENVIRONMENT (ON FILE)" BUT, TOUGH.

IRRELEVANT NOTE: THE /ENV AND /EXEC SWITCHES ARE OUT OF PLACE IN THE SAVE 
COMMAND. THE FORMER SHOULD BE MOVED TO A NEW COMMAND (LIKE @STORE, SAY)
AND THE LATTER SHOULD BE ELIMINATED.

[End of TCO 5.1543]


TOPS20 Change Order Number 5.1550

Written by: CHALL		30-Sep-81 10:50:30

Edit checked: YES			   Document: NO
  TCO Tested: YES		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXECIN

Related TCO's:
Related SPR's: 


Problem: THE LIST OF DECNET NODES FROM "I DEC" WOULD BE MORE READABLE IF
THERE WERE TABS BETWEEN EACH NODE INSTEAD OF SPACES.

Diagnosis: "I DEC" CALLS THE BEFORE: SUBROUTINE IN EXECIN TO OUTPUT A
COMMA AND SPACE AND TO SEE IF THE LINE IS TOO LONG. BEFORE: IS ALSO CALLED
BY OTHER ROUTINES WHICH WANT A COMMA-SPACE (NOT A TAB), SO IT SHOULDN'T BE
BASHED.

Solution: MAKE BEFORE: TEST THE F2 FLAG IN AC Z. IF ON, OUTPUT A TAB; IF
OFF OUTPUT A COMMA-SPACE. SET F2 IN .DNTOP: (WHICH HANDLES "I DEC") TO
GET THE COMMAS.

[End of TCO 5.1550]


TOPS20 Change Order Number 5.1560

Written by: CHALL		 7-Oct-81 08:42:50

Edit checked: YES			   Document: NO
  TCO Tested: YES		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXECCS

Related TCO's:
Related SPR's: 


Problem: THERE WILL NEED TO BE A WAY TO DIFFERENTIATE BETWEEN THE 
COBOL-68 AND COBOL-74 COMPILERS

Diagnosis: 

Solution: ADD NEW ENTRIES TO THE COMPILER LANGUAGES TABLE: FOR COMPILER
CBL68 (FOR A FILE WITH EXTENSION .C68 OR .68C) AND FOR COMPILER CBL74
(EXTENSION .C74 RO .74C). ([COBOL, .CBL] IS STILL THERE).

[End of TCO 5.1560]


TOPS20 Change Order Number 5.1563

Written by: CHALL		 8-Oct-81 09:58:29

Edit checked: YES			   Document: NO
  TCO Tested: YES		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXEC1

Related TCO's:
Related SPR's: 


Problem: CONNECTING TO A DIRECTORY ON A STRUCTURE WHICH IS NOT MOUNTED
GIVES A "NO SUCH DIRECTORY" MESSAGE. THIS IS MISLEADING, SINCE THE 
DIRECTORY REALLY DOES EXIST; THE MESSAGE SHOULD SAY "STRUCTURE NOT MOUNTED"
IN THIS CASE

Diagnosis: IT SEEMS THE EXEC CAN'T DISTINGUISH BETWEEN THE NO SUCH DIRECTORY 
CASE AND THE STRUCTURE IS NOT MOUNTED CASE, SINCE IT PARSES THE DIRECTORY NAME
USING A COMND, WHICH DOESN'T TELL THE CALLER WHY IT FAILED.

Solution: THEREFORE JUST CHANGE THE ERROR MESSAGE FOR A LOSING CONNECT
(AT .CONNE IN EXEC1) TO "NO SUCH DIRECTORY OR STRUCTURE NOT MOUNTED".

[End of TCO 5.1563]


TOPS20 Change Order Number 5.1564

Written by: CHALL		 8-Oct-81 10:06:42

Edit checked: YES			   Document: NO
  TCO Tested: YES		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXECCA	EXECGL	EXECP	EXECPM

Related TCO's:
Related SPR's: 


Problem: THE SAVE/ENVIRONMENT AND SAVE/EXEC COMMAND/SWITCHES ARE POOR SYNTAX.
EACH SWITCH CHANGES THE BEHAVIOR OF THE SAVE COMMAND, RATHER THAN MODIFYING
IT. THEY SHOULD BE SEPARATE COMMANDS.

Diagnosis:  

Solution: SO CHANGE SAVE/ENV TO BE "PRESERVE ENVIRONMENT" AND SAVE/EXEC TO BE
"PRESERVE EXEC".

NOTE: PRESERVE IS A PCL COMMAND, AND IS TURNED OFF IN THE RELEASED VERSION 5
EXEC.

[End of TCO 5.1564]


TOPS20 Change Order Number 5.1567

Written by: GROUT		13-Oct-81 10:24:51

Edit checked: NO			   Document: NO
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXECCS

Related TCO's:	5.1571	5.1140
Related SPR's: 


Problem: /LANGUAGE-SWITCHES doesn't work when it's a file switch and is the
last thing on the line; also, unnecessary break masks left over from old code
at RDQS.

Diagnosis: Changes to make /LANGUAGE-SWITCHES work as a global switch involved
rewriting quoted string handling to be less kludgey, but the new code at RDQS
doesn't set flag F%CMOK, and so end-of-spec fixups at RDCMA1 are skipped when
the switch was the last thing on a line, so the switch is effectively ignored.
Also, the old break masks were forgotten.

Solution: Set flag F%CMOK at RDQS to insure fixups at RDCMA1; also, delete the
unused break masks.

[End of TCO 5.1567]


TOPS20 Change Order Number 5.1568

Written by: GROUT		13-Oct-81 10:27:10

Edit checked: NO			   Document: NO
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXECCS

Related TCO's:
Related SPR's: 


Problem: Global language switches (/ALGOL, etc.) are overriden by file
extensions in determining the translator to use.

Diagnosis: Code is written to do this.

Solution: Make a global language switch override file extensions (except .REL)
in determining which translator to use.

[End of TCO 5.1568]


TOPS20 Change Order Number 5.1569

Written by: GROUT		13-Oct-81 10:38:14

Edit checked: NO			   Document: NO
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXECCS	EXECGL	EXECPR

Related TCO's:
Related SPR's: 


Problem: Several SET DEFAULT COMPILE-SWITCHES on different file types,
followed by a SET NO DEFAULT COMPILE-SWITCHES on one before the last one,
followed by a SET DEFAULT COMPILE-SWITCHES on a new file type, causes the
last existing file type to be deleted, and effectively breaks the use of
SET DEFAULT COMPILE-SWITCHES until all entries are deleted.

Diagnosis: Allocation for the file types and their associated switches is
done by allocating slot N, where N is the new number of file types, in two
private storage areas; but when deletion is done of any file type except the
one in slot N, the program implicitly assumes that slot N was freed, and
overwrites it on a new allocation attempt, screwing everything up.

Solution: Stop using private storage areas for extension and switch string
storage: use EXEC permanent free space instead.  Delete the now-unused private
storage areas.

[End of TCO 5.1569]


TOPS20 Change Order Number 5.1571

Written by: GROUT		13-Oct-81 10:44:28

Edit checked: NO			   Document: NO
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXECCS

Related TCO's:	5.1567	5.1140
Related SPR's: 


Problem: /LANGUAGE-SWITCHES doesn't work with SET DEFAULT COMPILE-SWITCHES.

Diagnosis: The code for reading in default switches from storage doesn't
take into account that something else might actually want to look at quoted
strings being read in: it blithely parses quoted strings and ignores them.

Solution: Change the code to copy quoted strings to temporary free space and
store a pointer in SAVQS to the copied string, so that the /LANGUAGE-SWITCHES
handling routine can store the string pointer.

[End of TCO 5.1571]


TOPS20 Change Order Number 5.1572

Written by: GROUT		13-Oct-81 10:58:23

Edit checked: NO			   Document: NO
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXECCS

Related TCO's:
Related SPR's: 


Problem: INFORMATION DEFAULT COMPILE-SWITCHES types out:

SET DEFAULT COMPILER-SWITCHES ...


Diagnosis: Somebody forgot to change all vestiges of COMPILER-SWITCHES to
COMPILE-SWITCHES.

Solution: Fix it.

[End of TCO 5.1572]


TOPS20 Change Order Number 5.1577

Written by: GROUT		15-Oct-81 12:12:07

Edit checked: NO			   Document: NO
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXECCS

Related TCO's:
Related SPR's: 


Problem: Typing "LOAD /switch + ?" throws the EXEC into an infinite, but
interruptible, garbage typing loop.

Diagnosis: TPLUS and TCOMM are calling COMIN without a .CMCFM FDB at top of
chain; but COMIN assumes there is one, and takes the top FDB off the chain
whenever a CRLF isn't legal, causing chaos for TPLUS (0 is the FDB address),
and lossage for TCOMM (no .CMFIL after comma).

Solution: Add a new entry point to COMIN past the CRLF check, COMIN1, and
have TPLUS and TCOMM call there instead.

[End of TCO 5.1577]


TOPS20 Change Order Number 5.1578

Written by: GROUT		15-Oct-81 12:14:10

Edit checked: NO			   Document: NO
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXECSU	EXEC0	EXECGL

Related TCO's:
Related SPR's: 


Problem: Internal error causing a "?Invalid CMBFP pointer" infinite loop

Diagnosis: The code at EOFJER never protects against a broken CSB.

Solution: Call CMDINI on an IOX4 error (EOF) at EOFJER.

[End of TCO 5.1578]


TOPS20 Change Order Number 5.1582

Written by: CHALL		15-Oct-81 20:07:15

Edit checked: YES			   Document: NO
  TCO Tested: YES		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXECCS

Related TCO's:
Related SPR's: 


Problem: YOU CAN SET DEFAULT COMPILE-SWITCHES FOR ".", BUT AN ATTEMPT TO CANCEL
THEM WITH "SET NO DEFAULT COMPIL-SWITCHES ." FAILS.

Diagnosis: THE CODE AT .SNDCS DOESN'T TAKE THE FACT THAT "." IS LEGAL (AND NOT
PARSED AS A KEYWORD) INTO CONSIDERATION.

Solution: ADD "." HANDLING AS A SPECIAL CASE IN .SNDCS.

[End of TCO 5.1582]


TOPS20 Change Order Number 5.1583

Written by: CHALL		15-Oct-81 20:10:26

Edit checked: YES			   Document: NO
  TCO Tested: YES		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXECIN	EXECGL	EXECCA

Related TCO's:
Related SPR's: 


Problem: ON A NON-MULTIFORKING EXEC, "INFO DEFAULT PROGRAM" IS A LEGAL COMMAND,
BUT THERE IS NO "SET DEFAULT PROGRAM".

Diagnosis: OOPS. "INFO DEF PROG" IS A MULTIFORKING COMMAND WHICH SHOULD NOT
EXIST WITHOUT MULTIFORKING.

Solution: MOVE $DEF:, THE KEYWORD TABLE FOR "INFO DEF" FROM EXECIN TO EXECCA,
AND SURROUND THE "PROGRAM" OPTION WITH THE MFRK CONDITIONAL. ADD $DEF AND THE
DISPATCH LABELS IN THE TABLE TO THE GLOBALS IN EXECGL.

[End of TCO 5.1583]


TOPS20 Change Order Number 5.1584

Written by: CHALL		15-Oct-81 20:11:49

Edit checked: NO			   Document: NO
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXECIN

Related TCO's:
Related SPR's: 


Problem:  

Diagnosis:  

Solution: (THIS TCO DUPLICATED ANOTHER TCO, AND HAS BEEN DELETED)

[End of TCO 5.1584]


TOPS20 Change Order Number 5.1602

Written by: CHALL		 3-Nov-81 09:21:06

Edit checked: YES			   Document: NO
  TCO Tested: YES		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXECSE

Related TCO's:
Related SPR's: 


Problem: "SET NO ALERT BEFORE MUMBLE" CANCELS ALL ALERTS IF IT CANCELS
ANY.

Diagnosis: 
THE NEXT ALERT TO BE TYPED ENDS UP TO BE ZERO, SO IT NEVER COMES
OUT. ALSO, THE NEXT + 1 ALERT IS NOT SET UP UNTIL THE NEXT ONE IS TYPED, SO
IT NEVER COMES OUT EITHER.

Solution: 
AFTER ALERTS ARE CANCELED IN THE "SET NO ALERT" CODE, SCAN THE WHOLE
TABLE, NOT JUST A SUBSET OF IT, FOR A NEW NEXT ALERT.

[End of TCO 5.1602]


TOPS20 Change Order Number 5.1603

Written by: CHALL		 3-Nov-81 10:20:58

Edit checked: NO			   Document: NO
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXECP

Related TCO's:
Related SPR's: 


Problem: OP-CODE 415 IS NAMED XHLLI IN THE TABLE IN EXECP. IT SHOULD
BE XMOVEI.

Diagnosis: 

Solution: CHANGE IT.

[End of TCO 5.1603]


TOPS20 Change Order Number 5.1606

Written by: CHALL		 5-Nov-81 15:48:29

Edit checked: NO			   Document: NO
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXECED

Related TCO's:
Related SPR's: 


Problem: THE EMACS CODE IN EXECED HANDLES THE CASE OF "EDIT<CR>"
WRONG.

Diagnosis: 

Solution: IN ROUTINE .EMCSA: (IN EXECED), JUST BEFORE THE "JRST ..CONT",
ADD "SETZM STAYF".

[End of TCO 5.1606]


TOPS20 Change Order Number 5.1613

Written by: MOSER		16-Nov-81 15:03:14

Edit checked: NO			   Document: YES
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXEC0

Related TCO's:
Related SPR's: 


Problem: Batch jobs requeued indefinatly.

Diagnosis: BATCH.CMD contains LOGOUT and when BATCON notices that the job is
gone it requeues it because it cannot understand why the job is logged out.

Solution: The solution also requires BATCON and CRJOB (monitor) changes.
For the EXEC look at B4 of word .CJEXF and if set simulate login.

[End of TCO 5.1613]


TOPS20 Change Order Number 5.1620

Written by: GROUT		 1-Dec-81 10:58:34

Edit checked: NO			   Document: NO
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXEC3

Related TCO's:
Related SPR's: 


Problem: DIRECTORY with one or more DATE subcommands sometimes compresses
directory lines for files with different selected dates onto the same line,
typing the last file's dates.

Diagnosis: A new directory line is supposed to be output for short directory
listings (the DIRECTORY entry point) only when the filetype or version changes
and all extra typeout on the line matches.  Only the left halves of the
appropriate date-times (in universal date-time format) are compared for DATe
subcommands, but the left half of the UDT corresponds exactly to the date only
in GMT.

Solution: Change each date-time to the local time zone before making
comparisons.

[End of TCO 5.1620]


TOPS20 Change Order Number 5.1638

Written by: GROUT		16-Dec-81 10:55:23

Edit checked: NO			   Document: YES
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXECSE

Related TCO's:
Related SPR's: 


Problem: SET TIME-LIMIT n sets the time limit to current run time plus n
cpu seconds; also, SET TIME-LIMIT -n, where n is greater than the current
run-time, sets an infinite time-limit for the job.

Diagnosis: The documentation, which seems to indicate that SET TIME-LIMIT n
sets the time-limit to n seconds, is incorrect.  Also, SET TIME-LIMIT accepts
a negative value, and if adding the current run-time to n yields a negative
result, the .TIMRT function of TIMER sets an infinite time-limit for the job.

Solution: Change the documentation to say that SET TIME-LIMIT n changes the
time-limit to the current run-time plus n seconds, and to say that SET
TIME-LIMIT 0 will cause an immediate time-out; also, indicate that SET
TIME-LIMIT will not accept a negative argument.  Change the code in the EXEC
to not accept a negative argument to SET TIME-LIMIT.  Note that batch is
unaffected by this, since batch jobs can't give SET TIME-LIMIT commands (in
their .CTL files) because the EXEC won't let them, and they can't set the
time-limit with the TIMER JSYS because another process (the EXEC) is already
timing the job.

[End of TCO 5.1638]


TOPS20 Change Order Number 5.1644

Written by: CHALL		28-Dec-81 10:58:29

Edit checked: NO			   Document: NO
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: YES

Program: EXEC
   Routines Affected:	ALL

Related TCO's:
Related SPR's: 


Problem: (NONE)

Diagnosis: 

Solution: UPDATE COPYRIGHT DATES

[End of TCO 5.1644]


TOPS20 Change Order Number 5.1654

Written by: GROUT		 6-Jan-82 12:08:33

Edit checked: NO			   Document: NO
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXECCS

Related TCO's:
Related SPR's: 


Problem: 
1.  Giving the specification FOO:BAR to EXECCS, with FOO: a logical name, can
cause files to be missed, because GTLANG, the routine which looks for the "best"
files, both source and object, to match a given specification, finds the files
by stepping FOO:BAR.*, which won't step after the first spec in the logical name
which has any files in it, due to the infamous GNJFN restriction.
2.  GTLANG will not look for .REL files outside the connected directory (or
DSK:) unless an object specification is given.  GTLANG also looks in the
connected directory and DSK: for .REL files even when neither is in the
corresponding source file's path.
3.  GTLANG will not place .REL files outside the connected directory even if
an explicit object specification is given: the device and directory fields input
(if any) are stripped, leading to ludicrous results if a non-directory device
is given for the object file.
4.  GTLANG usually will not work if DSK: is defined, even in the normal case of
it being connected directory, other directories.

Diagnosis: 
GTLANG should be rewritten.

Solution: 
Rewrite GTLANG to do the following: when no extension is given, search for files
with each extension in the standard extension table separately, using the
actual device and directory specified in the matching spec (i.e., with any
logical names unexpanded).  Also, change EXECCS's internal file descriptor
blocks, adding new fields to support the new information being provided by
GTLANG.

[End of TCO 5.1654]


TOPS20 Change Order Number 5.1668

Written by: CHALL		12-Jan-82 17:31:57

Edit checked: NO			   Document: NO
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXEC1

Related TCO's:
Related SPR's: 


Problem: "CLOSE 1?" gives "?Invalid help message pointer" message.

Diagnosis: No help message is set up, and the Exec gets confused.

Solution: In EXEC1, in .CLOSE, change "OCTX" to "OCTX <Octal JFN number>".

[End of TCO 5.1668]


TOPS20 Change Order Number 5.1670

Written by: KROSENBLUH		13-Jan-82 15:35:52

Edit checked: NO			   Document: YES
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: YES

Program: EXEC

Related TCO's:
Related SPR's: 


Problem: /LIMIT switch for punch, card-reader and plotter has no effect.

Diagnosis: The limit is being put into wrong place.

Solution: Put limit into right place. This tco to the exec supports edit
# 374 to version 4 of QUASAR.
[End of TCO 5.1670]


TOPS20 Change Order Number 5.1671

Written by: TILLSON		13-Jan-82 15:45:37

Edit checked: NO			   Document: NO
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXEC2

Related TCO's:
Related SPR's: 


Problem: On an EXEC COPY command the user settable word (.fbusw) in the 
file's FDB is not copied.

Diagnosis: TCO 4.2261 was never installed in release 5.


Solution: Install TCO 4.2261 to copy the user settable word.


[End of TCO 5.1671]


TOPS20 Change Order Number 5.1698

Written by: CHALL		22-Jan-82 14:42:31

Edit checked: NO			   Document: YES
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXEC1

Related TCO's:
Related SPR's: 


Problem: It will become desirable to move the "LOGGING OUTPUT ON" option
of the TAKE command from the command line to a subcommand.

Diagnosis: To make the transition gradual, the subcommand will be added
to release 5, and the option will be removed in release 6. Thus for release
5, the user will be able to type "TAKE FOO FOO.LOG" or "TAKE FOO,<CR>
LOG-FILE FOO.LOG" to achieve the same result. In release 6 only the latter
method will remain.

Solution: Add the LOG-FILE subcommand to the TAKE command. It takes as
an argument the filespec (default extension .LOG) in which to save the 
output from the TAKE command.

[End of TCO 5.1698]


TOPS20 Change Order Number 5.1700

Written by: CHALL		22-Jan-82 16:26:48

Edit checked: NO			   Document: YES
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXEC0

Related TCO's:
Related SPR's: 


Problem: Terminal types VT125 and VK100 need to be defined.

Diagnosis: 

Solution: Define them (so there!). Now TERMINAL VT125 and TERMINAL TYPE VT125
will work; similarly with VK100.

[End of TCO 5.1700]


TOPS20 Change Order Number 5.1701

Written by: TILLSON		25-Jan-82 17:02:17

Edit checked: NO			   Document: NO
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXEC2

Related TCO's:
Related SPR's: 


Problem: ANSI and EBCDIC labelled tapes do not COPY correctly.

Diagnosis: Coding error in TCO 5.1178 (A MOVE should have been a HRRZ).


Solution: Fix it.


[End of TCO 5.1701]


TOPS20 Change Order Number 5.1707

Written by: WALLACE		27-Jan-82 18:36:12

Edit checked: NO			   Document: NO
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXECP

Related TCO's:
Related SPR's: 


Problem: If entry vector of a fork is in a non-zero section, all START
commands specifying octal addresses that do not have section numbers
cause the EXEC to start the fork in the section of the entry vector.
That is to say, you cannot start a fork in section zero if its entry
vector is in another section.

Diagnosis: The EXEC tests if a non-zero section number is given in the
start address given by the user, in which case the EXEC uses the
XSFRK% JSYS.  If the section number is zero, the EXEC uses the SFORK%
JSYS.  SFORK% takes a section-relative PC and always starts the fork
in the section of its entry vector.

Solution: Change EXEC to always use XSFRK%.  If the user is going to
the trouble of typing the start address, then the user can make sure
to specify a proper section number.  If no section number is given
then section zero will be used.

[End of TCO 5.1707]


TOPS20 Change Order Number 5.1708

Written by: GROUT		28-Jan-82 11:25:01

Edit checked: NO			   Document: NO
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXECQU

Related TCO's:
Related SPR's: 


Problem: SUBMIT (or PRINT, PUNCH, etc.) FOO.BAR /JOBNAME:? yields a message
"Name of request, six characters or less, or * to cancel all requests".
Also, it is legal to type one, two, or more commas in a row in a queue-class
command.

Diagnosis: Previous change for CANCEL/MODIFY also change the /JOBNAME switch'
by mistake.  Also, a .CMCMA FDB is on the chain after a comma is typed for
no apparent reason.

Solution: Provide two different help messages for reading the jobname after the
/JOBNAME switch and after CANCEL/MODIFY.  Provide a new label, FLONLY, which
points only to a filespec FDB, in the middle of the CORFIL (comma or filespec
legal) FDB chain.  Change the references to CORFIL in the post-comma FDB's to
FLONLY.

[End of TCO 5.1708]


TOPS20 Change Order Number 5.1717

Written by: CHALL		 4-Feb-82 12:32:32

Edit checked: NO			   Document: NO
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXECCS

Related TCO's:
Related SPR's: 


Problem: The string which is saved by PRARG for compile-class commands
for new-style (native) compilers is in the wrong format. The /OBJECT:
switch (and other switches) come before the source file name(s). The
syntax of the command string for a native compiler allows switches only
after the source files.

Diagnosis: Evidently, existing native compilers (if any) understand this
illegal format. However, the native PASCAL compiler that is being written
will only know about the legal syntax. So it's desirable to do it right.

Solution: In EXECCS, split the routine BILDIT (which build the PRARG string
for either an old-style or a native compiler) into two routines, BILDIT for
old-style, and BILDNW for native. In BILDNW, change the order that specs and
switches are output so it's done according to the rules.

Note: this splitting into two routines costs only a dozen or so extra 
instructions. On the other hand, neither routine needs to ask "is this a
native string or not" dozens of times (they still do a couple of times),
so both routines are faster.

[End of TCO 5.1717]


TOPS20 Change Order Number 5.1719

Written by: CHALL		 5-Feb-82 11:02:33

Edit checked: NO			   Document: NO
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXECCS

Related TCO's:
Related SPR's: 


Problem: FORTRAN will eventually have a native compiler, but the Exec
does not write a native FORTRAN string into the PRARG area.

Diagnosis: 

Solution: Modify the LANGUAGES macro so that a FORTRAN PRARG string
is output. The name of the string is "NFO".

[End of TCO 5.1719]


TOPS20 Change Order Number 5.1722

Written by: LEACHE		 6-Feb-82 16:32:34

Edit checked: NO			   Document: NO
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXECIN

Related TCO's:
Related SPR's: 


Problem: The EXEC gets very confused when displaying JSYS's for
which SET TRAP JSYS has been performed.

Diagnosis: The EXEC is deranged.


Solution: Too close to end of release cycle to fix correctly - fix in release
6.  For release 5, only do the following:  Correct the parameter that the
EXEC uses to decide when the untrapped-JSYS list is shorter than trapped-JSYS
list.

[End of TCO 5.1722]


TOPS20 Change Order Number 5.1752

Written by: CHALL		12-Mar-82 13:06:28

Edit checked: NO			   Document: NO
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXEC3

Related TCO's:
Related SPR's: 


Problem: @DIR, @@ARCHIVE would only give the first archived file.

Diagnosis: 
The GTJFN done by the DIRECT code would find the first
archived file. The GNJFN done thereafter would skip invisible
files (which most archived files are), so no other archived files
would be found.

The reason that @DIR, @@INVIS finds all invisible files is that before
the GNJFN there is a check - if invisible files are wanted, GNJFN
is told to find them.

Solution: 
Tell GNJFN also to look for invisible files when DIRECTORY
wants archived files. So, in EXEC3, at DSKR7+1: change the
TXNN Q2,INVFO to TXNN Q2,INVFO+ARFO.

[End of TCO 5.1752]


TOPS20 Change Order Number 5.1.1088

Written by: MURPHY		 8-Oct-82 18:36:34

Edit checked: NO			   Document: NO
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXECCS

Related TCO's:
Related SPR's: 


Problem: COMPILE-class commands fail to compile in certain cases
where source is in connected directory and existing REL is not.

Diagnosis: Previous rewrite of portions of EXECCS produced
behaviour different from Release 5 and previous.  Action
is correct if explicit object is given, e.g. @COMPILE X:FOO X:FOO
but wrong if object is not specified, e.g. @COMPILE X:FOO.
Those two cases should not have different result.

Solution: If source is in connected directory but existing
rel is not, force compile.

[End of TCO 5.1.1088]


TOPS20 Change Order Number 5.1.1096

Written by: CHALL		13-Oct-82 14:49:15

Edit checked: NO			   Document: NO
  TCO Tested: NO		Maintenance Release: NO
Hardware-related: NO

Program: EXEC
   Routines Affected:	EXECVR

Related TCO's:
Related SPR's: 


Problem: The Exec needs to be version 5.1.

Diagnosis: 

Solution: So do it already.

[End of TCO 5.1.1096]

