














                                  TOPS-20
                              Operator's Guide



                     VERSION 6.0 INTERIM RELEASE DRAFT






                               December, 1984

                  This manual gives the  operator  a  task
                  oriented reference for using the TOPS-20
                  operating system and a brief description
                  about  the  hardware  supported  by  the
                  TOPS-20 operating system.

|                 This version of the  guide  revises  the
                  document  having  these  order  numbers,
|                 AA-4176D-TM,  AD-4176D-T1,  AD-4176D-T2,
|                 AA-4176D-T3, and AA-4176E-TM.

   OPERATING SYSTEM:|  OPERATING SYSTEM:                TOPS-20 (KL Model B), V6




























                                     1



                                               First Printing, March 1976
                                                     Revised, August 1976
                                                        Updated, May 1977
                                                    Revised, January 1978
                                                    Revised, January 1980
                                                   Updated, December 1980
                                                      Updated, April 1982
                                                   Updated, December 1982
|                                                  Revised, December 1984



   The information in this document is subject to change  without  notice
   and  should  not  be  construed  as  a commitment by Digital Equipment
   Corporation.  Digital Equipment Corporation assumes no  responsibility
   for any errors that may appear in this document.

   The software described in this document is furnished under  a  license
   and  may  only  be used or copied in accordance with the terms of such
   license.

   No responsibility is assumed for the use or reliability of software on
   equipment that is not supplied by DIGITAL or its affiliated companies.





|  Copyright  C , 1976, 1978, 1980, 1984, Digital Equipment Corporation.
                            All Rights Reserved.





   The postage-prepaid READER'S COMMENTS form on the last  page  of  this
   document  requests  the  user's  critical  evaluation  to assist us in
   preparing future documentation.

   The following are trademarks of Digital Equipment Corporation:

        DEC                 DECnet              IAS
        DECUS               DECsystem-10        MASSBUS
        Digital Logo        DECSYSTEM-20        PDT
        PDP                 DECwriter           RSTS
        UNIBUS              DIBOL               RSX
        VAX                 EduSystem           VMS
                                                VT


















                                     2




                                    PART ONE                                    PART ONE



                                      CONTENTS



   CHAPTER 1       HOW TO USE THIS MANUAL  


   CHAPTER 2       RESPONSIBILITIES OF THE OPERATOR  

           2.1     DOCUMENTATION  . . . . . . . . . . . . . . . . . . 2-1
           2.1.1     Documentation Supplied by DIGITAL  . . . . . . . 2-1
           2.1.2     Documentation Written at Your Installation . . . 2-2
           2.1.3     Documentation Written by Operators . . . . . . . 2-2
           2.2     OPERATOR'S TASKS . . . . . . . . . . . . . . . . . 2-2
           2.2.1     Hardware Tasks . . . . . . . . . . . . . . . . . 2-2
           2.2.2     Software Tasks . . . . . . . . . . . . . . . . . 2-2
   INDEX



                                    PART TWO                                    PART TWO



                                      CONTENTS



   CHAPTER 1       HARDWARE

           1.1     OVERVIEW . . . . . . . . . . . . . . . . . . . . . 1-1
           1.2     CENTRAL PROCESSORS . . . . . . . . . . . . . . . . 1-4
           1.3     MEMORY . . . . . . . . . . . . . . . . . . . . . . 1-4
           1.4     DATA CHANNELS AND CONTROLLERS  . . . . . . . . . . 1-4
           1.5     CONSOLE FRONT-END PROCESSOR (2040S, 2060)  . . . . 1-8
           1.6     FLOPPY DISKS . . . . . . . . . . . . . . . . . . . 1-8
           1.7     PERIPHERALS  . . . . . . . . . . . . . . . . . . . 1-9
           1.7.1     Line Printers  . . . . . . . . . . . . . . . . . 1-9
           1.7.2     Card Readers . . . . . . . . . . . . . . . . .  1-11
           1.7.3     Disk Packs . . . . . . . . . . . . . . . . . .  1-11
           1.7.4     Magnetic Tape  . . . . . . . . . . . . . . . .  1-12
           1.7.5     Terminals  . . . . . . . . . . . . . . . . . .  1-13


   CHAPTER 2       SOFTWARE

           2.1     OPERATING SYSTEMS AND OTHER MAJOR SOFTWARE 
                   COMPONENTS . . . . . . . . . . . . . . . . . . . . 2-1
           2.2     LANGUAGES  . . . . . . . . . . . . . . . . . . . . 2-1
           2.3     UTILITIES  . . . . . . . . . . . . . . . . . . . . 2-1


   FIGURES

           1-1     TX03/TX05 Tape Switch Options  . . . . . . . . . . 1-7






                                     3



   TABLES

           1-1     Line Printer Identification  . . . . . . . . . .  1-10
           1-2     LP20 Printer Models  . . . . . . . . . . . . . .  1-10
           1-3     CD20 Card-Reader Models  . . . . . . . . . . . .  1-11
           1-4     Magnetic Tape Drives . . . . . . . . . . . . . .  1-13
           1-5     Terminals  . . . . . . . . . . . . . . . . . . .  1-14



                                   PART THREE                                   PART THREE



                                      CONTENTS



   CHAPTER 1       LINE PRINTERS

           1.1     DISTRIBUTING LISTINGS  . . . . . . . . . . . . . . 1-1
           1.2     CHANGING PAPER AND FORMS . . . . . . . . . . . .  1-10
           1.2.1     LP05 or LP14 Procedure . . . . . . . . . . . .  1-10
           1.2.2     LP07 Procedure . . . . . . . . . . . . . . . .  1-14
           1.2.3     LP10 Procedure . . . . . . . . . . . . . . . .  1-19
           1.3     CHANGING AND REVERSING THE RIBBON  . . . . . . .  1-22
           1.3.1     LP05 or LP14 Procedure . . . . . . . . . . . .  1-23
           1.3.2     LP07 Procedure . . . . . . . . . . . . . . . .  1-26
           1.3.3     LP10 Procedure . . . . . . . . . . . . . . . .  1-27
           1.4     CONTROLLING THE VERTICAL FORMAT UNIT . . . . . .  1-29
           1.4.1     LP05 or LP14 Procedure . . . . . . . . . . . .  1-29
           1.4.2     LP07 Procedure . . . . . . . . . . . . . . . .  1-29
           1.4.3     LP10 Procedure . . . . . . . . . . . . . . . .  1-30
           1.5     CONTROLLING THE CHARACTER TRANSLATION RAM  . . .  1-34
           1.6     CLEANING THE LINE PRINTER  . . . . . . . . . . .  1-34


   CHAPTER 2       MAGNETIC TAPES

           2.1     MOUNTING AND DISMOUNTING MAGNETIC TAPES  . . . . . 2-1
           2.1.1     TU45 Mounting Procedure  . . . . . . . . . . . . 2-1
           2.1.2     TU45 Dismounting Procedure . . . . . . . . . . . 2-3
           2.1.3     TU70, TU71, or TU72 Mounting Procedure . . . . . 2-3
           2.1.4     TU70, TU71, or TU72 Dismounting Procedure  . . . 2-6
           2.1.5     TU77 and TU78 Mounting Procedure . . . . . . . . 2-6
           2.1.5.1     Autoload Procedure   . . . . . . . . . . . . . 2-8
           2.1.5.2     Manual Procedure . . . . . . . . . . . . . .  2-12
           2.1.6     TU77 and TU78 Dismounting Procedure  . . . . .  2-13
           2.2     CLEANING MAGNETIC TAPE DRIVES  . . . . . . . . .  2-13


   CHAPTER 3       CARD READER

           3.1     LOADING AND UNLOADING CARDS  . . . . . . . . . . . 3-1
           3.2     CLEANING THE CARD READER . . . . . . . . . . . . . 3-5


   CHAPTER 4       DISK DRIVES

           4.1     MOUNTING AND DISMOUNTING DISK PACKS  . . . . . . . 4-1
           4.1.1     Mounting RP04 or RP06 Disk Packs . . . . . . . . 4-1
           4.1.2     Dismounting RP04 or RP06 Disk Packs  . . . . . . 4-1
           4.1.3     Powering Up an RP20 Disk System  . . . . . . . . 4-2
           4.1.4     Powering Down an RP20 Disk System  . . . . . . . 4-2


                                     4



           4.1.5     Starting an RP20 Disk Drive  . . . . . . . . . . 4-2
           4.1.6     Stopping an RP20 Disk Drive  . . . . . . . . . . 4-3
           4.1.7     Starting an RP07 Disk Drive  . . . . . . . . . . 4-4
           4.1.8     Stopping an RP07 Disk Drive  . . . . . . . . . . 4-4
           4.1.9     Mounting RA60 Disk Packs . . . . . . . . . . . . 4-4
           4.1.10    Dismounting RA60 Disk Packs  . . . . . . . . . . 4-4
           4.1.11    Starting an RA60 or RA81 Disk Drive  . . . . . . 4-5
           4.1.12    Stopping an RA60 or RA81 Disk Drive  . . . . . . 4-5
           4.1.13    Powering up an HSC50 Disk Controller . . . . . . 4-5
           4.1.14    Powering Down an HSC50 Disk Controller . . . . . 4-5
           4.2     CLEANING DISK PACKS AND DRIVES . . . . . . . . . . 4-6
           4.3     FORMATTING DISK PACKS  . . . . . . . . . . . . .  4-11


   CHAPTER 5       FLOPPY DISKS

           5.1     INSERTING AND REMOVING FLOPPY DISKS  . . . . . . . 5-1
           5.2     HANDLING FLOPPY DISKS  . . . . . . . . . . . . . . 5-1


   FIGURES

           1-1     LP05 Line Printer  . . . . . . . . . . . . . . . . 1-3
           1-2     LP14 Line Printer  . . . . . . . . . . . . . . . . 1-5
           1-3     LP07 Line Printer  . . . . . . . . . . . . . . . . 1-7
           1-4     LP10 Line Printer  . . . . . . . . . . . . . . . . 1-9
           1-5     LP05 or LP14 Paper Installation  . . . . . . . .  1-12
           1-6     LP05 or LP14 Forms Alignment . . . . . . . . . .  1-13
           1-7     LP07 Paper Installation  . . . . . . . . . . . .  1-16
           1-8     LP07 Forms Alignment . . . . . . . . . . . . . .  1-18
           1-9     LP10 Paper Installation  . . . . . . . . . . . .  1-22
           1-10    LP05 or LP14 Ribbon Installation . . . . . . . .  1-25
           1-11    LP07 Ribbon Installation . . . . . . . . . . . .  1-27
           1-12    LP10 Ribbon Installation . . . . . . . . . . . .  1-29
           2-1     TU45 Magnetic Tape Drive . . . . . . . . . . . . . 2-2
           2-2     TU70, TU71, or TU72 Magnetic Tape Drive  . . . . . 2-5
           2-3     TX03/05 Switch . . . . . . . . . . . . . . . . . . 2-6
           2-4     Autoload/Manual Load Section . . . . . . . . . . . 2-7
           2-5     TU77 Magnetic Tape Drive . . . . . . . . . . . .  2-10
           2-90    Tape Path and Controls . . . . . . . . . . . . .  2-11
           3-1     CR10-E Card Reader . . . . . . . . . . . . . . . . 3-2
           3-2     CR10-F Card Reader . . . . . . . . . . . . . . . . 3-4
           4-1     RP04 Disk Drive  . . . . . . . . . . . . . . . . . 4-6
           4-2     RP06 Disk Drive  . . . . . . . . . . . . . . . . . 4-7
           4-3     RP20 Disk Drive  . . . . . . . . . . . . . . . . . 4-8
           4-5     RP07 Disk Drive  . . . . . . . . . . . . . . . .  4-10
           5-1     Floppy Disk  . . . . . . . . . . . . . . . . . . . 5-2


   TABLES

           1-1     Standard LP10 Line Printer Carriage Tape . . . .  1-31
           1-2     Standard LP10 Line-Printer Vertical Action . . .  1-33



                                    PART FOUR                                    PART FOUR




                                      CONTENTS




                                     5



   CHAPTER 1       STARTING THE HARDWARE SYSTEM

           1.1     POWERING UP THE SYSTEM . . . . . . . . . . . . . . 1-3
           1.2     LOADING THE SYSTEM . . . . . . . . . . . . . . . . 1-4
           1.2.1     Loading from Disk Pack . . . . . . . . . . . . . 1-7
           1.2.2     Loading from Floppy Disks  . . . . . . . . . .  1-11
           1.2.3     Loading Via the Switch Register  . . . . . . .  1-15
           1.3     LOADING THE TOPS-20 MONITOR  . . . . . . . . . .  1-19
           1.3.1     Loading TOPS-20 from a Disk Pack with BOOT . .  1-19
           1.3.2     Loading TOPS-20 from Magnetic Tape with MTBOOT  1-19
           1.4     ANSWERING MONITOR START-UP QUESTIONS . . . . . .  1-20
           1.5     READYING THE SYSTEM FOR TIMESHARING  . . . . . .  1-23
           1.5.1     Timesharing with Operator Coverage . . . . . .  1-25
           1.5.2     Timesharing without Operator Coverage  . . . .  1-26


   FIGURES

           1-1     Load Switches and Switch Register  . . . . . . . . 1-2


   TABLES

           1-1     Switch Register Bit Definitions  . . . . . . . .  1-16



                                    PART FIVE                                    PART FIVE




                                      CONTENTS



   CHAPTER 1       THE OPERATOR INTERFACE, OPR

           1.1     INTRODUCTION TO THE OPERATOR INTERFACE . . . . . . 1-1
           1.2     RUNNING OPR  . . . . . . . . . . . . . . . . . . . 1-1
           1.2.1     Remote Operator Control  . . . . . . . . . . . . 1-4
           1.2.2     Multiple Operators on the System . . . . . . . . 1-4
           1.3     OPR COMMAND FEATURES . . . . . . . . . . . . . . . 1-5
           1.3.1     ? (Question Mark) - Listing Available Commands . 1-5
           1.3.2     ESCape - Using Recognition . . . . . . . . . . . 1-6
           1.3.3     CTRL/H - Reprinting Faulty Commands  . . . . . . 1-7
           1.3.4     Getting Help from OPR  . . . . . . . . . . . . . 1-7
           1.4     ORION TO OPR MESSAGES  . . . . . . . . . . . . . . 1-8
           1.4.1     Controlling OPR Message Output . . . . . . . . . 1-9
           1.5     OPR ERROR MESSAGE DESCRIPTIONS . . . . . . . . .  1-11


   CHAPTER 2       BATCH SOFTWARE TASKS

           2.1     BATCH SYSTEM COMPONENTS  . . . . . . . . . . . . . 2-1
           2.2     BATCH RESPONSIBILITIES . . . . . . . . . . . . . . 2-2
           2.3     CONTROLLING BATCH STREAMS  . . . . . . . . . . . . 2-3
           2.3.1     Setting Batch Stream Parameters  . . . . . . . . 2-3
           2.3.2     Starting Batch Streams . . . . . . . . . . . . . 2-4
           2.3.3     Stopping Batch Streams Temporarily . . . . . . . 2-5
           2.3.4     Continuing Batch Streams . . . . . . . . . . . . 2-5
           2.3.5     Shutting Down Batch Streams  . . . . . . . . . . 2-5
           2.3.6     Sending Messages to Batch Streams  . . . . . . . 2-6
           2.3.7     Displaying Batch Stream Parameters . . . . . . . 2-7


                                     6



           2.3.8     Displaying Batch Stream Status . . . . . . . . . 2-7
           2.4     CONTROLLING BATCH JOBS . . . . . . . . . . . . . . 2-8
           2.4.1     Examining Batch Jobs in the Queues . . . . . . . 2-8
           2.4.2     Holding Batch Jobs . . . . . . . . . . . . . .  2-10
           2.4.3     Releasing Batch Jobs . . . . . . . . . . . . .  2-11
           2.4.4     Canceling Batch Jobs . . . . . . . . . . . . .  2-11
           2.4.5     Requeuing Batch Jobs . . . . . . . . . . . . .  2-12
           2.4.6     Modifying Batch Requests . . . . . . . . . . .  2-12
           2.4.7     Deleting Batch Requests  . . . . . . . . . . .  2-13
           2.4.8     Scheduling the Next Batch Request  . . . . . .  2-13
           2.5     CONTROLLING THE LINE PRINTER . . . . . . . . . .  2-13
           2.5.1     Setting the Line Printer . . . . . . . . . . .  2-14
           2.5.2     Starting the Line Printer  . . . . . . . . . .  2-15
           2.5.3     Stopping the Line Printer Temporarily  . . . .  2-16
           2.5.4     Continuing the Line Printer  . . . . . . . . .  2-16
           2.5.5     Shutting Down the Line Printer . . . . . . . .  2-16
           2.5.6     Displaying Line Printer Parameters . . . . . .  2-17
           2.5.7     Displaying Line Printer Status . . . . . . . .  2-18
           2.6     CONTROLLING FORMS ON THE LINE PRINTER  . . . . .  2-18
           2.6.1     The LPFORM.INI File  . . . . . . . . . . . . .  2-20
           2.6.2     Aligning Forms on the Line Printer . . . . . .  2-23
           2.6.3     Backspacing Forms on the Line Printer  . . . .  2-24
           2.6.4     Forwardspacing Forms on the Line Printer . . .  2-25
           2.6.5     Suppressing Carriage Control on the Line 
                     Printer  . . . . . . . . . . . . . . . . . . .  2-26
           2.7     CONTROLLING LINE PRINTER JOBS  . . . . . . . . .  2-27
           2.7.1     Examining Printer Jobs in the Queues . . . . .  2-27
           2.7.2     Holding Printer Jobs . . . . . . . . . . . . .  2-29
           2.7.3     Releasing Printer Jobs . . . . . . . . . . . .  2-29
           2.7.4     Canceling Printer Jobs . . . . . . . . . . . .  2-30
           2.7.5     Requeuing Printer Jobs . . . . . . . . . . . .  2-30
           2.7.6     Modifying Printer Requests . . . . . . . . . .  2-31
           2.7.7     Deleting Printer Requests  . . . . . . . . . .  2-31
           2.7.8     Sending Line Printer Output to Tape  . . . . .  2-32
           2.8     CONTROLLING THE CARD READER  . . . . . . . . . .  2-35
           2.8.1     Starting the Card Reader . . . . . . . . . . .  2-35
           2.8.2     Stopping the Card Reader . . . . . . . . . . .  2-36
           2.8.3     Continuing the Card Reader . . . . . . . . . .  2-36
           2.8.4     Shutting Down the Card Reader  . . . . . . . .  2-36
           2.8.5     Displaying Card Reader Status  . . . . . . . .  2-37
           2.9     CONTROLLING CARD READER JOBS . . . . . . . . . .  2-38
           2.10    CONTROLLING OTHER OUTPUT DEVICES . . . . . . . .  2-39
           2.10.1    Setting Output Devices . . . . . . . . . . . .  2-40
           2.10.2    The SPFORM.INI File  . . . . . . . . . . . . .  2-41
           2.10.3    Starting Output Devices  . . . . . . . . . . .  2-44
           2.10.4    Stopping Output Devices  . . . . . . . . . . .  2-44
           2.10.5    Continuing Output Devices  . . . . . . . . . .  2-45
           2.10.6    Shutting Down Output Devices . . . . . . . . .  2-45
           2.10.7    Displaying Output Device Parameters  . . . . .  2-45
           2.10.8    Displaying Output Device Status  . . . . . . .  2-46
           2.11    CONTROLLING JOBS ON OUTPUT DEVICES . . . . . . .  2-47
           2.11.1    Examining Output Device Jobs in the Queues . .  2-47
           2.11.2    Holding Output Device Jobs . . . . . . . . . .  2-50
           2.11.3    Releasing Output Device Jobs . . . . . . . . .  2-50
           2.11.4    Canceling Output Device Jobs . . . . . . . . .  2-51
           2.11.5    Requeuing Output Device Jobs . . . . . . . . .  2-51
           2.11.6    Modifying Output Device Requests . . . . . . .  2-52
           2.11.7    Deleting Output Device Requests  . . . . . . .  2-53
           2.11.8    Scheduling the Next Output Device Request  . .  2-53


   CHAPTER 3       UNSCHEDULED SOFTWARE TASKS

           3.1     CONTROLLING THE SCHEDULER  . . . . . . . . . . . . 3-1


                                     7



           3.1.1     Changing Class Scheduling  . . . . . . . . . . . 3-1
           3.1.1.1     Changing a Job's Scheduling Class  . . . . . . 3-1
           3.1.2     Changing Batch-Class Scheduling  . . . . . . . . 3-2
           3.1.3     Changing Bias-Control Scheduling . . . . . . . . 3-2
           3.1.4     Displaying Scheduler Status  . . . . . . . . . . 3-3
           3.2     SETTING DEVICES ON-LINE  . . . . . . . . . . . . . 3-3
           3.3     CONTROLLING THE ORION LOG BUFFER FILE  . . . . . . 3-5
           3.4     INITIALIZING TAPES . . . . . . . . . . . . . . . . 3-6
           3.5     HANDLING USER MOUNT REQUESTS . . . . . . . . . .  3-10
           3.5.1     Displaying Tape Drive Status . . . . . . . . .  3-12
           3.5.2     Controlling Automatic Volume Recognition (AVR)  3-14
           3.5.3     Mounting Labeled Tapes with AVR Enabled  . . .  3-15
           3.5.4     Mounting Labeled Tapes With AVR Disabled . . .  3-16
           3.5.5     Mounting Unlabeled Tapes . . . . . . . . . . .  3-16
           3.5.6     Canceling Mount Requests . . . . . . . . . . .  3-18
           3.5.7     Setting Tape Drives Available or Unavailable .  3-18
           3.6     ARCHIVING FILES WITH DUMPER  . . . . . . . . . .  3-19
           3.7     RUNNING THE REAPER PROGRAM . . . . . . . . . . .  3-23
           3.8     MIGRATING FILES WITH DUMPER  . . . . . . . . . .  3-27
           3.9     RETRIEVING FILES WITH DUMPER . . . . . . . . . .  3-31
           3.10    RESTORING DISK FILES WITH DUMPER . . . . . . . .  3-35
           3.11    ANSWERING STRUCTURE MOUNT REQUESTS WITH OPR  . .  3-38
           3.11.1    Mounting a Structure with MOUNT  . . . . . . .  3-42
           3.11.2    Answering Structure DISMOUNT Requests with OPR  3-44
           3.11.3    Removing a Structure with DISMOUNT . . . . . .  3-46
           3.11.4    Canceling Mount Requests . . . . . . . . . . .  3-49
           3.11.5    Setting Disk Drives Available or Unavailable .  3-50
           3.12    SETTING THE PORT CI AVAILABLE/UNAVAILABLE  . . .  3-51
           3.12.1    Displaying Disk Drive Status . . . . . . . . .  3-55
           3.12.2    Displaying Structure Status  . . . . . . . . .  3-57
           3.13    EXAMINING MOUNT-REQUESTS IN THE QUEUE  . . . . .  3-59
           3.14    CREATING A STRUCTURE DURING TIMESHARING  . . . .  3-61
           3.15    COMMUNICATING WITH USERS . . . . . . . . . . . .  3-65
           3.15.1    Answering PLEASE Requests with OPR . . . . . .  3-65
           3.15.2    Talking to Another User Immediately with SEND   3-66
           3.15.3    Mailing a Message for a User to Read Later . .  3-68
           3.15.4    Reading Your Messages with RDMAIL  . . . . . .  3-69
           3.16    HELPING A USER WITH TERMINAL PROBLEMS  . . . . .  3-70
           3.17    LOGGING OUT A USER WITH LOGOUT . . . . . . . . .  3-73
           3.18    GENERATING ACCOUNTING REPORTS  . . . . . . . . .  3-74
           3.18.1    Getting Disk and System Usage with CHKPNT  . .  3-75
           3.18.2    Reporting Usage with USAG20  . . . . . . . . .  3-76


   CHAPTER 4       SCHEDULED SOFTWARE TASKS

           4.1     SETTING LOGINS-ALLOWED AND OPERATOR-IN-ATTENDANCE  4-1
           4.2     CREATING THE MESSAGE OF THE DAY WITH MAIL  . . . . 4-3
           4.3     ENTERING ACCOUNT VALIDATION DATA WITH EDIT . . . . 4-5
           4.4     UPDATING THE ACCOUNT VALIDATION DATA BASE WITH 
                   ACTGEN . . . . . . . . . . . . . . . . . . . . . . 4-7
           4.5     ADDING, CHANGING, AND DELETING DIRECTORIES WITH 
                   ^ECREATE . . . . . . . . . . . . . . . . . . . . . 4-8
           4.5.1     Adding Directories for Users . . . . . . . . . . 4-8
           4.5.2     Adding Directories on Mountable Structures   .  4-10
           4.5.3     Adding Files-Only Directories  . . . . . . . .  4-10
           4.5.4     Changing Directory Parameters  . . . . . . . .  4-11
           4.5.5     Changing Directory Names . . . . . . . . . . .  4-12
           4.5.6     Deleting User Names or Directories . . . . . .  4-15
           4.6     DUMPING DIRECTORY PARAMETERS WITH DLUSER . . . .  4-17
           4.6.1     Dumping Directory Parameters for PS: . . . . .  4-17
           4.6.2     Dumping Directory Parameters for Other 
                     Structures . . . . . . . . . . . . . . . . . .  4-18
           4.6.3     Using DLUSER . . . . . . . . . . . . . . . . .  4-19


                                     8



           4.7     GETTING INFORMATION ABOUT DIRECTORIES  . . . . .  4-19
           4.7.1     Listing Directory Parameters with ^ECREATE . .  4-20
           4.7.2     Listing Directory Parameters with EPRINT . . .  4-21
           4.7.3     Listing Directory Parameters with ULIST  . . .  4-22
           4.8     CHECKING SYSTEM STATUS . . . . . . . . . . . . .  4-29
           4.8.1     Determining the Status of Jobs with SYSTAT . .  4-29
           4.8.2     Watching System and Job Statistics with WATCH   4-31
           4.8.3     Getting Other Information  . . . . . . . . . .  4-32
           4.9     LISTING USER REMARKS WITH RDMAIL . . . . . . . .  4-33
           4.10    REPORTING SYSTEM ERRORS WITH SPEAR . . . . . . .  4-36
           4.11    BACKING UP DISK FILES WITH DUMPER  . . . . . . .  4-37
           4.12    ENDING TIMESHARING WITH ^ECEASE  . . . . . . . .  4-43
   INDEX


   TABLES

           2-1     LPFORM.INI Switches  . . . . . . . . . . . . . .  2-20
           2-2     SPFORM.INI Switches for All Device Types . . . .  2-42
           2-3     SPFORM.INI Switches for Plotter Devices Only . .  2-42
           3-1     SET INITIALIZE Switches  . . . . . . . . . . . . . 3-6
           3-2     REAPER Commands  . . . . . . . . . . . . . . . .  3-23



                                    PART SIX                                    PART SIX




                                      CONTENTS



   CHAPTER 1       ERROR RECOVERY PROCEDURES  

           1.1     AUTOMATICALLY RELOADING AND DUMPING THE SYSTEM . . 1-1
           1.2     MANUALLY RELOADING AND DUMPING THE SYSTEM  . . . . 1-2
           1.2.1     Scheduled Reloads  . . . . . . . . . . . . . . . 1-2
           1.2.2     Reloads and Dumps for a Hung or Looping System . 1-2
           1.3     SETTING THE CORRECT DATE AND TIME  . . . . . . . . 1-4
           1.4     ERROR MESSAGES AND ACTION TO TAKE  . . . . . . . . 1-5
           1.4.1     Device Error Messages  . . . . . . . . . . . . . 1-5
           1.4.2     BUGCHKs, BUGINFs, and BUGHLTs  . . . . . . . . . 1-6
           1.4.3     HOME Block or BAT Block Inconsistencies  . . . . 1-8
           1.4.4     Parity Errors  . . . . . . . . . . . . . . . .  1-11
           1.4.5     DX20 Error Messages  . . . . . . . . . . . . .  1-12
           1.4.6     Reaper Error Messages  . . . . . . . . . . . .  1-12
           1.4.7     Tape Handling Error Messages . . . . . . . . .  1-13
           1.4.8     Bootstrap Error Messages . . . . . . . . . . .  1-15
           1.5     RECOVERING THE FILE SYSTEM . . . . . . . . . . .  1-19
           1.5.1     Rebuilding a Directory Symbol Table with 
                     EXPUNGE  . . . . . . . . . . . . . . . . . . .  1-19
           1.5.2     Reconstructing a Directory . . . . . . . . . .  1-20
           1.5.3     Reconstructing the ROOT-DIRECTORY  . . . . . .  1-22
           1.5.4     Re-Creating the File System or a Structure . .  1-25
           1.6     DIAGNOSING YOUR SYSTEM FROM A REMOTE LOCATION VIA 
                   KLINIK . . . . . . . . . . . . . . . . . . . . .  1-28
           1.7     CORRECTING DISK SPACE WITH CHECKD  . . . . . . .  1-31
           1.7.1     Reports from CHECK BITTABLE  . . . . . . . . .  1-38
           1.8     RESTARTING PROGRAMS UNDER SYSJOB . . . . . . . .  1-43
           1.8.1     GALAXY Crash Recovery Procedures . . . . . . .  1-45
           1.9     HUNG CONSOLE TERMINAL (LA36) . . . . . . . . . .  1-49
           1.10    MEMORY CONFIGURATION FAILED  . . . . . . . . . .  1-49


                                     9



           1.11    TOPS-20 MONITOR NOT FOUND  . . . . . . . . . . .  1-49
           1.12    PS NOT FOUND . . . . . . . . . . . . . . . . . .  1-50
           1.13    BOOTSTRAP LOAD FAILED  . . . . . . . . . . . . .  1-51
           1.14    MANUALLY RELOADING THE DX20  . . . . . . . . . .  1-51
   INDEX


   TABLES

           1-1     GALAXY Component Crash Recovery Procedures . . .  1-45



                                   APPENDIXES                                   APPENDIXES




                                      CONTENTS



   APPENDIX A      PARSER


   APPENDIX B      KLINIT


   APPENDIX C      BUGHLT, BUGINF, AND BUGCHK NAMES AND DESCRIPTIONS  

   Appendixes D and E have been deleted.
   INDEX


































                                     10















                                   PART I                                   PART I
                                INTRODUCTION                                INTRODUCTION



                                  ABSTRACT                                  ABSTRACT

                  Chapter 1  describes  how  to  use  this
                  manual.

                  Chapter  2  gives  a  brief  description
                  about  the  operator's responsibilities,
                  the available documentation, and various
                  operational tasks.



                                      CONTENTS



   CHAPTER 1       HOW TO USE THIS MANUAL  


   CHAPTER 2       RESPONSIBILITIES OF THE OPERATOR  

           2.1     DOCUMENTATION  . . . . . . . . . . . . . . . . . . 2-1
           2.1.1     Documentation Supplied by DIGITAL  . . . . . . . 2-1
           2.1.2     Documentation Written at Your Installation . . . 2-2
           2.1.3     Documentation Written by Operators . . . . . . . 2-2
           2.2     OPERATOR'S TASKS . . . . . . . . . . . . . . . . . 2-2
           2.2.1     Hardware Tasks . . . . . . . . . . . . . . . . . 2-2
           2.2.2     Software Tasks . . . . . . . . . . . . . . . . . 2-2
   INDEX




















                                     11





































































                                    1-1












                                 CHAPTER 1                                 CHAPTER 1

                          HOW TO USE THIS MANUAL                          HOW TO USE THIS MANUAL  



   This guide gives  you,  the  operator,  an  overview  of  the  TOPS-20
   operating system and serves as a task-oriented reference for operating
   the various hardware components that  support  the  TOPS-20  software.
   This  manual is divided into six parts.  The following paragraphs give
   a brief description of the type of information contained in each part.

        Part  I  provides  a  brief   description   of   the   operator's
        responsibilities and the documentation supplied either by DIGITAL
        or by personnel at your installation.

        Part II describes  the  various  CPUs,  memory  types,  front-end
        responsibilities,  and  the  peripherals  that are handled by the
        front-end processor.

        Part III describes all the available peripheral devices that  can
        be connected to the system.

        Part IV describes the various ways of loading the system, loading
        the  monitor using the various media, and readying the system for
        timesharing.

        Part V describes the software tasks  that  an  operator  performs
        either daily or frequently.

        Part VI describes the error recovery procedures.

   Although various installations may run their systems differently, this
   guide  describes  a  general set of procedures for running the TOPS-20
   software on the various hardware systems.   Each  installation  should
   tailor  these  procedures  to  suit  its  needs and add procedures for
   specific applications.




















                                    1-1
                          HOW TO USE THIS MANUAL                          HOW TO USE THIS MANUAL  


                                                                  _______   This guide assumes that you have read, understood,  and  used  Getting
   _______ ____ _______         _______ ______ _____   Started With TOPS-20 and the TOPS-20 User's Guide.  In some cases this
   guide refers to another manual for  additional  information,  or  your
   installation  may  have  purchased  some  software  in addition to the
   standard TOPS-20 software.  For example, this manual does not  include
   the  operating  procedures  for  ARPANET  and  DECnet.  Therefore, you
   should have the latest editions of the following documents available:

            _______ _______ _________ ______        1.  TOPS-20 Command Reference Manual

            _______ ______ _____        2.  TOPS-20 User's Guide

            _______ ________ ____________ _____        3.  TOPS-20 Software Installation Guide

            _______ ____ _____ _ ____________ _____        4.  TOPS-20 KL10 Model B Installation Guide

            _________ _____ ____ _____________        5.  TOPS10/20 USAGE File Specification

            _______ ___ _______ _____ ______        6.  TOPS-10 and TOPS-20 SPEAR Manual
            _______ _________ _______        7.  TOPS-20 DECnet-20 Manuals
            (if your installation has DECnet-20 software)

            ___ _____________________ ______        8.  IBM Emulation/Termination Manual
            (if your installation has DN64/DN65 software)

            ______ ________        9.  BUGHLT Document

            _______ ______ _________ ______       10.  RSX-20F System Reference Manual

   You may also want to have  available  the  error  messages  listed  in
                      _______ _______ _____ _________ ______   Appendix  A of the TOPS-20 Monitor Calls Reference Manual when you see
   an error message not documented in this guide.

   This guide uses the following conventions:

        CTY                 means console terminal.

        PTY                 means pseudo-terminal.

        <RET>               indicates that you press the RETURN key.

        CTRL/character      indicates that you hold  the  CTRL  key  down
                            while typing the character.

        ^character          is the output from typing CTRL/character  or,
                            if otherwise noted, indicates that you should
                            first type the up-arrow  and  then  type  the
                            character.


















                                    1-2












                                 CHAPTER 2                                 CHAPTER 2

                     RESPONSIBILITIES OF THE OPERATOR                     RESPONSIBILITIES OF THE OPERATOR  



   As the TOPS-20 operator, you are responsible for  keeping  the  system
   running  and providing the user with the best possible service.  To do
   this, you must be aware of all the system resources available to  you,
   know  how  to  interact with the system and with users, and be able to
   recognize and solve problems before they become serious.

   Your first task in starting the system is to load  the  front-end  and
   main  processor  monitors.   After that, the system starts a series of
   programs to support batch and timesharing users.  Once the  system  is
   started,  you must check the status of jobs, respond to user requests,
   and perform routine tasks such as replenishing the paper supply for  a
   line printer or cleaning magnetic tape drives.

   Because the system is complex, sometimes a monitor ceases to  function
   and   crashes.   A  crash  may  result  from  software  (programming),
   hardware, or environmental problems.  When a crash  occurs,  you  must
   recognize  the  symptoms, take the appropriate corrective steps to get
   the system  back  up  as  quickly  as  possible,  and  save  important
   information about the crash.



   2.1  DOCUMENTATION   2.1  DOCUMENTATION

   To keep informed of your responsibilities and to perform the necessary
   operator  tasks,  you should read and have available for reference all
   documentation relevant to an operator.  Documentation is  supplied  by
   DIGITAL,  your  installation,  and  other  operators.   The next three
   sections describe the documentation available from these sources.



   2.1.1  Documentation Supplied by DIGITAL   2.1.1  Documentation Supplied by DIGITAL

   DIGITAL supplies many manuals for the TOPS-20 operating system.  Those
   helpful  to  you  as  an  operator,  in  addition  to this manual, are
   mentioned in the Preface.

   DIGITAL also supplies some text files on the magnetic tapes  used  for
   software  distribution.   These  files can be identified by their file
   types:  .HLP, .MEM, .BWR, or .DOC.  These files are usually in a  disk
   directory  from which you can have them printed or have them typed out
   on a hard-copy terminal.








                                    2-1
                     RESPONSIBILITIES OF THE OPERATOR                     RESPONSIBILITIES OF THE OPERATOR  


   2.1.2  Documentation Written at Your Installation   2.1.2  Documentation Written at Your Installation

   Your installation personnel may add some text files to the system that
   can be printed or typed.

   You should also have a list  of  specific  duties  for  each  operator
   shift.   This  list  should  be  written  by  the  System  Manager and
   operations staff, using this manual as  a  guide.   Your  installation
   personnel  can  also  tailor this manual to their needs.  For example,
   installation-specific instructions,  such  as  locking  computer  room
   doors, finding paper, and running application programs, can be added.



   2.1.3  Documentation Written by Operators   2.1.3  Documentation Written by Operators

   Your System Manager should give  you  an  operator's  notebook  and  a
   system  logbook  that  contain  pages you must fill out to record what
   happens systemwide.

   The operator's notebook is used to record shift-to-shift communication
   among operators, and between operators and the System Manager.  Always
   read it before you begin your shift.  Notebook entries  might  include
   scheduled  system  downtime,  new software to install or try, problems
   met on preceding shifts, and specific instructions not in  the  normal
   schedule.

   The system logbook is used to note important events  relative  to  the
   system  availability.   The  entries  should  include system downtime,
   hardware problems, and system shutdown time.  To  identify  the  items
   easily,  separate  hardware  and  software  entries,  perhaps  listing
   hardware entries on left-hand pages and software entries on right-hand
   pages.  Check this log when you start work; be sure to keep it current
   throughout your shift.

   You should also save the output from the  CTY.   Your  System  Manager
   should  determine how long to keep it and where to file it.  It can be
   a useful reference when there are system problems.



   2.2  OPERATOR'S TASKS   2.2  OPERATOR'S TASKS

   To keep  a  system  running  efficiently,  you  must  perform  certain
   hardware  and software tasks.  These tasks may be performed on a daily
   or weekly basis, or performed as they are required.  Part V  describes
   the batch tasks and scheduled and unscheduled tasks.



   2.2.1  Hardware Tasks   2.2.1  Hardware Tasks

   Hardware  tasks  include  performing   preventative   maintenance   on
   peripheral  devices,  replenishing  paper  for  input/output  devices,
   operating the hardware components  of  the  system,  and  keeping  the
   computer room clean.  Part III describes these tasks.



   2.2.2  Software Tasks   2.2.2  Software Tasks

   Software tasks include loading and starting  the  system,  interacting
   with  users,  and  performing  error  recovery  procedures.   Part  IV
   describes loading and starting the system, Part V describes the  batch


                                    2-2
                     RESPONSIBILITIES OF THE OPERATOR                     RESPONSIBILITIES OF THE OPERATOR  


   tasks,  and  scheduled  and  unscheduled  software  tasks, and Part VI
   describes the error recovery procedures.
































































                                    2-3
                     RESPONSIBILITIES OF THE OPERATOR                     RESPONSIBILITIES OF THE OPERATOR  


   i
   operator's guide

   1
   1
   how to use this manual
   part descriptions
   p 2
   documents
   manual conventions
   s 2
   1
   operator responsibilities
   documentation
   documentation by digital
   file types
   .hlp file
   .mem file
   .bwr file
   .doc file
   p 2
   documentation by your installation
   documentation by operators
   operator's tasks
   hardware tasks
   p 3
   software tasks







































                                    2-4
                     RESPONSIBILITIES OF THE OPERATOR                     RESPONSIBILITIES OF THE OPERATOR  














                                  PART II                                  PART II
                           SYSTEM FAMILIARIZATION                           SYSTEM FAMILIARIZATION

                                  ABSTRACT                                  ABSTRACT

           This part briefly describes the  -20  series  hardware
           systems and the major TOPS-20 software components.

           Chapter 1, Hardware, provides a brief  description  of
           the  various  system  configurations,  the  CPUs,  the
           memory  types,  the  front-end   processor   and   the
           associated peripheral devices.

           Chapter  2,  Software,  briefly  describes  the  major
           software   components  that  run  on  the  -20  series
           hardware.


                                    NOTE

           The term -20 series hardware is used in this manual to
           represent the 2040S and 2060 hardware systems that run
           the TOPS-20 software.

                                      CONTENTS



   CHAPTER 1       HARDWARE

           1.1     OVERVIEW . . . . . . . . . . . . . . . . . . . . . 1-1
           1.2     CENTRAL PROCESSORS . . . . . . . . . . . . . . . . 1-4
           1.3     MEMORY . . . . . . . . . . . . . . . . . . . . . . 1-4
           1.4     DATA CHANNELS AND CONTROLLERS  . . . . . . . . . . 1-4
           1.5     CONSOLE FRONT-END PROCESSOR (2040S, 2060)  . . . . 1-8
           1.6     FLOPPY DISKS . . . . . . . . . . . . . . . . . . . 1-8
           1.7     PERIPHERALS  . . . . . . . . . . . . . . . . . . . 1-9
           1.7.1     Line Printers  . . . . . . . . . . . . . . . . . 1-9
           1.7.2     Card Readers . . . . . . . . . . . . . . . . .  1-11
           1.7.3     Disk Packs . . . . . . . . . . . . . . . . . .  1-11
           1.7.4     Magnetic Tape  . . . . . . . . . . . . . . . .  1-12
           1.7.5     Terminals  . . . . . . . . . . . . . . . . . .  1-13


   CHAPTER 2       SOFTWARE

           2.1     OPERATING SYSTEMS AND OTHER MAJOR SOFTWARE 
                   COMPONENTS . . . . . . . . . . . . . . . . . . . . 2-1
           2.2     LANGUAGES  . . . . . . . . . . . . . . . . . . . . 2-1
           2.3     UTILITIES  . . . . . . . . . . . . . . . . . . . . 2-1




                                    2-5
                     RESPONSIBILITIES OF THE OPERATOR                     RESPONSIBILITIES OF THE OPERATOR  


   FIGURES

           1-1     TX03/TX05 Tape Switch Options  . . . . . . . . . . 1-7


   TABLES

           1-1     Line Printer Identification  . . . . . . . . . .  1-10
           1-2     LP20 Printer Models  . . . . . . . . . . . . . .  1-10
           1-3     CD20 Card-Reader Models  . . . . . . . . . . . .  1-11
           1-4     Magnetic Tape Drives . . . . . . . . . . . . . .  1-13
           1-5     Terminals  . . . . . . . . . . . . . . . . . . .  1-14






















































                                    2-6












                                 CHAPTER 1                                 CHAPTER 1

                                  HARDWARE                                  HARDWARE



   1.1  OVERVIEW   1.1  OVERVIEW

   To improve your understanding of  the  system,  this  chapter  briefly
   describes the -20 series hardware.

   You can use the TOPS-20 operating  system  with  the  2040S  and  2060
   series  hardware  models.  The 2040S and the 2060 are identical except
   that the 2060 has cache memory.

   Configurations for the 2040S system are:

         o  20-128 jobs
|  
|        o  768K-3Mb MOS memory

         o  8-128 local command terminals on RSX20F

         o  2-8 RH20 channels

         o  1-64 RP04 or RP06 disk drives

         o  1-4 RP20 disk drives

         o  1-4 RP07 disk drives

         o  2 RP20 (3 spindles) disk packs per structure

         o  1 RP07 disk pack per structure

         o  1-6 RP04 disk packs per structure

         o  1-3 RP06 disk packs per structure

         o  1-4 TM02 or TM03 tape controllers

         o  1-2 TM78 tape controllers

         o  1-16 TU45, TU77, or TU78 tape drives

         o  1-2 DX20 tape or disk controllers

         o  1-2 TX02 (1 per DX20) with TX03 and TX05 switch features

|        o  1-16 TU70, TU71, or TU78 tape drives (at  least  one  9-track
|           tape drive)

         o  1-2 line printers




                                    1-1
                                  HARDWARE                                  HARDWARE


         o  0-1 card reader

   Configurations for the 2060 system are:

         o  20-128 jobs
|  
|        o  768K-3Mb MOS memory

         o  8-128 local-command terminals on RSX20F

         o  2-8 RH20 channels

         o  1-64 RP04 or RP06 disk drives

         o  1-4 RP20 disk drives

         o  1-4 RP07 disk drives

         o  2 RP20 (3 spindles) disk packs per structure

         o  1 RP07 disk pack per structure

         o  1-6 RP04 disk packs per structure

         o  1-3 RP06 disk packs per structure
|  
|        o  1 CI-20 per KL10 processor
|  
|        o  1-3 HSC50 disk controllers per CI-20
|  
|        o  1-20 RA60 disk drives per HSC50
|  
|        o  1-20 RA81 disk drives per HSC50
|  
|        o  1-4 RA81 spindles per structure
|  
|        o  1-4 RA60 spindles per structure

         o  1-4 TM02 or TM03 tape controllers

         o  1-2 TM78 tape controllers

         o  1-16 TU45, TU77, or TU78 tape drives

         o  1-2 DX20 tape or disk controllers

         o  1-2 TX02 (1 per DX20) with TX03 and TX05 switch features

         o  1-16 TU70, TU71, or TU72 tape drives (at  least  one  9-track
            tape drive)

         o  1-2 line printers

         o  0-1 card reader












                                    1-2
                                  HARDWARE                                  HARDWARE


|  In addition to the configurations listed above for  the  2060  system,
|  the Common File System (CFS-20) configuration requires the following:
|  
|        o  2 2060 systems
|  
|        o  1-3Mb Memory per system
|  
|        o  1 CI20 per system
|  
|        o  1 Star Coupler
|  
|  
|                                   NOTE
|  
|          Each CFS-20 system requires an RP06 disk drive for the
|          front  end file system and swapping space.  It is also
|          recommended that at least one RP06 or RP07 disk  drive
|          be  dual-ported  between  the two systems.  The public
|          structure, however, must not be  on  this  dual-ported
|          RP06.
|  













































                                    1-3
                                  HARDWARE                                  HARDWARE


   1.2  CENTRAL PROCESSORS   1.2  CENTRAL PROCESSORS

   The KL10 central processor, which  directs  the  entire  operation  of
   2040S and 2060 systems, contains:

        1.  A microcoded instruction set (383 instructions)

        2.  Fast integrated-circuit general-purpose registers

        3.  Interrupt and trap facilities

   The  central  processor,  memory,  and  mass-storage  controllers  are
   contained in two cabinets.



   1.3  MEMORY   1.3  MEMORY

   There are four types of memory storage units  available  for  the  -20
   series  hardware:   MA20 or MB20 internal memory, and MF20 or MS10 MOS
   (metal-oxide semiconductor) memory.

|  The size of memory storage ranges from 768K to 3  megawords  (K=1024).
   Internal  memory  can  be  1-,  2-,  or 4-way interleaved.  You cannot
   specify  interleaving  for  MOS  memory;  however,  it  is  implicitly
   interleaved.  Each word of memory has 36 bits of data.



   1.4  DATA CHANNELS AND CONTROLLERS   1.4  DATA CHANNELS AND CONTROLLERS

   The data channels and controllers provide the interface  between  mass
   storage  devices  (disk  and  magnetic  tape)  and  main  memory.  The
|  controllers are units that control the operation of one or  more  disk
   drives   or  tape  drives.   The  channels  in  conjunction  with  the
   controllers transfer information to memory at the request of the  CPU.
|  The  mass  storage  controller on a 2040S and 2060 is called the RH20.
|  The channel for the mass storage controllers in a CFS-20 configuration
|  is the CI-20.



























                                    1-4
                                  HARDWARE                                  HARDWARE


   A DX20 tape controller  with  the  TX02  controller  and  channel  can
   support  a  maximum  of  eight  TU70, 71, or 72 tape drives.  With the
   TX03/TX05 tape switch options, a system can address and use up  to  16
   tape  drives  on  a  single controller by switching the access of tape
   drives from one controller  to  another.   Figure  1-1  shows  several
   magnetic tape configurations available through the TX03/05 tape switch
   options.

|  A DX20 disk controller can support up to eight RP20 disks.   An  HSC50
|  disk controller can support a maximum of 20 RA60 or RA81 disk drives.
























































                                    1-5
                                  HARDWARE                                  HARDWARE




































































                                    1-6
                                  HARDWARE                                  HARDWARE


   Figure 1-1:  TX03/TX05 Tape Switch Options   Figure 1-1:  TX03/TX05 Tape Switch Options

































































                                    1-7
                                  HARDWARE                                  HARDWARE


   1.5  CONSOLE FRONT-END PROCESSOR (2040S, 2060)   1.5  CONSOLE FRONT-END PROCESSOR (2040S, 2060)

   The console front-end processor is a PDP-11 computer and  is  included
   in 2040S and 2060 systems.  The console front-end handles:

        1.  Line printers

        2.  Card reader

        3.  Floppy disks

        4.  Terminals

        5.  Console functions

        6.  Microcode loading

        7.  Memory configuration

        8.  System startup

        9.  Diagnostics

   The console front-end processor is in the cabinet to the left  of  the
   two  cabinets  containing  the central processor, internal memory, and
   mass-storage   controllers.    The   console    front-end    processor
   communicates  with  the central processor through the DTE20 interface.
   The front-end memory consists of 28K of 18-bit words (16 data bits and
   2 parity bits).  The floppy disks are used for initial system loading.



   1.6  FLOPPY DISKS   1.6  FLOPPY DISKS

   Three floppy disks are  distributed  with  each  new  version  of  the
   TOPS-20  software.  They are small, about the size and appearance of a
   45 rpm record, very  flexible,  magnetic-storage  media.   Their  main
   functions  include loading and starting the PDP-11 and the KL10.  They
   are also used  to  run  diagnostics  that  pertain  to  the  front-end
   processor.


























                                    1-8
                                  HARDWARE                                  HARDWARE


   1.7  PERIPHERALS   1.7  PERIPHERALS

   On the 2040S and 2060 systems, the UNIBUS (unipath  bus)  handles  all
   the  communication  lines  between the front-end processor and all the
   devices that are attached to the front-end.


   The standard -20 series  hardware  peripherals  are  described  below.
   Part III describes the operation and maintenance of peripherals.



   1.7.1  Line Printers   1.7.1  Line Printers

   Each system requires at least one line printer.  A maximum of two line
   printers is allowed on 2040S and 2060 systems.

   The line printers currently available are:

        1.  The LP05-V with a 64-character print  set,  a  speed  of  300
            lines  per minute, and a direct access, vertical format unit.
            This printer is included in the  LP20A  line  printer  system
            (printer and controller).

        2.  The LP05-W with a 96-character print  set,  a  speed  of  230
            lines  per minute, and a direct access, vertical format unit.
            This printer is included in the  LP20B  line  printer  system
            (printer and controller).

        3.  The LP07 impact printer with a quick-change,  dual  character
            set  Charaband  (64/96  characters),  dual  speed of 1200/900
            lines per minute, and direct access,  vertical  format  unit.
            This  line  printer  is  included  in  the LP200 line printer
            system (printer and controller).

        4.  The LP10-J with a 64-character print set,  a  speed  of  1250
            lines per minute, and a standard sprocketed carriage tape for
            the vertical format unit.  This printer is  included  in  the
            LP20F line printer system (printer and controller).

        5.  The LP10-K with a 96-character print  set,  a  speed  of  925
            lines per minute, and a standard sprocketed carriage tape for
            the vertical format unit.  This printer is  included  in  the
            LP20H line printer system (printer and controller).

        6.  The LP14-V with a 64-character print  set,  a  speed  of  890
            lines  per minute, and a direct access, vertical format unit.
            This printer is included in the  LP20C  line  printer  system
            (printer and controller).

        7.  The LP14-W with a 96-character print  set,  a  speed  of  650
            lines  per minute, and a direct access, vertical format unit.
            This printer is included in the  LP20D  line  printer  system
            (printer and controller).












                                    1-9
                                  HARDWARE                                  HARDWARE


   Table 1-1:  Line Printer Identification   Table 1-1:  Line Printer Identification


     Type              Description              Control Panel


     LP05              Small size;              Six     error-indicator
     LP14              control panel            lights,    four   push-
                       on top right.            button switch-indicator
                                                lights,  and two toggle
                                                switches.

     LP10              Large size;              Five     (two-position)
                       control panel            switches,  four   white
                       on top left.             indicator lights,  four
                                                red  error  lights, and
                                                two dial knobs.

     LP07              Large size;              Five     (two-position)
                       control panel            switches,  four   white
                       on top left;             indicator  lights, four
                       metal plate              red  error  lights, and
                       that can be              two dial knobs.
                       lifted covers
                       part of control
                       panel.


   Refer to Figures 1-1, 1-2, 1-3, and 1-4 in Part III  Device  Operation
   And Maintenance.

   All  the  line  printers  are  132-column  devices.   Those  with  the
   96-character  print set have uppercase and lowercase characters.  Each
   printer has a Vertical Format  Unit,  or  VFU,  which  consists  of  a
   carriage  control  tape  depending  on  the model.  The VFU is used to
   control paper motion in the printer.   The  preceding  information  is
   summarized in Table 1-2 below.


   Table 1-2:  LP20 Printer Models   Table 1-2:  LP20 Printer Models


             Character                 Characters
     Model       Set      Print Speed  Per Drum    VFU           System


     LP05-V  UPPER        300 l/m        64        PROGRAMMABLE  LP20A

     LP05-W  UPPER/LOWER  230 l/m        96        PROGRAMMABLE  LP20B

     LP07    UPPER and    1200/900 l/m   64/96     PROGRAMMABLE/ LP200
             UPPER/LOWER                           TAPE

     LP10-J  UPPER        1250 l/m       64        TAPE          LP20F

     LP10-K  UPPER/LOWER  925 l/m        96        TAPE          LP20H

     LP14-V  UPPER        890 l/m        64        PROGRAMMABLE  LP20C

     LP14-W  UPPER/LOWER  650 l/m        96        PROGRAMMABLE  LP20D






                                    1-10
                                  HARDWARE                                  HARDWARE


   1.7.2  Card Readers   1.7.2  Card Readers

   Card readers are mainly used in batch processing.  The card reader  is
   an  input  device  only.   The card reader can be a table model CR10-E
   (Model M200) that processes 285 cards per minute, or the console model
   CR10-F  (Model RS1200) that processes 1200 cards per minute.  Only the
   RS1200 has a mechanical EOF button.  Model M200 is included in a CD20A
   card-reader system, and Model RS1200 is included in a CD20C system.

   The CD11 card-reader controller is included in CD20 card-reader system
   (controller and reader).


   Table 1-3:  CD20 Card-Reader Models   Table 1-3:  CD20 Card-Reader Models


       Type         Model                   System            Speed


       CR10-E       Table-M200              CD20A             285 cpm

       CR10-F       Console-RS1200          CD20C             1200 cpm



   1.7.3  Disk Packs   1.7.3  Disk Packs

   Disk storage allows rapid transfer of data in and out of main  memory.
   The 2040S and 2060 systems require at least one disk be dual-ported so
   that the front-end computer and the central processor can both  access
   the data on the disk.

   The disk packs that the 2040S and 2060 systems support are:

        1.  The RP04 removable disk pack, which  has  a  20-million  word
            (36-bit word) capacity

        2.  The RP06 removable disk pack, which  has  a  40-million  word
            (36-bit word) capacity

        3.  The RP07 non-removable disk pack, which  has  a  112  million
            word (36-bit word) capacity.

        4.  The RP20 non-removable disk pack, which  has  a  120  million
            word (36-bit word) capacity.

|  In addition, the 2060 systems support the following:
|  
|       1.  The RA60 removable disk pack, which  has  a  46-million  word
|           (36-bit word) capacity.
|  
|       2.  The RA81 non-removable disk pack, which  has  a  102  million
|           word (36-bit word) capacity.
|  
   The drives for these packs  provide  error  detection  and  correction
   hardware as well as high-speed access and transfer rates.










                                    1-11
                                  HARDWARE                                  HARDWARE


   On the 2040S and 2060 systems, the disk drives have an RH20 integrated
   controller  and  data channel for access by the central processor.  If
   the drive has the dual-port option, the  console  front-end  processor
|  accesses a disk drive through an RH11 disk controller.  In addition to
|  the  massbus  devices  that  are  handled  by  the   RH20   integrated
|  controller,  the  2060 system can have the HSC50 controller for access
|  by the central processor.



   1.7.4  Magnetic Tape   1.7.4  Magnetic Tape

   The magnetic tape drives currently available on 2040S and 2060 systems
   are:

        1.  The TU45, which is a 9-track drive with  recording  densities
            of 800 bits/inch (31 rows/mm) or 1600 bits/inch (63 rows/mm).
            The recording speed is 75 inches per second (1905 mm/s).  The
            TU45  is interfaced to an RH20 integrated controller and data
            channel through a TM02 or TM03 controller.

        2.  The TU70, which is a 9-track drive with  recording  densities
            of 800 bits/inch (31 rows/mm) or 1600 bits/inch (63 rows/mm).
            The recording speed is 200 inches  per  second  (5080  mm/s).
            The  TU70  is interfaced to an RH20 integrated controller and
            data channel through a DX20 programmed  data  adapter  and  a
            TX02 controller.

        3.  The TU71, which is a 7-track drive with  recording  densities
            of  200 bits/inch (8 rows/mm), 556 bits/inch (22 rows/mm), or
            800 bits/inch (31  rows/mm).   The  recording  speed  is  200
            inches per second (5080 mm/s).  The TU71 is interfaced to the
            same hardware as the TU70.

        4.  The TU72, which is a 9-track drive with  recording  densities
            of  1600  bits/inch  (63  rows/mm)  or  6250  bits/inch  (246
            rows/mm).  The recording speed is 200 inches per second (5080
            mm/s).   The  TU72  is interfaced to the same hardware as the
            TU70.

        5.  The TU77, which is a 9-track drive with  recording  densities
            of 800 bits/inch (31 rows/mm) or 1600 bits/inch (63 rows/mm).
            The recording speed is 120 inches  per  second  (3048  mm/s).
            The  TU77  is interfaced to an RH20 integrated controller and
            data channel through a TM02 controller.

        6.  The TU78, which is a 9-track drive with  recording  densities
            of  1600  bits/inch  (63  rows/mm)  or  6250  bits/inch  (246
            rows/mm).  The recording speed is 120 inches per second (3048
            mm/s).    The  TU78  is  interfaced  to  an  RH20  integrated
            controller and data channel through a TM78 controller.















                                    1-12
                                  HARDWARE                                  HARDWARE


   The parameters for the magnetic tapes  are  summarized  in  Table  1-4
   below.


   Table 1-4:  Magnetic Tape Drives   Table 1-4:  Magnetic Tape Drives


     Model  Tracks   Recording Densities         Interface   Controller


     TU45   9-track  800 b/i or 1600 b/i         RH20        TM02 or

     TU70   9-track  800 b/i or 1600 b/i         RH20        DX20 and
                     (31rows/mm) (63rows/mm)                 TX02

     TU71   7-track  200 b/i, 556 b/i            RH20        DX20 and
                     (8rows/mm) (22rows/mm)                  TX02
                     or
                     800 b/i (31rows/mm)

     TU72   9-track  1600 b/i or 6250 b/i        RH20        DX20 and
                     (63rows/mm) (246rows/mm)                TX02

     TU77   9-track  800 b/i or 1600 b/i         RH20        TM02 or
                     (31rows/mm) (63rows/mm)                 TM03

     TU78   9-track  1600 b/i or 6250 b/i        RH20        TM78
                     (63 rows/mm) (246 rows/mm)



   1.7.5  Terminals   1.7.5  Terminals

   You (the operator) and each timesharing user interacts with the system
   through  a  terminal.   Generally,  you use a hard-copy terminal:  for
   example, an LA36 to start, stop, load, and  continue  the  system  and
   user  programs.   Using  a  hard-copy  terminal allows you to save the
   printed output of all interactions with users and  the  system.   This
   output  is  especially  useful if you have a problem with your system.
   Users interact with the  system  with  either  a  hard-copy  or  video
   terminal.

























                                    1-13
                                  HARDWARE                                  HARDWARE


   Table 1-5 describes  the  terminals  which  the  -20  series  hardware
   supports.


   Table 1-5:  Terminals   Table 1-5:  Terminals


     Terminal Type                  Description

        LA36                DECwriter II hard-copy  terminal,  30  cps,
                            132 columns

        LA37                LA36 with dual APL/ASCII character set

        LA38                DECwriter IV hard-copy table top (or stand)
                            model terminal

        LA120               DECwriter III,  180  cps,  hard  copy  with
                            numeric pad

        VT50                Uppercase video terminal

        VT52                Uppercase/lowercase  video  terminal   with
                            numeric pad

        VT62                Microprocessor-driven   (video)    terminal
                            designed for transaction processing

        VT100/VT125         Uppercase/lowercase  video  terminal   with
                            numeric pad and detached keyboard

        VK100               Uppercase/lowercase  video  terminal   with
                            graphic display capability

































                                    1-14












                                 CHAPTER 2                                 CHAPTER 2

                                  SOFTWARE                                  SOFTWARE



   2.1  OPERATING SYSTEMS AND OTHER MAJOR SOFTWARE COMPONENTS   2.1  OPERATING SYSTEMS AND OTHER MAJOR SOFTWARE COMPONENTS

   The operating system for the -20 series hardware  is  called  TOPS-20.
   If  the  2040S  and 2060 is on the ARPANET (Advanced Research Projects
   Agency Network), the  operating  system  is  called  TOPS-20AN.   Both
   operating systems support concurrent timesharing and batch processing.

   The TOPS-20 command language or command processor is also  called  the
   EXEC.

   On the 2040S and 2060 systems, the RSX-20F console front-end operating
   system  aids  the central processor and TOPS-20 by doing such tasks as
   handling  the  console,  terminal  communications,  peripherals,   and
   diagnostics.



   2.2  LANGUAGES   2.2  LANGUAGES

   The following languages are available with TOPS-20:

        ALGOL          COBOL
        APL            CPL
        BASIC-PLUS-2   FORTRAN
        COBOL-68       IQL
        COBOL-74       MACRO
|       PASCAL         BLISS-36

   These languages can be used under  batch  or  timesharing.   Debugging
   programs are available for programs written in these languages.



   2.3  UTILITIES   2.3  UTILITIES

   Many utilities are available for TOPS-20  users.   Some  of  the  more
   important ones are:

        DDT         - A debugging utility

        DUMPER      - A utility for backing up disk files










                                    2-1
                                  SOFTWARE                                  SOFTWARE


        EDIT        - A line-oriented editor for creating  and  modifying
                      programs and data files

|       EDT-20      - A line- or character-oriented editor  for  creating
|                     and modifying programs and data files.

        LINK        - The TOPS-20 Linking Loader program

        PLEASE      - A    utility    for    providing     nonconflicting
                      communication  between an operator and system users
                      through a terminal

        PTYCON      - A  system  program  that  gives  you  multiple  job
                      control,    allowing    you    to    perform    all
                      software-oriented tasks from a single terminal

        SORT/MERGE  - A utility for sorting records of one or more  files
                      according to a user-specified sequence

        TV          - A  character-oriented  editor  for   creating   and
                      modifying programs and data files

        WATCH       - A utility that allows you  to  periodically  output
                      TOPS-20 monitor statistics and/or a job summary










































                                    2-2
                                  SOFTWARE                                  SOFTWARE














                                  PART III                                  PART III
                      DEVICE OPERATION AND MAINTENANCE                      DEVICE OPERATION AND MAINTENANCE



                                  ABSTRACT                                  ABSTRACT

                  This part  desribes  the  operation  and
                  maintenance   of   the  major  available
                  peripheral devices that can be connected
                  to  the  -20  series  hardware  systems.
                  Each  chapter  describes   a   different
                  peripheral line device.

                  Chapter 1, Line Printers, describes  the
                  operation  and  maintenance of the LP05,
                  LP07, LP10, and LP14 line printers.

                  Chapter 2, Magnetic Tapes, describes the
                  operation  and  maintenance of the TU45,
                  TU70, TU71, TU72, and TU77 magnetic tape
                  drives.

                  Chapter 3, Card  Reader,  describes  the
                  operation  and maintenance of the CR10-E
                  and CR10-F model card readers.

                  Chapter 4, Disk  Drives,  describes  the
                  operation  and  maintenance of the RP04,
|                 RP06, RP07, RP20, RA60,  and  RA81  disk
|                 drives.

                  Chapter 5, Floppy Disks,  describes  the
                  operation   and  maintenance  of  floppy
                  disks.
                                      CONTENTS



   CHAPTER 1       LINE PRINTERS

           1.1     DISTRIBUTING LISTINGS  . . . . . . . . . . . . . . 1-1
           1.2     CHANGING PAPER AND FORMS . . . . . . . . . . . .  1-10
           1.2.1     LP05 or LP14 Procedure . . . . . . . . . . . .  1-10
           1.2.2     LP07 Procedure . . . . . . . . . . . . . . . .  1-14
           1.2.3     LP10 Procedure . . . . . . . . . . . . . . . .  1-19
           1.3     CHANGING AND REVERSING THE RIBBON  . . . . . . .  1-22
           1.3.1     LP05 or LP14 Procedure . . . . . . . . . . . .  1-23
           1.3.2     LP07 Procedure . . . . . . . . . . . . . . . .  1-26
           1.3.3     LP10 Procedure . . . . . . . . . . . . . . . .  1-27
           1.4     CONTROLLING THE VERTICAL FORMAT UNIT . . . . . .  1-29
           1.4.1     LP05 or LP14 Procedure . . . . . . . . . . . .  1-29


                                    2-3
                                  SOFTWARE                                  SOFTWARE


           1.4.2     LP07 Procedure . . . . . . . . . . . . . . . .  1-29
           1.4.3     LP10 Procedure . . . . . . . . . . . . . . . .  1-30
           1.5     CONTROLLING THE CHARACTER TRANSLATION RAM  . . .  1-34
           1.6     CLEANING THE LINE PRINTER  . . . . . . . . . . .  1-34


   CHAPTER 2       MAGNETIC TAPES

           2.1     MOUNTING AND DISMOUNTING MAGNETIC TAPES  . . . . . 2-1
           2.1.1     TU45 Mounting Procedure  . . . . . . . . . . . . 2-1
           2.1.2     TU45 Dismounting Procedure . . . . . . . . . . . 2-3
           2.1.3     TU70, TU71, or TU72 Mounting Procedure . . . . . 2-3
           2.1.4     TU70, TU71, or TU72 Dismounting Procedure  . . . 2-6
           2.1.5     TU77 and TU78 Mounting Procedure . . . . . . . . 2-6
           2.1.5.1     Autoload Procedure   . . . . . . . . . . . . . 2-8
           2.1.5.2     Manual Procedure . . . . . . . . . . . . . .  2-12
           2.1.6     TU77 and TU78 Dismounting Procedure  . . . . .  2-13
           2.2     CLEANING MAGNETIC TAPE DRIVES  . . . . . . . . .  2-13


   CHAPTER 3       CARD READER

           3.1     LOADING AND UNLOADING CARDS  . . . . . . . . . . . 3-1
           3.2     CLEANING THE CARD READER . . . . . . . . . . . . . 3-5


   CHAPTER 4       DISK DRIVES

           4.1     MOUNTING AND DISMOUNTING DISK PACKS  . . . . . . . 4-1
           4.1.1     Mounting RP04 or RP06 Disk Packs . . . . . . . . 4-1
           4.1.2     Dismounting RP04 or RP06 Disk Packs  . . . . . . 4-1
           4.1.3     Powering Up an RP20 Disk System  . . . . . . . . 4-2
           4.1.4     Powering Down an RP20 Disk System  . . . . . . . 4-2
           4.1.5     Starting an RP20 Disk Drive  . . . . . . . . . . 4-2
           4.1.6     Stopping an RP20 Disk Drive  . . . . . . . . . . 4-3
           4.1.7     Starting an RP07 Disk Drive  . . . . . . . . . . 4-4
           4.1.8     Stopping an RP07 Disk Drive  . . . . . . . . . . 4-4
           4.1.9     Mounting RA60 Disk Packs . . . . . . . . . . . . 4-4
           4.1.10    Dismounting RA60 Disk Packs  . . . . . . . . . . 4-4
           4.1.11    Starting an RA60 or RA81 Disk Drive  . . . . . . 4-5
           4.1.12    Stopping an RA60 or RA81 Disk Drive  . . . . . . 4-5
           4.1.13    Powering up an HSC50 Disk Controller . . . . . . 4-5
           4.1.14    Powering Down an HSC50 Disk Controller . . . . . 4-5
           4.2     CLEANING DISK PACKS AND DRIVES . . . . . . . . . . 4-6
           4.3     FORMATTING DISK PACKS  . . . . . . . . . . . . .  4-11


   CHAPTER 5       FLOPPY DISKS

           5.1     INSERTING AND REMOVING FLOPPY DISKS  . . . . . . . 5-1
           5.2     HANDLING FLOPPY DISKS  . . . . . . . . . . . . . . 5-1


   FIGURES

           1-1     LP05 Line Printer  . . . . . . . . . . . . . . . . 1-3
           1-2     LP14 Line Printer  . . . . . . . . . . . . . . . . 1-5
           1-3     LP07 Line Printer  . . . . . . . . . . . . . . . . 1-7
           1-4     LP10 Line Printer  . . . . . . . . . . . . . . . . 1-9
           1-5     LP05 or LP14 Paper Installation  . . . . . . . .  1-12
           1-6     LP05 or LP14 Forms Alignment . . . . . . . . . .  1-13
           1-7     LP07 Paper Installation  . . . . . . . . . . . .  1-16
           1-8     LP07 Forms Alignment . . . . . . . . . . . . . .  1-18
           1-9     LP10 Paper Installation  . . . . . . . . . . . .  1-22


                                    2-4
                                  SOFTWARE                                  SOFTWARE


           1-10    LP05 or LP14 Ribbon Installation . . . . . . . .  1-25
           1-11    LP07 Ribbon Installation . . . . . . . . . . . .  1-27
           1-12    LP10 Ribbon Installation . . . . . . . . . . . .  1-29
           2-1     TU45 Magnetic Tape Drive . . . . . . . . . . . . . 2-2
           2-2     TU70, TU71, or TU72 Magnetic Tape Drive  . . . . . 2-5
           2-3     TX03/05 Switch . . . . . . . . . . . . . . . . . . 2-6
           2-4     Autoload/Manual Load Section . . . . . . . . . . . 2-7
           2-5     TU77 Magnetic Tape Drive . . . . . . . . . . . .  2-10
           2-90    Tape Path and Controls . . . . . . . . . . . . .  2-11
           3-1     CR10-E Card Reader . . . . . . . . . . . . . . . . 3-2
           3-2     CR10-F Card Reader . . . . . . . . . . . . . . . . 3-4
           4-1     RP04 Disk Drive  . . . . . . . . . . . . . . . . . 4-6
           4-2     RP06 Disk Drive  . . . . . . . . . . . . . . . . . 4-7
           4-3     RP20 Disk Drive  . . . . . . . . . . . . . . . . . 4-8
           4-5     RP07 Disk Drive  . . . . . . . . . . . . . . . .  4-10
           5-1     Floppy Disk  . . . . . . . . . . . . . . . . . . . 5-2


   TABLES

           1-1     Standard LP10 Line Printer Carriage Tape . . . .  1-31
           1-2     Standard LP10 Line-Printer Vertical Action . . .  1-33












































                                    2-5
                                  SOFTWARE                                  SOFTWARE














                                  OVERVIEW                                  OVERVIEW



   It is important to know how to operate  the  peripheral  equipment  on
   your  system  and how to keep it in the best possible condition.  This
   part discusses the necessary procedures.

   Because most equipment operates more efficiently when kept clean, each
   chapter  details a specific cleaning procedure for each device.  There
   are, however, some general rules for  cleaning.   First  of  all,  the
   computer room should be kept as neat and clean as possible.  Secondly,
   you should have the following cleaning supplies available:

        1.  91% isopropyl alcohol

        2.  Lint-free wipers

        3.  Spray cleaner

        4.  Vacuum cleaner with rubber or plastic attachments, which  can
            blow air as well as take in air

        5.  Cotton-tipped applicators

        6.  Soft suede brush

   You should clean the exterior of all  equipment  weekly.   Vacuum  all
   outside  surfaces  including  cabinet  tops.  Use spray cleaner on all
   exposed surfaces except around switches.

   In general, do not clean the  interior  of  any  equipment  unless  so
   directed  in  the  following  chapters;  your  DIGITAL  Field  Service
   Representative does that job.  Specific instructions for cleaning line
   printers  and  magnetic tape drives are given in Sections Part III 1.6
   and 2.2.

   Always be careful not to bump or change the position of any  switches,
   because this could cause the system or the device to crash.  Likewise,
   when you are cleaning the exterior of any disk drives, be careful  not
   to jar the equipment; that could cause a serious hardware head crash.

   Lastly, if  you  ever  have  any  problem  or  doubts  concerning  the
   operation  or  cleaning  procedure  for a device, consult your DIGITAL
   Field Service Representative.









                                    2-6












                                 CHAPTER 1                                 CHAPTER 1

                               LINE PRINTERS                               LINE PRINTERS



   The procedures below refer to an LP05 line printer  (Figure  1-1),  an
   LP14  line printer (Figure 1-2), an LP07 line printer (Figure 1-3), or
   an LP10 line printer (Figure 1-4).  Be sure to follow  the  procedures
   for the appropriate printer.

   Pay special attention to the printer's on-line/off-line condition.   A
   printer  is  off-line  only when the on-line indicator is not lit.  If
   the on-line indicator stays lit after  you  try  to  set  the  printer
   off-line,  unprinted data still remains in the print buffer.  You must
   then do one of the following:

        1.  Press the ON/OFF LINE switch again  to  cancel  the  off-line
            request and continue printing.

        2.  Open the drum gate, or set MASTER CLEAR and LOSE DATA.

        3.  Wait for the rest of the line to  be  printed,  and  let  the
            printer go off-line.  The on-line light will then go out.




   1.1  DISTRIBUTING LISTINGS   1.1  DISTRIBUTING LISTINGS

   The line-printer spooler, LPTSPL, puts banner  pages  on  listings  to
   identify  the  owner of a listing.  Your System Manager and operations
   staff should decide where line-printer listings are to be  placed  and
   when  they  will  be placed there.  The listings can be distributed to
   users or placed in an area so users can get them.






















                                    1-1
                               LINE PRINTERS                               LINE PRINTERS




































































                                    1-2
                               LINE PRINTERS                               LINE PRINTERS


   Figure 1-1:  LP05 Line Printer   Figure 1-1:  LP05 Line Printer

































































                                    1-3
                               LINE PRINTERS                               LINE PRINTERS




































































                                    1-4
                               LINE PRINTERS                               LINE PRINTERS


   Figure 1-2:  LP14 Line Printer   Figure 1-2:  LP14 Line Printer

































































                                    1-5
                               LINE PRINTERS                               LINE PRINTERS




































































                                    1-6
                               LINE PRINTERS                               LINE PRINTERS


   Figure 1-3:  LP07 Line Printer   Figure 1-3:  LP07 Line Printer

































































                                    1-7
                               LINE PRINTERS                               LINE PRINTERS




































































                                    1-8
                               LINE PRINTERS                               LINE PRINTERS


   Figure 1-4:  LP10 Line Printer   Figure 1-4:  LP10 Line Printer

































































                                    1-9
                               LINE PRINTERS                               LINE PRINTERS


   1.2  CHANGING PAPER AND FORMS   1.2  CHANGING PAPER AND FORMS

   The  following  procedures  describe  paper  or  forms   installation,
   alignment, and adjustment on the various line printers.  Section 1.2.1
   describes the LP05 or LP14 procedure, Section 1.2.2 describes the LP07
   procedure, and Section 1.2.3 describes the LP10 procedure.



   1.2.1  LP05 or LP14 Procedure   1.2.1  LP05 or LP14 Procedure

   The  following  procedure  describes  paper  or  forms   installation,
   alignment,  and  adjustment  on  an LP05 or LP14 line printer (Figures
   1-5, and 1-6).

        1.  Press the ON/OFF LINE switch  to  set  the  printer  off-line
            (indicator not lit).

        2.  Lift the printer cover.

        3.  Using the drum gate latch, unlatch and fully  open  the  drum
            gate.

                                       CAUTION

                    Wait for the character drum to stop  rotating
                    before you proceed.


        4.  Press and release the TOP OF FORM switch.  The tractors  will
            advance to the top-of-form position.

        5.  Open the spring-loaded pressure plates on the tractors.

        6.  Place paper in the tractors and close the pressure plates.

        7.  Loosen both  paper-width  adjustment  guides  and  move  both
            tractors   laterally   to  adjust  for  correct  paper-width.
            Tighten the paper-width adjustment guides.

        8.  If necessary, align the perforations in the paper  above  the
            print  line  index (Figure 1-5) by depressing the FORMS RESET
            switch and rotating the tractor shaft  by  using  the  COARSE
            VERTICAL  FORM  ADJUSTMENT  control.   Then release the FORMS
            RESET switch.

        9.  Adjust  the  horizontal  position  of  the  paper  with   the
            HORIZONTAL  FORM  ADJUSTMENT  control.   Use  the  horizontal
            indentation index marks as a guide.

       10.  Close and latch the drum gate.

       11.  Press ALARM/CLEAR switch.

       12.  Press and release the ON/OFF LINE switch to set  the  printer
            on-line (indicator lit).

       13.  Use the FINE VERTICAL FORM ADJUSTMENT control to correct  any
            small misalignment in the printout during operation.

       14.  Close the printer cover.





                                    1-10
                               LINE PRINTERS                               LINE PRINTERS


   Occasionally, the paper will jam in the line printer.  When the  paper
   jams,  the  printer goes off-line.  If this happens, repeat Steps 2, 3
   and 5-10.  Then press the TOP OF FORM switch.  Requeue the printer job
   (refer to Part V Software Tasks), and press the ON/OFF LINE switch.


   Replenishing Forms

   If you are merely replenishing forms and not changing to  a  different
   form, proceed as follows:

        1.  Lift the printer window.

        2.  Using the drum gate latch, unlatch and fully  open  the  drum
            gate.

                                       CAUTION

                    Wait for the character drum to stop  rotating
                    before you proceed.


        3.  Open all tractor pressure plates.

        4.  Insert the new form, overlapping the old one by at least  one
            page  and  aligning  the two at the page perforations.  Close
            all tractor pressure plates.

        5.  Close and latch the drum gate.

        6.  Close the printer window.

        7.  Press the ON/OFF LINE switch to set the printer  on-line  (ON
            LINE indicator lit).
































                                    1-11
                               LINE PRINTERS                               LINE PRINTERS





































   Figure 1-5:  LP05 or LP14 Paper Installation   Figure 1-5:  LP05 or LP14 Paper Installation






























                                    1-12
                               LINE PRINTERS                               LINE PRINTERS














































   Figure 1-6:  LP05 or LP14 Forms Alignment   Figure 1-6:  LP05 or LP14 Forms Alignment





















                                    1-13
                               LINE PRINTERS                               LINE PRINTERS


   1.2.2  LP07 Procedure   1.2.2  LP07 Procedure

   The following procedure describes forms installation,  alignment,  and
   adjustment on an LP07 line printer.  (Refer to Figures 1-7, and 1-8.)

        1.  If the printer is running, press  the  START/STOP  switch  to
            place the printer in STOP mode (RUN indicator not lit).

        2.  Lift the printer window.

        3.  Unlatch and fully open the band gate and ribbon mask.

                                       CAUTION

                    Wait  until  the  Charaband  stops   rotating
                    before  proceeding  to  the next step.  (This
                    model  printer  has  a   Charaband   printing
                    mechanism   rather  than  a  revolving  print
                    drum.)


        4.  If necessary,  reposition  the  upper  left  and  lower  left
            tractors.  Make sure that they are still vertically aligned.

        5.  Unlock the  upper  and  lower  tractor  locks  on  the  right
            tractors.

        6.  Open all tractor pressure plates.

        7.  Insert the left edge of the form in the  upper  left  tractor
            and close the pressure plate.

        8.  Slide the upper right tractor to a position beneath the right
            hand  form feed holes and close the pressure plate.  Lock the
            upper right tractor.

        9.  Loosen the PAPER TENSION  control  lock  and  set  the  PAPER
            TENSION  control  to  its  extreme  counterclockwise position
            (least tension).

       10.  Insert form in the lower left tractor and close the  pressure
            plate.

       11.  Slide the lower right tractor to a position beneath the right
            hand  form feed holes and close the pressure plate.  Lock the
            lower right tractor.

       12.  Adjust the PAPER TENSION control clockwise to achieve  proper
            vertical form tension.  Proper tension occurs when there is a
            slight deformation of the top edge of the  form  feed  holes.
            Tighten the PAPER TENSION lock.

       13.  Press the TOP OF FORM switch on the operator control panel.

       14.  Rotate the PAPER FEED clutch clockwise to  the  ADJ  position
            and  use the PAPER ADVANCE ADJUSTMENT control to position the
            form at the first line of print.  Use the hammer faces  as  a
            print-line guide.  Return the clutch to the RUN position.

            You can use the VERTICAL PAPER POSITION control to  obtain  a
            fine   adjustment   of  vertical  position.   This  is  often
            necessary when using pre-printed forms.




                                    1-14
                               LINE PRINTERS                               LINE PRINTERS


       15.  Close and latch the ribbon mask.

       16.  Rotate the HORIZONTAL PAPER POSITION  control  to  align  the
            form horizontally; use the horizontal form alignment scale on
            the ribbon mask assembly for reference.

       17.  Set the thickness control to match the form being loaded.

       18.  Close the band gate and printer window.

       19.  Press the TOP OF FORM switch several times to ensure that the
            form is feeding correctly through the tractors.

       20.  Press the START/STOP switch to place the printer in RUN  mode
            (RUN indicator lit).

   Occasionally, the paper will jam in the line printer.  When the  paper
   jams,  the printer goes off-line.  If this happens, repeat Steps 4-13.
   Then press the TOPS OF FORM switch.  Requeue the printer job (refer to
   Part V Software Tasks), and press the ON/OFF LINE switch.


   Replenishing Forms

   If you are merely replenishing the form supply and not changing  to  a
   different form, proceed as follows:

        1.  Lift the printer window.

        2.  Unlatch and fully open the band gate and ribbon mask.

                                       CAUTION

                    Wait  until  the  Charaband  stops   rotating
                    before  proceeding  to  the next step.  (This
                    model  printer  has  a   Charaband   printing
                    mechanism   rather  than  a  revolving  print
                    drum.)


        3.  Open all tractor pressure plates.

        4.  Insert the new form, overlapping the old one by at least  one
            page  and  aligning  the two at the page perforations.  Close
            all tractor pressure plates.

        5.  Close and latch the ribbon mask.

        6.  Close the band gate and printer window.

        7.  Press the START/STOP switch to place the printer in RUN  mode
            (RUN indicator lit).














                                    1-15
                               LINE PRINTERS                               LINE PRINTERS




































   Figure 1-7:  LP07 Paper Installation   Figure 1-7:  LP07 Paper Installation































                                    1-16
                               LINE PRINTERS                               LINE PRINTERS




































































                                    1-17
                               LINE PRINTERS                               LINE PRINTERS


   Figure 1-8:  LP07 Forms Alignment   Figure 1-8:  LP07 Forms Alignment

































































                                    1-18
                               LINE PRINTERS                               LINE PRINTERS


   1.2.3  LP10 Procedure   1.2.3  LP10 Procedure

   The  following  procedure  describes  paper  or  forms   installation,
   alignment, and adjustment on an LP10 line printer (Figure 1-9).

        1.  Press the ON/OFF LINE switch to set the printer off-line  (ON
            LINE indicator not lit).

        2.  Lift the printer window.

        3.  Using the drum gate latch, unlatch and fully  open  the  drum
            gate.

                                       CAUTION

                    Wait for the character drum to stop  rotating
                    before you proceed.


        4.  Be sure the proper vertical format tape  is  in  the  printer
            (Section 1.4).

        5.  Press and release the TOP-OF-FORM switch.

        6.  Set the COPIES CONTROL LEVER to match the form being used.

        7.  Be sure the upper left and lower left tractors are vertically
            aligned.

        8.  Rotate FINE ADJUSTMENT thumbwheels fully  clockwise  on  both
            upper right and lower right tractors.

        9.  Unlock the upper and lower tractor locks on  right  tractors,
            and move them to the extreme right.

       10.  Open all tractor pressure plates.

       11.  Place left edge of form in upper left tractor and  close  the
            pressure plate.

       12.  Position upper right tractor to allow  precise  alignment  of
            tractor feed pins to formfeed holes of the paper.  Lock upper
            right tractor and close tractor pressure plate.


                                        NOTE

                             Do not pull the paper taut.


















                                    1-19
                               LINE PRINTERS                               LINE PRINTERS


       13.  Loosen PAPER TENSION locking knob and PAPER  TENSION  control
            knob.

       14.  Place paper in lower left tractor and close pressure plate.

       15.  Position lower right tractor to allow  precise  alignment  of
            tractor  feed  pins  to  form-feed  holes of the paper.  Lock
            lower right tractor and close tractor pressure plate.


                                        NOTE

                             Do not pull the paper taut.


       16.  Turn PAPER TENSION control knob clockwise until proper  paper
            tension  exists, such as when a slight deformation of the top
            edge of the form-feed holes in the  paper  appears.   Tighten
            the PAPER TENSION locking knob.

       17.  Rotate FINE ADJUSTMENT thumbwheel on both the upper right and
            lower  right  tractors  until proper horizontal paper tension
            exists.  The tension  is  correct  when  there  is  a  slight
            deformation  of  the right edge of the form-feed holes in the
            paper.

       18.  Move the RUN/ADJUST  lever  (located  on  the  right  of  the
            vertical  format unit) to the ADJUST position, and rotate the
            paper drive mechanism by use of the  PAPER  DRIVE  adjustment
            thumbwheel until top-of-form is aligned in position.

                                        NOTE

                    If you are changing the type of forms or  the
                    carriage  control tape, proceed with Step 19.
                    If not, go to Step 24.


       19.  Be sure that the carriage control tape is at the  TOP-OF-FORM
            INDEX  by  pressing and releasing the TOP-OF-FORM switch with
            the tape loop installed.

       20.  Mount the FORMS ALIGNMENT SCALE (located in the paper storage
            area, right side) across the hammer bank area using the dowel
            pins located on special castings at both sides of the  hammer
            bank.

       21.  Using the HORIZONTAL PAPER POSITION thumbwheel, move the form
            horizontally  until  the  first  print  column  on  the  form
            corresponds to the first column on the FORMS ALIGNMENT SCALE.

       22.  Move the RUN/ADJUST lever to the ADJUST position.  Using  the
            PAPER DRIVE ADJUSTMENT thumbwheel, adjust the form vertically
            until the top of the form is aligned with the FORMS ALIGNMENT
            SCALE print line.











                                    1-20
                               LINE PRINTERS                               LINE PRINTERS


       23.  Remove the FORMS ALIGNMENT SCALE and place it in the scabbard
            (paper storage area, right side).

       24.  Move the RUN/ADJUST lever to the RUN position.

       25.  Close and latch the drum gate.

       26.  Close the printer window.

       27.  To check the paper  tension,  press  the  TOP-OF-FORM  switch
            several  times  and  check that the paper does not pull loose
            from the paper-feed tractors.

       28.  Press the ON/OFF LINE switch to set the printer  on-line  (ON
            LINE indicator lit).

   Occasionally, the paper will jam in the line printer.  When the  paper
   jams,  the printer goes off-line.  If this happens, repeat Steps 2, 3,
   and 7-18.  Then press the TOP OF FORM switch.  Requeue the printer job
   (refer to Part V Software Tasks) and press the ON/OFF LINE switch.


   Replenishing Forms

   If you are merely replenishing forms and not changing to  a  different
   form, proceed as follows:

        1.  Lift the printer window.

        2.  Using the drum gate latch, unlatch and fully  open  the  drum
            gate.

                                       CAUTION

                    Wait for the character drum to stop  rotating
                    before you proceed.


        3.  Open all tractor pressure plates.

        4.  Insert the new form, overlapping the old one by at least  one
            page  and  aligning  the two at the page perforations.  Close
            all tractor pressure plates.

        5.  Close and latch the drum gate.

        6.  Close the printer window.

        7.  Press the ON/OFF LINE switch to set the printer  on-line  (ON
            LINE indicator lit).
















                                    1-21
                               LINE PRINTERS                               LINE PRINTERS












































   Figure 1-9:  LP10 Paper Installation   Figure 1-9:  LP10 Paper Installation



   1.3  CHANGING AND REVERSING THE RIBBON   1.3  CHANGING AND REVERSING THE RIBBON

   If the print quality is not as good as it should be, you may  need  to
   change  or  reverse the ribbon.  Section 1.3.1 describes the procedure
   for the LP05 or LP14, Section 1.3.2 describes the  procedure  for  the
   LP07, and Section 1.3.3 describes the procedure for the LP10.














                                    1-22
                               LINE PRINTERS                               LINE PRINTERS


   1.3.1  LP05 or LP14 Procedure   1.3.1  LP05 or LP14 Procedure

   The following procedure describes how to change the ribbon on an  LP05
   or LP14 line printer (Figure 1-10).

        1.  Use the plastic gloves supplied with the ribbon.

        2.  Press the ON/OFF LINE switch to place  the  printer  off-line
            (indicator not lit).

        3.  Lift the printer cover.

        4.  Using the drum gate latch, unlatch and fully  open  the  drum
            gate.

                                       CAUTION

                    Wait until the character drum stops  rotating
                    before proceeding to next step.


        5.  While holding the paper tensioner with  one  hand,  pull  the
            paper  tensioner  plunger  knob  to  your left and remove the
            paper tensioner from the drum gate.

        6.  Grasp the right end (fixed ribbon holders)  of  the  top  and
            bottom ribbon cores and push left against the floating holder
            springs; pull the right end of the ribbon cores away from the
            drum gate first.

        7.  Remove the new ribbon from its packing  box  and  remove  the
            plastic wrapping.

        8.  Place the fully wound  ribbon  core  over  the  top  floating
            ribbon  holder.   The  ribbon  must  be  installed so that it
            unwinds from the top of the ribbon core.

        9.  Push the  ribbon  core  end  toward  your  left  against  the
            floating  ribbon-holder spring, and place the opposite ribbon
            core end over the top fixed ribbon holder.  Be sure that  the
            holder guide-pin slips into the core end slot.

       10.  Unwind the second ribbon core and  bring  it  down  over  the
            character drum and ribbon guide bars.

       11.  Place the ribbon core on the bottom ribbon holders as in Step
            9 for the top ribbon core.

       12.  Install the paper tensioner by placing  the  paper  tensioner
            block  in  position  and  pushing  the  tensioner against the
            tensioner knob, while pulling the knob to allow engagement.

       13.  Close the drum gate and press ALARM/CLEAR switch.

       14.  Press the ON/OFF LINE switch to  place  the  printer  on-line
            (indicator lit).










                                    1-23
                               LINE PRINTERS                               LINE PRINTERS


   Most listings  have  more  print  on  the  left  half  of  the  paper.
   Therefore,  to  prevent  the  ribbon from wearing unevenly, you should
   reverse the ribbon.  To reverse the ribbon, do the following:

        1.  Follow Steps 1 through 6 above to remove the ribbon.

        2.  Holding the two  ribbon  cores  as  you  took  them  off  the
            printer,  rotate  them clockwise until the top core is at the
            bottom.

        3.  Now that you have reversed the top and bottom  ribbon  cores,
            put  the  ribbon  back  on  the  printer by following Steps 9
            through 14 above.





















































                                    1-24
                               LINE PRINTERS                               LINE PRINTERS























































   Figure 1-10:  LP05 or LP14 Ribbon Installation   Figure 1-10:  LP05 or LP14 Ribbon Installation












                                    1-25
                               LINE PRINTERS                               LINE PRINTERS


   1.3.2  LP07 Procedure   1.3.2  LP07 Procedure

   The following procedure describes how to change the ribbon on an  LP07
   line printer.  (Refer to Figure 1-11.)

        1.  Lift the  operator-panel  access  cover  and  set  the  POWER
            circuit breaker to the OFF position.

        2.  Lift the printer window; unlatch and fully open the band gate
            leaving the ribbon mask against the forms.

                                       CAUTION

                    Wait  until  the  Charaband  stops   rotating
                    before  proceeding  to  the next step.  (This
                    model  printer  has  a   charaband   printing
                    mechanism   rather  than  a  revolving  print
                    drum.)


        3.  Using plastic gloves, grasp the ribbon rolls and  force  them
            to  the  right  until the ribbon cores are free of the ribbon
            motors.

        4.  Pull the ribbon completely free of the  band  gate.   Discard
            the ribbon unless you are reversing it.

        5.  Remove the new ribbon from its box  and  remove  the  plastic
            wrapping and any protective cardboard collars.

        6.  Hold the ribbon cores with the fully  wound  core  above  the
            other  so  the  ribbon  will unwind from the underside of the
            ribbon core when installed.  Force the right end of the upper
            ribbon core against the top floating ribbon holder, align the
            left end with the fixed ribbon holder, and allow  the  spring
            tension to lock the core into position.

        7.  Unwind the other ribbon core over the ribbon guide  bars  and
            Charaband.  Position the lower ribbon core between the bottom
            ribbon holders in the same manner.

        8.  Ensure that the slots in the ends of  the  ribbon  cores  are
            engaged by the ribbon holder guide pins.

        9.  Ensure that the ribbon position sensor is not covered by  the
            ribbon.

       10.  Close the band gate and printer window.

       11.  Set the POWER circuit breaker to the ON  position  and  close
            the operator-panel access cover.

       12.  When the READY  indicator  comes  on,  press  the  START/STOP
            switch to place the printer in RUN mode (RUN indicator lit).

   Some listings have more print on the  left  half  of  the  forms.   To
   prevent  the  ribbon from wearing unevenly, you can reverse the ribbon
   as follows:

        1.  Follow Steps 1 through 4 above to remove the ribbon.






                                    1-26
                               LINE PRINTERS                               LINE PRINTERS


        2.  Holding the two  ribbon  cores  as  you  took  them  off  the
            printer,  rotate  them  so  that the top and bottom cores are
            reversed.

        3.  Now that you have reversed the top and bottom  ribbon  cores,
            put  the  ribbon  back  on  the  printer by following Steps 7
            through 12.



























   Figure 1-11:  LP07 Ribbon Installation   Figure 1-11:  LP07 Ribbon Installation



   1.3.3  LP10 Procedure   1.3.3  LP10 Procedure

   The following procedure describes how to change the ribbon on an  LP10
   line printer (Figure 1-12).

        1.  Use the plastic gloves supplied with the ribbon.

        2.  Press the ON/OFF LINE switch to set the printer off-line  (ON
            LINE indicator not lit).

        3.  Lift the printer window.

        4.  Move the drum gate latch left and pull forward to fully  open
            the drum gate.

                                       CAUTION

                    Wait for  character  drum  to  stop  rotating
                    before you proceed.


        5.  Grasp the ribbon cores and force them left  toward  the  drum
            gate  latch  until  the  floating  ribbon-holder  springs are
            completely compressed.




                                    1-27
                               LINE PRINTERS                               LINE PRINTERS


        6.  Remove ribbon by pulling right end of ribbon cores away  from
            drum gate.

        7.  Hold new ribbon cores together and remove ribbon from box.

        8.  Place fully wound ribbon core  over  bottom  floating  ribbon
            holder.

        9.  Push core left and place right core  end  over  bottom  fixed
            ribbon  holder.  Be sure that the holder guide-pin slips into
            the slot on the core end.

       10.  Unwind fully wound ribbon core enough to bring ribbon up  and
            over character drum.

       11.  Slip ribbon between ribbon guide clips and box sensor.

       12.  Place ribbon core on top floating ribbon holder.

       13.  Push core left and place right core end over top fixed ribbon
            holder.   Be  sure  that  the holder guide-pin slips into the
            slot on the core end.

       14.  Close and latch drum gate.

       15.  Close the printer window.

       16.  Press the ON/OFF LINE switch to set the printer  on-line  (ON
            LINE indicator lit).

   Most listings  have  more  print  on  the  left  half  of  the  paper.
   Therefore,  to  prevent  the  ribbon from wearing unevenly, you should
   reverse the ribbon.  Do the following:

        1.  Follow Steps 1-6 above to remove the ribbon.

        2.  Holding the two  ribbon  cores  as  you  took  them  off  the
            printer,  rotate  them clockwise until the top core is at the
            bottom.  Now the top and bottom cores are reversed.

        3.  Put the ribbon back on  the  printer  by  following  Steps  9
            through 16 above.
























                                    1-28
                               LINE PRINTERS                               LINE PRINTERS







































   Figure 1-12:  LP10 Ribbon Installation   Figure 1-12:  LP10 Ribbon Installation



   1.4  CONTROLLING THE VERTICAL FORMAT UNIT   1.4  CONTROLLING THE VERTICAL FORMAT UNIT

   A vertical format unit or VFU controls the paper advance  through  the
   printer.   Section  1.4.1  describes the procedure for controlling the
   vertical format unit on LP05 and LP14  line  printers,  Section  1.4.2
   describes  the procedure for the LP07, and Section 1.4.3 describes the
   procedure for the LP10.



   1.4.1  LP05 or LP14 Procedure   1.4.1  LP05 or LP14 Procedure

   The LP05 and LP14 line printers have a direct access, vertical  format
   unit  that is controlled by software.  (Refer to the files VFU3-20.DOC
   and MAKVFU.HLP.)



   1.4.2  LP07 Procedure   1.4.2  LP07 Procedure

   The LP07 line printer  has  a  direct  access,  vertical  format  unit
   (DAVFU)  that  is the software counterpart of a carriage control tape.
   The DAVFU is loaded by means of a  file  containing  an  8-channel  by


                                    1-29
                               LINE PRINTERS                               LINE PRINTERS


   143-line bit matrix.  The ON bits in this matrix represent the punched
   holes in the corresponding paper carriage control tape.

                                    NOTE

           In most conventional line printers the vertical format
           unit  is  a  punched paper tape.  Instead of a punched
           paper tape, the LP07 has  a  direct  access,  vertical
           format unit (DAVFU).  A DAVFU is a programmable binary
           matrix which replaces the punched paper tape.

   The LP07 printer also provides for the software control of  the  print
   density  (6  or  8  lines per inch) as well as for operator control by
   means of a switch.

   Information on the generating, storing, and loading of DAVFU  matrices
   is contained in the files MAKVFU.DOC and MAKVFU.HLP.



   1.4.3  LP10 Procedure   1.4.3  LP10 Procedure

   To make a standard carriage control tape for vertical  format  control
   of 11-inch paper with 6 lines of printing per inch, do the following:

        1.  Obtain a manual punch made to  punch  a  12-channel  carriage
            control tape for 6 lines of printing per inch.

        2.  Obtain a carriage control  tape  with  feed  holes,  channels
            numbered  1 through 12, and lines numbered 0 to at least 135.
            The tape loop accommodates two forms.

        3.  Align the tape in the punch to begin punching in line 0.

        4.  Using Table 1-1 as a guide, proceed line by line on the tape,
            and punch a hole for each of the channels indicated.

        5.  After you have punched all the lines  through  131,  cut  the
            tape  at  line  135.  Spread some rubber cement between lines
            129 and 135.  Place line 0 over line 132.  Keeping  the  feed
            holes aligned, press the ends of the tape together.

























                                    1-30
                               LINE PRINTERS                               LINE PRINTERS


   Table 1-1:  Standard LP10 Line Printer Carriage Tape   Table 1-1:  Standard LP10 Line Printer Carriage Tape


                 Form 1      Form 2
                 Line        Line          Channels Punched


                   00          66          1-2-3-4-5-6-7-8-9-10-11-12
                   01          67          5-8
                   02          68          3-5-8

                   03          69          4-5-8
                   04          70          3-5-8
                   05          71          5-8-9

                   06          72          3-4-5-8
                   07          73          5-8
                   08          74          3-5-8

                   09          75          4-5-8
                   10          76          3-5-6-8-9
                   11          77          5-8

                   12          78          3-4-5-8
                   13          79          5-8
                   14          80          3-5-8

                   15          81          4-5-8-9-10
                   16          82          3-5-8
                   17          83          5-8

                   18          84          3-4-5-8
                   19          85          5-8
                   20          86          3-5-6-7-8-9

                   21          87          4-5-8
                   22          88          3-5-8
                   23          89          5-8

                   24          90          3-4-5-8
                   25          91          5-8-9-11
                   26          92          3-5-8

                   27          93          4-5-8
                   28          94          3-5-8
                   29          95          5-8

                   30          96          2-3-4-5-6-8-9-10
                   31          97          5-8
                   32          98          3-5-8

                   33          99          4-5-8
                   34          100         3-5-8
                   35          101         5-8-9
                   36          102         3-4-5-8
                   37          103         5-8
                   38          104         3-5-8









                                    1-31
                               LINE PRINTERS                               LINE PRINTERS


   Table 1-1:  Standard LP10 Line Printer Carriage Tape (Cont.)   Table 1-1:  Standard LP10 Line Printer Carriage Tape (Cont.)


                 Form 1      Form 2
                 Line        Line          Channels Punched


                   39          105         4-5-8
                   40          106         3-5-6-7-8-9-12
                   41          107         5-8

                   42          108         3-4-5-8
                   43          109         5-8
                   44          110         3-5-8

                   45          111         4-5-8-9-10
                   46          112         3-5-8
                   47          113         5-8

                   48          114         3-4-5-8
                   49          115         5-8
                   50          116         3-5-6-8-9-11

                   51          117         4-5-8
                   52          118         3-5-8
                   53          119         5-8

                   54          120         3-4-5-8
                   55          121         5-8-9
                   56          122         3-5-8

                   57          123         4-5-8
                   58          124         3-5-8
                   59          125         5-8

                   60          126         5
                   61          127         5
                   62          128         5

                   63          129         5
                   64          130         5
                   65          131         5


        6.  Repunch the holes covered by the overlapped tape.

        7.  Set the printer off-line and open the printer cover.

        8.  Lift the tape loop reader handle, so that the  sprocket  shoe
            clears the sprocket teeth.

        9.  Place the tape over the tape loop reader capstan, so the feed
            holes are over the sprocket teeth.  Be sure channel 12 of the
            tape is toward your left as you are facing the front  of  the
            line printer.

       10.  Close the tape loop reader.  Be sure the tape stays  attached
            to the drive sprocket while you clamp the drive sprocket shoe
            in place.

       11.  Press TOP-OF-FORM switch.  The  tape  should  halt  with  the
            channel 1 star wheel just beyond the TOP-OF-FORM hole.




                                    1-32
                               LINE PRINTERS                               LINE PRINTERS


       12.  Align forms vertically (Section 1.2.3 for LP10).

       13.  Close the printer cover.

   The standard LP10 carriage tape causes the vertical actions listed  in
   Table  1-2.   Channels  1  through  8 are used by system software, and
   channels 9 through 12 are used by diagnostic programs.


   Table 1-2:  Standard LP10 Line-Printer Vertical Action   Table 1-2:  Standard LP10 Line-Printer Vertical Action


        Channel        Vertical Action


           1           Top of form

           2           Space half a page (30 lines)

           3           Double space with automatic top of form after 30
                       impressions

           4           Triple space with automatic top of form after 20
                       impressions

           5           Single space (only  channel  using  the  last  6
                       lines of the page)

           6           Space one sixth of a page (10 lines)

           7           Space one third of a page (20 lines)

           8           Single space with automatic top of form after 60
                       impressions

           9           Space one twelfth of a page (5 lines)

           10          Space one fourth of a page (15 lines)

           11          Space 25 lines

           12          Space 40 lines


   A programmer requiring a nonstandard carriage control tape  must  tell
   you  what  channels need to be punched on each line.  Be sure that you
   punch a tape to accommodate whatever number of  forms  are  needed  to
   make the tape loop at least 10 inches in circumference.


















                                    1-33
                               LINE PRINTERS                               LINE PRINTERS


   1.5  CONTROLLING THE CHARACTER TRANSLATION RAM   1.5  CONTROLLING THE CHARACTER TRANSLATION RAM

   There are two files on the system to control the character translation
   RAM  (random-access  memory).   The  file  SYS:LP64.RAM  is  used  for
   64-character-set printers  and  the  file  SYS:LP96.RAM  is  used  for
   96-character-set  printers.   This RAM controls the way characters are
   treated by the  line-printer  controller  (LP20).   After  TOPS-20  is
   started,  this  RAM  is  loaded  according  to  a  PRINTER  command in
   <SYSTEM>n-CONFIG.CMD, where n is the TOPS-20 release number.  (See the
   TOPS-20   Software   Installation   Guide   for  more  information  on
   n-CONFIG.CMD.)

   If a RAM file gets destroyed, you can re-create it with  MAKRAM.   The
   instructions  for  running  MAKRAM  are  in  the  files MAKRAM.HLP and
   MKR3-20.DOC.



   1.6  CLEANING THE LINE PRINTER   1.6  CLEANING THE LINE PRINTER

   In addition to the general cleaning procedures given at the  beginning
   of  the  chapter, you should clean the character drum every 100 hours,
   or sooner if necessary, using a soft suede brush and a vacuum cleaner.
   Every 500 hours, or sooner if necessary, clean the character drum with
   isopropyl alcohol.









































                                    1-34












                                 CHAPTER 2                                 CHAPTER 2

                               MAGNETIC TAPES                               MAGNETIC TAPES



   The magnetic tapes are designated as logical tape units MTA0:,  MTA1:,
   etc.    The   <SYSTEM>n-CONFIG.CMD  file  (see  the  TOPS-20  Software
   Installation Guide) defines these by matching a logical tape  unit  to
   the serial number of a drive.



   2.1  MOUNTING AND DISMOUNTING MAGNETIC TAPES   2.1  MOUNTING AND DISMOUNTING MAGNETIC TAPES

   The following steps describe how to mount and dismount magnetic tapes.



   2.1.1  TU45 Mounting Procedure   2.1.1  TU45 Mounting Procedure

   The supply reel (containing the tape to be read or written) is the top
   reel on the drive (Figure 2-1).  The reel should be positioned in such
   a way that the tape will unwind if the reel is turned clockwise.   You
   must  insert  a  write-enable  ring  in the back of the supply reel to
   allow writing on the tape.

   To load a tape reel, do the following:

        1.  Position the reel on the upper hub and press the reel lock.

        2.  Thread the tape by taking the tape from the supply  reel  and
            guiding it:

            a.  Toward the arrow to the upper left of the supply reel

            b.  Over the two top guide wheels from right to left

            c.  Down and to the left of the upper white guide wheel

            d.  Slightly right and down, to go under the read/write head

            e.  Down and to the left of the lower white guide wheel

            f.  Down under the capstan

            g.  Up and right, toward the arrow to the left of the take-up
                reel









                                    2-1
                               MAGNETIC TAPES                               MAGNETIC TAPES
















































   Figure 2-1:  TU45 Magnetic Tape Drive   Figure 2-1:  TU45 Magnetic Tape Drive



















                                    2-2
                               MAGNETIC TAPES                               MAGNETIC TAPES


        3.  Wrap the tape leader onto the take-up reel so that  the  tape
            will  wind  onto the reel when it is rotated clockwise.  Wind
            at least three turns onto the take-up reel.  Remove all slack
            in the tape path.

        4.  Recheck tape tracking in the guides and close the dust  cover
            door.

        5.  After the tape  has  been  loaded  and  checked  for  correct
            seating  in  the  guides,  bring  the  tape  to load point by
            pressing and releasing the LOAD switch.


                                    NOTE

           The door on the  drive  should  remain  closed  during
           normal operation.

   When the load cycle is complete, the tape will stop at the load point.
   Then,  if  the ON LINE indicator is not lit, press the ON LINE switch.
   The drive is now ready for use.  If the supply reel does  not  have  a
   write-enable ring, the FILE PROTECT indicator will be lit.



   2.1.2  TU45 Dismounting Procedure   2.1.2  TU45 Dismounting Procedure

   To unload a tape, do the following:

        1.  Press the ON LINE switch to turn off the indicator light.

        2.  Press and release the REWIND switch; the tape will rewind  to
            BOT (the beginning of tape marker).

        3.  Press and release the REWIND  switch  again; this  starts  an
            unload sequence.  (If the tape is at the BOT, one rewind will
            unload the tape.)

                                        NOTE

                    You do not have  to  wait  for  the  tape  to
                    rewind  to  BOT if you want to unload a tape;
                    you can press  the  REWIND  switch  twice  in
                    succession.


        4.  Open the door on the drive and remove the  reel.   Close  the
            door.  Put a ring or canister on the reel.  Place the reel in
            the proper place.




   2.1.3  TU70, TU71, or TU72 Mounting Procedure   2.1.3  TU70, TU71, or TU72 Mounting Procedure

   The supply reel (containing the tape to be read  or  written)  is  the
   right  reel  on the drive (Figure 2-2).  The tape should be positioned
   in such a way that  the  tape  will  unwind  if  the  reel  is  turned
   clockwise.   You  must  insert  a write-enable ring in the back of the
   supply reel to allow writing on the tape.






                                    2-3
                               MAGNETIC TAPES                               MAGNETIC TAPES


   To load a tape reel on a TU70, TU71, or TU72, do the following:

        1.  Press HUB/WINDOW UP switch to open the window.

        2.  Push the supply reel onto the  right-hand  hub  so  the  tape
            unwinds  clockwise.   (Once the reel is snapped onto the hub,
            the reel is automatically secured.)

                                        NOTE

                    The TU70, TU71, or TU72 drives can  use  tape
                    reels  enclosed in cartridges.  To mount this
                    type of tape reel, place the cartridge on the
                    right  hub  so  the two tabs on both sides of
                    the cartridge toggle fit into the  two  slots
                    on  the  left side of the hub.  The cartridge
                    toggle automatically  opens  in  the  loading
                    process and closes in the unloading process.


        3.  Be sure the end of the tape is not twisted and lies flush  on
            the reel.

        4.  Press the RESET switch to close the window.

                                        NOTE

                    If your  magnetic  tape  system  has  a  TX03
                    (Figure  2-3) on the TX02 controller, be sure
                    you enable only one switch at a time.   NEVER
                    have  both  switches  in the enable position.
                    When you enable switch A or B, you enable the
                    DX20  corresponding  to A or B.  Then the CPU
                    connected to the DX20 you enabled can  access
                    the tape drives.  If you do not know the DX20
                    and CPU correspondence to the TX03  switches,
                    ask     your     DIGITAL     Field    Service
                    Representative.  If you have a  TX05  option,
                    only  one  of the unit select switches can be
                    up for any particular tape unit.   Otherwise,
                    two  different  TX02s  can  talk  to the same
                    drive.
























                                    2-4
                               MAGNETIC TAPES                               MAGNETIC TAPES















































   Figure 2-2:  TU70, TU71, or TU72 Magnetic Tape Drive   Figure 2-2:  TU70, TU71, or TU72 Magnetic Tape Drive



        5.  Press LOAD REWIND switch to put the tape at the loadpoint.

        6.  Press START switch.  If the tape loads correctly,  the  READY
            light  comes  on.   If  the supply reel does not have a write
            enable ring, the WRITE DISABLE light comes on also.

            If the tape does not load correctly, the MACHINE CHECK  light
            flashes  and the window opens.  At that point, repeat Steps 3
            through 6.








                                    2-5
                               MAGNETIC TAPES                               MAGNETIC TAPES



















   Figure 2-3:  TX03/05 Switch   Figure 2-3:  TX03/05 Switch



   2.1.4  TU70, TU71, or TU72 Dismounting Procedure   2.1.4  TU70, TU71, or TU72 Dismounting Procedure

   To unload a tape, do the following:

        1.  Press RESET switch.

        2.  Press UNLOAD REWIND switch to completely rewind the tape  and
            open the window.

        3.  Pull the tape reel off the hub,  and  put  the  reel  in  the
            proper place.




   2.1.5  TU77 and TU78 Mounting Procedure   2.1.5  TU77 and TU78 Mounting Procedure

   The TU77 and TU78 drives  can  be  loaded  manually  or  automatically
   depending  on  what  size  reel  is being loaded.  When a 216 or 178mm
   (8-1/2 or 7in) reel is being loaded, the manual procedure must be used
   (Section 2.1.5.2).  If a 267mm (10-1/2in) reel is used and the reel is
   in a cartridge, the cartridge will engage the cartridge interlock  and
   causes the autoload procedure to be used (Section 2.1.5.1).

   If a tape cartridge is not used and the drive's front door is  closed,
   the  autoload procedure is followed.  If the front door is open and if
   the autoload interlock is pulled  out,  the  autoload  procedure  will
   still be used.  Otherwise, the manual procedure must be followed.

















                                    2-6
                               MAGNETIC TAPES                               MAGNETIC TAPES





















































   Figure 2-4:  Autoload/Manual Load Section   Figure 2-4:  Autoload/Manual Load Section














                                    2-7
                               MAGNETIC TAPES                               MAGNETIC TAPES


   2.1.5.1  Autoload Procedure   2.1.5.1  Autoload Procedure - A prerequisite for an autoload  sequence
   is that a full reel of tape be used.  A full reel of tape is such that
   the tape on the reel comes to within 1.59 and 0.64mm (5/8 and 1/4  in)
   of  the  other  edge  of the reel.  Make sure the tape reel is a large
   267mm (10-1/2in) reel.  The supply reel (containing  the  tape  to  be
   read or written) is the top reel on the drive (Figures 2-5 and 2-5.1).
   The reel should be positioned in such a way that the tape will  unwind
   if  the reel is turned clockwise.  You must insert a write-enable ring
   on the back of the supply reel to allow writing on the tape.

   To autoload a tape reel on a TU77 or TU78, do the following:

        1.  Place the supply reel in position on the  upper  hub,  rotate
            until   it   slips   easily   into   place,   and  press  the
            reel-retaining actuator.

        2.  Close the drive front door.

                                        NOTE

                    The  supply  reel  may  be  contained  in   a
                    wraparound cartridge.  It is not necessary to
                    remove or open the cartridge.  The  cartridge
                    will   be  opened  automatically  during  the
                    autoload sequence.  If a wraparound cartridge
                    is  not  used,  the  drive front door must be
                    shut to  close  the  autoload  interlock  and
                    enable the autoload sequence.  If you want to
                    leave the door open, override  the  interlock
                    by pulling the switch out.


        3.  Check that power is applied to the tape  drive  (power  light
            on).

        4.  Press RESET switch.

        5.  Press LOAD/REW switch.

        6.  Press ONLINE switch.

   The tape-up reel will start to turn clockwise.  The supply  reel  will
   turn  counterclockwise  a  few turns and then rotate forward and eject
   the tape into the tape path.  The tape  threads  and  wraps  onto  the
   tape-up reel.





















                                    2-8
                               MAGNETIC TAPES                               MAGNETIC TAPES




































































                                    2-9
                               MAGNETIC TAPES                               MAGNETIC TAPES


   Figure 2-5:  TU77 Magnetic Tape Drive   Figure 2-5:  TU77 Magnetic Tape Drive

































































                                    2-10
                               MAGNETIC TAPES                               MAGNETIC TAPES



































   Figure 2-90:  Tape Path and Controls   Figure 2-90:  Tape Path and Controls
































                                    2-11
                               MAGNETIC TAPES                               MAGNETIC TAPES


   2.1.5.2  Manual Procedure   2.1.5.2  Manual Procedure - The supply reel (containing the tape to be
   read or written) is the top reel on the drive (Figures 2-5 and 2-5.1).
   The reel should be positioned in such a way that the tape will  unwind
   if  the reel is turned clockwise.  You must insert a write-enable ring
   on the back of the supply reel to allow writing on the tape.

   To manually load a tape reel on a TU77 or TU78, do the following:

        1.  Place the supply reel in position on the  upper  hub,  rotate
            until   it   slips   easily   into   place,   and  press  the
            reel-retaining actuator.

        2.  Open buffer door.

        3.  Manually place the tape leader between thread block number  1
            and air bearing number 1 (Figure 2-5.1).

                                        NOTE

                    Ensure that there is no  tape  slack  or  sag
                    between  the  supply  reel  and  thread block
                    number 1.


        4.  Carefully close the buffer  door  making  sure  the  door  is
            closed securely.

        5.  Close the transport front door.

        6.  Check that power is applied to the tape (power light is on).

        7.  Press RESET switch.

        8.  Press LOAD/REW switch.

        9.  Press ONLINE switch.






























                                    2-12
                               MAGNETIC TAPES                               MAGNETIC TAPES


   2.1.6  TU77 and TU78 Dismounting Procedure   2.1.6  TU77 and TU78 Dismounting Procedure

   To unload a tape, do the following:

        1.  Press RESET switch.

        2.  Press UNLOAD switch.

        3.  Pull the tape reel off the hub,  and  put  the  reel  in  the
            proper place.




   2.2  CLEANING MAGNETIC TAPE DRIVES   2.2  CLEANING MAGNETIC TAPE DRIVES

   Clean equipment is essential for proper operation.   Minute  particles
   of dirt trapped between the head and the tape can cause data errors.

   Each day you should do the following:

        1.  Clean the head.  Using  a  lint-free  cloth  or  cotton  swab
            moistened  in  isopropyl  alcohol, wipe the head carefully to
            remove all accumulated oxide and dirt.

                                        NOTE

                    Do not use rough or abrasive cloths to  clean
                    the head.


        2.  Clean the fixed guides, tape  cleaner,  capstan,  and  vacuum
            chamber  with  a cotton swab moistened with isopropyl alcohol
            to remove accumulated oxide  and  dirt.   You  may  open  the
            vacuum column door to access the chamber surfaces.

        3.  Clean the rotating tape guides  with  a  lint-free  cloth  or
            cotton   swab  moistened  in  isopropyl  alcohol.   Wipe  the
            surfaces carefully to remove all accumulated oxide and dirt.


                                    NOTE

           Do not soak the guides with excessive solvent; it  can
           seep into the guide bearings, causing contamination or
           a breakdown of the bearing lubricant.




















                                    2-13





































































                                    3-1












                                 CHAPTER 3                                 CHAPTER 3

                                CARD READER                                CARD READER



   The operator control panels  for  the  low-speed  card  reader  CR10-E
   (Model  M200)  and  high-speed  card  reader CR10-F (Model RS1200) are
   shown in Figures 3-1 and 3-2.



   3.1  LOADING AND UNLOADING CARDS   3.1  LOADING AND UNLOADING CARDS

   Use the following procedure to load  the  input  hopper  with  punched
   cards to be read:

        1.  Be sure the reader is powered on (POWER indicator  lit),  and
            check  that  the MODE switch on the rear control panel of the
            reader is set to REMOTE.

        2.  Pull the hopper follower back with one hand and begin loading
            card  decks into the hopper.  Be sure to place the first card
            to be read at the front with the 9 edge down, column 1 to the
            left.

        3.  Continue placing cards into the  input  hopper  until  it  is
            loosely filled.

                                       CAUTION

                    Do not pack the input hopper so full that the
                    air  from  the blower cannot riffle the cards
                    properly.   If  the  cards  are  packed   too
                    tightly,  the  vacuum  picker  will  not work
                    properly.





















                                    3-1
                                CARD READER                                CARD READER
























































   Figure 3-1:  CR10-E Card Reader   Figure 3-1:  CR10-E Card Reader











                                    3-2
                                CARD READER                                CARD READER




































































                                    3-3
                                CARD READER                                CARD READER


   Figure 3-2:  CR10-F Card Reader   Figure 3-2:  CR10-F Card Reader

































































                                    3-4
                                CARD READER                                CARD READER


        4.  Press RESET switch to allow cards to be read.

        5.  You may continue loading cards while the reader is operating,
            provided  you  maintain  tension  in the front portion of the
            deck as you add cards to the rear.  Do  not  add  more  cards
            until the hopper is at least half empty.

                                       CAUTION

                    When you are trying to maintain  pressure  on
                    the  card  deck,  use just enough pressure to
                    maintain  the  riffle   action   to   prevent
                    damaging cards or jamming the reader.


        6.  Usually, all cards are moved  through  the  reader  into  the
            stacker.  However, if you need to remove cards from the input
            hopper, simply pull back the follower  and  remove  the  card
            deck.

        7.  To unload cards from the output  stacker,  pull  the  stacker
            follower back with one hand and remove the card deck from the
            stacker.  Be careful to maintain the order of the deck.   The
            stacker may be unloaded while cards are being read.




   3.2  CLEANING THE CARD READER   3.2  CLEANING THE CARD READER

   There are no cleaning procedures that you must  perform  on  the  card
   reader  other  than  the  general  ones  given at the beginning of the
   chapter.

































                                    3-5





































































                                    4-1












                                 CHAPTER 4                                 CHAPTER 4

                                DISK DRIVES                                DISK DRIVES



   The different types of disk drives along with their  operator  control
   panels are shown in Figures 4-1, 4-2, 4-3, and 4-4.



   4.1  MOUNTING AND DISMOUNTING DISK PACKS   4.1  MOUNTING AND DISMOUNTING DISK PACKS

|  The following steps describe how to physically mount and dismount disk
   packs.   Extreme  care  must  be taken to avoid physical damage to the
   pack and drive.  Do not put anything on top of a  drive  except  empty
   disk pack covers.



   4.1.1  Mounting RP04 or RP06 Disk Packs   4.1.1  Mounting RP04 or RP06 Disk Packs

   To mount an RP04 or RP06 disk pack, perform the following steps:

        1.  Slide back or lift the drive cover.

        2.  Remove the bottom plate from the disk pack container by means
            of  the locking handle located on the underside of the bottom
            plate.

        3.  Being sure that you have the pack with the correct  label  on
            it, slide the pack straight down onto the disk drive hub.

        4.  Turn the pack cover clockwise until the pack is  locked  into
            position.  DO NOT FORCE THE COVER ONCE IT STOPS TURNING.

        5.  Pull the pack cover straight up and off the pack.

        6.  Close the drive cover and put the empty disk  pack  cover  on
            top of the drive.

        7.  Push the START/STOP switch to the START position.

        8.  When the READY light is on, the drive is ready.




   4.1.2  Dismounting RP04 or RP06 Disk Packs   4.1.2  Dismounting RP04 or RP06 Disk Packs

   To dismount an RP04 or RP06 disk pack, perform the following steps:

        1.  Push the START/STOP switch to  the  STOP  position  and  wait
            until the pack comes to a complete stop.



                                    4-1
                                DISK DRIVES                                DISK DRIVES


        2.  Slide back or lift the drive cover.

        3.  Slip the pack cover straight down over the pack.

        4.  Turn the cover counter clockwise until the pack is free.

        5.  Lift the pack straight up until it clears the drive.

        6.  Secure the bottom plate to the pack cover  by  means  of  the
            locking handle located on the underside of the bottom plate.

        7.  Close the drive cover.




   4.1.3  Powering Up an RP20 Disk System   4.1.3  Powering Up an RP20 Disk System

   To power up an RP20 disk system, perform the following steps.

        1.  Place the POWER switch, located on the front  of  the  master
            disk drive, to the ENABLE position.

        2.  Press the POWER ON button located on the front of master disk
            drive.

                                        NOTE

                    If the disk drive does not  power  up,  check
                    the  POWER  ON switch in the back of the disk
                    control unit.  If the switch  is  in  the  ON
                    position  and  the  disk  drive  is still not
                    powered up, call your DIGITAL  Field  Service
                    Engineer.




   4.1.4  Powering Down an RP20 Disk System   4.1.4  Powering Down an RP20 Disk System

   To power down an RP20 disk system, perform the following steps.

        1.  Cycle down all RP20 disk drives.

        2.  Place the POWER switch, located on the front  of  the  master
            disk drive, to the OFF position.




   4.1.5  Starting an RP20 Disk Drive   4.1.5  Starting an RP20 Disk Drive

   To start an RP20 disk drive, perform the following steps.

        1.  Place the START/STOP toggle switch to the START position.

        2.  Wait for the READY light to illuminate.

   Follow these procedures for each RP20 disk drive you plan on using.







                                    4-2
                                DISK DRIVES                                DISK DRIVES


   4.1.6  Stopping an RP20 Disk Drive   4.1.6  Stopping an RP20 Disk Drive

   To stop an RP20 disk drive, place the START/STOP toggle switch to  the
   STOP position.






























































                                    4-3
                                DISK DRIVES                                DISK DRIVES


   4.1.7  Starting an RP07 Disk Drive   4.1.7  Starting an RP07 Disk Drive

   To start an RP07 disk drive, perform the following steps.

        1.  Place the START/STOP toggle switch to the START position.

        2.  Wait for the on-line light to illuminate.

   Follow these procedures for each RP07 disk drive you plan on using.

                                    NOTE

           When the RP07 is brought on-line  the  access  control
           light (A or B) is illuminated.




   4.1.8  Stopping an RP07 Disk Drive   4.1.8  Stopping an RP07 Disk Drive

   To stop an RP07 disk drive, perform the following step.

        1.  Place the START/STOP toggle switch in the STOP position.

|  
|  
|  
   4.1.9  Mounting RA60 Disk Packs|  4.1.9  Mounting RA60 Disk Packs
|  
|  To mount an RA60 disk pack, perform the following steps:
|  
|       1.  Push the latch on the drawer cover and pull the drawer out.
|  
|       2.  Lift the drive cover.
|  
|       3.  Make sure that you have the pack with the  correct  label  on
|           it.  Slide the pack straight down on to the disk drive hub.
|  
|       4.  Turn the pack cover handle clockwise until the pack is locked
|           into position.  DO NOT FORCE THE COVER ONCE IT STOPS TURNING.
|  
|       5.  Pull the pack cover straight up and off the pack.
|  
|       6.  Close the drive cover and put the empty disk  pack  cover  on
|           top of the drive.
|  
|       7.  Verify that the port switch is set to the A, B, or the A  and
|           B position, depending on which port you are using.
|  
|       8.  Push the RUN/STOP switch.
|  
|       9.  When the READY light is on, the drive is ready.
|  
|  
|  
   4.1.10  Dismounting RA60 Disk Packs|  4.1.10  Dismounting RA60 Disk Packs
|  
|  To dismount an RA60 disk pack, perform the following steps:
|  
|       1.  Push the RUN/STOP switch and wait until the READY light  goes
|           off.





                                    4-4
                                DISK DRIVES                                DISK DRIVES


|       2.  Push the latch and pull the drawer out.
|  
|       3.  Lift the drive cover.
|  
|       4.  Slip the pack cover straight down over the pack.
|  
|       5.  Turn the cover counter clockwise until the pack is free.
|  
|       6.  Lift the pack straight up until it clears the drive.
|  
|       7.  Close the drive cover and push the drawer in.
|  
|  
|  
   4.1.11  Starting an RA60 or RA81 Disk Drive|  4.1.11  Starting an RA60 or RA81 Disk Drive
|  
|  To start an RA60 or RA81 disk drive, perform the following steps:
|  
|       1.  Verify that the port switch A, B, or A/B is set, depending on
|           which port you are using.
|  
|       2.  Press the RUN/STOP switch.
|  
|       3.  Wait for the READY light to illuminate.
|  
|  Follow these procedures for each RA60 or RA81 disk drive you  plan  to
|  use.
|  
|  
|  
   4.1.12  Stopping an RA60 or RA81 Disk Drive|  4.1.12  Stopping an RA60 or RA81 Disk Drive
|  
|  To stop an RA60 or RA81 disk drive, press the RUN/STOP switch and wait
|  for the READY light to go off.
|  
|  
|  
   4.1.13  Powering up an HSC50 Disk Controller|  4.1.13  Powering up an HSC50 Disk Controller
|  
|  For information on powering up an HSC50 disk controller,  consult  the
|  latest version of the HSC50 User Guide.
|  
|  
|  
   4.1.14  Powering Down an HSC50 Disk Controller|  4.1.14  Powering Down an HSC50 Disk Controller
|  
|  For information on powering down an HSC50 disk controller, consult the
|  latest version of the HSC50 User Guide.


















                                    4-5
                                DISK DRIVES                                DISK DRIVES


   4.2  CLEANING DISK PACKS AND DRIVES   4.2  CLEANING DISK PACKS AND DRIVES

   Other than keeping the outside of the drive and the cover of the packs
   clean,  you  should  leave  this  task  to  your DIGITAL Field Service
   Representative.










































   Figure 4-1:  RP04 Disk Drive   Figure 4-1:  RP04 Disk Drive


















                                    4-6
                                DISK DRIVES                                DISK DRIVES




















































   Figure 4-2:  RP06 Disk Drive   Figure 4-2:  RP06 Disk Drive















                                    4-7
                                DISK DRIVES                                DISK DRIVES




















































   Figure 4-3:  RP20 Disk Drive   Figure 4-3:  RP20 Disk Drive















                                    4-8
                                DISK DRIVES                                DISK DRIVES




































































                                    4-9
                                DISK DRIVES                                DISK DRIVES


   Figure 4-5:  RP07 Disk Drive   Figure 4-5:  RP07 Disk Drive

































































                                    4-10
                                DISK DRIVES                                DISK DRIVES


   4.3  FORMATTING DISK PACKS   4.3  FORMATTING DISK PACKS

   The following procedure explains how to  format  RP04  and  RP06  disk
|  packs during timesharing.

                                    NOTE

|          The RP07, RP20, RA60 and RA81 disk packs  are  already
|          formatted.   If  you need to have an RA60 or RA81 disk
|          pack reformatted, contact your Digital  Field  Service
|          Representative.

   To format an RP04 or RP06 disk pack while the system  is  timesharing,
   do the following:

        1.  Type PUSH to OPR.
|  
|       2.  Type ENABLE.

        3.  Type FORMAT.


                                  CAUTION

                  Format only one disk pack at a time.  If
                  you  run  more  than  one FORMAT program
                  simultaneously,    you    can    destroy
                  information on the packs.  Also, use the
                  FORMAT program only when there  is  just
                  one  disk  pack  on  a  channel on-line;
                  otherwise you could  crash  the  system.
                  However,  the  VERIFY  mode  allows more
                  than one disk pack  per  channel  to  be
                  on-line.


        4.  Type RP04 or RP06 to indicate the kind of pack to format,  or
            type HELP to print the help text.

        5.  If FORMAT prints THE FOLLOWING UNIT IS AVAIL., type Y to  use
            that  unit; otherwise, type N.  If you type N and other units
            of the correct kind are available, FORMAT  prints  the  above
            message again.

            When no units of  the  correct  kind  are  available,  FORMAT
            prints  a  message  starting with SORRY - THERE ARE NO DRIVES
            and then exits.  You should then type  CTRL/X  to  return  to
            PTYCON.   Later,  when  a drive is available, try this entire
            procedure again.  A drive is available when it is the correct
            type  for  the  pack  you  specify (RP04 or RP06), when it is
            off-line, and when it is not in use by a diagnostic.

        6.  After you type Y for an available unit, place the pack to  be
            formatted  on  the  drive.   Put  the drive on-line, and then
            write-enable the drive.  Then  press  RETURN  to  the  FORMAT
            program.










                                    4-11
                                DISK DRIVES                                DISK DRIVES


        7.  Type F, V, or B.

                F formats the pack and destroys all data on the pack.

                V verifies (maps the bad regions on) a formatted pack.
                  It creates new BAT blocks first and then  puts  entries
                  in  the  BAT  blocks  for  any bad regions found on the
                  disk.   Data,  other  than  the  BAT  blocks,  is   not
                  destroyed.

                 B formats and then verifies.

        8.  When formatting a pack having data  indicating  a  structure,
            FORMAT  asks if you are sure you want to reformat.  Type Y to
            reformat; otherwise, type N.

        9.  When formatting and/or verification end(s),  FORMAT  asks  if
            you  want  to format another pack.  Type Y for yes, N for no.
            If you type Y, go back to Step 3.

       10.  After you type N in Step 8, type CTRL/X to return to PTYCON.


                              ----- HINT -----

           For more detail on FORMAT, type  HELP  to  FORMAT,  or
           give the command PRINT HLP:FORMAT.HLP for a listing of
           the FORMAT help text.

                            ----- Example -----

        OPR>PUSH
        TOPS-20 Command Processor 6(772)
        @ENABLE
        $FORMAT

        TOPS-20 ON-LINE FORMATTER FOR DISK PACKS ON RH20'S, VERSION IS 1(0)

        ENTER TYPE OF PACK TO BE USED. (OR HELP)
        PICK ONE: (  HELP  RP04  RP05  RP06  ) - RP06

        THE FOLLOWING UNIT IS AVAIL.  DRIVE-5 RH-540
        DO YOU WISH TO USE THIS ONE ?("Y" OR "N" <CR>) - Y


        OPR ACT'N REQ'D:  DRIVE-5 RH-540
        CYCLE UP PACK TO BE FORMATTED AND WRITE ENABLE THE DRIVE
        HIT <CR> WHEN READY


        - BEWARE - FORMATTING DESTROYS ALL EXISTING PACK DATA
        OPTIONS ARE: FORMAT ONLY (F), VERIFY ONLY (V), DO BOTH (B)
        PICK ONE (F,V,B) - F

        THE SERIAL # OF THE DRIVE IS - 73.











                                    4-12
                                DISK DRIVES                                DISK DRIVES


        PACK NAME IS: PS
        ARE YOU SURE YOU WANT IT RE-FORMATTED  ? ("Y" OR "N" <CR>) - Y

        22-JUN-78 10:35:08 STARTING FORMAT OPERATION
        22-JUN-78 10:43:02  OPERATION 20.% COMPLETED. CURRENT BLOCK #61941.
        22-JUN-78 10:57:19  OPERATION 40.% COMPLETED. CURRENT BLOCK #123882.
        22-JUN-78 11:04:02  OPERATION 60.% COMPLETED. CURRENT BLOCK #185823.
        22-JUN-78 11:10:56  OPERATION 80.% COMPLETED. CURRENT BLOCK #247761.
        22-JUN-78 11:17:43 FORMAT COMPLETED

        OPR ACT'N REQ'D:  DRIVE-5 RH-540
        REMOVE PACK FROM THE DRIVE
        HIT <CR> WHEN READY


        FORMAT ANOTHER PACK ? ("Y" OR "N" <CR>) - N

        [EXIT]
        @
        PTYCON>

                          ----- Requirements -----

   OPERATOR, WHEEL, or MAINTENANCE capability required.

   The program must be run under a timesharing job, not a batch job.

                         ----- Error Message -----

   USER DOES NOT HAVE PROPER PRIV. TO RUN THIS PROGRAM !!
   WHEEL, OPERATOR, OR MAINTENANCE CAPABILITY REQUIRED

   Although you do not need to enable capabilities  to  run  FORMAT,  the
   logged-in  directory under which you run FORMAT must have at least one
   of the required capabilities.  You can run FORMAT under an  <OPERATOR>
   which has OPERATOR capability.






























                                    4-13





































































                                    5-1












                                 CHAPTER 5                                 CHAPTER 5

                                FLOPPY DISKS                                FLOPPY DISKS



   As you face the two floppy disk units, unit 0 is  the  left  one,  and
   unit 1 is the right one.



   5.1  INSERTING AND REMOVING FLOPPY DISKS   5.1  INSERTING AND REMOVING FLOPPY DISKS

   To insert a floppy disk (Figure 5-1), first choose  the  correct  unit
   and  press  the  pushbutton  in  the  middle  of the unit to allow the
   spring-loaded front cover to open.  Insert the floppy  disk  with  the
   narrow  slot toward the back and the label up.  Then push down the bar
   on the cover to lock it.

   To remove a floppy disk, press the pushbutton to open the front  cover
   and slide the floppy disk out.

                                    NOTE

           Do not open the covers  while  the  floppy  disks  are
           being accessed.




   5.2  HANDLING FLOPPY DISKS   5.2  HANDLING FLOPPY DISKS

   To prolong the life of a floppy disk and to prevent errors, you should
   handle  floppy  disks  with  reasonable  care.   You should follow the
   handling recommendations given below to prevent  unnecessary  loss  of
   data or interruptions of system operation.

        1.  To attach visual information to a floppy  disk,  first  write
            the  information  on  a  label,  then attach the label to the
            floppy disk.  Do not write on the floppy disk.

        2.  Do not use paper clips on a floppy disk.

        3.  When you write on the outer  jacket  in  which  you  store  a
            floppy  disk, do not use anything that leaves flakes, such as
            lead or grease pencils.

        4.  Do not touch the surface exposed in the slot or  small  index
            hole.

        5.  Do not clean the floppy disk in any manner.

        6.  Keep the floppy disk away from magnets or tools that may have
            become  magnetized.  Exposure to a magnetic field may cause a
            loss of data.


                                    5-1
                                FLOPPY DISKS                                FLOPPY DISKS


        7.  Do not expose the floppy disk to a heat source or sunlight.

        8.  Always return floppy disks to  the  envelopes  supplied  with
            them  to  protect  them  from  dust  and dirt, and store them
            horizontally.

        9.  Protect empty envelopes  from  liquids,  dust,  and  metallic
            materials.

       10.  Do not place heavy items on floppy disks.

       11.  Do not store floppy disks on computer cabinets or  in  places
            where dirt can be blown by fans.

       12.  If a floppy disk has been exposed to less than 59 F (15 C) or
            more than 90 F (32 C), let it stay in the computer room about
            five minutes before you use it.
































   Figure 5-1:  Floppy Disk   Figure 5-1:  Floppy Disk
















                                    5-2
                                FLOPPY DISKS                                FLOPPY DISKS














                                  PART IV                                  PART IV
                            STARTING THE SYSTEM                            STARTING THE SYSTEM

                                  ABSTRACT                                  ABSTRACT

           Chapter 1 describes the various ways of  starting  the
           2040S  and  2060  hardware systems.  This chapter also
           describes how to load the TOPS-20 monitor.














































                                    5-3
                                FLOPPY DISKS                                FLOPPY DISKS


                                      CONTENTS



   CHAPTER 1       STARTING THE HARDWARE SYSTEM

           1.1     POWERING UP THE SYSTEM . . . . . . . . . . . . . . 1-3
           1.2     LOADING THE SYSTEM . . . . . . . . . . . . . . . . 1-4
           1.2.1     Loading from Disk Pack . . . . . . . . . . . . . 1-7
           1.2.2     Loading from Floppy Disks  . . . . . . . . . .  1-11
           1.2.3     Loading Via the Switch Register  . . . . . . .  1-15
           1.3     LOADING THE TOPS-20 MONITOR  . . . . . . . . . .  1-19
           1.3.1     Loading TOPS-20 from a Disk Pack with BOOT . .  1-19
           1.3.2     Loading TOPS-20 from Magnetic Tape with MTBOOT  1-19
           1.4     ANSWERING MONITOR START-UP QUESTIONS . . . . . .  1-20
           1.5     READYING THE SYSTEM FOR TIMESHARING  . . . . . .  1-23
           1.5.1     Timesharing with Operator Coverage . . . . . .  1-25
           1.5.2     Timesharing without Operator Coverage  . . . .  1-26


   FIGURES

           1-1     Load Switches and Switch Register  . . . . . . . . 1-2


   TABLES

           1-1     Switch Register Bit Definitions  . . . . . . . .  1-16






































                                    5-4












                                 CHAPTER 1                                 CHAPTER 1

                        STARTING THE HARDWARE SYSTEM                        STARTING THE HARDWARE SYSTEM



   Before you start the system, you should become  familiar  with  a  few
   switches and lights on the processor.  (See Figure 1-1.)

   The four load switches and two power  switches  are  on  the  leftmost
   cabinet,  to the right of the DECSYSTEM-20 label.  Just above them are
   the fault and power lights.  The switch register is located behind the
   door below the load and power switches.












































                                    1-1
                        STARTING THE HARDWARE SYSTEM                        STARTING THE HARDWARE SYSTEM


   Figure 1-1:  Load Switches and Switch Register   Figure 1-1:  Load Switches and Switch Register

































































                                    1-2
                        STARTING THE HARDWARE SYSTEM                        STARTING THE HARDWARE SYSTEM


   The white load switches are labeled in Figure  1-1  as  SW REG,  DISK,
   FLOPPY, and ENABLE.  The purpose of these switches are:

        LOAD SWITCH                   PURPOSE

        SW REG        Loads the system according to the contents  of  the
                      switch register (Part IV Section 1.2.3).

        DISK          Loads the system from a disk pack (Part IV  Section
                      1.2.1).

        FLOPPY        Loads the system from floppy disks (Part IV Section
                      1.2.2).

        ENABLE        Enables loading when pushed simultaneously with  SW
                      REG, DISK, or FLOPPY switches.

   The black power switch, labeled  POWER  ON  and  POWER  OFF,  normally
   supplies  power  to  the  system.   The red EMERGENCY POWER OFF switch
   should be used only in emergencies, such as in a fire, when  you  must
   turn off the power as quickly as possible.

                                  CAUTION

           After you press the EMERGENCY switch,  you  must  call
           your  DIGITAL  Field Service Representative to restore
           power.

   The switch register contains 18 switches (or bits) which are  used  to
   set certain values when you load via the switch register.

   When the power light is red, it indicates that power  is  on.   If  it
   blinks,  a  DIGITAL  Field  Service  Representative  at  your site has
   previously set OVERRIDE.  You should not run the system with  OVERRIDE
   set,  unless  instructed  to  do  so  by  your  DIGITAL  Field Service
   Representative,  because  the  system  does  not  power  down  if   it
   overheats.

   The fault light should normally be off.   If  it  glows,  notify  your
   DIGITAL Field Service Representative.  A glowing fault light indicates
   a malfunction, such as overheating, which stops the system.



   1.1  POWERING UP THE SYSTEM   1.1  POWERING UP THE SYSTEM

   In most cases you should only have to check  to  see  that  the  power
   light over the black POWER ON/POWER OFF switch is glowing red.  If the
   light is not glowing red, place the switch in the POWER ON position.

   Be sure that the system is completely powered on:

        1.  Check the disk drives.  If power  is  off,  remove  the  back
            cover and make sure that the breakers labeled CB1 and CB2 are
|           both on.  For HSC-50 disk subsystems,  refer  to  the  HSC-50
|           User's Guide.

        2.  Check the magnetic tape drives.  If power is off,  press  the
            rocker  switch,  that  is,  the  white  switch containing the
            ON/OFF light on the front panel.  If power is still off, open
            the front cabinet and reset the breaker.





                                    1-3
                        STARTING THE HARDWARE SYSTEM                        STARTING THE HARDWARE SYSTEM


        3.  Check the line printers.  If power is  off  on  an  LP20A  or
            LP20B printer (which has four buttons on the right of the top
            panel), reset the knee-level breaker on the lower panel.  The
            TAPE light will be on.  This means you must reload the Direct
            Access Vertical Format Unit (VFU) when the line printer is up
            and  running.   If  you have an LP20F or LP20H printer (which
            has four rocker switches on the left of the top panel),  lift
            the  cover  just  above the lights and reset the breaker.  Be
            sure that the printer has paper.

        4.  Turn on the console terminal.  Be sure that it is on-line and
            has paper.




   1.2  LOADING THE SYSTEM   1.2  LOADING THE SYSTEM

   After powering up the system or deciding you  must  reload,  you  have
   some  system  loading  alternatives.  You can load from a disk pack or
   floppy disks, and you can specify nondefault parameters via the switch
   register.   In most cases, you should load from a disk pack.  However,
   if you do not have a disk drive available on  the  RH20,  or  if  your
   System  Manager wants you to use software from a floppy disk, load the
   system using floppy disks.  If you use the switch  register  to  load,
   you also enter the KL initialization operator dialog (KLINIT).  KLINIT
   lets you take nondefault loading paths; that is, you can load  from  a
   unit  other  than  disk  drive  0,  configure  memory yourself, load a
   bootstrap from any file, or specify a monitor other than  the  default
   monitor.




































                                    1-4
                        STARTING THE HARDWARE SYSTEM                        STARTING THE HARDWARE SYSTEM


                               LOADING FROM DISK PACK

                                    Sample Output

|           RSX-20F YB15-20 1:00 5-MAR-84

            [SY0: REDIRECTED TO DB0:]
            [DB0: MOUNTED]
|           KLI -- VERSION VB15-12 RUNNING
            KLI -- KL10 S/N:  2136., MODEL B, 60 HERTZ
            KLI -- KL10 HARDWARE ENVIRONMENT:
                    MOS MASTER OSCILLATOR
                    EXTENDED ADDRESSING
                    INTERNAL CHANNELS
                    CACHE

|           KLI -- MICROCODE VERSION 352 LOADED
            KLI -- ALL CACHES ENABLED
            LOGICAL MEMORY CONFIGURATION:
             ADDRESS   SIZE   INT   TYPE   CONTROLLER
            00000000   768K    4    MF20       11
|           03000000   768K    4    MF20       12
            KLI -- CONFIGURATION FILE ALTERED
            KLI -- BOOTSTRAP LOADED AND STARTED

|           BOOT V10.0(201)
|           [BOOT: STARTING CHN:4 DX20A:0 MICROCODE V10(1)] [OK]
|           [BOOT: LOADING] [OK]


            [PS MOUNTED]

            SYSTEM RESTARTING, WAIT...
|           ENTER CURRENT DATE AND TIME: 5-MAR-84 1300<RET>

|           YOU HAVE ENTERED SATURDAY, 5-MARCH-1984
             IS THIS CORRECT (Y,N) Y<RET>
            WHY RELOAD? SCH<RET>
            RUN CHECKD? Y<RET>
            [CHECKING FILE CONSISTENCY]

            [WORKING ON STRUCTURE - PS:]


            LOCAL COUNT OF FILE PAGES: 6691
            LOCAL COUNT OF OVERHEAD PAGES: 2671
            LOCAL COUNT OF USED PAGES: 9362

            SYSTEM COUNT BEFORE CHECKD: 9362
            SYSTEM COUNT AFTER CHECKD: 9362

            THERE ARE NO LOST PAGES.

            RUNNING DDMP

            *****
|           5-MAR-84    13:07:30 - TGHA V2(6) IS RUNNING FOR THE FIRST
|           TIME
            *****







                                    1-5
                        STARTING THE HARDWARE SYSTEM                        STARTING THE HARDWARE SYSTEM


|           SYSJOB 6(23) STARTED AT 5-MAR-84 1057
            RUN SYS:ORION
            RUN SYS:QUASAR
            RUN SYS:MOUNTR
            RUN SYS:INFO
            RUN SYS:MAILER
            RUN SYS:MAPPER
            RUN SYS:LPTSPL
            RUN SYS:CDRIVE
            RUN SYS:SPRINT
            JOB 0 /LOG OPERATOR XX OPERATOR
            ENA
            ^ESET LOGIN PSEUDO
            ^ESET LOGIN CONSOLE
            ^ESET OPERATOR
            PTYCON
|           GET SYSTEM:6-PTYCON.ATO
            /
            JOB 1 /LOG OPERATOR XX OPERATOR
            ENA
            RUN SYS:BATCON
            /
            JOB 2 /LOG OPERATOR XX OPERATOR
            ENA
            RUN SYS:NETCON
            /








































                                    1-6
                        STARTING THE HARDWARE SYSTEM                        STARTING THE HARDWARE SYSTEM


   1.2.1  Loading from Disk Pack   1.2.1  Loading from Disk Pack

   Loading from disk pack is the most common way to load the system.   Be
   sure that system power is ON, that all hardware and software have been
   correctly installed,  and  that  the  disk  packs  have  been  mounted
   properly.   Also,  be  sure the formatted disk pack containing TOPS-20
   and RSX-20F files is on a dual-ported drive (CONTROLLER SELECT  switch
   points to A/B), and the drive is unit 0 on the RH20.

   Next, do the following:

        1.  Press the DISK and ENABLE load switches simultaneously.

        2.  Type the current date and time and confirm it.

        3.  Type the reason for reloading.

        4.  Type YES or NO response to the RUN CHECKD question.

   These steps load the front-end software, load the TOPS-20 monitor, and
   start the system for timesharing.

   Now, a more detailed explanation of the above steps:

        1.  Press the upper halves of the DISK and ENABLE  load  switches
            simultaneously.   The following is an example of what is then
            printed on the CTY:

|                RSX-20F YB15-20 1:00 5-MAR-84

                 [SY0: REDIRECTED TO DB0:]
                 [DB0: MOUNTED]
|                KLI -- VERSION VB15-12 RUNNING
                 KLI -- KL10 S/N:  2136., MODEL B, 60 HERTZ
                 KLI -- KL10 HARDWARE ENVIRONMENT:
                         MOS MASTER OSCILLATOR
                         EXTENDED ADDRESSING
                         INTERNAL CHANNELS
                         CACHE

|                KLI -- MICROCODE VERSION 352 LOADED
                 KLI -- ALL CACHES ENABLED
                 LOGICAL MEMORY CONFIGURATION:
                  ADDRESS     SIZE  INT    TYPE CONTROLLER
                 00000000     768K   4     MF20     11
                 KLI -- CONFIGURATION FILE ALTERED
                 KLI -- BOOTSTRAP LOADED AND STARTED


|                BOOT V10.0(201)
|                [BOOT: LOADING] [OK]


                 [PS MOUNTED]

                 System restarting, wait...










                                    1-7
                        STARTING THE HARDWARE SYSTEM                        STARTING THE HARDWARE SYSTEM


            The first line of output tells you the version  and  creation
            time  and  date of RSX-20F.  The next two lines tell you that
            DB0: (the disk pack on drive 0) is the system  device  (SY0:)
            for  the  front-end  tasks and that it is mounted.  All lines
            beginning with KLI and the text between those  lines  contain
|           output  from  KLINIT.  The line BOOT V10.0 (167) notifies you
            that the BOOT program is running, and the line following this
            output  tells  you  what the BOOT program is doing.  The line
            [PS MOUNTED] is output by the TOPS-20 monitor and means  that
            the  public  file  structure  has  been  mounted and the line
            following this output tells you  what  the  BOOT  program  is
            doing.   TOPS-20  then outputs the next line to all terminals
            to indicate the system is being restarted and is soon  to  be
            available.

            If you have a DX20  magnetic  tape  system  or  a  DX20  disk
            system,  you  also  see a message(s) similar to the following
            before [PS MOUNTED]:

|           [BOOT:  STARTING CHN:1 DX20A:0 MICROCODE V10(0)] [OK]

|           [BOOT:  STARTING CHN:2 DX20B:0 MICROCODE V10(0)] [OK]

            If "?" precedes CHN., see Part VI Section 1.4.5.

                                        NOTE

                    DX20:A specifies a DX20 tape system
                    DX20:B specifies a DX20 disk system


                                       WARNING

                    If a power-fail occurs, you must  reload  the
                    DX20  microcode  manually.   Refer to Part VI
                    Section 1.4.5.


                                        NOTE

                    The  above  example  assumes  you  have   the
                    monitor  in PS:<SYSTEM>MONITR.EXE and all PS:
                    packs are on-line.  To boot the system from a
                    structure other than PS:  or from a different
                    file, see Part  IV  Section  1.2.3  for  this
                    procedure.


        2.  Continue at Part IV Section 1.4, Answering  Monitor  Start-up
            Question
















                                    1-8
                        STARTING THE HARDWARE SYSTEM                        STARTING THE HARDWARE SYSTEM


                              LOADING FROM FLOPPY DISKS

                                    Sample Output

|                RSX-20F YB15-20 8:55 5-MAR-84

                 [SY0: REDIRECTED TO DX0:]
                 [DX0: MOUNTED]
                 [DX1: MOUNTED]
|                KLI -- VERSION VB15-12 RUNNING
                 KLI -- KL10 S/N:  2136., MODEL B, 60 HERTZ
                 KLI -- KL10 HARDWARE ENVIRONMENT:
                         MOS MASTER OSCILLATOR
                         EXTENDED ADDRESSING
                         INTERNAL CHANNELS
                         CACHE

|                KLI -- MICROCODE VERSION 352 LOADED
                 KLI -- ALL CACHES ENABLED
                 LOGICAL MEMORY CONFIGURATION:
                  ADDRESS     SIZE  INT    TYPE CONTROLLER
                 00000000     768K   4     MF20     11
|                03000000     768K   4     MF20     12
                 CONFIGURATION FILE WRITTEN
                 KL1 -- BOOTSTRAP LOADED AND STARTED


|                BOOT V10.0(201)
|                [BOOT: LOADING] [OK]

                 [PS MOUNTED]

                 System restarting, wait...
|                ENTER CURRENT DATE AND TIME: 5-MAR-84 1032<RET>

|                YOU HAVE ENTERED WEDNESDAY, 5-MARCH-1984 10:32AM,
                  IS THIS CORRECT (Y,N) Y<RET>
                 WHY RELOAD? SCH<RET>
                 RUN CHECKD? Y<RET>
                 [CHECKING FILE CONSISTENCY]

                 [WORKING ON STRUCTURE - PS:]


                 LOCAL COUNT OF FILE PAGES: 6692
                 LOCAL COUNT OF OVERHEAD PAGES: 2671
                 LOCAL COUNT OF USED PAGES: 9363

                 SYSTEM COUNT BEFORE CHECKD: 9363
                 SYSTEM COUNT AFTER CHECKD: 9363

                 THERE ARE NO LOST PAGES.

                 RUNNING DDMP

                 *****
|                5-MAR-84    13:07:30 - TGHA V2(6) IS RUNNING FOR THE
|                FIRST
                 TIME
                 *****






                                    1-9
                        STARTING THE HARDWARE SYSTEM                        STARTING THE HARDWARE SYSTEM


|                SYSJOB 6(23) STARTED AT 5-MAR-84 1032
                 RUN SYS:ORION
                 RUN SYS:QUASAR
                 RUN SYS:MOUNTR
                 RUN SYS:INFO
                 RUN SYS:MAILER
                 RUN SYS:MAPPER
                 RUN SYS:LPTSPL
                 RUN SYS:CDRIVE
                 RUN SYS:SPRINT
                 JOB 0 /LOG OPERATOR  XX OPERATOR
                 ENA
                 ^ESET LOGIN PSEUDO
                 ^ESET LOGIN CONSOLE
                 ^ESET OPERATOR
                 PTYCON
                 GET SYSTEM:6-PTYCON.ATO
                 /
                 JOB 1 /LOG OPERATOR XX OPERATOR
                 ENA
                 RUN SYS:BATCON
                 /
                 JOB 2 /LOG OPERATOR XX OPERATOR
                 ENA
                 RUN SYS:NETCON
                 /

                 SJ  0:
|                SJ  0:  INSTALLATION-TEST SYSTEM, TOPS-20 MONITOR 6(6035)
                 SJ  0: @LOG OPERATOR OPERATOR
|                SJ  0:  JOB 1 ON TTY106 5-MAR-84 10:32:46
                 [FROM OPERATOR: SYSTEM IN OPERATION]


































                                    1-10
                        STARTING THE HARDWARE SYSTEM                        STARTING THE HARDWARE SYSTEM


   1.2.2  Loading from Floppy Disks   1.2.2  Loading from Floppy Disks

   Load from floppy disks if problems prevent you  from  loading  from  a
   disk  pack, or if you need a version of the front-end software that is
   only on floppy disks.  Be sure that system power is ON and the  proper
   software  exists  on the disk packs and the floppy disks (as on System
   Floppy A and System Floppy B).  Mount the floppy containing  the  BOOT
   program  (System  Floppy  A)  on  unit 0, the left unit.  Mount System
   Floppy B on unit 1, the right unit.  Leave the  floppy  disks  mounted
   while the system is running.

   Next, do the following:

        1.  Press the FLOPPY and ENABLE load switches simultaneously.

        2.  Type the current date and time and confirm it.

        3.  Type the reason for reloading.

        4.  Type a YES or NO response to the RUN CHECKD question.

   These steps load the front-end software, load the TOPS-20 monitor, and
   start the system for timesharing.

   Now, a more detailed explanation of the above steps:

        1.  Press the upper halves of the FLOPPY and ENABLE load switches
            simultaneously.   The following is an example of what is then
            printed on the CTY:

|                RSX-20F YB15-20 8:55 5-MAR-84

                 [SY0: REDIRECTED TO DX0:]
                 [DX0: MOUNTED]
                 [DX1: MOUNTED]
|                KLI -- VERSION VB15-12 RUNNING
                 KLI -- KL10 S/N:  2136., MODEL B, 60 HERTZ
                 KLI -- KL10 HARDWARE ENVIRONMENT:
                         MOS MASTER OSCILLATOR
                         EXTENDED ADDRESSING
                         INTERNAL CHANNELS
                         CACHE

|                KLI -- MICROCODE VERSION 352 LOADED
                 KLI -- ALL CACHES ENABLED
                 LOGICAL MEMORY CONFIGURATION:
                  ADDRESS     SIZE  INT    TYPE CONTROLLER
                 00000000     768K   4     MF20     11
|                03000000     768    4     MF20     12
                 CONFIGURATION FILE WRITTEN
                 KLI -- BOOTSTRAP LOADED AND STARTED


|                BOOT V10.0(201)
|                [BOOT: LOADING] [OK]


                 [PS MOUNTED]

                 System restarting, wait...






                                    1-11
                        STARTING THE HARDWARE SYSTEM                        STARTING THE HARDWARE SYSTEM


            The first line of output tells you the version  and  creation
            time  and  date  of  RSX-20F.   The  next line indicates that
            DX0: (the floppy disk on unit 0) is the system device  (SY0:)
            for  the  front-end  tasks.  The next two lines tell you that
            floppy units 0 and 1 have been mounted.  All lines  beginning
            with KLI and all text between those lines contain output from
|           KLINIT.  The line BOOT  V10.0(167)  notifies  that  the  BOOT
            program  is  running and the line following this output tells
            you what the BOOT program is doing.  The line [PS MOUNTED] is
            output  by TOPS-20  and means  that the  public structure has
            been mounted and the line following  this  output  tells  you
            what  the  BOOT  program  is doing.  TOPS-20 then outputs the
            next line of text to all terminals to indicate the system  is
            being restarted and is soon to be available.

            If you have a DX20  magnetic  tape  system  or  a  DX20  disk
            system,  you  also  see  a  message  similar to the following
            before [PS MOUNTED]:

|           [BOOT:  STARTING CHN:1 DX20A:0 MICROCODE V10(0)] [OK]

|           [BOOT:  STARTING CHN:2 DX20B:0 MICROCODE V10(0)] [OK]

                                        NOTE

                    DX20:A specifies a DX20 tape system
                    DX20:B specifies a DX20 disk system

            If "?" precedes CHN, see Section 1.4.5 in Part VI.

                                       WARNING

                    If a power-fail occurs, you must  reload  the
                    DX20  microcode  manually.   Refer to Part VI
                    Section 1.4.5.


                                        NOTE

                    The  above  example  assumes  you  have   the
                    monitor  in PS:<SYSTEM>MONITR.EXE and all PS:
                    packs are on-line.  To boot the system from a
                    structure other than PS:  or from a different
                    file, see Part IV Section  1.2.3.   for  this
                    procedure.


        2.  Continue at Part IV Section 1.4, Answering  Monitor  Start-up
            Question.

















                                    1-12
                        STARTING THE HARDWARE SYSTEM                        STARTING THE HARDWARE SYSTEM


                           LOADING VIA THE SWITCH REGISTER
                              (bits 0, 1, 2, and 7 set)

                                    Sample Output

|                RSX-20F YB15-20 6:28 5-MAR-84

                 [SY0: REDIRECTED TO DB0:]
                 [DB0: MOUNTED]
|                KLI -- VERSION VB15-12 RUNNING
                 KLI -- ENTER DIALOG [NO,YES,EXIT,BOOT]?
                 KLI>YES
                 KLI -- KL10 S/N:  2136., MODEL B, 60 HERTZ
                 KLI -- KL10 HARDWARE ENVIRONMENT:
                         MOS MASTER OSCILLATOR
                         EXTENDED ADDRESSING
                         INTERNAL CHANNELS
                         CACHE

                 KLI -- RELOAD MICROCODE [YES,VERIFY,FIX,NO]?
                 KLI>YES
|                KLI -- MICROCODE VERSION 352 LOADED
                 KLI -- RECONFIGURE CACHE [FILE,ALL,YES,NO]?
                 KLI>ALL
                 KLI -- ALL CACHES ENABLED
                 KLI -- CONFIGURE KL MEMORY [FILE,ALL,REVERSE,FORCE,YES,NO]?
                 KLI>ALL

                 LOGICAL MEMORY CONFIGURATION.
                  ADDRESS   SIZE   INT   TYPE   CONTROLLER
|                00000000   768K    4    MA20     0 & 1
                 00400000   768K    4    MF20     11

                 KLI -- LOAD KL BOOTSTRAP [YES,NO,FILENAME]?
                 KLI>YES
                 KLI -- WRITE CONFIGURATION FILE [YES,NO]?
                 KLI>NO
                 KLI -- BOOTSTRAP LOADED AND STARTED

|                BOOT V10.0(201)

                 BOOT><RET>
                 [BOOT: LOADING] [OK]


                 [PS MOUNTED]

                 System restarting, wait...
|                ENTER CURRENT DATE AND TIME: 5-MAR-84 1057<RET>

|                YOU HAVE ENTERED WEDNESDAY, 5-MARCH-1984 10:57AM,
                  IS THIS CORRECT (Y,N) Y<RET>
                 WHY RELOAD? SCH<RET>
                 RUN CHECKD? N<RET>

                 RUNNING DDMP

                 *****
|                5-MAR-84    13:07:30 - TGHA V2(6) IS RUNNING FOR THE
                 FIRST TIME
                 *****





                                    1-13
                        STARTING THE HARDWARE SYSTEM                        STARTING THE HARDWARE SYSTEM


|                SYSJOB 6(23) STARTED AT  5-MAR-84 1057
                 RUN SYS:ORION
                 RUN SYS:QUASAR
                 RUN SYS:MOUNTR
                 RUN SYS:INFO
                 RUN SYS:MAILER
                 RUN SYS:MAPPER
                 RUN SYS:LPTSPL
                 RUN SYS:CDRIVE
                 RUN SYS:SPRINT
                 JOB 0 /LOG OPERATOR XX OPERATOR
                 ENA
                 ^ESET LOGIN PSEUDO
                 ^ESET LOGIN CONSOLE
                 ^ESET OPERATOR
                 PTYCON
|                GET SYSTEM:6-PTYCON.ATO
                 /
                 JOB 1 /LOG OPERATOR XX OPERATOR
                 ENA
                 RUN SYS:BATCON
                 /
                 JOB 2 /LOG OPERATOR XX OPERATOR
                 ENA
                 RUN SYS:NETCON
                 /
                 SJ  0:
|                SJ  0:  INSTALLATION-TEST SYSTEM, TOPS-20 MONITOR 6(6035)
                 SJ  0: @LOG OPERATOR OPERATOR
                 SJ  0:  JOB 1 ON TTY106 5-MAR-84 10:57:18
                 [FROM OPERATOR: SYSTEM IN OPERATION]



































                                    1-14
                        STARTING THE HARDWARE SYSTEM                        STARTING THE HARDWARE SYSTEM


   1.2.3  Loading Via the Switch Register   1.2.3  Loading Via the Switch Register

   Load the system using the switch register if you have to do any of the
   following:

        1.  Configure cache or memory yourself, because  you  cannot  use
            the default configuration.

        2.  Load a  bootstrap  with  a  name  other  than  BOOT.EXB,  for
            example,  MTBOOT.EXB,  which  loads  a  monitor from magnetic
            tape.

        3.  Load a TOPS-20 monitor other than PS:<SYSTEM>MONITR.EXE,  for
            example,  a  monitor  on  magnetic  tape  or a monitor with a
            different name on disk.

        4.  Load from a disk pack that is not on unit 0.

        5.  Dump the TOPS-20 monitor after a crash.

   To begin the loading procedure you must use a disk pack or floppy disk
   to  load  the  software  for the front end.  If you are going to use a
   disk pack, it must contain the appropriate software and be mounted  on
   a  dual-ported drive (CONTROLLER SELECT switch is set to A/B).  If you
   are going to use floppy disks, you must have  the  appropriate  floppy
   disks mounted (System Floppy A and System Floppy B).

   Next, do the following:

        1.  Set the proper switches (or bits)  in  the  switch  register.
            Usually,  you  want  to set switches 0, 1, and 2 to enter the
            KLINIT dialog.  If you are going to use a disk pack on unit 0
            to get the front-end software, also set switch 7.

        2.  Press the load switches SW REG and ENABLE simultaneously.

        3.  Answer the questions to the KLINIT dialog (Appendix B).

        4.  Type the current date and time and confirm it.

        5.  Type the reason for reloading.

        6.  Type a YES or NO response to the RUN CHECKD question.

   These steps load the front-end software, load the TOPS-20 monitor, and
   start the system for timesharing.

   Now, a more detailed explanation of the above steps:

        1.  Set the appropriate switches (or bits) in the switch register
            by raising them.  The bits and the meaning for those used are
            listed in Table 1-1.














                                    1-15
                        STARTING THE HARDWARE SYSTEM                        STARTING THE HARDWARE SYSTEM


   Table 1-1:  Switch Register Bit Definitions   Table 1-1:  Switch Register Bit Definitions


                              Switch Register
   !--------------------------------------------------------------------!
   ! 17  16 ! 15 ! 14       11 ! 10 ! 9 ! 8 ! 7 ! 6       3 ! 2 ! 1 ! 0 !
   !--------------------------------------------------------------------!

     Bit                              Meaning


     0            If this is set, the remaining bits  are  interpreted.
                  You must set this to load via the switch register.

     1,2          If both  are  set,  the  KL  initialization  operator
                  dialog (KLINIT) is loaded and started.

                  If either one is set,  only  the  front-end  monitor,
                  RSX-20F,   is  started;  there  is  no  communication
                  between the KL and console front-end processors.

                  If neither is set, the system is loaded in  the  same
                  way  as  by the DISK or FLOPPY load switch.  However,
                  because other bits are interpreted, you  can  specify
                  the unit number of the bootstrap device in bits 8-10.
                  The  default  path  is  taken  by  KLINIT  until  the
                  bootstrap prompts with BOOT>.  Then you can specify a
                  monitor   other   than   the   default   (which    is
                  PS:<SYSTEM>MONITR.EXE)   or   give   a   switch,  for
                  example, /D to dump KL memory.

     3-6          Currently not used and must not be set.

     7            If this is set, the bootstrap device is a  disk  pack
                  on  a  dual-ported  drive.  Front-end files on a disk
                  pack are used for system loading.

                  If this is not set, the  bootstrap  devices  are  the
                  floppy  disks.   Front-end  files on floppy disks are
                  used for system loading.

     8-10         These three bits allow you to specify in  binary  the
                  unit  number  of  the bootstrap device (0 to 7).  For
                  example, no bits set  indicate  unit  0;  bit  8  set
                  indicates  unit 1, bit 9 set indicates unit 2, bits 8
                  and 9 set indicate unit 3, bit 10 indicates  unit  4,
                  bits  10 and 8 set indicate unit 5, and bits 10 and 9
                  set indicate unit 6.

     11-14        Currently not used and must not be set.

     15           This bit indicates what is done  when  an  I/O  error
                  occurs  during  bootstrapping.  When this bit is set,
                  the operation is retried  indefinitely  if  an  error
                  occurs.   If  this bit is not set (the normal case) a
                  halt occurs after ten unsuccessful retries.

     16-17        Currently not used and must not be set.


        2.  Press the upper halves of the SW REG and ENABLE load switches
            simultaneously.




                                    1-16
                        STARTING THE HARDWARE SYSTEM                        STARTING THE HARDWARE SYSTEM


            The following is an example of what is  printed  on  the  CTY
            when  bits 0, 1, and 2 are set, that is, when 7 is entered in
            the switch register.

|                RSX-20F YB15-20 8:55 5-MAR-83

                 [SY0: REDIRECTED TO DX0:]
                 [DX0: MOUNTED]
                 [DX1: MOUNTED]
|                KLI -- VERSION VB15-12 RUNNING
                 KLI -- ENTER DIALOG [NO,YES,EXIT,BOOT]?
                 KLI>

            The first line of output tells you the version  and  creation
            time  and  date  of  RSX-20F.   The  next line indicates that
            DX0: (the floppy disk on unit 0) is the system device  (SY0:)
            for  the  front-end  tasks.  The next two lines tell you that
            floppy units 0 and 1 have been mounted.  If bit  7  had  been
            set,  the  system  would have gone to disk drive 0 for a disk
            pack and the line with DX1 would have been omitted.   If  any
            of  bits  8-10  had been set, the unit number would have been
            something other than 0.

            The lines beginning with KLI are printed by  KLINIT,  the  KL
            initialization operator dialog.

            The following is an example of the CTY output when bit  0  is
            set  with  bits 1 and 2 not set.  Bits 7, 8, and 9 are set to
            specify a different bootstrap device and unit.

|                RSX-20F YB15-20 8:55 5-MAR-84

                 [SY0: REDIRECTED TO DB3:]
                 [DB3: MOUNTED]
|                KLI -- VERSION VB15-12 RUNNING
                 KLI -- KL10 S/N:  2136., MODEL B, 60 HERTZ
                 KLI -- KL10 HARDWARE ENVIRONMENT:
                         EXTENDED ADDRESSING
                         INTERNAL CHANNELS
                         CACHE

|                KLI -- MICROCODE VERSION 350 LOADED
                 KLI -- ALL CACHES ENABLED
                 LOGICAL MEMORY CONFIGURATION:
                  ADDRESS     SIZE  INT    TYPE CONTROLLER
                 00000000     768K   4     MF20     11
|                03000000     768K   4     MF20     12

                 CONFIGURATION FILE WRITTEN
                 KLI -- BOOTSTRAP LOADED AND STARTED

|                BOOT V10.0(201)

                 BOOT>

            All lines beginning with KLI and all text between those lines
            contain  output  from  KLINIT.  In this case KLINIT takes the
            default path up to and including the loading and starting  of
            the  KL  bootstrap.   Then,  instead  of  loading the default
            monitor, PS:<SYSTEM>MONITR.EXE, the  bootstrap  prompts  with
            BOOT>  and  lets you type in the name of the monitor that you
            want to load.  For example:

                 BOOT><SUBSYS>TEST01.EXE


                                    1-17
                        STARTING THE HARDWARE SYSTEM                        STARTING THE HARDWARE SYSTEM


            If you press RETURN after BOOT>, you get the default monitor.

            Once you specify the monitor, it is loaded and  started;  the
            system prints:

                 [PS MOUNTED]

                 SYSTEM RESTARTING, WAIT...

            The first line means that the public file structure has  been
            mounted.  The next line of text is output to all terminals to
            indicate the system is being restarted  and  is  soon  to  be
            available.

            If you have a DX20 magnetic  tape  system,  you  also  see  a
            message like the following before [PS MOUNTED].

|           [BOOT:  STARTING CHN:1 DX20A:0 MICROCODE V10(0)] [OK]

|           [BOOT:  STARTING CHN:2 DX20B:0 MICROCODE V10(0)] [OK}

                                        NOTE

                    DX20:A specifies a DX20 tape system
                    DX20:B specifies a DX20 disk system

            If "?" precedes CHN, see Part VI Section 1.4.5.

            Because the bit settings in the latter example cause much  of
            the dialog to take a default path, continue reading at Step 4
            for that example.  For the former example, continue  at  Step
            3.

        3.  After the output:

                 KLI -- ENTER DIALOG [NO,YES,EXIT,BOOT]?
                 KLI>

            you are in the KL initialization operator dialog, KLINIT, and
            you must answer the questions asked.

            Once the KL bootstrap has been loaded and started via KLINIT,
            and  you have responded successfully to the BOOT> prompt, the
            TOPS-20 monitor prints:

                 [PS MOUNTED]

                 SYSTEM RESTARTING, WAIT...

            The first line means that the public file structure has  been
            mounted.  The next line of text is output to all terminals to
            indicate the system is being restarted  and  is  soon  to  be
            available.

   Continue at Part IV Section 1.4, Answering Monitor Start-up Questions.











                                    1-18
                        STARTING THE HARDWARE SYSTEM                        STARTING THE HARDWARE SYSTEM


   1.3  LOADING THE TOPS-20 MONITOR   1.3  LOADING THE TOPS-20 MONITOR

   The TOPS-20 monitor is loaded during the  procedure  for  loading  the
   system,  which was discussed in the previous three sections.  The next
   two sections  give  additional  information  on  loading  the  TOPS-20
   monitor to emphasize where the monitor can be loaded from.



   1.3.1  Loading TOPS-20 from a Disk Pack with BOOT   1.3.1  Loading TOPS-20 from a Disk Pack with BOOT

   When you load the system using the DISK or FLOPPY load switch, TOPS-20
   is loaded and started from PS:<SYSTEM>MONITR.EXE.

   When you load the  system  via  the  switch  register,  the  bootstrap
   program  issues  a  prompt  and  you  can  either press RETURN for the
   default monitor (PS:<SYSTEM>MONITR.EXE) or type a  file  specification
   for   a   different  monitor.   If  you  omit  a  field  in  the  file
   specification, that field is defaulted to what it is  in  the  default
   monitor.

                            ----- Example -----

        BOOT><TESTSY>MON002.EXE

   If you set bits 1 and 2 in the switch register and receive the  KLINIT
   question:

        KLI -- LOAD KL BOOTSTRAP [YES,NO,FILENAME]?

   you  can  specify  a  bootstrap  other  than  the  default,  BOOT.EXB.
   However, the file you specify must reside on the bootstrap device.

   In this example the KL bootstrap is VBORP4.EXB and the TOPS-20 monitor
   is PS:<SYSTEM>MON002.EXE.

        KLI -- LOAD KL BOOTSTRAP [YES,NO,FILENAME]?
        KLI>VBORP4
        KLI -- BOOTSTRAP LOADED AND STARTED

|       BOOT V10.0(201)
        BOOT><SYSTEM>MON002.EXE

                              ----- Hint -----

   Entering the KLINIT dialog to get the question LOAD KL BOOTSTRAP or to
   get  the  BOOT> prompt is useful for testing new bootstrap programs or
   new TOPS-20 monitors.



   1.3.2  Loading TOPS-20 from Magnetic Tape with MTBOOT   1.3.2  Loading TOPS-20 from Magnetic Tape with MTBOOT

   If you need to load a TOPS-20  monitor  from  magnetic  tape,  do  the
   following:

        1.  Mount the magnetic tape containing the monitor on drive 0.

        2.  Load the system via the switch register with bits 0, 1, and 2
            set.

        3.  Enter the KLINIT dialog.




                                    1-19
                        STARTING THE HARDWARE SYSTEM                        STARTING THE HARDWARE SYSTEM


        4.  After LOAD KL BOOTSTRAP, type MTBOOT.

        5.  After MTBOOT>, type MT:  and press RETURN to load  and  start
            the monitor on the magnetic tape.


                            ----- Example -----

        KLI -- LOAD KL BOOTSTRAP [YES,NO,FILENAME]?
        KLI>MTBOOT
        KLI -- BOOTSTRAP LOADED AND STARTED

        MTBOOT>MT:

                              ----- Hint -----

   If you cannot use drive 0 for Step 1, mount the magnetic tape  on  any
   available drive, but be sure to put all other drives OFF-LINE.

                                    NOTE

           Once the monitor has started, it automatically  starts
           the  TGHA  program.   At  this  time it is possible to
           receive one of the following error messages.

        **********************************************************************
|       * 5-MAR-84 13:07:30
        * THE FOLLOWING BLOCKS ARE MARKED AS BAD
        * AND ARE NOT ON LINE:
        * CONTROLLER      GROUP   BLOCK
        * 10              2       3
        * THIS CONSISTS OF 64K OF MEMORY THAT IS OFF LINE.
        *** CALL FIELD SERVICE TO REPORT THIS CONDITION ***
        **********************************************************************

                                               or

        **********************************************************************
|       * 5-MAR-84 13:07:30
        * TGHA HAS TEMPORARILY CORRECTED A SERIOUS MOS MEMORY FAILURE.
        *** CALL FIELD SERVICE TO REPORT THIS CONDITION ***
        **********************************************************************


   Both the above messages are informing you that there is a problem with
   MOS  memory  and  that  you  should  notify your DIGITAL Field Service
   Representative about the problem.



   1.4  ANSWERING MONITOR START-UP QUESTIONS   1.4  ANSWERING MONITOR START-UP QUESTIONS

   After the system  has  configured  memory  and  loaded  the  bootstrap
   program into memory, you are asked the following questions:

   Question:  ENTER CURRENT DATE AND TIME:

   Reply:     Type the current date and time in the format

                    dd-mmm-yy hhmm






                                    1-20
                        STARTING THE HARDWARE SYSTEM                        STARTING THE HARDWARE SYSTEM


              where

                       dd = day of the month
                      mmm = first three letters of the month
                       yy = last two digits of the year
                     hhmm = time, between 0 and 2359

                                    NOTE

           You can use spaces instead  of  hyphens.   Other  date
           formats are accepted but they are not recommended.

   The system then prints a line telling you the day, date, and time  you
   typed  and asks you if the information is correct.  If you entered the
   correct information, type Y for YES; otherwise,  type  N  for  NO  and
   enter the correct information.

                            ----- Example -----

|       ENTER CURRENT DATE AND TIME:  5-MAR-84 1300<RET>

|       YOU HAVE ENTERED WEDNESDAY, 5-MARCH-1984 1:00 PM
        IS THIS CORRECT (Y,N) Y <RET>

   Question:  WHY RELOAD?

   Reply:     Type one of the  following  abbreviations  that  gives  the
              reason for reloading the system.

                   OP (OPR)          PM (Prevent Maint.)
                   PA (Parity)       CM (Corrective Maint.)
                   PO (Power)        SA (Stand-Alone)
                   ST (Static)       NE (New)
                   HAR (Hardware)    SCH (Scheduled)
                   HA (Halt)         OT (Other)
                   HU (Hung)

   The answer you type to this question is stored  in  the  system  error
   file and is printed in the SPEAR report.

                            ----- Example -----

        WHY RELOAD? SCH<RET>

                                      NOTE

                At this time the system may automatically run the
                CHECKD   program   if   certain   problems   were
                previously  found;   otherwise,   it   asks   the
                following question.

   Question:  RUN CHECKD?

   Reply:     You must answer Y for YES or N for NO.  If you have a daily
              scheduled  reload  or  after a hardware failure, you should
              answer Y.  Otherwise, you should normally answer N.










                                    1-21
                        STARTING THE HARDWARE SYSTEM                        STARTING THE HARDWARE SYSTEM


   If you answer Y, CHECKD performs a bit-table and consistency check for
   the  public  structure.   It then lists any problems it found with bad
   pages or files.  Next it prints a  summary  of  page  counts  and  the
   number  of  lost  pages.   Any  lost  pages  are allocated to the file
   PS:<OPERATOR>PS-LOST-PAGES.BIN.n (where "n" is the  generation  number
   of the file).

   Depending on the size of the structure, CHECKD can take  between  five
   and  ten  minutes  for  the public structure.  When the CHECKD program
   starts, it prints:

        [CHECKING FILE CONSISTENCY]

        [WORKING ON STRUCTURE - PS:]

                                    NOTE

           If CHECKD lists any problems  before  the  summary  of
           page  counts, or if it says there are lost pages after
           the  summary,  refer  to  Part  VI  Section  1.7.1  to
           determine what action to take.

                            ----- Example -----

        RUN CHECKD? Y

        [CHECKING FILE CONSISTENCY]

        [WORKING ON STRUCTURE-PS:]

        LOCAL COUNT OF FILE PAGES:  6692
        LOCAL COUNT OF OVERHEAD PAGES:  2671
        LOCAL COUNT OF USED PAGES:  9363

        SYSTEM COUNT BEFORE CHECKD:  9363
        SYSTEM COUNT AFTER CHECKD:  9363

        THERE ARE NO LOST PAGES.

   After CHECKD has finished running, it prints the following message:

        RUNNING DDMP

   DDMP is a TOPS-20 background  job  that  moves  pages  from  the  disk
   swapping  area  to  the  disk  file  area.   After the DDMP program is
   finished, the  monitor  starts  the  SYSJOB  program  and  prints  the
   following message:

|       SYSJOB 6(14) STARTED AT 5-MAR-84 11:00

   The SYSJOB program reads the file  PS:<SYSTEM>SYSJOB.RUN.   This  file
   contains  commands  that  start  various  system  programs.   The last
   command  in  the  SYSJOB.RUN  file  is  GET  SYSTEM:PTYCON.ATO.    The
   PTYCON.ATO file starts various jobs as subjobs.  (Refer to the TOPS-20
   Operator's Command Language Reference Manual for more  information  on
   the PTYCON program.)

   Once the PTYCON.ATO  file  is  processed,  the  system  is  ready  for
   timesharing.  (Refer to Part IV Section 1.5.1 if you are going to have
   operator coverage, or Part IV Section 1.5.2 if you are  not  going  to
   have operator coverage.)





                                    1-22
                        STARTING THE HARDWARE SYSTEM                        STARTING THE HARDWARE SYSTEM


   1.5  READYING THE SYSTEM FOR TIMESHARING   1.5  READYING THE SYSTEM FOR TIMESHARING

   As you saw in previous sections, once RSX-20F and TOPS-20  are  loaded
   and started, SYSJOB starts running under job 0.  SYSJOB then reads and
   prints on  the  CTY  the  file  <SYSTEM>SYSJOB.RUN  and  performs  the
   commands  in  that  file.   These  commands start certain programs and
   issue some commands which aid you  and  the  system  in  providing  an
   efficient timesharing facility.

   To see what commands  SYSJOB  actually  performs,  look  at  the  file
   PS:<SYSTEM>SYSJOB.RUN.   The  following  example  illustrates the file
   that is distributed with the software:

        RUN SYS:ORION
        RUN SYS:QUASAR
        RUN SYS:MOUNTR
        RUN SYS:INFO
        RUN SYS:MAILER
        RUN SYS:MAPPER
        RUN SYS:LPTSPL
        RUN SYS:CDRIVE
        RUN SYS:SPRINT
        JOB 0 /LOG OPERATOR XX OPERATOR
        ENA
        ^ESET LOGIN PSEUDO
        ^ESET LOGIN CONSOLE
        ^ESET OPERATOR
        PTYCON
|       GET SYSTEM:6-PTYCON.ATO
        /
        JOB 1 /LOG OPERATOR XX OPERATOR
        ENA
        RUN SYS:BATCON
        /
        JOB 2 /LOG OPERATOR XX OPERATOR
        ENA
        RUN SYS:NETCON
        /

   This file causes SYSJOB to:

        1.  Run ORION, the program that handles the operator interface.

        2.  Run QUASAR, the program that handles the  system  queues  for
            batch jobs and print requests.

        3.  Run MOUNTR, the  program  that  handles  all  tape  and  disk
            mounting procedures.

        4.  Run INFO, the program that passes message identifications for
            any process that requires IPCF communications.

        5.  Run MAILER, the program that handles messages sent via MAIL.

        6.  Run MAPPER, the program that sets up the program cache.

        7.  Run LPTSPL, the program that handles the line printer.

        8.  Run CDRIVE, the program that handles the card reader.

        9.  Run SPRINT, the program that handles the conversion  of  card
            images to ASCII and the interpretation of control cards.


































                                    1-23
                        STARTING THE HARDWARE SYSTEM                        STARTING THE HARDWARE SYSTEM


       10.  Create a job on the system and log it in under OPERATOR.  All
            text between the slashes is passed to the job.  Any input and
            output for the job is printed on  the  CTY  and  preceded  by
            SJ  0:  until you attach to that job (Part IV Section 1.5.1).
            SYSJOB identifies the job as job 0, but the system job number
            is one.


   (See the TOPS-20 Operator's Command Language  Reference  Manual  under
   ^ESPEAK    for    details   on   SYSJOB   commands.    Remember   that
   <SYSTEM>SYSJOB.RUN must contain only SYSJOB commands.)

   The SYSJOB.RUN file causes the job under OPERATOR to do the following:

        1.  Enables capabilities.  This enables the OPERATOR  capability,
            normally granted to the OPERATOR directory.

        2.  Does a ^ESET LOGINS ANY to allow LOGINs from all terminals.

        3.  Does  a  ^ESEND  to  send  the  message   SYSTEM IN OPERATION
            followed by a bell to all terminals.

        4.  Runs PTYCON.

        5.  Starts various programs under PTYCON by using the contents of
            the  file SYSTEM:PTYCON.ATO.  The distributed PTYCON.ATO file
            with comments added follows.  Note that ESCAPE in  this  file
            has to be typed as up-arrow dollar sign (^$).

            SILENCE                                  !silences output  to
                                                     CTY
            LOG                                      !create   LOG   file
                                                     PTYCON.LOG
            DEFINE ^$OPR                             !define subjob 0  as
                                                     OPR
            CONN OPR                                 !connect to subjob 0
            LOG OPERATOR FOO OPERATOR                !log in
            ENA                                      !enable capabilities
            !NEW OPERATOR INTERFACE PARSER           !a comment about the
                                                     above commands
            ^ESET LOGIN ANY                          !allow users to  log
                                                     in
            ^ESEND * SYSTEM IN OPERATION             !sends       message
                                                     "SYSTEM           IN
                                                     OPERATION"  to  all 
                                                     connected terminals
            OPR                                      !the OPR program
            TAKE SYS:SYSTEM.CMD                      !take        startup
                                                     commands        from
                                                     SYSTEM.CMD file
            PUSH                                     !go    to    TOPS-20
                                                     command level
            ENA                                      !enable capabilities
            APPEND PS:<SPOOL>ORION-SYSTEM-LOG.002.*
            (TO) PS:<SPOOL>ORION-OLD.LOG             !add   contents   of
                                                     ORION-SYSTEM-LOG.002
                                                     to ORION-OLD.LOG
            DELETE PS:<SPOOL>ORION-SYSTEM-LOG.002    !delete the contents
                                                     of ORION-SYS-LOG.n
            POP                                      !go  back   to   OPR
                                                     command level
            ^X                                       !return to PTYCON
            NO SILENCE                               !allow output to CTY
            WHAT ALL                                 !print   status   of
                                                     subjob
            CONN OPR                                 !connect to OPR
                                    1-24
                        STARTING THE HARDWARE SYSTEM                        STARTING THE HARDWARE SYSTEM


   The PTYCON.ATO file causes PTYCON to do the following:

        1.  Silence output to the CTY from PTYCON until PTYCON  processes
            a  NO SILENCE  command.   This eliminates unnecessary output.
            Therefore, you do  not  see  many  of  the  following  PTYCON
            actions printed on the CTY.

        2.  Create  a  LOG  file  (PTYCON.LOG)  under  <OPERATOR>.   This
            contains a record of everything that happens under PTYCON.

        3.  Connect to  subjob  0  and  log  it  in  under  OPERATOR.   A
            fictitious  password  of  FOO  is  acceptable  in  this case,
            because the job running PTYCON is  already  logged  in  under
            OPERATOR.

        4.  Print the status of all subjobs (WHAT ALL).   Because  PTYCON
            continues  processing  PTYCON  commands  while  it passes off
            commands to subjobs, the WHAT ALL output  may  appear  before
            the subjobs have finished processing their commands.


                                    NOTE

           See  Chapter  4  of  the  TOPS-20  Operator's  Command
           Language Reference Manual for details on PTYCON.

   When output to the CTY has stopped, you are at OPR command  level  and
   the  system  is  ready  for  timesharing.   The  front-end and TOPS-20
   monitors are running,  and  SYSJOB  and  the  programs  under  it  are
   running.   However,  the CTY is not attached to any of these jobs.  If
   you are going to have operator coverage,  you  should  attach  to  the
   PTYCON job running OPR (Part IV Section 1.5.1).  Otherwise, you should
   set up the system for no operator coverage (Part IV Section 1.5.2).

                                  WARNING

           Whenever you type CTRL/\ (control  backslash)  at  the
           CTY, you enter the console processor command.  To exit
           from this command language, type QUIT or CTRL/Z.

   If your System Manager wants SYSJOB to perform  functions  other  than
   those  above,  you can edit the SYSTEM:SYSJOB.RUN file to reflect what
   is needed.  Remember that SYSJOB commands, documented under ^ESPEAK in
   the TOPS-20 Operator's Command Language Reference Manual, must be used
   in the SYSJOB.RUN file.



   1.5.1  Timesharing with Operator Coverage   1.5.1  Timesharing with Operator Coverage

   If you are going to have operator coverage, you should send a  message
   stating  that  the system has operator coverage.  To send this message
   perform the following steps:

        1.  Type CTRL/C to get the system identification message.











                                    1-25
                        STARTING THE HARDWARE SYSTEM                        STARTING THE HARDWARE SYSTEM


        2.  Type ATTACH OPERATOR 1 and press the RETURN key.

        3.  After the message [ATTACHED  TO  TTYn,  CONFIRM],  press  the
            RETURN key.

        4.  After the PASSWORD prompt, type your password and  press  the
            RETURN key twice.

        5.  Type PUSH to OPR.

        6.  ENABLE your capabilities.

        7.  Type ^ESET OPERATOR-IN-ATTENDANCE.

        8.  Type POP to return to OPR command level.

                            ----- Example -----


|       INSTALLATION-TEST SYSTEM, TOPS-20 MONITOR 6(6035)
        @ATTACH OPERATOR 1<RET>
        [ATTACHED TO TTY102, CONFIRM]<RET>
        PASSWORD: your password<RET>
        <RET>
        OPR>PUSH<RET>
|        TOPS-20 COMMAND PROCESSOR 6(746)
        @ENABLE<RET>
        $ESET OPERATOR-IN-ATTENDANCE<RET>
        $POP<RET>
        OPR>



   1.5.2  Timesharing without Operator Coverage   1.5.2  Timesharing without Operator Coverage

   To  continue  timesharing,  but  without  operator  coverage,  do  the
   following:

        1.  Type CTRL/C to get the system identification message.

        2.  Type ATTACH OPERATOR 1 and press the RETURN key.

        3.  After the message [ATTACHED  TO  TTYn,  CONFIRM],  press  the
            RETURN key.

        4.  After the PASSWORD prompt, type your password and  press  the
            RETURN key twice.

        5.  Type PUSH to OPR.

        6.  ENABLE your capabilities.

        7.  Type ^ESEND * NO OPERATOR COVERAGE AFTER time.

        8.  Type POP to return to OPR command level.

   Just before you end operator coverage, type to OPR:

        1.  PUSH.

        2.  ENABLE your capabilities.





                                    1-26
                        STARTING THE HARDWARE SYSTEM                        STARTING THE HARDWARE SYSTEM


        3.  Type ^ESET NO OPERATOR and press the RETURN key.

                                        NOTE

                    In the following steps,  the  ^C  has  to  be
                    typed  as  up-arrow C, not CTRL/C, and the ^E
                    and ^Z must be typed as CTRL/E and CTRL/Z.


        4.  ^ESPEAK
            JOB 0/
            ^C
            /Z

        5.  ^ESPEAK
            JOB 0/
            ATTACH OPERATOR 1

            POP

            /^Z

   After you type the above, the commands given to ^ESPEAK are printed on
   the  CTY.   Then the actual processing of the commands is indicated by
   output preceded by SJ  0:.  If  any  messages  are  output  by  PTYCON
   subjobs, they are also printed on the CTY preceded by SJ  0:.

                              ----- Hint -----

   The ^E commands are documented in detail  in  the  TOPS-20  Operator's
   Command Language Reference Manual.

                            ----- Example -----


|       INSTALLATION-TEST SYSTEM, TOPS-20 MONITOR 6(6035)
        @ATTACH OPERATOR 1<RET>
        [ATTACHED TO TTY102 CONFIRM]<RET>
        PASSWORD: your password<RET>
        <RET>
        OPR>PUSH<RET>
|       TOPS-20 COMMAND PROCESSOR 6(746)
        @ENABLE<RET>
        $ESEND * NO OPERATOR COVERAGE AFTER hh:mm<RET>
        $POP<RET>
        OPR>




















                                    1-27
                        STARTING THE HARDWARE SYSTEM                        STARTING THE HARDWARE SYSTEM














                                   PART V                                   PART V
                               SOFTWARE TASKS                               SOFTWARE TASKS



                                  ABSTRACT                                  ABSTRACT

                  Chapter 1 is an introduction to the new
                  Operator Interface command
                  language, OPR.

                  Chapter 2 describes all software tasks
                  for the TOPS-20 (GALAXY) batch
                  system.

                  Chapter 3 describes those tasks that are
                  generally done on an infrequent
                  schedule and those tasks that are
                  performed only when requested.

                  Chapter 4 describes the tasks that are
                  usually included in a daily
                  schedule.

                                      CONTENTS



   CHAPTER 1       THE OPERATOR INTERFACE, OPR

           1.1     INTRODUCTION TO THE OPERATOR INTERFACE . . . . . . 1-1
           1.2     RUNNING OPR  . . . . . . . . . . . . . . . . . . . 1-1
           1.2.1     Remote Operator Control  . . . . . . . . . . . . 1-4
           1.2.2     Multiple Operators on the System . . . . . . . . 1-4
           1.3     OPR COMMAND FEATURES . . . . . . . . . . . . . . . 1-5
           1.3.1     ? (Question Mark) - Listing Available Commands . 1-5
           1.3.2     ESCape - Using Recognition . . . . . . . . . . . 1-6
           1.3.3     CTRL/H - Reprinting Faulty Commands  . . . . . . 1-7
           1.3.4     Getting Help from OPR  . . . . . . . . . . . . . 1-7
           1.4     ORION TO OPR MESSAGES  . . . . . . . . . . . . . . 1-8
           1.4.1     Controlling OPR Message Output . . . . . . . . . 1-9
           1.5     OPR ERROR MESSAGE DESCRIPTIONS . . . . . . . . .  1-11


   CHAPTER 2       BATCH SOFTWARE TASKS

           2.1     BATCH SYSTEM COMPONENTS  . . . . . . . . . . . . . 2-1
           2.2     BATCH RESPONSIBILITIES . . . . . . . . . . . . . . 2-2
           2.3     CONTROLLING BATCH STREAMS  . . . . . . . . . . . . 2-3
           2.3.1     Setting Batch Stream Parameters  . . . . . . . . 2-3
           2.3.2     Starting Batch Streams . . . . . . . . . . . . . 2-4
           2.3.3     Stopping Batch Streams Temporarily . . . . . . . 2-5


                                    1-28
                        STARTING THE HARDWARE SYSTEM                        STARTING THE HARDWARE SYSTEM


           2.3.4     Continuing Batch Streams . . . . . . . . . . . . 2-5
           2.3.5     Shutting Down Batch Streams  . . . . . . . . . . 2-5
           2.3.6     Sending Messages to Batch Streams  . . . . . . . 2-6
           2.3.7     Displaying Batch Stream Parameters . . . . . . . 2-7
           2.3.8     Displaying Batch Stream Status . . . . . . . . . 2-7
           2.4     CONTROLLING BATCH JOBS . . . . . . . . . . . . . . 2-8
           2.4.1     Examining Batch Jobs in the Queues . . . . . . . 2-8
           2.4.2     Holding Batch Jobs . . . . . . . . . . . . . .  2-10
           2.4.3     Releasing Batch Jobs . . . . . . . . . . . . .  2-11
           2.4.4     Canceling Batch Jobs . . . . . . . . . . . . .  2-11
           2.4.5     Requeuing Batch Jobs . . . . . . . . . . . . .  2-12
           2.4.6     Modifying Batch Requests . . . . . . . . . . .  2-12
           2.4.7     Deleting Batch Requests  . . . . . . . . . . .  2-13
           2.4.8     Scheduling the Next Batch Request  . . . . . .  2-13
           2.5     CONTROLLING THE LINE PRINTER . . . . . . . . . .  2-13
           2.5.1     Setting the Line Printer . . . . . . . . . . .  2-14
           2.5.2     Starting the Line Printer  . . . . . . . . . .  2-15
           2.5.3     Stopping the Line Printer Temporarily  . . . .  2-16
           2.5.4     Continuing the Line Printer  . . . . . . . . .  2-16
           2.5.5     Shutting Down the Line Printer . . . . . . . .  2-16
           2.5.6     Displaying Line Printer Parameters . . . . . .  2-17
           2.5.7     Displaying Line Printer Status . . . . . . . .  2-18
           2.6     CONTROLLING FORMS ON THE LINE PRINTER  . . . . .  2-18
           2.6.1     The LPFORM.INI File  . . . . . . . . . . . . .  2-20
           2.6.2     Aligning Forms on the Line Printer . . . . . .  2-23
           2.6.3     Backspacing Forms on the Line Printer  . . . .  2-24
           2.6.4     Forwardspacing Forms on the Line Printer . . .  2-25
           2.6.5     Suppressing Carriage Control on the Line 
                     Printer  . . . . . . . . . . . . . . . . . . .  2-26
           2.7     CONTROLLING LINE PRINTER JOBS  . . . . . . . . .  2-27
           2.7.1     Examining Printer Jobs in the Queues . . . . .  2-27
           2.7.2     Holding Printer Jobs . . . . . . . . . . . . .  2-29
           2.7.3     Releasing Printer Jobs . . . . . . . . . . . .  2-29
           2.7.4     Canceling Printer Jobs . . . . . . . . . . . .  2-30
           2.7.5     Requeuing Printer Jobs . . . . . . . . . . . .  2-30
           2.7.6     Modifying Printer Requests . . . . . . . . . .  2-31
           2.7.7     Deleting Printer Requests  . . . . . . . . . .  2-31
           2.7.8     Sending Line Printer Output to Tape  . . . . .  2-32
           2.8     CONTROLLING THE CARD READER  . . . . . . . . . .  2-35
           2.8.1     Starting the Card Reader . . . . . . . . . . .  2-35
           2.8.2     Stopping the Card Reader . . . . . . . . . . .  2-36
           2.8.3     Continuing the Card Reader . . . . . . . . . .  2-36
           2.8.4     Shutting Down the Card Reader  . . . . . . . .  2-36
           2.8.5     Displaying Card Reader Status  . . . . . . . .  2-37
           2.9     CONTROLLING CARD READER JOBS . . . . . . . . . .  2-38
           2.10    CONTROLLING OTHER OUTPUT DEVICES . . . . . . . .  2-39
           2.10.1    Setting Output Devices . . . . . . . . . . . .  2-40
           2.10.2    The SPFORM.INI File  . . . . . . . . . . . . .  2-41
           2.10.3    Starting Output Devices  . . . . . . . . . . .  2-44
           2.10.4    Stopping Output Devices  . . . . . . . . . . .  2-44
           2.10.5    Continuing Output Devices  . . . . . . . . . .  2-45
           2.10.6    Shutting Down Output Devices . . . . . . . . .  2-45
           2.10.7    Displaying Output Device Parameters  . . . . .  2-45
           2.10.8    Displaying Output Device Status  . . . . . . .  2-46
           2.11    CONTROLLING JOBS ON OUTPUT DEVICES . . . . . . .  2-47
           2.11.1    Examining Output Device Jobs in the Queues . .  2-47
           2.11.2    Holding Output Device Jobs . . . . . . . . . .  2-50
           2.11.3    Releasing Output Device Jobs . . . . . . . . .  2-50
           2.11.4    Canceling Output Device Jobs . . . . . . . . .  2-51
           2.11.5    Requeuing Output Device Jobs . . . . . . . . .  2-51
           2.11.6    Modifying Output Device Requests . . . . . . .  2-52
           2.11.7    Deleting Output Device Requests  . . . . . . .  2-53
           2.11.8    Scheduling the Next Output Device Request  . .  2-53



                                    1-29
                        STARTING THE HARDWARE SYSTEM                        STARTING THE HARDWARE SYSTEM


   CHAPTER 3       UNSCHEDULED SOFTWARE TASKS

           3.1     CONTROLLING THE SCHEDULER  . . . . . . . . . . . . 3-1
           3.1.1     Changing Class Scheduling  . . . . . . . . . . . 3-1
           3.1.1.1     Changing a Job's Scheduling Class  . . . . . . 3-1
           3.1.2     Changing Batch-Class Scheduling  . . . . . . . . 3-2
           3.1.3     Changing Bias-Control Scheduling . . . . . . . . 3-2
           3.1.4     Displaying Scheduler Status  . . . . . . . . . . 3-3
           3.2     SETTING DEVICES ON-LINE  . . . . . . . . . . . . . 3-3
           3.3     CONTROLLING THE ORION LOG BUFFER FILE  . . . . . . 3-5
           3.4     INITIALIZING TAPES . . . . . . . . . . . . . . . . 3-6
           3.5     HANDLING USER MOUNT REQUESTS . . . . . . . . . .  3-10
           3.5.1     Displaying Tape Drive Status . . . . . . . . .  3-12
           3.5.2     Controlling Automatic Volume Recognition (AVR)  3-14
           3.5.3     Mounting Labeled Tapes with AVR Enabled  . . .  3-15
           3.5.4     Mounting Labeled Tapes With AVR Disabled . . .  3-16
           3.5.5     Mounting Unlabeled Tapes . . . . . . . . . . .  3-16
           3.5.6     Canceling Mount Requests . . . . . . . . . . .  3-18
           3.5.7     Setting Tape Drives Available or Unavailable .  3-18
           3.6     ARCHIVING FILES WITH DUMPER  . . . . . . . . . .  3-19
           3.7     RUNNING THE REAPER PROGRAM . . . . . . . . . . .  3-23
           3.8     MIGRATING FILES WITH DUMPER  . . . . . . . . . .  3-27
           3.9     RETRIEVING FILES WITH DUMPER . . . . . . . . . .  3-31
           3.10    RESTORING DISK FILES WITH DUMPER . . . . . . . .  3-35
           3.11    ANSWERING STRUCTURE MOUNT REQUESTS WITH OPR  . .  3-38
           3.11.1    Mounting a Structure with MOUNT  . . . . . . .  3-42
           3.11.2    Answering Structure DISMOUNT Requests with OPR  3-44
           3.11.3    Removing a Structure with DISMOUNT . . . . . .  3-46
           3.11.4    Canceling Mount Requests . . . . . . . . . . .  3-49
           3.11.5    Setting Disk Drives Available or Unavailable .  3-50
           3.12    SETTING THE PORT CI AVAILABLE/UNAVAILABLE  . . .  3-51
           3.12.1    Displaying Disk Drive Status . . . . . . . . .  3-55
           3.12.2    Displaying Structure Status  . . . . . . . . .  3-57
           3.13    EXAMINING MOUNT-REQUESTS IN THE QUEUE  . . . . .  3-59
           3.14    CREATING A STRUCTURE DURING TIMESHARING  . . . .  3-61
           3.15    COMMUNICATING WITH USERS . . . . . . . . . . . .  3-65
           3.15.1    Answering PLEASE Requests with OPR . . . . . .  3-65
           3.15.2    Talking to Another User Immediately with SEND   3-66
           3.15.3    Mailing a Message for a User to Read Later . .  3-68
           3.15.4    Reading Your Messages with RDMAIL  . . . . . .  3-69
           3.16    HELPING A USER WITH TERMINAL PROBLEMS  . . . . .  3-70
           3.17    LOGGING OUT A USER WITH LOGOUT . . . . . . . . .  3-73
           3.18    GENERATING ACCOUNTING REPORTS  . . . . . . . . .  3-74
           3.18.1    Getting Disk and System Usage with CHKPNT  . .  3-75
           3.18.2    Reporting Usage with USAG20  . . . . . . . . .  3-76


   CHAPTER 4       SCHEDULED SOFTWARE TASKS

           4.1     SETTING LOGINS-ALLOWED AND OPERATOR-IN-ATTENDANCE  4-1
           4.2     CREATING THE MESSAGE OF THE DAY WITH MAIL  . . . . 4-3
           4.3     ENTERING ACCOUNT VALIDATION DATA WITH EDIT . . . . 4-5
           4.4     UPDATING THE ACCOUNT VALIDATION DATA BASE WITH 
                   ACTGEN . . . . . . . . . . . . . . . . . . . . . . 4-7
           4.5     ADDING, CHANGING, AND DELETING DIRECTORIES WITH 
                   ^ECREATE . . . . . . . . . . . . . . . . . . . . . 4-8
           4.5.1     Adding Directories for Users . . . . . . . . . . 4-8
           4.5.2     Adding Directories on Mountable Structures   .  4-10
           4.5.3     Adding Files-Only Directories  . . . . . . . .  4-10
           4.5.4     Changing Directory Parameters  . . . . . . . .  4-11
           4.5.5     Changing Directory Names . . . . . . . . . . .  4-12
           4.5.6     Deleting User Names or Directories . . . . . .  4-15
           4.6     DUMPING DIRECTORY PARAMETERS WITH DLUSER . . . .  4-17
           4.6.1     Dumping Directory Parameters for PS: . . . . .  4-17


                                    1-30
                        STARTING THE HARDWARE SYSTEM                        STARTING THE HARDWARE SYSTEM


           4.6.2     Dumping Directory Parameters for Other 
                     Structures . . . . . . . . . . . . . . . . . .  4-18
           4.6.3     Using DLUSER . . . . . . . . . . . . . . . . .  4-19
           4.7     GETTING INFORMATION ABOUT DIRECTORIES  . . . . .  4-19
           4.7.1     Listing Directory Parameters with ^ECREATE . .  4-20
           4.7.2     Listing Directory Parameters with EPRINT . . .  4-21
           4.7.3     Listing Directory Parameters with ULIST  . . .  4-22
           4.8     CHECKING SYSTEM STATUS . . . . . . . . . . . . .  4-29
           4.8.1     Determining the Status of Jobs with SYSTAT . .  4-29
           4.8.2     Watching System and Job Statistics with WATCH   4-31
           4.8.3     Getting Other Information  . . . . . . . . . .  4-32
           4.9     LISTING USER REMARKS WITH RDMAIL . . . . . . . .  4-33
           4.10    REPORTING SYSTEM ERRORS WITH SPEAR . . . . . . .  4-36
           4.11    BACKING UP DISK FILES WITH DUMPER  . . . . . . .  4-37
           4.12    ENDING TIMESHARING WITH ^ECEASE  . . . . . . . .  4-43
   INDEX


   TABLES

           2-1     LPFORM.INI Switches  . . . . . . . . . . . . . .  2-20
           2-2     SPFORM.INI Switches for All Device Types . . . .  2-42
           2-3     SPFORM.INI Switches for Plotter Devices Only . .  2-42
           3-1     SET INITIALIZE Switches  . . . . . . . . . . . . . 3-6
           3-2     REAPER Commands  . . . . . . . . . . . . . . . .  3-23









































                                    1-31





































































                                    1-1












                                 CHAPTER 1                                 CHAPTER 1

                        THE OPERATOR INTERFACE, OPR                        THE OPERATOR INTERFACE, OPR



   1.1  INTRODUCTION TO THE OPERATOR INTERFACE   1.1  INTRODUCTION TO THE OPERATOR INTERFACE

   The Operator Command Language (OPR) provides you, the  operator,  with
   one  command  language  to  communicate with various components of the
   TOPS-20 operating system.  These components are:

        1.  QUASAR, the Batch System Nucleus

        2.  BATCON, the Batch Controller

        3.  LPTSPL, the Line-Printer Spooler

        4.  CDRIVE, the Card-Reader Spooler

        5.  SPRINT, the Reader Interpreter

        6.  SPROUT, the Card-Punch and Paper-Tape-Punch

        7.  MOUNTR, the Tape-Drive and Disk-Drive Controller

   In addition, you can use this same command language to interface  with
   any program requesting operator action to be taken, such as the PLEASE
   program, and with any user on the system.  The program  that  receives
   the  OPR  commands and communicates with all the other system programs
   is ORION.



   1.2  RUNNING OPR   1.2  RUNNING OPR

   To start OPR, you must have WHEEL or OPERATOR privileges.   (See  your
   System  Manager  to obtain these privileges if you do not already have
   them.)

   To handle all batch software tasks and all PLEASE, MOUNT, and DISMOUNT
   requests,  you  must  have  OPR  running.   Normally,  commands in the
   PTYCON.ATO file start  OPR  automatically  as  a  PTYCON  subjob.   An
   example of the PTYCON.ATO file is shown below.













                                    1-1
                        THE OPERATOR INTERFACE, OPR                        THE OPERATOR INTERFACE, OPR


        SILENCE
        LOG
        DEFINE ^$OPR
        CONNECT OPR
        LOG OPERATOR FOO OPERATOR
        ENABLE
        !NEW OPERATOR INTERFACE PARSER 
        OPR  
        TAKE SYS:SYSTEM.CMD
        PUSH
        ENABLE
        ^ESET LOGIN ANY
        ^ESEND * SYSTEM IN OPERATION
        POP
        WHAT ALL
        CONNECT OPR
        $

   The command TAKE SYS:SYSTEM.CMD in the above command file executes any
   number   of  OPR  commands  to  set  and  start  devices  and  streams
   automatically.  An example of the SYSTEM.CMD file is shown below.

        SET BATCH-STREAM 0 TIME-LIMIT 5
        SET BATCH-STREAM 1 TIME-LIMIT 10
        SET BATCH-STREAM 2:3 TIME-LIMIT 11000
        SET BATCH-STREAM 3 PRIORITY-LIMITS 20:63
        SET BATCH-STREAM 0:1 PRIORITY-LIMITS 1:19
        START BATCH-STREAM 0:3
        SET PRINTER 0 PAGE-LIMIT 20000
        SET PRINTER 1 PAGE-LIMIT 500
        START PRINTER 0:1
        START READER 0
        START CARD-PUNCH 0

   These  commands  are  described  in  the  TOPS-20  Operator's  Command
   Language Reference Manual.


                                    NOTE

           It is the responsibility of  your  System  Manager  to
           determine  whether OPR is to run as subjob 0 of PTYCON
           or  as  another  subjob.   In  addition,  your  System
           Manager  should determine whether any other program or
           utility should be started as a PTYCON subjob.

           The tasks in this part and the following parts  assume
           that   you,  the  operator,  have  only  one  terminal
           available to perform the various tasks.  If  there  is
           more  than one terminal available to you, you may want
           to dedicate one terminal  to  run  only  OPR  and  use
           another  terminal  for  the various tasks, for example
           DUMPER.  One reason you would  use  two  terminals  is
           that while you were running a program like DUMPER, you
           could not receive any messages sent to or from OPR  on
           the  terminal  running  DUMPER.   However,  you  could
           receive the OPR messages on the terminal running OPR.









                                    1-2
                        THE OPERATOR INTERFACE, OPR                        THE OPERATOR INTERFACE, OPR


   To start OPR yourself under  a  job  with  OPERATOR  capability,  type
   ENABLE and then type OPR.

        @ENABLE<RET>
        $OPR<RET>
        OPR>

   If possible, you should have one hard-copy terminal dedicated to  OPR.
   The  reason  for  this  is that OPR is your primary interface with the
   operating system and its devices.  To dedicate a hard-copy terminal to
   OPR,  attach to the operator job running PTYCON.  PTYCON automatically
   starts OPR.  In the following example your password is  FOO  and  your
   account is OPERATOR:

         KL2102 Development ALL System, TOPS-20 Monitor 6(6035)
        @ENABLE<RET>
        $SYSTAT OPERATOR<RET>

           0   DET  SYSJOB  OPERATOR
           1   205  PTYCON  OPERATOR
           2   207  BATCON  OPERATOR
           3   210  EXEC    OPERATOR
           4   211  OPR     OPERATOR
                    .
                    .
        $ATTACH OPERATOR 1<RET>
         [Attached to TTY205, CONFIRM]<RET>
        Password: FOO<RET>
        <RET>
        OPR>

   If your installation has  more  than  one  terminal  assigned  to  its
   operators,   you  can  run  multiple  copies  of  OPR  from  different
   terminals.  (See Part V Section 1.2.2.) Thus, OPR can run as a  subjob
   under  PTYCON  at  one  terminal  and  as  a  job by itself at another
   terminal.  All OPRs have the same functionality as the OPR running  as
   a subjob of PTYCON and connected to the CTY.  ORION, OPR's controlling
   program, can handle an unlimited number of OPRs running.

   When you issue a command to OPR, it checks  the  command  for  format,
   syntax,  and  the placement of switches and values.  If the command is
   correct,  OPR  passes  the  command  to  ORION.   If  the  command  is
   incorrect,  OPR  outputs  an  error  message.  If you receive an error
   message, you can retype the entire OPR command,  or  press  CTRL/H  to
   reprint  the command up to the point where the error occurred.  (Refer
   to Part V Section 1.3.3.)

   To exit from OPR at any time, type the EXIT command.  You  immediately
   return  to  TOPS-20  command level and are prompted by the dollar sign
   ($).  For example:

        OPR>EXIT<RET>
        $

   If OPR is a subjob of PTYCON, you can type CTRL/X to return to  PTYCON
   command level.  For example:

        OPR>^X
              
                    
        PTYCON>

































































                                    1-3
                        THE OPERATOR INTERFACE, OPR                        THE OPERATOR INTERFACE, OPR


   In addition, you can also give the PUSH command to OPR  to  return  to
   TOPS-20  command  level.  You can execute any program or task and then
   give the POP command to return to OPR.  When you give the PUSH command
   to OPR, any messages sent to OPR will be displayed on the CTY.

        OPR>PUSH<RET>

         TOPS-20 Command processor 6(772)
        @ENABLE<RET>
        $DUMPER<RET>
        DUMPER>
                   .
                   .
                   .
        $DISABLE<RET>
        @POP<RET>
        OPR>

   All OPR commands described in Chapters 1 through 4 of  this  part  are
   shown   as  they  relate  to  the  tasks  involved.   For  a  complete
   description of  all  OPR  commands,  their  arguments,  keywords,  and
   switches,  refer  to the TOPS-20 Operator's Command Language Reference
   Manual.



   1.2.1  Remote Operator Control   1.2.1  Remote Operator Control

   If your system is part of a network, you can have a TOPS-20 host  with
   up  to three communication front-ends.  These communication front-ends
   can control DECnet-20 or IBM communications software.  If your  system
|  supports  DECnet-20,  you  may  also have support for remote stations.
|  OPR provides you with the  facilities  to  communicate  with  IBM-type
|  termination  stations, and to communicate in a minimal fashion with an
   IBM host.

   The /NODE:   switch  is  available  with  many  of  the  OPR  commands
   described  in this part.  The /NODE:  switch allows you to specify the
   logical identifier (name and/or number) followed by two colons (::) of
   a remote station in your system network.  This switch is valid only if
   your installation has installed the TOPS-20 DECnet  software  package.
   If  DECnet  is  present,  there can be remote station operators in the
   network.

   If you are a remote station  operator,  the  OPR  processing  at  your
   station  can  only  control  the  devices at your remote station.  All
   commands you specify default to your node in the  messages  passed  to
   ORION.   Therefore,  you  need not specify the /NODE:  switch with any
   OPR command for your node.  However, when you want to refer to another
   node  on  the  system,  you must specify the /NODE:  switch in the OPR
   command.

   In addition, you have complete control over all  jobs  located  and/or
   queued  for  your node, as compared with the Central Site operator who
   has control of all jobs and devices at all nodes on the system.



   1.2.2  Multiple Operators on the System   1.2.2  Multiple Operators on the System

   You can have more than one job  running  OPR  on  the  same  operating
   system.   ORION  keeps  track  of  each  OPR  and send the appropriate
   acknowledgement messages to the OPR that sent the command.

   If DECnet is installed at your installation, any messages  sent  to  a
   node from a user are sent to all OPRs processing at the node specified
   in the /NODE:  switch.

   Each OPR that is processing can be set to enable or disable the  types
   of  messages  that are displayed at that OPR console.  Refer to Part V
   Section 1.4.1 for descriptions of the DISABLE and ENABLE commands.
                                    1-4
                        THE OPERATOR INTERFACE, OPR                        THE OPERATOR INTERFACE, OPR


   1.3  OPR COMMAND FEATURES   1.3  OPR COMMAND FEATURES

   The OPR command language has three command features that allow you  to
   do the following:

        1.  List available commands - ?

        2.  Use recognition - <ESC>

        3.  Reprint faulty commands - <CTRL/H>

   The command features are described in detail in the following sections
   of this manual.

   If you are a remote station operator (that is,  if  your  installation
   has DECnet software), you cannot use the above features.  However, you
   can obtain help with the HELP command at OPR command level.  See  Part
   V Section 1.3.4.

   Other CTRL/character commands such as CTRL/R and  CTRL/U  function  at
   OPR command level as they do at TOPS-20 command level.



   1.3.1  ?  (Question Mark) - Listing Available Commands   1.3.1  ?  (Question Mark) - Listing Available Commands

   The question mark feature lists all available commands to OPR.  If you
   are  in the process of entering a command, the question mark lists any
   command keywords, arguments, or switches  for  the  command  and  then
   retypes  your OPR command up to the point where you typed the question
   mark.

   When you type a ?  to OPR, it lists the available commands.  When  you
   type  a  ?   after an OPR command, OPR lists the available keywords to
   that command.  When you type a ?  after the  keyword,  OPR  lists  the
   available  values, arguments, and/or switches to that keyword.  If you
   type a ?  after an entire OPR command, OPR responds with  the  message
   "confirm with carriage return", retypes your entire command, and waits
   for you to press the carriage return key.

   Only the OPR  commands  EXIT  and  PUSH  do  not  have  any  keywords,
   arguments, or switches.

   After you have started OPR and the system prompts you with OPR>,  type
   a ?.

        @ENABLE<RET>
        $OPR<RET>
        OPR>? one of the following:
         ABORT       ALIGN      BACKSPACE       CANCEL      CLOSE
         CONTINUE    DEFINE     DISABLE         DISMOUNT    ENABLE
         ENTER       EXIT       FORWARDSPACE    HELP        HOLD
|        IDENTIFY    MODIFY     MOUNT           NEXT        PUSH
         RELEASE     REPORT     REQUEUE         RESPOND     ROUTE
         SEND        SET        SHOW            SHUTDOWN    START
         STOP        SUPPRESS   SWITCH          TAKE        WAIT
          or NCP
        OPR>








                                    1-5
                        THE OPERATOR INTERFACE, OPR                        THE OPERATOR INTERFACE, OPR


                                    NOTE

           The DEFINE command appears in  the  above  example  if
           your  installation  has  DN60  software.   The  DEFINE
           command   is   described   in    the    TOPS-20    IBM
           Emulation/Termination Manual.




   1.3.2  ESCape - Using Recognition   1.3.2  ESCape - Using Recognition

   The ESCape key allows recognition input and guide words to  appear  on
   your console when you give an OPR command.

                                    NOTE

           All OPR commands accept  recognition  input  when  you
           press  the  ESCape  key  and most OPR commands provide
           guide words within parenthesis.  However, this is  the
           only  section  of  this  manual  that  describes  this
           feature of the OPR command language.

   Type the OPR command  ABORT  with  the  use  of  the  ESCape  key  for
   recognition and guide words.

            <ESC>                  <ESC>
              !                      !
        OPR>ABORT (Current Job on) BATCH-STREAM (Stream Number) 1<RET>

          <ESC>          <ESC>
            !              !
        /REQUEST-ID:127/NOERROR-PROCESSING<RET>
        OPR>
        10:23:02        Batch-stream 1  --Aborted--
                        Job TBUILD Req #127 for HURLEY
                        No Reason Given with NOERROR-PROCESSING

        OPR>
        10:23:17        Batch-stream 1  --End--
                        Job TBUILD Req #127 for HURLEY
                        -- Job Aborted by Operator --
        OPR>

                                    NOTE

           If the terminal makes a bell-like sound, it is because
           the  character  you  typed  is  not  unique.   If this
           happens, type  in  another  character  and  press  the
           ESCAPE  key.  Continue to do this until the characters
           you typed are unique to the specific command.















                                    1-6
                        THE OPERATOR INTERFACE, OPR                        THE OPERATOR INTERFACE, OPR


   1.3.3  CTRL/H - Reprinting Faulty Commands   1.3.3  CTRL/H - Reprinting Faulty Commands

   The CTRL/H command causes OPR to retype your last command  up  to  the
   point  where  the  error occurred.  An OPR error message occurs when a
   command does not have the correct format, syntax, switch, or value.

   Specify the OPR command FORWARDSPACE, in  its  abbreviated  form,  but
   mistype  the  numeric  value for the /PAGES:  switch.  After you press
   CTRL/H, enter the correct numeric value.

        OPR>FORWARDSPACE PRINTER 0 /PAGES:3)<RET>
        ? First nonspace character is not a digit
        OPR><CTRL/H>
        OPR>FORWARDSPACE PRINTER 0 /PAGES:30<RET>

        OPR>
        13:25:04        Printer 0  --Forwardspaced 30 Pages--
        OPR>



   1.3.4  Getting Help from OPR   1.3.4  Getting Help from OPR

   Instead of using the question mark feature to list available commands,
   their keywords, and their arguments or switches, you can give the HELP
   command to OPR.

   The keyword to the HELP command is any of the OPR commands.  When  you
   give  the HELP command in this format, OPR prints on your terminal the
   function of  the  command  you  specify  with  its  format,  keywords,
   arguments, and switches.

   Specify HELP RELEASE and OPR prints the  function,  format,  keywords,
   and arguments of the RELEASE command.

        OPR>HELP RELEASE<RET>
                        --- Help for RELEASE command ---
                The RELEASE command allows you to release a job request
                that was held with the HOLD command.

                The format is:

                RELEASE keyword

                where keyword must be one of the following:

                          BATCH-JOBS
                          CARD-PUNCH-JOBS
                          PAPER-TAPE-PUNCH-JOBS
                          PLOTTER-JOBS
                          PRINTER-JOBS

                followed by one of these arguments:

                          <request-id-number>    (for a single job)
                          User name              (for all jobs of a user)
                          *                      (for all job requests)

        OPR>







                                    1-7
                        THE OPERATOR INTERFACE, OPR                        THE OPERATOR INTERFACE, OPR


   1.4  ORION TO OPR MESSAGES   1.4  ORION TO OPR MESSAGES

   There are two types of messages that can appear at your OPR terminal.

        1.  OPR error messages (see Part V Section 1.5.)

        2.  ORION to OPR messages

   The types of ORION messages that can appear are:

        1.  Errors generated when ORION accepts an OPR command, but  does
            not have the appropriate devices, streams, nodes, or jobs

        2.  Messages from jobs that start processing within a  stream  or
            on a device

        3.  Messages from jobs that end processing within a stream or  on
            a device

        4.  Messages specifying actions that you must perform for various
            devices, streams, or jobs

        5.  Messages to which you must RESPOND

        6.  Results from TAKE command files

   Each OPR command that is sent to ORION is time stamped by  ORION  when
   the command is accepted and executed.  The acceptance and execution of
   the command is then returned to the OPR terminal  in  the  form  of  a
   message  with  the  time  stamp  as  the first eight characters of the
   message.  ORION to  OPR  error  messages  are  also  time-stamped  and
   displayed  at  the  OPR terminal in the same format.  For example, the
   OPR command:

        OPR>SET PRINTER 0 FORMS-TYPE NARROW<RET>

   prints on your terminal an ORION message in the format:

        hh:mm:ss        Printer 0  --Set Accepted--

   where hh is the hour, mm is the minutes, and ss is  the  seconds  that
   the  command  was accepted and executed.  Likewise, when ORION accepts
   an OPR command, but returns a message, that message will also  contain
   a time stamp.  For example, the OPR command:

        OPR>SHOW MESSAGES<RET>

   displays  the  following  information  message  when  there   are   no
   outstanding messages to respond to:

        hh:mm:ss        --No Outstanding Messages--

   When a particular job starts to process within a batch stream or on  a
   device,  ORION  displays  a message at your OPR terminal to notify you
   that the stream or device is active.  For example:

        hh:mm:ss        Batch-stream 0  -Begin--
                        Job TEST Req #274 for ZINA

        OPR>

   appears on your terminal when a job named TEST begins  to  process  in
   batch  stream  0 for user ZINA.  The hh:mm:ss at the beginning of this
   message is the time that the job started to process.


                                    1-8
                        THE OPERATOR INTERFACE, OPR                        THE OPERATOR INTERFACE, OPR


   Likewise, when a particular job ends its  processing  within  a  batch
   stream  or  on a device, ORION displays a message at your OPR terminal
   to notify you that the stream or device is not active and the job  has
   completed.  For example:

        hh:mm:ss        Batch-stream 0  -ENDED--
                        Job TEST Req #274 for ZINA

        OPR>

   appears on your terminal when a job named TEST ends the processing  in
   batch  stream  0 for user ZINA.  The hh:mm:ss at the beginning of this
   message is the time that the job ended the processing (hours, minutes,
   seconds).



   1.4.1  Controlling OPR Message Output   1.4.1  Controlling OPR Message Output

   You can control the types of messages that  appear  at  your  terminal
   with  the  use  of the OPR commands ENABLE and DISABLE.  When you give
   either of these commands you must specify the  OUTPUT-DISPLAY  keyword
   with one or more of the arguments described below.

   The ENABLE  OUTPUT-DISPLAY  command  and  the  DISABLE  OUTPUT-DISPLAY
   command  provides  the  mechanism so that each terminal running OPR at
   your installation can have its own set of messages  appearing  on  its
   terminal.   Below  are  the descriptions of available arguments to the
   OUTPUT-DISPLAY keyword.


   ALL-MESSAGES                      prints all messages.  These messages
                                     include  the  messages  described by
                                     the remaining arguments.   When  you
                                     ENABLE      (or     DISABLE)     the
                                     OUTPUT-DISPLAY of all messages, then
                                     all  operator, system, device, user,
                                     and error messages do  (or  do  not)
                                     appear at the OPR terminal.

   BATCH-MESSAGES                    prints all  the  messages  generated
                                     when  batch job requests are entered
                                     into and processed by the system.
|  
|  BUGCHK-MESSAGES                   prints all BUGCHK messages generated
|                                    by the system.
|  
|  BUGINF-MESSAGES                   prints all BUGINF messages generated
|                                    by the system.

   CARD-PUNCH-MESSAGES               prints all  the  messages  generated
                                     when   users  request  cards  to  be
                                     punched as output from the system.

   CARD-READER-INTERPRETER-MESSAGES  prints all messages  generated  when
                                     cards   are   read  and  interpreted
                                     through the card reader  or  when  a
                                     batch  job  was  submitted  with the
                                     /READER switch specified.

   FILE-RETRIEVAL-MESSAGES           prints all messages  generated  when
                                     users  request a retrieval of a file
                                     that has been archived  or  migrated
                                     to tape.

   MOUNT-MESSAGES                    prints all messages  generated  when
                                     users   request  tape  or  structure
                                     mounts.
                                    1-9
                        THE OPERATOR INTERFACE, OPR                        THE OPERATOR INTERFACE, OPR


   PAPER-TAPE-PUNCH-MESSAGES         prints all messages  generated  when
                                     users    request    paper-tape-punch
                                     output from the system.

   PLOTTER-MESSAGES                  prints all messages  generated  when
                                     users  request  plotter  output from
                                     the system.

   PRINTER-MESSAGES                  prints all messages  generated  when
                                     users request line printer output.

   READER-MESSAGES                   prints all messages  generated  when
                                     jobs  are  entered  into  the system
                                     through  the  card   reader.    Card
                                     reader jobs become batch requests.
|  
|  SYSTEM-MESSAGES                   prints  system  messages  concerning
|                                    system space and operation.

   USER-MESSAGES                     prints all messages  generated  when
                                     users make requests to you using the
                                     PLEASE  program.   These   are   WTO
                                     (Write-to-Operator)  messages,  WTOR
                                     (Write-to-Operator-with-Response)
                                     messages,   or   other  messages  as
                                     defined by the switches below.

|  All above arguments with the exception of BUGCHK, BUGINF,  and  SYSTEM
   have  three  optional  switches.   If  you do not specify one of these
   switches with one of the above arguments, the system assumes all three
   that are described below.

   /INFORMATION-MESSAGES             messages  that  are   informational,
                                     such  as errors that occur due to an
                                     application  problem.    Also,   WTO
                                     messages  are considered information
                                     messages  from  users,  because   no
                                     response is necessary from you.

   /JOB-MESSAGES                     messages  that  notify  you  when  a
                                     device   or   stream  has  begun  to
                                     process a job request and  when  the
                                     job    request    has    ended   its
                                     processing.

   /OPR-ACTION-MESSAGES              messages that  notify  you  of  some
                                     action  to be performed as requested
                                     by a user or a job.   Also  included
                                     are  messages that require action to
                                     be taken, but are not  job  or  WTOR
                                     related.     All   operator   action
                                     messages must be answered  with  the
                                     RESPOND command.













                                    1-10
                        THE OPERATOR INTERFACE, OPR                        THE OPERATOR INTERFACE, OPR


                            ----- Examples -----

        1.  You have OPR at a terminal  for  file  retrievals  and  mount
            requests only.  Since all messages are enabled when you start
            OPR, you can DISABLE the output display of all  messages  and
            then  ENABLE  the  output  display of the file retrievals and
            mount requests.

            OPR>DISABLE OUTPUT-DISPLAY ALL-MESSAGES      
            OPR>
            9:32:14        --Output Display for OPR Modified--
            OPR>ENABLE OUTPUT-DISPLAY FILE-RETRIEVAL-MESSAGES      
            OPR>
            9:32:25        --Output Display for OPR Modified--
            OPR>ENABLE OUTPUT-DISPLAY MOUNT-MESSAGES      
            OPR>
            9:32:37        --Output Display for OPR Modified--
            OPR>

        2.  You have OPR at a terminal for operator action messages only.

            OPR>DISABLE OUTPUT-DISPLAY ALL-MESSAGES /INFORMATION-MESSAGES
             /JOB-MESSAGES      
            OPR>
            10:45:09        --Output Display for OPR Modified--
            OPR>




   1.5  OPR ERROR MESSAGE DESCRIPTIONS   1.5  OPR ERROR MESSAGE DESCRIPTIONS

   When OPR is running, it may print various  error  messages.   All  OPR
   error  messages  begin  with  a  ?   and  are  followed by the message
   explaining the error.  In addition, the ?  does not represent a  fatal
   error in OPR as it does in some other system programs.

   When you receive an error message, you can  press  CTRL/H  (to  retype
   your  OPR  command  up  to  the  point where you entered the incorrect
   keyword, switch, or value)  and  specify  the  correct  input  to  the
   command.   As  with  all  OPR commands, if you do not know the command
   format or you have forgotten the keywords, switches, or values, type a
   ?  and OPR lists the command arguments that you can specify.

   Refer to the TOPS-20 Operator's Command Language Reference Manual  for
   a complete description of all OPR error messages.




















                                    1-11





































































                                    2-1












                                 CHAPTER 2                                 CHAPTER 2

                            BATCH SOFTWARE TASKS                            BATCH SOFTWARE TASKS



   The batch system operates under the control of the  TOPS-20  operating
   system  and  increases the efficiency of the system by processing jobs
   that do not require human interaction.  These types of jobs are  those
   that  are  large  and long-running, jobs that require large amounts of
   data, jobs that are frequently  run  for  production,  and  jobs  that
   require no interaction with the user.



   2.1  BATCH SYSTEM COMPONENTS   2.1  BATCH SYSTEM COMPONENTS

   The batch system consists of the following programs:

        1.  OPR

        2.  ORION

        3.  QUASAR

        4.  BATCON

        5.  LPTSPL

        6.  CDRIVE

        7.  SPRINT

        8.  SPROUT

   OPR allows you to communicate with the various batch system components
   and  with the job requests that process jobs on the devices controlled
   by these components.  This  chapter  describes  the  OPR  commands  to
   accomplish these various batch software tasks.

   ORION is the interface between OPR and  all  other  batch  components.
   ORION logs each OPR command it receives and then passes the command to
   the appropriate program.

   QUASAR, the system queue manager, is the heart of  the  batch  system.
   It  is  responsible  for  scheduling  all  batch jobs entered into and
   processed from the system  queues  by  the  components  in  the  batch
   system.

   BATCON, the batch controller, is the system program that initiates and
   controls  the  processing of batch jobs.  QUASAR selects jobs from the
   batch input queue and gives them to BATCON for  processing.   The  OPR
   commands  that  have BATCH-STREAM as an argument are the commands that
   allow you to control batch job processing.



                                    2-1
                            BATCH SOFTWARE TASKS                            BATCH SOFTWARE TASKS


   LPTSPL, the line-printer spooler, is a program that handles a specific
   printer  and  all  the  print  requests for the system including those
   submitted through the PRINT command,  spooled  requests  generated  by
   user  programs,  and  batch  job log files.  QUASAR selects jobs to be
   printed according to a variety of parameters.  The OPR  commands  that
   have PRINTER as an argument are the commands that allow you to control
   line printer processing.

   CDRIVE and SPRINT are responsible for the card-reader  input.   CDRIVE
   reads  cards  from the card reader(s), places the data on the cards on
   disk, and queues  a  request  for  SPRINT.   SPRINT  reads  the  data,
   interprets the $JOB card and other control cards, and then creates and
   submits the user's batch job to BATCON.  The OPR  commands  that  have
   READER  as  an  argument or keyword are the commands that allow you to
   control card reader processing.

   SPROUT, the card punch, paper-tape punch, and plotter spooler, is  the
   program  that  handles all the output requests other than line printer
   requests.  QUASAR selects data to be output on these devices according
   to  a  variety  of parameters.  The OPR commands that have CARD-PUNCH,
   PAPER-TAPE-PUNCH, and PLOTTER as arguments are the commands that allow
   you to control the output processing on these devices.



   2.2  BATCH RESPONSIBILITIES   2.2  BATCH RESPONSIBILITIES

   The batch software handles many tasks for  you.   However,  there  are
   still  many  operations  for you to perform in order to keep the batch
   system running efficiently.  These operations  are  important  because
   the  user  is  absent  and  dependent  on you to see that his jobs are
   completed.

   In the batch operating environment, your responsibilities are to:

        1.  Set batch-stream and peripheral parameters.

        2.  Adjust the parameters if necessary.

        3.  Service action requests from user jobs.

        4.  Maintain peripheral devices.

        5.  Get the cards read through the card reader when there  are  a
            large number of batch jobs being submitted on cards.

   If users are submitting batch jobs on card decks, your System  Manager
   should establish for you:

        1.  Where the decks must be placed for submission

        2.  When the decks are read

        3.  Where and when the decks and output are returned to users

   In addition to the above tasks, you should  periodically  examine  the
   queues and be able to modify the requests if necessary.









                                    2-2
                            BATCH SOFTWARE TASKS                            BATCH SOFTWARE TASKS


   2.3  CONTROLLING BATCH STREAMS   2.3  CONTROLLING BATCH STREAMS

   Before any batch request can be processed by the TOPS-20 batch system,
   batch  streams must be started so that the jobs can run.  In addition,
   you must have QUEUE-REQUESTS enabled so that all users can  issue  the
   SUBMIT  and  PRINT  commands.   If QUEUE-REQUESTS is disabled, and you
   give a SUBMIT or PRINT command, you receive a message specifying  that
   QUEUE-REQUESTS  is  disabled,  then  give  the  ENABLE  QUEUE-REQUESTS
   command from OPR command level.

        OPR>ENABLE QUEUE-REQUESTS      
        OPR>

   The following are the OPR commands that allow  you  to  control  batch
   streams:

        1.  SET BATCH-STREAM

        2.  START BATCH-STREAM

        3.  STOP BATCH-STREAM

        4.  CONTINUE BATCH-STREAM

        5.  SHUTDOWN BATCH-STREAM

        6.  SEND BATCH-STREAM

        7.  SHOW PARAMETERS BATCH-STREAM

        8.  SHOW STATUS BATCH-STREAM

   The following sub-sections describe each of the above commands.



   2.3.1  Setting Batch Stream Parameters   2.3.1  Setting Batch Stream Parameters

   Normally, a defined number of batch streams are started  automatically
   at  system start-up by the SYSTEM.CMD file.  This number is determined
   by your System Manager.  However, you might start an additional  batch
   stream when there are more batch jobs than there are timesharing users
   on the system.  The parameters on any batch stream are used  to  limit
   the  use  of  that  stream  to  requests that meet a particular set of
   criteria.  Before you start the batch stream, set the  parameters  for
   the stream.  The default parameters for a batch stream are:

        1.  OPR-INTERVENTION

        2.  PRIORITY-LIMITS 1:63

        3.  TIME-LIMITS 0:600

   The OPR-INTERVENTION  parameter  specifies  that  the  user  can  pass
   messages  to you through the batch job and you can perform the actions
   requested, such as a tape mount or a structure dismount.   If  you  do
   not  want  OPR-INTERVENTION  to be in effect, set the batch stream for
   NO-OPR-INTERVENTION.  Then, any batch request  that  executes  in  the
   stream  and requests operator intervention is logged out automatically
   by the system.






                                    2-3
                            BATCH SOFTWARE TASKS                            BATCH SOFTWARE TASKS


   The PRIORITY-LIMITS parameter  allows  you  to  specify  the  priority
   (numeric  importance)  of  a batch stream or a range of batch streams.
   The default limits are from 1 to 63.  The greater the number  is,  the
   higher  the  priority.   If  you set a batch stream to have a priority
   limit of 31:41, only those batch requests submitted  with  a  priority
   limit of 31 to 41 are allowed to execute in that batch stream.

   The TIME-LIMITS parameter allows you to specify the maximum  execution
   time  (in  minutes)  for  a  batch request to execute in the specified
   stream.  The default is from 0 to 3600 minutes.  If a job exceeds  the
   time  limit, it receives an additional 10% of the allotted time before
   the job is canceled automatically by the system.  If you set  a  batch
   stream  to  have  a  time  limit from 0 to 5 minutes, only those batch
   requests that are submitted with a time limit of 5 minutes or less are
   allowed to execute in that batch stream.



                            ----- Example -----

   Set a batch stream for NO-OPR-INTERVENTION with a priority limit of 50
   and a time limit of 90 minutes.

        OPR>SET BATCH-STREAM 7 NOOPR-INTERVENTION<RET>
         9:20:55        Batch-stream 7  --Set Accepted--
        OPR>SET BATCH-STREAM 7 PRIORITY-LIMITS 50<RET>
         9:21:15        Batch-stream 7  --Set Accepted--
        OPR>SET BATCH-STREAM 7 TIME-LIMITS 90<RET>
         9:21:40        Batch-stream 7  --Set Accepted--
        OPR>



   2.3.2  Starting Batch Streams   2.3.2  Starting Batch Streams

   Once you have set the parameters for a particular batch  stream  or  a
   range of batch streams, you can then start the stream(s) so that batch
   requests can be scheduled.  If you do not set any parameters  for  the
   stream,  the stream takes the default values described in the previous
   section.

   You can start one or more batch streams at a time.

   To stop the scheduling of batch job requests in a batch  stream  after
   you have started it, use the SHUTDOWN command.

                            ----- Example -----

   Issue the START BATCH-STREAM command to start up streams 6 and 7.

        OPR>START BATCH-STREAM 6:7 <RET>
        OPR>
        10:00:15        Batch-stream 6  --Startup Scheduled--
        OPR>
        10:00:17        Batch-stream 6  --Started--
        OPR>
        10:00:20        Batch-stream 7  --Startup Scheduled--
        OPR>
        10:00:22        Batch-stream 7  --Started--
        OPR>






                                    2-4
                            BATCH SOFTWARE TASKS                            BATCH SOFTWARE TASKS


   2.3.3  Stopping Batch Streams Temporarily   2.3.3  Stopping Batch Streams Temporarily

   If you ever need to temporarily stop a batch  stream  or  a  range  of
   batch  streams,  use  the STOP command.  The STOP BATCH-STREAM command
   temporarily stops a batch stream from processing a job.  You must  use
   the  CONTINUE  command  to  resume the batch stream.  However, in some
   instances the job cannot be continued, depending upon the  point  when
   you issued the STOP command.

   The STOP command has three optional arguments.  They are:

        1.  AFTER CURRENT-REQUEST

        2.  AFTER EVERY-REQUEST

        3.  IMMEDIATELY

   The IMMEDIATELY argument is the default for the STOP  command.   Refer
   to  the  TOPS-20  Operator's  Command  Language Reference Manual for a
   complete description of these commands.



                            ----- Example -----

   Stop the processing of a job in batch stream 4 temporarily because  it
   is taking too much CPU time.

        OPR>STOP BATCH-STREAM 4<RET>
        OPR>
        11:23:09        Batch-stream 4  --Stopped--
        OPR>



   2.3.4  Continuing Batch Streams   2.3.4  Continuing Batch Streams

   You can give the CONTINUE command to continue the processing of a  job
   (or  jobs)  in  a  batch  stream or a range of batch streams that were
   temporarily stopped with the STOP command.



                            ----- Example -----

   Continue the processing of a job in batch stream 4.

        OPR>CONTINUE BATCH-STREAM 4<RET>
        OPR>
        11:41:18        Batch-stream 4  --Continued--
        OPR>



   2.3.5  Shutting Down Batch Streams   2.3.5  Shutting Down Batch Streams

   If at any time you need to permanently stop a batch stream or a  range
   of  batch  streams,  use  the SHUTDOWN command.  If a job is currently
   processing in the batch stream, the shutdown is  first  scheduled  and
   when that job has been completed, the batch stream is shutdown.






                                    2-5
                            BATCH SOFTWARE TASKS                            BATCH SOFTWARE TASKS


   You must issue the START command to start a batch stream after it  has
   been SHUTDOWN.



                            ----- Example -----

   Shutdown batch stream 5 while a job is still processing in it.

        OPR>SHUTDOWN BATCH-STREAM 5<RET>
        OPR>
        13:34:45        Batch-stream 5  --Shutdown Scheduled--
        OPR>

        When the job in the batch stream has  completed  its  processing,
        the following message appears:

        OPR>
        13:38:25        Batch-stream 5  --Shutdown--
        OPR



   2.3.6  Sending Messages to Batch Streams   2.3.6  Sending Messages to Batch Streams

   When you need to send a message to a job in a batch stream,  give  the
   SEND BATCH-STREAM command.  You can specify a single-line message with
   the SEND command or press RETURN immediately after  the  batch  stream
   number  and  enter  as many lines as you need to.  You must then press
   CTRL/Z to terminate  the  SEND  command.   You  cannot  specify  batch
   streams in the SEND command.

                          ----- Restriction -----

   The batch stream to which you send the message must be active.  If the
   batch stream is not active, you receive the following message:

        hh:mm:ss        Batch-stream n  --Not Active--



                            ----- Example -----

   Give the SEND command to notify the job in batch  stream  2  that  the
   requested tape volume cannot be found.

        OPR>SEND BATCH-STREAM 2<RET>
        Enter text and terminate with ^Z
        TAPE VOLUME PAY001 CANNOT BE FOUND IN OPERATIONS<RET>
        BATCH JOB WILL BE CANCELED<RET>
          ^Z
           !
        <CTRL/Z>
                      
        OPR>ABORT BATCH-STREAM 2<RET>
        OPR>
        14:32:09        Batch-stream 2  --Aborted--
                        Job PAY090 Req #159 for ACCOUNTING
                        No Reason Given with ERROR-PROCESSING
        OPR>
        14:32:14        Batch-stream 2  --End--
                        Job PAY090 Req #159 for ACCOUNTING
                        -- Job Aborted by Operator --
        OPR>


                                    2-6
                            BATCH SOFTWARE TASKS                            BATCH SOFTWARE TASKS


   2.3.7  Displaying Batch Stream Parameters   2.3.7  Displaying Batch Stream Parameters

   At any time you can display the current batch stream  parameters  with
   the  SHOW  PARAMETERS  BATCH-STREAM  command  for  one  or  more batch
   streams.  If you do not specify a single stream number or a  range  of
   stream  numbers, the SHOW command defaults to all the batch streams in
   the system.

   The output from the SHOW command displays for each batch stream:

        1.  the number of the batch stream

        2.  the range of processing minutes set for the batch stream

        3.  the priority range set for the batch stream

        4.  whether or not operator intervention has  been  set  for  the
            batch stream

                            ----- Example -----

   Give  the  SHOW  PARAMETERS  BATCH-STREAM  command  to   display   the
   parameters of all current batch streams in the system.

        OPR>SHOW PARAMETERS BATCH-STREAM<RET>
        OPR>
        12:09:33            -- System Device Parameters--

        Batch-stream Parameters:
          Strm     Minutes    Prio  Opr-Intvn
          ----  -----------  -----  ---------
             0      0:10      1:19        Yes
             1      0:10      1:19        Yes
             2      0:11000   1:19        Yes
             3      0:11000  20:63        Yes

        OPR>



   2.3.8  Displaying Batch Stream Status   2.3.8  Displaying Batch Stream Status

   At any time, you can display the status of one or more  batch  streams
   with  the  SHOW  STATUS BATCH-STREAM command.  If you do not specify a
   batch stream number or a range of numbers, the command defaults to all
   batch streams in the system.

   The output from the SHOW command displays for each batch stream:

        1.  the number of the batch stream

        2.  the current status of the batch stream

        3.  the name of the job currently active in the batch stream

        4.  the request-id of the job

        5.  the name of the user who made the job request

   If the batch stream is not active, the  word  "Idle"  appears  in  the
   Status  column with no job name, request-id, or user name.  If none of
   the batch streams are active, only the stream number and status appear
   in the display.



                                    2-7
                            BATCH SOFTWARE TASKS                            BATCH SOFTWARE TASKS


   If a stream is active, the display also  shows  the  job  number,  the
   label  which  the job last encountered, and the run time used.  If you
   do not need this additional information with the display of  the  SHOW
   STATUS  BATCH-STREAM  command,  specify  the  /SHORT switch before you
   press RETURN to confirm the command.

                            ----- Example -----

   Give the SHOW STATUS  BATCH-STREAM  command  to  display  the  current
   status of all batch streams in the system.

        OPR>SHOW STATUS BATCH-STREAM<RET>
        OPR>
        19:19:57                -- System Device Status --

        Batch-stream Status:
          Strm      Status       Jobname  Req#            User
          ----  ---------------  -------  ----  ------------------------
             0  Idle           
             1  Active           FDLBLD     59  E.BROWN
                 Job# 18 Running MACRO Last Label: MACRO Runtime 0:00:42
             2  Idle             
             3  Active           PHYCAL     41  MANUFACTURING
                 Job# 31 Running COBOL Runtime 2:31:27

        OPR>



   2.4  CONTROLLING BATCH JOBS   2.4  CONTROLLING BATCH JOBS

   The following are the OPR commands that allow  you  to  control  batch
   jobs that users submit with the TOPS-20 SUBMIT command:

        1.  SHOW QUEUES BATCH-JOBS

        2.  HOLD BATCH-JOBS

        3.  RELEASE BATCH-JOBS

        4.  ABORT (current job on) BATCH-STREAM

        5.  REQUEUE (current job on) BATCH-STREAM

        6.  MODIFY BATCH-REQUEST

        7.  CANCEL BATCH-REQUEST

        8.  NEXT (job on) BATCH-STREAM

   The following sub-sections describe how to use each of these  commands
   to control batch jobs.



   2.4.1  Examining Batch Jobs in the Queues   2.4.1  Examining Batch Jobs in the Queues

   Whenever a user submits a batch job, the job  is  placed  in  a  queue
   where  it  waits  for selection by the batch system for execution.  To
   examine the queues for batch jobs at any time, give  the  OPR  command
   SHOW QUEUES BATCH-JOBS.










                                    2-8
                            BATCH SOFTWARE TASKS                            BATCH SOFTWARE TASKS


   The  output  of  the  SHOW  QUEUES  BATCH-JOBS  command  displays  the
   following information for each job that is waiting or running:

        1.  the name of the batch job

        2.  the request-id number of the batch job

        3.  the scheduled run time of the batch job

        4.  the name of the user who submitted the batch job

   These four columns of the display appear  whether  the  batch  job  is
   currently running (active) or not running (not active).

   If the batch job is active in the batch stream, the display  shows  in
   which  stream the job is active, the job number, the last control file
   label encountered by the job, and the run time used.

   The SHOW QUEUES BATCH-JOBS command has four optional switches:

        1.  /NODE:name displays the batch queue of a remote system.

        2.  /ALL adds to the display the switches that the user specified
            with  the SUBMIT command.  If no switches were specified, the
            /ALL switch displays the default switches.  In addition,  the
            /ALL  switch  displays  any  switches that you specified, for
            example, /HOLD.

        3.  /SHORT displays only the job name, the  request  number,  the
            scheduled run time, and the user name.

        4.  /USER:name displays only the batch jobs of a specified user.

                              ----- Hint -----

   The asterisk (*) before the  batch  job  name  column  (see  examples)
   indicates that the job is currently active.

                            ----- Examples -----

        1.  Give the SHOW QUEUES BATCH-JOBS command with the /ALL  switch
            to  display  the  batch  jobs  in  the  queue  with all their
            switches.

            OPR>SHOW QUEUES BATCH-JOBS /ALL <RET>
            OPR>
            15:02:58                -- System Queues Listing --

            Batch Queue:
            Job Name   Req#   Run Time            User
            --------  ------  --------  ------------------------
            * CHKFIM       9  00:05:00  NELSON                In Stream:0
                      /Uniq:Yes  /Restart:No  /Assist:Yes  /Output:Nolog
                      /Batlog:Append  /Seq:2041
                Job 18 Running DIRECT Last label: DIRECT Runtime 0:01:24
            * CISRV       13  00:15:00  CDUNN                 In Stream:3
                      /Uniq:No   /Restart:Yes /Assist:Yes  /Output:Nolog
                      /Batlog:Super   /Prio:20 /Seq:2039
                Job 33 Running MACRO Last label: CONT Runtime 0:02:05
            * BLDMM        5  00:20:00  MCINTEE               In Stream:2
                      /Uniq:Yes  /Restart:Yes  /Assist:Yes  /Output:Nolog
                      /Batlog:Super  /Prio:20  /Seq:2436
                Job 21 Running MACRO Runtime 0:00:54
              DBLDEV      14   01:00:00       MURPHY       /After: 1-Sep-82  0:00
                      /Uniq:Yes  /Restart:Yes  /Assist:Yes  /Output:Nolog
                      /Batlog:Super  /Prio:20  /Seq:2023
            There are 4 jobs in the Queue (3 in Progress)

            OPR>
                                    2-9
                            BATCH SOFTWARE TASKS                            BATCH SOFTWARE TASKS


        2.  Give the SHOW  QUEUES  BATCH-JOBS  command  with  the  /SHORT
            switch.

            OPR>SHOW QUEUES BATCH-JOBS /SHORT<RET>
            OPR>
            19:44:17            -- System Queues Listing --

            Batch Queue:
            * GENSCH    21  00:05:00  FRIES
              SBUILD    29  01:00:00  KIRSCHEN
              WEEKLY    37  00:05:00  OPERATOR
              SPEAR     39  00:05:00  OPERATOR

            OPR>




   2.4.2  Holding Batch Jobs   2.4.2  Holding Batch Jobs

   Whenever you need to prevent a batch job  from  processing,  give  the
   HOLD  BATCH-JOBS  command.   When  you  give this command, the current
   job(s) in the queue (as specified  by  one  of  the  arguments  listed
   below)  is  kept from being processed.  Any batch jobs submitted after
   the HOLD command are not held and are processed when a batch stream is
   available.   You must specify one of the following arguments with this
   command:

        1.  The request-id number, which holds a single batch job

        2.  The user name, which holds all batch jobs submitted  by  that
            user

        3.  An asterisk (*), which holds all batch jobs submitted by  all
            users




                             ----- Hints -----

   You cannot HOLD a batch job  that  is  currently  active  in  a  batch
   stream.



                            ----- Example -----

   Give the HOLD BATCH-JOBS command to hold all batch requests  for  user
|  PURRETTA.

|       OPR>HOLD BATCH-JOBS PURRETTA<RET>
        OPR>
         9:01:54        --6 Jobs Held--
        OPR>











                                    2-10
                            BATCH SOFTWARE TASKS                            BATCH SOFTWARE TASKS


   2.4.3  Releasing Batch Jobs   2.4.3  Releasing Batch Jobs

   You can give the RELEASE command to release a batch job that has  been
   previously  held  with  the  HOLD  command.   You can specify a single
   request-id number, the user name for all jobs  by  that  user,  or  an
   asterisk  (*)  for  all batch jobs in the system.  The RELEASE command
   reschedules the job(s) for processing.

                              ----- Hint -----

   You must have one or more batch streams started or in the  Idle  state
   to get a batch job processed.

                            ----- Example -----

   Give the RELEASE command  to  reschedule  all  batch  jobs  that  were
   previously held.

        OPR>RELEASE BATCH-JOBS *<RET>
        OPR>
        10:38:09        --6 Jobs Released--
        OPR>



   2.4.4  Canceling Batch Jobs   2.4.4  Canceling Batch Jobs

   At various times, you might have to cancel a batch  job  while  it  is
   executing  in a batch stream.  You can give the ABORT command with the
   batch stream number and one or more of the following switches:

        1.  /REQUEST-ID:

        2.  /ERROR-PROCESSING, /NOERROR-PROCESSING, or /PURGE

        3.  /REASON:

   The /REQUEST-ID:  switch uniquely identifies the job to be canceled.

   The  /ERROR-PROCESSING,  /NOERROR-PROCESSING,  and   /PURGE   switches
   specify if there are error recovery procedures provided by the user or
   if the system is to flush the entire job from the system  when  it  is
   canceled.  You can specify only one of these switches.  The default is
   /ERROR-PROCESSING.

   The /REASON:  switch allows you to enter one or more lines of text  to
   explain why the batch job is being canceled.

                            ----- Example -----

   Give the ABORT  command  to  cancel  a  batch  job  that  requested  a
   structure that does not exist.

        OPR>ABORT BATCH-STREAM 0 /REASON:NO SUCH STRUCTURE<RET>
        OPR>
        11:32:08        BATCH-STREAM 0       JOB #45      --ABORTED--
                        Job TEST01 Req #35 for JONES
                        NO SUCH STRUCTURE with ERROR-PROCESSING
        OPR>
        11:32:12        Batch-stream 0  --End--
                        Job TEST01 Req #35 for JONES
                        -- Job Aborted by Operator --
        OPR>



                                    2-11
                            BATCH SOFTWARE TASKS                            BATCH SOFTWARE TASKS


   2.4.5  Requeuing Batch Jobs   2.4.5  Requeuing Batch Jobs

   At various times you might want to cancel a batch job  that  is  being
   processed and then reschedule it to be processed at a later time.  You
   can give the REQUEUE command to HOLD the batch job in its entirety and
   to ABORT its current processing.

   For example, you might want to  REQUEUE  a  batch  job  that  requires
   additional  structures  for  its  processing,  but you do not have any
   available disk drives.  Thus, you REQUEUE the job in its entirety  for
   processing when the disk drives become available.

   You can specify the /REASON switch to explain why  the  job  is  being
   requeued.


                            ----- Example -----

   Give the REQUEUE command to hold a batch job that requests  four  tape
   drives that are not available.

        OPR>REQUEUE BATCH-STREAM 2 /REASON:<RET>
        Enter text and terminate with ^Z
        JOB WILL BE RELEASED LATER WHEN TAPE DRIVES ARE AVAILABLE ^Z
                                                                   !
                                                                <CTRL/Z>
                                                                   
                                                                      
        OPR>
        13:21:03        BATCH-STREAM 2  --REQUEUED--
|                       JOB TAPE01 Req #27 for HACHE
        OPR>
        13:21:05        Batch-stream 2  --End--
|                       Job TAPE01 Req #27 for HACHE
                        -- Job Requeued by Operator--
        OPR>



   2.4.6  Modifying Batch Requests   2.4.6  Modifying Batch Requests

   Whenever you need to change the priority of a batch job request in the
   queue,  give  the  MODIFY  BATCH-REQUEST  command.   You can specify a
   single batch request-id number, a user name for all requests  by  that
   user, or an asterisk (*) for all batch requests in the queue.

   You must specify a new PRIORITY number from 1 to 63.  The  higher  the
   number, the greater the priority.


                            ----- Example -----

   Give the modify command to change the priority of batch request 135 to
   have  a priority of 63.  This causes the request to be the next job to
   be processed.

        OPR>MODIFY BATCH-REQUEST 135 PRIORITY 63<RET>
        OPR>
         8:51:21         --1 Request Modified--
        OPR>






                                    2-12
                            BATCH SOFTWARE TASKS                            BATCH SOFTWARE TASKS


   2.4.7  Deleting Batch Requests   2.4.7  Deleting Batch Requests

   Whenever you need to cancel a batch request from the batch queue, give
   the CANCEL BATCH-REQUEST command.  You can specify a single request-id
   number, a user name for all jobs by that user, or an asterisk (*)  for
   all batch requests in the queue.

   If you CANCEL a batch request that is active in a  batch  stream,  the
   batch  job  is deleted immediately from the batch stream.  In this way
   the CANCEL command is the same as the ABORT  command.   The  log  file
   shows a message indicating that the job was deleted by the operator.


                            ----- Example -----

   Give the CANCEL command to batch request  168  from  the  batch  input
   queue.

        OPR>CANCEL BATCH-REQUEST 168<RET>
        OPR>
        10:25:11        --1 Job Canceled--
        OPR>



   2.4.8  Scheduling the Next Batch Request   2.4.8  Scheduling the Next Batch Request

   Whenever a user requests that his  batch  job  run  next  in  a  batch
   stream, give the next BATCH-STREAM command.


                              ----- Hint -----

   This command requires that you specify a  batch  stream  number.   The
   criteria  for  selecting a batch stream are dependent on your site and
   the immediate status of the batch streams.  If you look at the  active
   jobs in the batch streams, you might recognize a long running job, and
   thus avoid that stream.  Or the user may simply request that  his  job
   run in a certain stream.


                            ----- Example -----

   Give the NEXT command to make request 66 the next job to run in  batch
   stream 0.

        OPR>NEXT BATCH-STREAM 0 REQUEST-ID 66<RET>
        OPR>
        10:43:11  Batch-Stream 0  --  NEXT request #66 scheduled --
        OPR>



   2.5  CONTROLLING THE LINE PRINTER   2.5  CONTROLLING THE LINE PRINTER

   To handle users' requests to have files printed, you must have one  or
   more  line  printers set for the parameters of the users' requests and
   the line printer(s) must be started.  Normally,  the  line  printer(s)
   are  automatically started at system start-up when the SYSTEM.CMD file
   is executed.






                                    2-13
                            BATCH SOFTWARE TASKS                            BATCH SOFTWARE TASKS


   After several listings have been printed, you must  remove  them  from
   the  line  printer,  separate  them, and distribute them.  Your System
   Manager should set up the distribution method which includes:

        1.  Where you must put the listings so that users can  pick  them
            up

        2.  When you must distribute them

   The following are the OPR commands that allow you to control the  line
   printer(s) at your installation:

        1.  SET PRINTER

        2.  START PRINTER

        3.  STOP PRINTER

        4.  CONTINUE PRINTER

        5.  SHUTDOWN PRINTER

        6.  SHOW PARAMETERS PRINTER

        7.  SHOW STATUS PRINTER

   The following sub-sections describe each  of  the  above  commands  to
   assist you in the control of line printers.



   2.5.1  Setting the Line Printer   2.5.1  Setting the Line Printer

   Normally, a defined number of line printers are started  automatically
   at system start-up by the SYSTEM.CMD file.  However, you might have to
   start a line printer, for example, when a user requests a printer  for
   his  own use.  Before you start a line printer, you can optionally set
   the parameters for the line printer with the SET PRINTER command.  The
   parameters for this command are:

        1.  FORMS-TYPE

        2.  LIMIT-EXCEEDED-ACTION

        3.  PAGE-LIMITS

        4.  PRIORITY-LIMITS

   These parameters are set  by  your  System  Manager  at  GALGEN  time.
   (Refer  to  the  TOPS-20  Software  Installation  Guide for the GALGEN
   procedures.) When you change  the  FORMS-TYPE,  LIMIT-EXCEEDED-ACTION,
   PAGE-LIMITS,  or  PRIORITY-LIMITS for a printer, the change remains in
   effect until you make another change.

   The FORMS-TYPE parameter specifies the name of the form or the name of
   the  form  type.   The name of the form should be the same as the form
   name in the LPFORM.INI file.  Refer to Part V Section  2.6.1  for  the
   description and use of the LPFORM.INI file.








                                    2-14
                            BATCH SOFTWARE TASKS                            BATCH SOFTWARE TASKS


   The LIMIT-EXCEEDED-ACTION parameter specifies  what  action,  if  any,
   should  be  taken if a printer job exceeds the output limit set by the
   user.  You can set this parameter to:

        1.  RESPOND with either IGNORE (to continue  the  print  job)  or
            ABORT (to cancel the print job)

        2.  Always ABORT the print job when the limit has been exceeded

        3.  Always IGNORE the output page limit of the line printer

   The PAGE-LIMITS parameter specifies the  minimum-to-maximum  range  of
   pages allowed to print per job on the line printer.

   The  PRIORITY-LIMITS  parameter  specifies  the  range  of  print  job
   priorities  that  the printer accepts.  For example, if a print job is
   queued with a priority of 19 and there are no line printers that  have
   been  set  to accept a priority of 19, the print request is queued but
   not printed.  The request remains in the  print  queue  until  a  line
   printer has been set to accept that priority.  However, you can change
   the priority number of a print request with the MODIFY  PRINT-REQUESTS
   command (Refer to Part V Section 2.7.6.)



                            ----- Example -----

   Set line printer 0 to print requests with a priority from 1 to 21  and
   a page limit from 1 to 1000.

        OPR>SET PRINTER 0 PRIORITY LIMIT 21<RET>
        OPR>
        12:01:21        Printer 0  --Set Accepted--
        OPR>SET PRINTER 0 PAGE-LIMITS 1000<RET>
        12:01:40        Printer 0  --Set Accepted--
        OPR>



   2.5.2  Starting the Line Printer   2.5.2  Starting the Line Printer

   Once you have set the parameters for one or more  line  printers,  you
   can then start the printer(s) so that print requests can be processed.
   If you do not set any parameters for the printer, the  parameters  are
   the parameters set by your System Manager at GALGEN time.

   You can start one or more line printers at a time.

   To stop the scheduling of jobs on a line  printer,  use  the  SHUTDOWN
   command.


                            ----- Example -----

   Issue the START PRINTER command to start line printer 0.

        OPR>START PRINTER 0<RET>
        OPR>
        10:11:15        Printer 0  --Startup Scheduled--
        OPR>
        10:11:17        Printer 0  --Started--
        OPR>




                                    2-15
                            BATCH SOFTWARE TASKS                            BATCH SOFTWARE TASKS


   2.5.3  Stopping the Line Printer Temporarily   2.5.3  Stopping the Line Printer Temporarily

   If you need to stop one or more line printers, use  the  STOP  PRINTER
   command.   The STOP PRINTER command temporarily stops the line printer
   from printing its current job.  You must give the CONTINUE command  to
   allow the line printer to continue printing the job.

   The STOP command has three optional arguments.  They are:

        1.  AFTER CURRENT-REQUEST

        2.  AFTER EVERY-REQUEST

        3.  IMMEDIATELY

   The IMMEDIATELY argument is the default for the STOP  command.   Refer
   to  the  TOPS-20  Operator's  Command  Language Reference Manual for a
   complete description of these commands.


                            ----- Example -----

   Stop the current job on line printer 2 temporarily in order to  change
   the printer's ribbon.

        OPR>STOP PRINTER 2<RET>
        OPR>
        18:24:09        Printer 2  --Stopped--
        OPR>



   2.5.4  Continuing the Line Printer   2.5.4  Continuing the Line Printer

   You can give the CONTINUE command to  continue  the  processing  of  a
   print  request  on  one  or  more  line printers that were temporarily
   stopped with the STOP command.


                            ----- Example -----

   After stopping the  line  printer  to  change  the  printer's  ribbon,
   continue the processing of the current print job.

        OPR>CONTINUE PRINTER 2<RET>
        OPR>
        18:30:41        Printer 2  --Continued--
        OPR>



   2.5.5  Shutting Down the Line Printer   2.5.5  Shutting Down the Line Printer

   If at any time you need to shut down the scheduling of print  requests
   for  one  or more line printers, use the SHUTDOWN command.  If a print
   request is currently printing on the  line  printer,  the  request  is
   completed before the line printer is shut down.









                                    2-16
                            BATCH SOFTWARE TASKS                            BATCH SOFTWARE TASKS


   To start the scheduling of jobs on the line  printer,  use  the  START
   command.

                            ----- Example -----

   Shutdown line printer 2 while a request is still printing on it.

        OPR>SHUTDOWN PRINTER 2<RET>
        OPR>
        19:21:03        Printer 2  --Shutdown at EOJ Scheduled--
        OPR>

   When the request on the line printer has been completed, the following
   message appears:

        OPR>
        19:22:54        Printer 2  --Shutdown--
        OPR>



   2.5.6  Displaying Line Printer Parameters   2.5.6  Displaying Line Printer Parameters

   At any time you can display the current line  printer  parameters  for
   one  or  more  line printers with the SHOW PARAMETERS PRINTER command.
   If you do not specify a single line printer unit number or a range  of
   unit  numbers,  the  SHOW  command  displays  information for all line
   printers on the system.

   The output from the SHOW PARAMETERS PRINTER command displays for  each
   printer:

        1.  The printer unit number

        2.  The page limits set for the line printer

        3.  The type of forms set for the line printer

        4.  The priority range set for the line printer

        5.  The limit-exceeded-action set for the line printer

        6.  The character device type set for the line printer (uppercase
            or lowercase)

                            ----- Example -----

   Give the SHOW PARAMETERS PRINTER command to display the parameters  of
   all line printers on the system.

        OPR>SHOW PARAMETERS PRINTER <RET>
        OPR>
        13:45:20                -- System Device Parameters --

        Printer Parameters:
          Unit     Node     Page Limits    Form   Prio   Lim-Ex  Dev-Chars
          ----  ----------  -----------   ------  -----  ------  ---------
             0      KL2102      1:500     NORMAL  1:63   Ask       Lower
             1      KL2102      1:500     NORMAL  1:63   Ask

        OPR>





                                    2-17
                            BATCH SOFTWARE TASKS                            BATCH SOFTWARE TASKS


   2.5.7  Displaying Line Printer Status   2.5.7  Displaying Line Printer Status

   At any time you can display the status of one or  more  line  printers
   with  the  SHOW  STATUS PRINTER command.  If you do not specify a line
   printer unit number or a range of unit numbers, the  command  displays
   information for all line printers on the system.

   The output from the SHOW STATUS PRINTER command displays:

        1.  The printer unit number

        2.  The current status of the printer

        3.  The name of the job currently active on the printer

        4.  The request-id number for the job

        5.  The name of the user who made the print request

   If the line printer is not active, the  word  "Idle"  appears  in  the
   Status  column with no job name, request-id, or user name.  If none of
   the line printers are active, only the stream number and status appear
   in the display.

   If a printer is active, the display also shows the time that the print
   request started to print and the number of pages printed thus far.  If
   you do not need this information with the display of the  SHOW  STATUS
   PRINTER  command, specify the /SHORT switch before you press RETURN to
   confirm the command.

                            ----- Example -----

   Give the SHOW STATUS PRINTER command to display the current status  of
   all line printers on the system.

        OPR>SHOW STATUS PRINTER <RET>
        OPR>
         8:30:47                -- System Device Status --

        Printer Status:
          Unit     Node         Status       Jobname   Req#             User
          ----  ----------  ---------------  -------  ------  ------------------------
             0       DN200  Idle
             0      KL2102  Active           STRDPY      129  LOMARTIRE
                Started at  8:29:57, printed 0 of 54 pages
             1      KL2102  Offline          CISRV        88  CDUNN
                Started at  3:20:47

        OPR>



   2.6  CONTROLLING FORMS ON THE LINE PRINTER   2.6  CONTROLLING FORMS ON THE LINE PRINTER

   The following are the OPR commands that allow you to control the forms
   on the line printer:

        1.  ALIGN PRINTER

        2.  BACKSPACE PRINTER

        3.  FORWARDSPACE PRINTER

        4.  SUPPRESS PRINTER


                                    2-18
                            BATCH SOFTWARE TASKS                            BATCH SOFTWARE TASKS


   You can give the above commands  either  while  the  line  printer  is
   printing  the  job or after you have pressed the ONLINE/OFFLINE key on
   the line printer.  When you put the line printer off-line,  OPR  sends
   the following message to the CTY.

        hh:mm:ss        Printer n  --Offline--

   When you put the  line  printer  on-line,  the  line  printer  resumes
   printing.

   In addition, the SET PRINTER n FORMS-TYPE name command permits you  to
   change  the type of forms on the line printer.  If you specify a forms
   type that does not have an entry in the  LPFORM.INI  file,  the  forms
   characteristics default to:

        1.  /BANNER:2

        2.  /HEADER:2

        3.  /LINES:60

        4.  /VFU:NORMAL

        5.  /WIDTH:132

        6.  /TRAILER:2

   Refer to Part V Section  2.6.1  for  a  complete  description  of  the
   SYS:LPFORM.INI file and its available switches.

   To allow yourself or a user to change the forms on a line printer,  be
   sure you have OPERATOR-IN-ATTENDANCE set.  (See Part V Section 4.1.)

   Note that the LP05 and  LP14  line  printers  have  a  direct  access,
   vertical  format unit.  (Refer to MAKVFU.DOC and MAKVFU.HLP.) However,
   the LP10 line printer uses a standard sprocketed carriage tape for the
   vertical format unit.

   When the first job request starts  to  print,  the  following  message
   appears,  indicating  the  forms  type being loaded into the printer's
   vertical format unit (VFU):

        hh:mm:ss        Print n  --Loading VFU with 'forms-type'--

   This is strictly an informational message  that  appears  because  the
   system reads the LPFORM.INI file when you start a line printer.

   The following sub-sections describe how to use the LPFORM.INI file and
   how to use each of the commands listed above.

















                                    2-19
                            BATCH SOFTWARE TASKS                            BATCH SOFTWARE TASKS


   2.6.1  The LPFORM.INI File   2.6.1  The LPFORM.INI File

   The LPFORM.INI file allows you to set various  printer  parameters  on
   the basis of form names:

   Each line in the LPFORM.INI file is written in the following format:

        formname:locator/switch1/switch2/switch3...

   where:

        formname            is a 1- to 6-character form name.  The system
                            manager  should  specify  form names that are
                            descriptive of the types  of  forms  used  at
                            your installation.

        :locator            is an optional locator field containing:

                            ALL       all devices (the default).

                            LPTnn     a specific line-printer,  where  nn
                                      is the printer number.

                            LOC       all local line printers.

                            REM       line printers at remote stations.

        /switch1...         are one or more switches available to you  to
                            describe the manner in which the forms are to
                            be  used.   Refer  to   Table   2-1   for   a
                            description of the available switches.


     Table 2-1:  LPFORM.INI Switches     Table 2-1:  LPFORM.INI Switches


            Switch                          Meaning            Switch                          Meaning


        /ALIGN:filespec     The filespec specifies the  file  with  the
                            extension  .ALP, which is used to align the
                            forms on the line printer.  If no  filespec
                            is  specified,  the  system  uses  the file
                            whose filespec is the  name  of  the  form.
                            For   example,   /ALIGN   for  NARROW  uses
                            SYS:NARROW.ALP by default.   The  alignment
                            occurs before the requested file is printed
                            and is not repeated  if  multiple  requests
                            for  the same forms occur for the same line
                            printer.

        /BANNER:nn          The value of nn  specifies  the  number  of
                            banner  pages  (job  header pages) desired.
                            The default is 2 pages and may  be  changed
                            with GALGEN.

        /CHAIN:xxx          The  xxx  represents  a 1-  to  6-character
           or               ASCII  string that  specifies  the chain or
        /DRUM:xxx           drum to be used on the printer.  The system
                            types  the switch name and argument on your
                            terminal when the forms are scheduled.   If
                            you  specify  both  the  /CHAIN  and  /DRUM
                            switches  for  the  same   entry   in   the
                            LPFORM.INI  file,  OPR prints only the last
                            one it encounters.

                                    2-20
                            BATCH SOFTWARE TASKS                            BATCH SOFTWARE TASKS


     Table 2-1:  LPFORM.INI Switches (Cont.)     Table 2-1:  LPFORM.INI Switches (Cont.)


            Switch                          Meaning            Switch                          Meaning


        /HEADER:nn          The value of nn  specifies  the  number  of
                            file  header pages desired.  The default is
                            2 pages and may be changed with GALGEN.

        /LINES:nn           The value of nn  specifies  the  number  of
                            lines  that  can  be  printed on each page.
                            The default is 60.  This switch  should  be
                            included  whenever a form type is longer or
                            shorter than the normal 60 lines.

        /NOTE:text          The  text  represents  text  of  up  to  50
                            characters   that  is  typed  on  your  OPR
                            terminal at the time the forms and/or print
                            request are scheduled.

        /RAM:name           The name represents  a  1-  to  6-character
                            ASCII string that specifies the name of the
                            control RAM to be used.   The  /RAM  switch
                            loads   a   special   program  that  allows
                            character translation on the line  printer.
                            If  the  line  printer has a program loaded
                            RAM (DARAM), the system automatically loads
                            it from the file SYS:name.RAM.

                            For example, if your line  printer  doesn't
                            print  left  and  right angle brackets, you
                            could specify a RAM file that would convert
                            angle  brackets  to  square brackets on the
                            line-printer output.

        /RIBBON:name        The name represents  a  1-  to  6-character
                            ASCII  string  that  specifies  the type of
                            ribbon to be used on the line printer.  The
                            system  types  the switch name and argument
                            on your terminal at the time that the forms
                            are scheduled.

        /TAPE:name          The name  represents  a  1- to  6-character
            or              ASCII  string that specifies  the  name  of
        /VFU:name           the vertical forms control tape to be used.
                            If  the  line  printer has a program loaded
                            VFU (DAVFU), the system automatically loads
                            it from the file SYS:name.VFU.  If the line
                            printer does not have a DAVFU,  the  system
                            notifies  you of the need to change the VFU
                            tape.  The default VFU name is NORMAL.

        /TRAILER:nn         The value of nn specifies the number of job
                            trailer  pages  desired.   The default is 2
                            pages and may be changed with GALGEN.

        /WIDTH:nn           The value of nn  specifies  the  number  of
                            characters  per  line  for  the  form.  The
                            default width is 132 if the  /WIDTH  switch
                            is not specified.  The /WIDTH switch should
                            be included whenever  a  form  is  narrower
                            than the standard 14-inch wide paper.



                                    2-21
                            BATCH SOFTWARE TASKS                            BATCH SOFTWARE TASKS


   The form name in LPFORM.INI need not be the name of a  physical  form;
   however,  it  ought to specify the type of form (such as NORMAL forms,
   NARROW forms, and so forth).  When a print  request  is  made,  LPTSPL
   compares  the form name associated with the request with the form name
   of the form currently mounted on the line printer.  If the first  four
   characters  of  the name are not the same, then LPTSPL requests you to
   change the forms on the line printer.  If the first four characters of
   the name are the same, then LPTSPL checks the switches associated with
   the requested form name and uses those values when printing the job.

   If the forms type specified by the user is not the same  as  the  form
   that  is  currently  in  the  printer,  the system uses the first four
   characters to check against the LPFORM.INI file.  (This four-character
   uniqueness  can  be  changed  by  GALGEN; the default is four.) If the
   forms type matches one in the file, a  request  is  made  for  you  to
   supply  the  appropriate  form.   If  the  forms  type  is  not in the
   LPFORM.INI file, you receive an error.

   For example, note the following LPFORM.INI file:

        NARROW/HEADER:1/BANNER:1/TRAILER:1
        NARR01/HEADER:0/BANNER:1/TRAILER:1
        NARR02/HEADER:0/BANNER:0/TRAILER:0/NOTE:SPECIAL

   Now, suppose that NARR01 forms  are  currently  mounted  on  the  line
   printer  and  a user makes a print request that requires NARR02 forms.
   The system compares the first four characters of  the  requested  form
   name  (NARR02) with the first four characters of the form name for the
   form that is currently mounted on the line printer (NARR01).   Because
   they  are the same, the system takes the switch values associated with
   NARR01 and applies them to the user's print request.   Therefore,  the
   LPFORM.INI  file  should  contain unique form names for each different
   type or form.  This ensures that the correct forms are mounted when  a
   user submits a print request.

   Each line in LPFORM.INI  can  also  contain  a  locator  field,  which
   specifies  the  parameters  a  form  should have when it is mounted on
   specific line printers.  For example:

        NORMAL:LPT001/HEADER:1/BANNER:1/TRAILER:0
        NORMAL:ALL/HEADER:2/BANNER:2/TRAILER:2

   If form NORMAL is printed on line printer LPT001, it takes  the  forms
   parameters  given  in  the  first  entry  of the LPFORM.INI file shown
   above.  If form NORMAL is printed on any other line printer,  then  it
   takes the forms parameters given in the second entry of the file.




















                                    2-22
                            BATCH SOFTWARE TASKS                            BATCH SOFTWARE TASKS


   Note that entries in LPFORM.INI having identical form names but having
   different  locators  must  be  listed  from  specific  locator to more
   general locator.  In the example above, the  entry  specifying  device
   LPT001 for form NORMAL appears before the entry specifying locator ALL
   for the same form name.  This order is important because  LPTSPL  uses
   the  first  entry  in  LPFORM.INI that can be applied to the device on
   which the request is printed.

   Also, note that ALL is the default locator value.  For example,

        NORMAL/switches

   is equivalent to:

        NORMAL:ALL/switches



   2.6.2  Aligning Forms on the Line Printer   2.6.2  Aligning Forms on the Line Printer

   At various times during your daily system operation, you might have to
   align  special  forms for a particular line printer job.  For example,
   you might have to load payroll checks on the  line  printer  for  your
   scheduled payroll process.  The ALIGN command allows you to adjust the
   forms on the line printer as many times as necessary to print the  job
   correctly.

   When you give the ALIGN PRINTER command, the system uses an  alignment
   file that is specified as "formsname.ALP" for the print request, where
   formsname is the name of the form that was  specified  in  the  user's
   print request.  The "formsname.ALP" file contains a pattern applicable
   to the special forms being mounted.  If you do not  want  the  default
   .ALP  file  used,  you can specify another alignment file in the ALIGN
   PRINTER command.  For example, the  file  for  NORMAL  forms  at  your
   installation could be:

        SYS:<SPOOL>NORMAL-ALIGN.ALP

   In addition, the ALIGN PRINTER command  has  three  optional  switches
   that you can specify to:

        1.  Change the number of seconds between the repeat  printing  of
            the .ALP file (/PAUSE:  switch)

        2.  Change the number  of  printing  repeats  of  the  .ALP  file
            (/REPEAT-COUNT:  switch)

        3.  Resume normal printing and stop aligning special forms (/STOP
            switch)

   When you specify either  of  these  switches,  you  are  changing  the
   default  for  the  current  job  on the printer.  When you specify the
   /STOP switch, the printer stops printing the contents of the .ALP file
   and resumes printing the print request.












                                    2-23
                            BATCH SOFTWARE TASKS                            BATCH SOFTWARE TASKS


                            ----- Examples -----

        1.  Give the ALIGN PRINTER command to align  forms  for  a  print
            request  for  payroll  checks.   At  your  installation,  the
            /PAUSE:  switch was set for 10 seconds and the /REPEAT-COUNT:
            switch was set for 25 repeats.  Change the /REPEAT-COUNT:  to
            15.

            OPR>ALIGN PRINTER 0 /REPEAT-COUNT:15<RET>
            OPR>
            12:46:02        Printer 0  --Alignment--
                            Job PAYROL Req #32 for ACCOUNTING
            OPR>

        2.  Give the ALIGN PRINTER command again after you have correctly
            aligned the form for the checks.  Specify the /STOP switch to
            resume the normal printing of the payroll checks.

            OPR>ALIGN PRINTER 0 /STOP<RET>
            OPR>
            12:52:43        Printer 0  --Alignment Stopped--
                            Job PAYROL Req #32 for ACCOUNTING
            OPR>




   2.6.3  Backspacing Forms on the Line Printer   2.6.3  Backspacing Forms on the Line Printer

   At various times, you might have to backspace a particular  file  that
   is  being  printed  on the line printer, such as when the forms become
   jammed in the printing mechanism.  The BACKSPACE command allows you to
   backspace  the  print  file  so  that  the pages of the file that were
   jammed or incorrectly printed can be reprinted.

   With the BACKSPACE PRINTER  command,  you  must  specify  one  of  the
   following switches:
|  
|       1.  /COPIES:  - specifies the  number  of  copies  of  the  print
|           request to backspace.

        2.  /FILE - specifies to backspace 1 file so that it  is  printed
            again.

        3.  /PAGES:  - specifies the number of pages to be backspaced and
            printed again.

   When you give a BACKSPACE PRINTER command, the system first clears the
   printer  buffer  by  printing  its  contents,  and  then executes your
   command.  The number of pages that are printed to clear the buffer are
   included with the number of pages you specify in the BACKSPACE PRINTER
   command.  Therefore, when you specify the /PAGES:  switch, you  should
   add  two  or  three  pages  to  the  total number given as the /PAGES:
   value.












                                    2-24
                            BATCH SOFTWARE TASKS                            BATCH SOFTWARE TASKS


                            ----- Example -----

   Printer 1 has just had a paper jam which has put the printer off-line.
   The following messages appear at your console:

        OPR>
        9:38:18        Printer 1  --Offline--

        9:39:39  <12>  Printer 1  --VFU error--
                        Re-align forms and put on-line
                        Type 'Respond <number> CONTINUE' when ready
        OPR>
   Clear the printer of the jammed pages and re-align the forms.   Before
   you  put  the  printer  on-line, give the BACKSPACE PRINTER command to
   repeat the number of pages that were jammed and add a couple of  pages
   for  the  printer  buffer (the following example describes backspacing
   printer 1 by 25 pages).  Then RESPOND to message <12>.

        OPR>BACKSPACE PRINTER 1 /PAGES:25<RET>
        OPR>
        9:45:06        Printer 1  --Backspaced 25 Pages--

        OPR>RESPOND 12 CONTINUE      
        OPR>

   At this point, the line printer prints the remaining contents  of  the
   printer buffer and then backspaces 25 pages to reprint what was jammed
   or incorrectly printed.



   2.6.4  Forwardspacing Forms on the Line Printer   2.6.4  Forwardspacing Forms on the Line Printer

   At various times, you might have to  forwardspace  a  particular  file
   that  is  being  printed  on  the  line  printer,  such as when a user
   requests only a portion of some file to be printed.  The  FORWARDSPACE
   command allows you to forwardspace the file so that you can save paper
   and print only what is needed.

   With the FORWARDSPACE PRINTER command, you must  specify  one  of  the
   following switches:

        1.  /COPIES:  - specifies the  number  of  copies  of  the  print
|           request to forwardspace.

        2.  /FILE - specifies to forwardspace 1 file in the  print  queue
            so that the file is not printed.

        3.  /PAGES:  - specifies the number of pages of the print request
            that are not printed.

   When you give a FORWARDSPACE PRINTER command, the system first  clears
   the  printer  buffer  by  printing its contents and then executes your
   command.  The number of pages that are printed to clear the buffer  is
   included  with  the  number  of  pages you specify in the FORWARDSPACE
   PRINTER command.  Therefore, when you specify the /PAGES:  SWITCH, YOU
|  SHOULD  SUBTRACT  TWO  OR THREE PAGES TO THE TOTAL NUMBER GIVEN AS THE
   /PAGES:  value.








                                    2-25
                            BATCH SOFTWARE TASKS                            BATCH SOFTWARE TASKS


                            ----- Example -----

   A user issued  the  command  @PRINT  A.TXT,B.TXT,C.TXT,D.TXT  and  has
   requested  you  to forwardspace line printer 2, so that the B.TXT file
   is printed before the A.TXT file is printed.  After the print job  has
   printed  the  header  and  banner pages, you put the printer off-line,
   give the FORWARDSPACE PRINTER command for 1 file,  and  then  put  the
   printer on-line.

        OPR>
        9:38:28        Printer 2  --Offline--

        OPR>FORWARDSPACE PRINTER 2 /FILE<RET>
        OPR>
        9:45:26        Printer 2  --Forwardspaced 1 File--

        OPR>

   At this point, the line printer prints the remaining contents  of  the
   printer buffer and then forwardspaces 1 file of the print job.



   2.6.5  Suppressing Carriage Control on the Line Printer   2.6.5  Suppressing Carriage Control on the Line Printer

   At various times, you might have to suppress the carriage  control  on
   the  line  printer for a particular job, such as when a user's program
   causes a print loop that makes the forms  in  the  line  printer  pass
   through  with  one  line  written  on each form.  The SUPPRESS command
   allows you to suppress the carriage control.

   The SUPPRESS PRINTER command  suppresses  all  blank  lines  and  form
   feeds.   For  example, if you had a 25-page file with one line of text
   per page, the SUPPRESS PRINTER command would cause all  the  lines  of
   text to print on one page.

   With the  SUPPRESS  PRINTER  command,  you  can  specify  one  of  the
   following switches.

        1.  /FILE - suppresses blank lines and form feeds for the current
            file printing.

        2.  /JOB - suppresses blank lines and form feeds for  the  entire
            job printing.

        3.  /STOP - stops the suppression of printing and resumes  normal
            printing with blank lines and form feeds.

   The /JOB switch is the default if you do not specify any of the  above
   switches.
















                                    2-26
                            BATCH SOFTWARE TASKS                            BATCH SOFTWARE TASKS


                            ----- Example -----

   A user's program has caused a print loop.  Give the  SUPPRESS  PRINTER
   command to stop the form feeds, thus saving paper.

        OPR>SUPPRESS PRINTER 1<RET>
        OPR>
        10:43:47        Printer 1  --Carriage control suppressed--
                        Job TEST01 Req #55 for PTAYLOR
        OPR>



   2.7  CONTROLLING LINE PRINTER JOBS   2.7  CONTROLLING LINE PRINTER JOBS

   The following OPR commands allow you to control line printer jobs that
   a  user  queues  either with the processing of a batch job or with the
   TOPS-20 PRINT command:

        1.  SHOW QUEUES PRINTER-JOBS

        2.  HOLD PRINTER-JOBS

        3.  RELEASE PRINTER-JOBS

        4.  ABORT (current job on) PRINTER

        5.  REQUEUE (current job on) PRINTER

        6.  MODIFY PRINTER-REQUEST

        7.  CANCEL PRINTER-REQUEST

        8.  NEXT (job on) PRINTER

   The following sub-sections describe how to use each of these  commands
   to control line printer jobs.



   2.7.1  Examining Printer Jobs in the Queues   2.7.1  Examining Printer Jobs in the Queues

   Whenever a user issues a request for the line printer, the request  is
   placed  in  a  queue  where  it  waits for selection by the system for
   printing.  To examine the queues for print jobs, give the OPR  command
   SHOW QUEUES PRINTER-JOBS.

   The output of the SHOW QUEUES PRINTER-JOBS command displays  for  each
   job:

        1.  The name of the print job

        2.  The request-id number of the print job

        3.  The page limit of the print job

        4.  The name of the user who requested the print job

   These four columns of the display appear  whether  the  print  job  is
   currently printing (active) or is not printing (inactive).

   In addition to the above, if the job is active on  the  line  printer,
   the  display  also shows the line printer unit number on which the job
   is printing, the time that the print job started, and the total number
   of pages printed.

                                    2-27
                            BATCH SOFTWARE TASKS                            BATCH SOFTWARE TASKS


   The SHOW QUEUES PRINTER-JOBS command has four optional switches:

        1.  /NODE:name displays the printer queue of a remote system.

        2.  /ALL adds to the display the switches that the user specified
            with  the  PRINT command.  If no switches were specified, the
            /ALL switch displays the default switches.  In addition,  the
            /ALL  switch  displays  any  switches that you specified, for
            example, /HOLD.

        3.  /SHORT displays only the job name, the  request  number,  the
            scheduled run time, and the user name.

        4.  /USER:name displays only the printer job of a specified user.



                              ----- Hint -----

   The asterisk (*) before the job name column (see  examples)  indicates
   that the job is currently printing.

                            ----- Examples -----

        1.  Give the SHOW  QUEUES  PRINTER-JOBS  command  with  the  /ALL
            switch  to  display  the  printer  jobs in the queue with all
            their switches.

            OPR>SHOW QUEUES PRINTER-JOBS /ALL <RET>
            OPR>
            15:06:54                -- System Queues Listing --

            Printer Queue:
            Job Name   Req#    Limit             User
            --------  -----   -------  -------------------------
            * DSR-BE     42      834   DBONIN                  On Unit:0
                      /Seq:852
              Started at 14:48:46, printed 338 of 834 pages
              MS-OUT      47        3  TUCKER                 /Unit:1  /Seq:855
            There are 2 jobs in the queue (1 in progress)

            OPR>

        2.  Give the SHOW QUEUES PRINTER-JOBS  command  with  the  /SHORT
            switch.

            OPR>SHOW QUEUES PRINTER-JOBS /SHORT<RET>
            OPR>
            10:49:07            -- System Queues Listing --

            Printer Queue:
            * DAILY     11     24  OPERATOR
            * TRAP79    12    161  BELANGER
              MF20      13     23  SROBINSON
              WEEKLY    14     17  OPERATOR
              SPEAR     15     10  OPERATOR

            OPR>








                                    2-28
                            BATCH SOFTWARE TASKS                            BATCH SOFTWARE TASKS


   2.7.2  Holding Printer Jobs   2.7.2  Holding Printer Jobs

   Whenever you need to prevent print requests from processing, give  the
   HOLD  PRINTER-JOBS command.  When you give this command, current print
   requests in the queue are held.  Any requests  for  the  line  printer
   queued  after  the  HOLD  command has been issued are not held and are
   processed as soon as a  line  printer  becomes  available.   You  must
   specify one of the following with this command:

        1.  The request-id number, which holds a single printer job

        2.  The user name, which holds all printer jobs  queued  by  that
            user, or

        3.  An asterisk (*), which holds all printer jobs queued  by  all
            users.

                             ----- Hints -----

   You cannot HOLD a printer job that  is  currently  active  on  a  line
   printer.

                            ----- Example -----

   Give the HOLD PRINTER-JOBS command to hold all  printer  requests  for
   user SMITH.

        OPR>HOLD PRINTER-JOBS SMITH <RET>
        OPR>
         8:37:26          -- 2 Jobs Held --
        OPR>



   2.7.3  Releasing Printer Jobs   2.7.3  Releasing Printer Jobs

   You can give the RELEASE command to allow the printing of a  job  that
   has  been  previously  held with the HOLD command or requeued with the
   REQUEUE command.  You can specify a single request-id number, the user
   name  for  all  jobs  by that user, or an asterisk (*) for all printer
   jobs in the system.  The RELEASE command reschedules  the  job(s)  for
   processing.

                              ----- Hint -----

   You must have one or more line printers started or in the  idle  state
   to get a printer job processed.

                            ----- Example -----

   Give the RELEASE command to reschedule  all  printer  jobs  that  were
   previously held.


        OPR>RELEASE PRINTER-JOBS * <RET>
        OPR>
         8:37:52          -- 2 Jobs Released --
        OPR>EX








                                    2-29
                            BATCH SOFTWARE TASKS                            BATCH SOFTWARE TASKS


   2.7.4  Canceling Printer Jobs   2.7.4  Canceling Printer Jobs

   At various times, you might have to cancel a printer job while  it  is
   printing.  You can give the ABORT command with the printer unit number
   and one or more of the following switches:

        1.  /REQUEST-ID:

        2.  /PURGE

        3.  /REASON:

   The /REQUEST-ID:  switch uniquely identifies the job to be canceled.

   The /PURGE switch flushes the entire job from the system  when  it  is
   canceled.   There are no header, banner, or trailer pages printed when
   the print request is purged.

   The /REASON:  switch allows you to enter one or more lines of text  to
   explain why the printer job was canceled.

                            ----- Example -----

   Give the ABORT command to cancel a printer  job  because  a  user  has
   requested that you do so.

        OPR>ABORT PRINTER 1 /REASON:USER REQUEST<RET>
        OPR>
        11:32:08        PRINTER 1  --ABORTING--
                        JOB TEST01 Req #35 for JONES
                        REASON:USER REQUEST
        OPR>
        11:32:12        Printer 1  --End--
                        Job TEST01 Req #35 for JONES
        OPR>



   2.7.5  Requeuing Printer Jobs   2.7.5  Requeuing Printer Jobs

   At various times, you might want to cancel  a  printer  job  and  then
   reschedule it to be printed at a later time.  You can give the REQUEUE
   command to HOLD the printer job in its entirety and ABORT its  current
   printing.  This command can only be used when the job is active.

   For example, you might want to REQUEUE a  printer  job  that  requires
   multiple  boxes  of forms so that it prints at a later time when fewer
   users are requesting printer jobs.  Thus, you REQUEUE the job  in  its
   entirety for printing when the time becomes available.

   In order to have the job start again after it has been  requeued,  you
   must give the OPR command RELEASE.

   You can specify the /REASON switch to explain why  the  job  is  being
   requeued.











                                    2-30
                            BATCH SOFTWARE TASKS                            BATCH SOFTWARE TASKS


                            ----- Example -----

   Give the REQUEUE command to hold a  printer  job  that  requires  four
   hours to print.

        OPR>REQUEUE PRINTER 2 /REASON:<RET>
        Enter text and terminate with ^Z
        JOB REQUIRES FOUR HOURS TO PRINT.<RET>
        JOB WILL BE RELEASED FOR PRINT ON 2ND SHIFT. ^Z
                                                      !
                                                   <CTRL/Z>
        OPR>
        13:21:03        PRINTER 2  --REQUEUED--
                        JOB ARFORM Req #37 for AR.OFFICE
                        Reason:JOB REQUIRES FOUR HOURS TO PRINT.
                        JOB WILL BE RELEASED FOR PRINT ON 2ND SHIFT.^Z
        OPR>
        13:21:25        Printer 2  --End--
                        Job ARFORM Req #37 for AR.OFFICE
        OPR>



   2.7.6  Modifying Printer Requests   2.7.6  Modifying Printer Requests

   Whenever you need to change the priority of a printer job  request  in
   the queue, give the MODIFY PRINTER-REQUEST command.  You can specify a
   single printer request-id number, the user name for  all  requests  by
   that user, or an asterisk (*) for all printer requests in the queue.

   You must specify a new PRIORITY number from 1 to 63.  The  higher  the
   number, the greater the priority.



                            ----- Example -----

   Give the MODIFY command to change the priority of batch request 135 to
   have  a  priority  of  63.  This causes the request to be the next job
   processed.

        OPR>MODIFY PRINTER-REQUEST 135 PRIORITY 63<RET>
        OPR>
        8:51:21        --1 Job Modified--
        OPR>



   2.7.7  Deleting Printer Requests   2.7.7  Deleting Printer Requests

   Whenever you need to delete a printer request from the printer  queue,
   give  the  CANCEL  PRINTER-REQUEST  command.  You can specify a single
   request-id number, the user name for all jobs  by  that  user,  or  an
   asterisk (*) for all printer requests in the system.












                                    2-31
                            BATCH SOFTWARE TASKS                            BATCH SOFTWARE TASKS


   When you delete a print request that  is  currently  printing  on  the
   printer,  the  printer  stops  printing  the  data, prints the trailer
   pages, and starts printing the next job in the queue.



                            ----- Example -----

   Give the CANCEL command to delete print request 168 from the queue.

        OPR>CANCEL PRINTER-REQUEST 168<RET>
        OPR>
        10:25:11        --1 Job Canceled--
        OPR>



   2.7.8  Sending Line Printer Output to Tape   2.7.8  Sending Line Printer Output to Tape

   You can send output to a magnetic tape instead of a line printer  with
   the OPR command, START PRINTER nn /DEVICE:MTAn:.

   The advantages for doing this are:

        1.  When your line printers are down due to a  hardware  problem,
            you can spool the output to tape and then copy this output on
            another system where the printer(s) is not down.

        2.  When it is desired to microfiche the output, you can send the
            output to tape instead of printing it on the line printer.

        3.  When you want to transfer the output from one site to another
            or to another system, you can put it on tape.  Transferring a
            tape is easier than mailing or carrying the printed output.

   To perform this task, do the following:

        1.  Type to OPR:

            SET TAPE-DRIVE MTAn: UNAVAILABLE<RET>

            where n is the tape drive unit  number.   (Refer  to  Part  V
            Section   3.5.7   for   additional  information  on  the  SET
            TAPE-DRIVE command.)

        2.  Physically mount and bring on-line a tape on the  tape  drive
            that   has   been  made  UNAVAILABLE.   Make  sure  that  the
            write-ring has been inserted in the tape (WRITE-ENABLED).

        3.  Type to OPR:

            HOLD PRINTER-JOBS *<RET>

            to hold all printer job requests  in  the  printer(s)  queue.
            You  can  specify  the  user's  name  for  all  requests by a
            specific user or a  request-id  number  for  a  single  print
            request.









                                    2-32
                            BATCH SOFTWARE TASKS                            BATCH SOFTWARE TASKS


        4.  Type to OPR:

            START PRINTER nn /DEVICE:MTAn:<RET>

            where nn is a line  printer  unit  number  other  than  those
            already in use and n is the tape drive unit number.

        5.  If you are to print a type of form other than the type when a
            printer  is  started (the default) at your installation, type
            to OPR:.

            SET PRINTER nn FORMS-TYPE forms-name<RET>

            where forms-name is the desired type of form to be spooled to
            the tape.

        6.  Type to OPR:

            RELEASE PRINTER-JOBS *<RET>

            to release those printer job requests that were held.

        7.  When the printer requests have completed being output to  the
            tape, type to OPR:

            SHUTDOWN PRINTER nn<RET>

            to rewind and unload the tape automatically.

        8.  Type to OPR:

            SET TAPE-DRIVE MTAn: AVAILABLE<RET>

            to  make  the  tape  drive  available  for  user  tape  mount
            requests.































                                    2-33
                            BATCH SOFTWARE TASKS                            BATCH SOFTWARE TASKS


                            ----- Example -----

   Start printer 2 on MTA0:   to  output  all  printer  requests  in  the
   printer  queue  for  NARROW forms because there are no NARROW forms at
   your site.

        OPR>SET TAPE-DRIVE MTA0: UNAVAILABLE<RET>
        Enter Text and Terminate with ^Z
        ALL NARROW FORMS WILL BE PRINTED AT ANOTHER SITE.<RET>
        THERE ARE NO NARROW FORMS IN STOCK.^Z
                                            !
                                         <CTRL/Z>
        OPR>
        7:52:19          --Tape Drive Set Unavailable--
                        MTA0: SET UNAVAILABLE FOR ASSIGNMENT BY MOUNTR
        OPR>HOLD PRINTER-JOBS *<RET>
        7:53:45        --10 Jobs Held--
        OPR>START PRINTER 2 /DEVICE:MTA0:<RET>
        7:55:34        Printer 2  --Startup Scheduled--
        OPR>SET PRINTER 2 FORMS-TYPE NARROW<RET>
        7:56:15        Printer 2  --Set Accepted--
        OPR>RELEASE PRINTER-JOBS *<RET>
        7:57:23        --10 Jobs Released--
        OPR>
        7:57:37        Printer 2  --Started--
        OPR>
        7:57:38        Printer 2  --Begin--
                        Job DAILY Req #11 for PAYROLL
        OPR>
        7:58:29        Printer 2  --End--
                        Job DAILY Req #11 for PAYROLL
        7:59:01        Printer 2  --Begin--
                        Job WEEKLY Req #12 for PAYROLL
        OPR>
                        .
                        .
                        .
        OPR>
        8:09:10        Printer 2  --End--
                        Job YEARLY Req #20 for PAYROLL
        OPR>SHUTDOWN PRINTER 2<RET>
        OPR>
        8:10:12        Printer 2  --Shutdown--
        OPR>SET TAPE-DRIVE MTA0: AVAILABLE<RET>
        OPR>
        8:12:30          --Tape Drive Set Available--
                        MTA0: set available for assignment by MOUNTR
        OPR>


















                                    2-34
                            BATCH SOFTWARE TASKS                            BATCH SOFTWARE TASKS


   2.8  CONTROLLING THE CARD READER   2.8  CONTROLLING THE CARD READER

   To handle a user's request to have card decks read into the system for
   batch  processing,  you  must have started one (or possibly more) card
   reader(s)  at  your  installation.   Normally,  the  card  reader   is
   automatically  started  at system start-up when the SYSTEM.CMD file is
   executed.

   Your System Manager should establish the following when you have batch
   users submitting their jobs as card input:

        1.  Where the users place the card decks for submission

        2.  When you load the card decks into the card reader for reading

        3.  Where and when you place the card decks and output  from  the
            batch jobs to return to the users

   The following are the OPR commands that allow you to control the  card
   reader(s) at your installation:

        1.  START READER

        2.  STOP READER

        3.  CONTINUE READER

        4.  SHUTDOWN READER

        5.  SHOW STATUS READER

   The following sub-sections describe each  of  the  above  commands  to
   assist you in the control of card reader(s).



   2.8.1  Starting the Card Reader   2.8.1  Starting the Card Reader

   In order for you to load and read cards through the card  reader,  you
   must  start  the  card reader with the START READER command.  Starting
   the card reader allows batch card jobs to be scheduled for  processing
   in the TOPS-20 batch system.  You can specify one or more unit numbers
   with the START command.

   To stop the scheduling of card batch jobs on a card  reader,  use  the
   SHUTDOWN command.



                            ----- Example -----

   Issue the START READER command to start up card reader 0.

        OPR>START READER 0<RET>
        OPR>
        10:11:15        Reader 0  --Startup Scheduled--
        OPR>
        10:11:17        Reader 0  --Started--
        OPR>







                                    2-35
                            BATCH SOFTWARE TASKS                            BATCH SOFTWARE TASKS


   2.8.2  Stopping the Card Reader   2.8.2  Stopping the Card Reader

   If you need to stop one or more card readers, use  the  STOP  command.
   The  STOP  READER  command  temporarily  stops  the  card  reader from
   processing its current job.  You must give  the  CONTINUE  command  to
   allow the card reader to continue reading the input job.

   The STOP command has three optional arguments.  They are:

        1.  AFTER CURRENT-REQUEST

        2.  AFTER EVERY-REQUEST

        3.  IMMEDIATELY

   The IMMEDIATELY argument is the default for the STOP  command.   Refer
   to  the  TOPS-20  Operator's  Command  Language Reference Manual for a
   complete description of these commands.

                            ----- Example -----

   Stop the current job on card reader 0 temporarily to fix a card in the
   deck that was accidentally folded.

        OPR>STOP READER 0<RET>
        OPR>
        18:24:09        Reader 0  -- Shutdown at EOJ Scheduled --
        OPR>



   2.8.3  Continuing the Card Reader   2.8.3  Continuing the Card Reader

   You can give the CONTINUE command to continue one or more card readers
   that were temporarily stopped with the STOP command.

                            ----- Example -----

   After stopping the card reader to fix  a  folded  card,  continue  the
   current card reader job.

        OPR>CONTINUE READER 0<RET>
        OPR>
        18:30:41        Reader 0  --Continued--
        OPR>



   2.8.4  Shutting Down the Card Reader   2.8.4  Shutting Down the Card Reader

   If at any time you need to shutdown  the  scheduling  of  card  reader
   requests, use the SHUTDOWN command.  If a card reader job is currently
   being read from the card reader, the request is completed  before  the
   card reader is shutdown.

   To start the scheduling of jobs on the card reader, use  the  SHUTDOWN
   command.









                                    2-36
                            BATCH SOFTWARE TASKS                            BATCH SOFTWARE TASKS


                            ----- Example -----

   Shutdown card reader 0 while a request is still being  read  into  the
   system.

        OPR>SHUTDOWN READER 0<RET>
        OPR>
        19:21:01        Reader 0  --Shutdown at EOJ Scheduled--
        OPR>

   When the batch card job has completed being read into the system,  the
   following message appears:

        OPR>
        19:22:44        Reader 0  --Shutdown--
        OPR>



   2.8.5  Displaying Card Reader Status   2.8.5  Displaying Card Reader Status

   At any time you can display the status of one  or  more  card  readers
   with  the  SHOW STATUS READER command.  If you do not specify a number
   or a range of unit numbers, the default is all  card  readers  on  the
   system.

   The output from the SHOW STATUS READER command displays:

        1.  The card reader unit number

        2.  The current status of the card reader (either idle or active)

   If the card reader is active, there is currently a deck of cards being
   read  into  the  system.   The  system  does not recognize a job name,
   request-id, or user name until the last card of the deck has been read
   and the card reader is idle.  At this time, the card deck has become a
   job request with a request-id number and can  be  displayed  with  the
   SHOW QUEUES BATCH-JOBS command.

                            ----- Example -----

   Give the SHOW STATUS READER command to display the current  status  of
   the card reader at your installation.

        OPR>SHOW STATUS READER<RET>
        OPR>
        13:51:39            -- System Device Status --

        Reader Status:
          Unit      Status     
          ----  ---------------
             0  Active
        OPR>













                                    2-37
                            BATCH SOFTWARE TASKS                            BATCH SOFTWARE TASKS


   2.9  CONTROLLING CARD READER JOBS   2.9  CONTROLLING CARD READER JOBS

   Because a card reader job becomes a batch input queue request when the
   last  card  of the job (EOJ card) is read, you can only abort the card
   job while it is being read into the system.

   At various times you might have to cancel the  card  job  being  read,
   such  as  when a card jam occurs in the card reader.  You can give the
   ABORT READER command by specifying the reader unit  number  to  cancel
   the job before it becomes a job request in the batch input queue.

   In addition, you can specify a reason with the /REASON:  switch as  to
   why the job was canceled.

                            ----- Example -----

   Give the ABORT to cancel a card reader job because of a  massive  card
   reader jam.

        OPR>ABORT READER 0 /REASON:CARD JAM<RET>
        OPR>
        12:32:09        Reader 0  --Aborting--
                        REASON:CARD JAM
        OPR>










































                                    2-38
                            BATCH SOFTWARE TASKS                            BATCH SOFTWARE TASKS


   2.10  CONTROLLING OTHER OUTPUT DEVICES   2.10  CONTROLLING OTHER OUTPUT DEVICES

   The commands and descriptions in this section are applicable  only  if
   you have the hardware available at your installation site.

   Other output devices available to users are:

        1.  CARD-PUNCH

        2.  PAPER-TAPE-PUNCH

        3.  PLOTTER

   If your installation has one or more of these output devices, you must
   have the parameters set so that the user(s) requests can be processed.
   Normally,  if  your  installation  has   these   devices,   they   are
   automatically  started  at system start-up when the SYSTEM.CMD file is
   executed.

   When the output from the card punch, paper-tape punch, and plotter has
   been  completed,  you  must remove the output and distribute it.  Your
   System Manager should set up the distribution method which includes:

        1.  Where you must put the output so that users can pick it up

        2.  When you must distribute the output

   The following commands are the OPR commands that allow you to  control
   the card punch, paper-tape punch, and plotter at your installation:

        1.  SET output device

        2.  START output device

        3.  STOP output device

        4.  CONTINUE output device

        5.  SHUTDOWN output device

        6.  SHOW PARAMETERS output device

        7.  SHOW STATUS output device

   where output device can be CARD-PUNCH, PAPER-TAPE-PUNCH, or PLOTTER.

   The following sub-sections describe each  of  the  above  commands  to
   assist you in the control of these output devices.


















                                    2-39
                            BATCH SOFTWARE TASKS                            BATCH SOFTWARE TASKS


   2.10.1  Setting Output Devices   2.10.1  Setting Output Devices

   Normally, a defined number of output devices  are  started  at  system
   start-up  by the SYSTEM.CMD file.  However, you might have to start an
   output device (for example, the card punch) when  a  user  requests  a
   card  punch  job.   Before  you  start  an  output device (CARD-PUNCH,
   PAPER-TAPE-PUNCH, or PLOTTER), you can set  the  parameters  for  that
   device.  The parameters for these three devices are:

        1.  FORMS-TYPE name

        2.  LIMIT-EXCEEDED-ACTION word

        3.  OUTPUT-LIMIT number

        4.  PRIORITY-LIMITS range

   Where "name" is the name of the output device form.   The  default  is
   NORMAL  and  is  defined  in the SPFORM.INI file for each device type.
   (Refer to Part V Section 2.10.2.)

   The "word" of  the  LIMIT-EXCEEDED-ACTION  parameter  refers  to  what
   action,  if  any,  should  be  taken  if  the device that is currently
   processing the job request exceeds the output limit.  You can set this
   parameter to:

        1.  RESPOND with either IGNORE the limit for the  output  job  or
            ABORT to cancel the output job

        2.  Always ABORT the output job when the limit has been exceeded

        3.  Always IGNORE the set output limit of the device

   The "number" of the OUTPUT-LIMIT parameter refers to the following:

        1.  Number of cards for the CARD-PUNCH

        2.  Number of folds for the PAPER-TAPE-PUNCH

        3.  Number of units for the PLOTTER

   These parameters default to the following if they are not included  in
   the SYSTEM.CMD file at system start-up:

        1.  500 cards for the CARD-PUNCH

        2.  500 units for the PAPER-TAPE-PUNCH

        3.  500 units for the PLOTTER

   The "range" of the PRIORITY-LIMITS parameter refers to a range of  job
   priority  numbers  the  output  device  accepts.  The default priority
   range is 1:63.  For example,  if  an  output  job  is  queued  with  a
   priority of 19 and there are no devices for the request that have been
   set to accept a priority of 19, the request is not  output  until  you
   change the priority range for the device.  You can change the priority
   number of the job request with the MODIFY command  (refer  to  Part  V
   Section 2.11.6).

   When  you  set  an   output   device   to   change   the   FORMS-TYPE,
   LIMIT-EXCEEDED-ACTION,  OUTPUT-LIMIT,  or  PRIORITY-LIMITS, the change
   remains in effect until you make another change.




                                    2-40
                            BATCH SOFTWARE TASKS                            BATCH SOFTWARE TASKS


                            ----- Examples -----

        1.  Set the priority limits for the  paper-tape  punch  to  be  a
            range of 20:63.

            OPR>SET PAPER-TAPE-PUNCH 0 PRIORITY-LIMITS 20:63<RET>
            OPR>
            11:34:09        Paper-tape-punch  --Set Accepted--
            OPR>

        2.  Set the limit exceeded action for the job  currently  on  the
            card punch to be ignored.

            OPR>SET CARD-PUNCH 0 LIMIT-EXCEEDED-ACTION IGNORE<RET>
            OPR>
            12:23:18        Card-punch 0  --Set Accepted--
            OPR>




   2.10.2  The SPFORM.INI File   2.10.2  The SPFORM.INI File

   The forms handler for the output devices CARD-PUNCH, PAPER-TAPE-PUNCH,
   and  PLOTTER  allows you to automatically set various forms parameters
   on the basis of form names.  To accomplish this, you  or  your  system
   manager must set up a file on SYS:  called SPFORM.INI which contains a
   list of form names and switch settings for those forms.

   Each line in the SPFORM.INI file is written in the following format:

        devtyp formname:locator/switch1/switch2/switch3...

   where:

        devtyp              the device type for which this line  applies.
                            The allowable types are as follows:

                            CDP for the card punch
                            PTP for the paper-tape punch
                            PLT for the plotter

        formname            a 1- to 6-character form name.  You  or  your
                            system  manager  should  specify  unique form
                            names that are descriptive of  the  types  of
                            forms used at your installation.

        :locator            an optional locator field containing:

                            ALL       all devices (the default)
                            LOC       all devices at the local site
                            REM       all devices at remote stations

        /switch1...         one or more  switches  available  to  you  to
                            describe the manner in which the forms are to
                            be used.  Refer to Tables 2-2 and 2-3  for  a
                            description of switches.  Table 2-2 describes
                            the four switches that can be  used  for  all
                            the output device types.  Table 2-3 describes
                            the four switches that can be used  only  for
                            the plotter (PLT:).





                                    2-41
                            BATCH SOFTWARE TASKS                            BATCH SOFTWARE TASKS


   Table 2-2:  SPFORM.INI Switches for All Device Types   Table 2-2:  SPFORM.INI Switches for All Device Types


       Switch                               Meaning       Switch                               Meaning


     /BANNER                specifies  whether  banner  units  will  be
                            output.

     /HEADER                specifies  whether  header  units  will  be
                            output.

     /NOTE:xxx              The xxx represents  a  text  of  up  to  50
                            characters  that  are  printed  on  the OPR
                            terminal  at  the  time   the   forms   are
                            scheduled.  There is no default.

     /TRAILER               specifies whether  trailer  units  will  be
                            output.



   Table 2-3:  SPFORM.INI Switches for Plotter Devices Only   Table 2-3:  SPFORM.INI Switches for Plotter Devices Only


        Switch                             Meaning        Switch                             Meaning


     /MAXIMUM:xx:yy         specifies the  maximum  form  size  in  the
                            horizontal  (xx)  and  vertical  (yy) axis.
                            The values of xx and  yy  are  measured  in
                            units; the unit size is defined by the /SPU
                            switch.  The plotter, when mounted with the
                            specified  type  of form, will accept plots
                            no larger than the  values  of  xx  and  yy
                            indicate.

     /MINIMUM:xx:yy         specifies the  minimum  form  size  in  the
                            horizontal  (xx)  and  vertical  (yy) axis.
                            The values of xx and  yy  are  measured  in
                            units; the unit size is defined by the /SPU
                            switch.  The plotter, when mounted with the
                            specified  type  of form, will accept plots
                            no smaller than the values  of  xx  and  yy
                            indicate.





















                                    2-42
                            BATCH SOFTWARE TASKS                            BATCH SOFTWARE TASKS


   Table 2-3:  SPFORM.INI Switches for Plotter Devices Only (Cont.)   Table 2-3:  SPFORM.INI Switches for Plotter Devices Only (Cont.)


       Switch                               Meaning       Switch                               Meaning


     /SPU:nnn               specifies the Steps Per Unit.  A step is  a
                            measurement   length   as  defined  in  the
                            hardware manual  for  the  device  at  your
                            installation.   The  value of nnn should be
                            step-sizennn=one  unit.   For  example,  to
                            define  an  inch as the unit if the plotter
                            step is .01 inches, use /SPU:100.

                                    NOTE

           Refer to the hardware owner's manual for  the  plotter
           device  at your installation before entering a line in
           the SPFORM.INI file for the plotter because there  are
           many different types of plotters.

   The form name in SPFORM.INI need not be the actual name of a  physical
   form; however, it usually is close to the type of form (such as normal
   forms, narrow forms, and so forth).  When a device  request  is  made,
   SPROUT  compares  the  form  name associated with the request with the
   form name of the form currently mounted on the output device.  If  the
   first  four  characters  of the name are not the same, then the system
   requests you to change the forms on the output device.  If  the  first
   four  characters  are  the  same,  then  the  system simply checks the
   switches associated with the requested form name and uses those values
   when  processing  the  output  job.  The number of characters that the
   system uses to compare the form name can be changed by running GALGEN;
   the default is four characters.

   For example, note the following SPFORM.INI file:

        CDP NORMAL/HEADER/BANNER/TRAILER
        CDP NORM01/HEADER/BANNER/TRAILER
        CDP NORM02/HEADER/BANNER/TRAILER/NOTE:SPECIAL

   Now, suppose that NORM01 forms are currently mounted on the card punch
   and  a  user makes a punch request that requires NORM02 forms.  SPROUT
   compares the first four characters of the requested form name (NORM02)
   with  the  first four characters of the form name for the form that is
   currently mounted in the card punch (NORM02).  Because  they  are  the
   same,  SPROUT  takes  the  switch  values  associated  with NORM01 and
   applies them to the user's punch request.  Therefore,  the  SPFORM.INI
   file should have a unique name for each type of form.

   Each line  in  SPFORM.INI  can  also  contain  a  locator  field  that
   specifies  the  location  of  the output device.  The locator ALL (the
   default) refers to all of the devices as specified by the device type.
   The   locators   CENTRAL  and  REMOTE  are  applicable  only  if  your
   installation has TOPS-20 network software.












                                    2-43
                            BATCH SOFTWARE TASKS                            BATCH SOFTWARE TASKS


   2.10.3  Starting Output Devices   2.10.3  Starting Output Devices

   Once you have set the parameters for the  particular  output  devices,
   you  must start the device so that output requests can be processed on
   them.  If you do not set any parameters for  the  device,  the  device
   uses the default parameters set by your System Manager at GALGEN time.

   You can start one output device at a time or a range of devices.

   To stop the scheduling of jobs on an output device, use  the  SHUTDOWN
   command.


                            ----- Example -----

   Issue the START CARD-PUNCH command to start up card punch 0.

        OPR>START CARD-PUNCH 0<RET>
        OPR>
        10:23:21        Card-punch 0  --Startup Scheduled--
        OPR>
        10:23:25        Card-punch 0  --Started--
        OPR>



   2.10.4  Stopping Output Devices   2.10.4  Stopping Output Devices

   If you ever need or want to stop one or more output devices,  use  the
   STOP  command.   The  STOP  command temporarily stops an output device
   from processing its current job.  You must use the CONTINUE command to
   resume the output to the device.

   The STOP command has three optional arguments.  They are:

        1.  AFTER CURRENT-REQUEST

        2.  AFTER EVERY-REQUEST

        3.  IMMEDIATELY

   The IMMEDIATELY argument is the default for the STOP  command.   Refer
   to  the  TOPS-20  Operator's  Command  Language Reference Manual for a
   complete description of these commands.


                            ----- Example -----

   Stop the current job on card punch 0 temporarily  to  load  more  card
   forms and empty its hopper.

        OPR>STOP CARD-PUNCH 0<RET>
        OPR>
        18:24:09        Card-punch 0  --Stopped--
        OPR>











                                    2-44
                            BATCH SOFTWARE TASKS                            BATCH SOFTWARE TASKS


   2.10.5  Continuing Output Devices   2.10.5  Continuing Output Devices

   You can give the CONTINUE command to  continue  processing  an  output
   device request that was temporarily stopped with the STOP command.


                            ----- Example -----

   After stopping the card punch to load more cards and empty the hopper,
   continue the output of the current punch job.

        OPR>CONTINUE CARD-PUNCH 0<RET>
        OPR>
        18:35:41        Card-punch 0  --Continued--
        OPR>



   2.10.6  Shutting Down Output Devices   2.10.6  Shutting Down Output Devices

   If at any time you need to shutdown the scheduling of output  requests
   on  an output device or on a range of output devices, use the SHUTDOWN
   command.  If an output request is currently  being  processed  on  the
   device, the request is completed before the output device is shutdown.

   To start the scheduling of jobs on the output device,  use  the  START
   command.


                            ----- Example -----

   Shutdown paper-tape punch 0 while a request is still being  output  on
   it.

        OPR>SHUTDOWN PAPER-TAPE-PUNCH 0<RET>
        OPR>
        19:21:03        Paper-tape-punch 0  --Shutdown Scheduled--
        OPR>

   When the request on the paper-tape punch has completed its output, the
   following message appears:

        OPR>
        19:23:55        Paper-tape-punch 0  --Shutdown--
        OPR>



   2.10.7  Displaying Output Device Parameters   2.10.7  Displaying Output Device Parameters

   You can display the current output device  parameters  with  the  SHOW
   PARAMETERS device command, where device can be:

        1.  CARD-PUNCH unit-number

        2.  PAPER-TAPE-PUNCH unit-number

        3.  PLOTTER unit-number

   If you do not specify a unit number with the  device  name,  the  SHOW
   command defaults to all units of the device that you specified.





                                    2-45
                            BATCH SOFTWARE TASKS                            BATCH SOFTWARE TASKS


   The output from  the  SHOW  PARAMETERS  device  command  displays  the
   following for each of the three devices listed above:

        1.  The unit number for the output device

        2.  The output limits for the output device

        3.  The type of forms for the output device

        4.  The priority range for the output device

        5.  The limit-exceeded-action for the output device

        6.  The character device type for the output device

                            ----- Example -----

   Give the SHOW  PARAMETERS  PAPER-TAPE-PUNCH  command  to  display  the
   parameters of paper-tape punch 0 on the system.

        OPR>SHOW PARAMETERS PAPER-TAPE-PUNCH<RET>
        OPR>
        13:09:42            -- System Device Parameters--

        Papertape Parameters:
          Unit  Min:Max Unit   Form    Prio  Lim-Ex  Dev-Chars
          ----  ------------  ------  -----  ------  ---------
             0      1:500    NORMAL   1:63     Ask

        OPR>



   2.10.8  Displaying Output Device Status   2.10.8  Displaying Output Device Status

   You can display the status of an output device or a  range  of  output
   devices  with the SHOW STATUS device command.  If you do not specify a
   unit  number  or  a  range  of  unit  numbers,  the  command  displays
   information for all of the specified devices on the system.

   The output from the SHOW STATUS device command displays the  following
   for each device:

        1.  The unit number of the output device

        2.  The current status of the output device

        3.  The job name currently active on the output device

        4.  The request-id number of the job

        5.  The name of the user who made the output request

   If the output device is not active, the word  "Idle"  appears  in  the
   Status  column  with no jobname, request-id, or user name.  If none of
   the devices are active, only the unit number and status appears in the
   display.









                                    2-46
                            BATCH SOFTWARE TASKS                            BATCH SOFTWARE TASKS


   If an output device is active, the output also shows the time that the
   output  request  started  and the number of output cards or units thus
   far.  If you do not need this information with the display of the SHOW
   STATUS  device  command,  specify  the  /SHORT switch before you press
   RETURN to confirm the command.

                            ----- Example -----

   Give the SHOW STATUS CARD-PUNCH command to display the current  status
   of card punch 0 on the system.

        OPR>SHOW STATUS CARD-PUNCH 0<RET>
        OPR>
        13:51:39            -- System Device Status --

        Card-Punch Status:
          Unit      Status       Jobname  Req#            User
          ----  ---------------  -------  ----  ------------------------
             0  Active          PUNCH9    137  HEISER
                Started at 13:35:23, punched 687 of 2000 cards
        OPR>



   2.11  CONTROLLING JOBS ON OUTPUT DEVICES   2.11  CONTROLLING JOBS ON OUTPUT DEVICES

   The following are the OPR commands that allow you  to  control  output
   device  jobs  that a user queues either with the processing of a batch
   job or with the TOPS-20 PUNCH or PLOT command:

        1.  SHOW QUEUES device-JOBS

        2.  HOLD device-JOBS

        3.  RELEASE device-JOBS

        4.  ABORT (Current Job on) device

        5.  REQUEUE (Current Job on) device

        6.  MODIFY device-REQUEST

        7.  CANCEL device-REQUEST

   Where "device" can be CARD-PUNCH, PAPER-TAPE-PUNCH, or PLOTTER.

   The following sub-sections describe how to use each of these  commands
   to control output device jobs.



   2.11.1  Examining Output Device Jobs in the Queues   2.11.1  Examining Output Device Jobs in the Queues

   Whenever a user issues a request to an output device job, the  request
   is  placed  in  a queue where it waits for selection by the system for
   processing.  To examine the queues for output  device  requests,  give
   the OPR command SHOW QUEUES device-JOBS.









                                    2-47
                            BATCH SOFTWARE TASKS                            BATCH SOFTWARE TASKS


   The output of the SHOW QUEUES device-JOBS command displays:

        1.  The name of the output job

        2.  The request-id number of the output job

        3.  The output limit of the job

        4.  The name of the user who requested the output job

   These four columns of the display appear whether  the  output  job  is
   currently   being   processed  (active)  or  is  not  being  processed
   (inactive).

   In addition to the above, if the output is active on the  device,  the
   display  shows  the  device  unit  number  on  which  the job is to be
   processed, the time that the output started, and the total  number  of
   cards or units processed.

   The SHOW QUEUES device-JOBS command has four optional switches:

        1.  /NODE:name displays the device queue of a remote system.

        2.  /ALL adds to the display the switches that the user specified
            with  the  PUNCH  or  PLOT  command.   If  no  switches  were
            specified, the /ALL switch displays the default switches.  In
            addition,  the  /ALL  switch  displays  any switches that you
            specified, for example, /HOLD.

        3.  /SHORT displays only the job name, the  request  number,  the
            scheduled run time, and the user name.

        4.  /USER:name displays only the device jobs of a specified user.

































                                    2-48
                            BATCH SOFTWARE TASKS                            BATCH SOFTWARE TASKS


                              ----- Hint -----

   The asterisk (*) before the job name column (see  examples)  indicates
   that the job is currently being processed.



                            ----- Examples -----

        1.  Give the SHOW  QUEUES  PLOTTER-JOBS  command  with  the  /ALL
            switch  to  display  the  plotter  jobs in the queue with all
            their switches.

            OPR>SHOW QUEUES PLOTTER-JOBS /ALL<RET>
            OPR>
            10:49:07            -- System Queues Listing --

            Plotter Queue:
            Job Name  Req#  Limit            User
            --------  ----  -----  ------------------------
            * GRAPH     17    100  OPERATOR
                On Unit:0  /Seq#:3320
                Started at 10:47, plotted 25 of 100 units
              MF20      19    200  P.TAYLOR
                /Unit:0  /Seq#:3341
              MF21      27    590  P.TAYLOR
                /Unit:0  /Seq#:3349
              MF22      31    300  P.TAYLOR
                /Unit:0  /Seq#:3355

            There are 4 jobs in the Queue (1 in Progress)

            OPR>

        2.  Give the SHOW QUEUES PLOTTER-JOBS  command  with  the  /SHORT
            switch.

            OPR>SHOW QUEUES PLOTTER-JOBS /SHORT<RET>
            OPR>
            10:49:07            -- System Queues Listing --

            Plotter Queue:
            * GRAPH     17    100  OPERATOR
              MF20      19    200  P.TAYLOR
              MF21      27    590  P.TAYLOR
              MF22      31    300  P.TAYLOR

            OPR>


















                                    2-49
                            BATCH SOFTWARE TASKS                            BATCH SOFTWARE TASKS


   2.11.2  Holding Output Device Jobs   2.11.2  Holding Output Device Jobs

   Whenever you need to prevent output jobs from  being  processed,  give
   the   HOLD  device-JOBS  command,  where  device  can  be  CARD-PUNCH,
   PAPER-TAPE-PUNCH, or PLOTTER.  When you  give  this  command,  current
   jobs  in  the  queue  are held.  Any output jobs queued after the HOLD
   command has been issued are not held and are processed when the device
   becomes  available.   You  must specify one of the following with this
   command:

        1.  The request-id number, which holds a single output job

        2.  The user name, which holds all output  jobs  queued  by  that
            user

        3.  An asterisk (*), which holds all output jobs  queued  by  all
            users



                             ----- Hints -----

   You cannot HOLD an output job that is currently active  on  an  output
   device.



                            ----- Example -----

   Give the HOLD CARD-PUNCH-JOBS command to hold all card punch  requests
   for user BROWN.

        OPR>HOLD CARD-PUNCH-JOBS BROWN<RET>
        OPR>
        9:01:54        --3 Jobs Held--
        OPR>



   2.11.3  Releasing Output Device Jobs   2.11.3  Releasing Output Device Jobs

   You can give the RELEASE command to release an  output  job  that  has
   been  previously held with the HOLD command.  You can specify a single
   request-id number, the user name for all jobs  by  that  user,  or  an
   asterisk  (*)  for all output jobs in the system.  The RELEASE command
   reschedules the job(s) to be processed.


                              ----- Hint -----

   You must have one or more output devices started or in the idle  state
   to get an output job processed.


                            ----- Example -----

   Give the RELEASE command to  reschedule  all  output  jobs  that  were
   previously held.

        OPR>RELEASE CARD-PUNCH-JOBS *<RET>
        OPR>
        10:38:09        --3 Jobs Released--
        OPR>



                                    2-50
                            BATCH SOFTWARE TASKS                            BATCH SOFTWARE TASKS


   2.11.4  Canceling Output Device Jobs   2.11.4  Canceling Output Device Jobs

   At various times, you might have to cancel an output job while  it  is
   processing  on  a  device.   You  can  give the ABORT command with the
   output unit number and one or more of the following switches:

        1.  /REQUEST-ID:

        2.  /PURGE

        3.  /REASON:

   The /REQUEST-ID:  switch uniquely identifies the job to be canceled.

   The /PURGE switch flushes the entire job from the system  when  it  is
   canceled.   There are no header, banner, or trailer pages printed when
   the output request is purged.

   The /REASON:  switch allows you to enter one or more lines of text  to
   explain why the output job was canceled.

                            ----- Example -----

   Give the ABORT command to cancel an output  job  because  a  user  had
   requested that you do so.

        OPR>ABORT PLOTTER 0 /REASON:USER REQUEST<RET>
        OPR>
        11:40:09        PLOTTER 0  --ABORTING--
                        JOB TEST01 Req #35 for JONES
                        REASON:USER REQUEST
        OPR>
        11:40:21        Plotter 0  --End--
                        Job TEST01 Req #35 for JONES
        OPR>



   2.11.5  Requeuing Output Device Jobs   2.11.5  Requeuing Output Device Jobs

   At various times, you might want to cancel  an  output  job  currently
   being  processed  and  at the same time, reschedule the same job to be
   processed at a later time.  You can give the REQUEUE command  to  HOLD
   the output job in its entirety and ABORT its current output.

   For example, you might want to REQUEUE an  output  job  that  requires
   more  forms  (cards,  paper  tape,  or  plotter  paper)  then  what is
   currently available at your site.  Thus, you REQUEUE the  job  in  its
   entirety for output to be processed when the forms become available.

   You can specify the /REASON:  switch to explain why the job  is  being
   requeued.














                                    2-51
                            BATCH SOFTWARE TASKS                            BATCH SOFTWARE TASKS


                            ----- Example -----

   Give the REQUEUE command  to  hold  and  cancel  an  output  job  that
   requires four hours to punch.

        OPR>REQUEUE CARD-PUNCH 0 /REASON:<RET>
        Enter text and terminate with ^Z
        JOB REQUIRES FOUR HOURS TO PUNCH.<RET>
        JOB WILL BE RELEASED FOR PUNCH ON 2ND SHIFT. ^Z
                                                      !
                                                   <CTRL/Z>
        OPR>
        13:21:03        CARD-PUNCH 0  --REQUEUED--
                        JOB ARFORM Req #47 for AR.OFFICE
                        Reason:JOB REQUIRES FOUR HOURS TO PUNCH.
                        JOB WILL BE RELEASED FOR PUNCH ON 2ND SHIFT.^Z
        OPR>
        13:21:25        Card-punch 0  --End--
                        Job ARFORM Req #47 for AR.OFFICE
        OPR>



   2.11.6  Modifying Output Device Requests   2.11.6  Modifying Output Device Requests

   Whenever you need to change the priority of an output job  request  in
   the queue, give the MODIFY device-REQUEST command, where device can be
   CARD-PUNCH, PAPER-TAPE-PUNCH, or PLOTTER.  You can  specify  a  single
   output request-id number, the user name for all requests by that user,
   or an asterisk (*) for all output requests in the queue.

   You must specify a new PRIORITY number from 1 to 63.  The  higher  the
   number, the greater the priority.



                            ----- Example -----

   Give the MODIFY command to change the priority of batch request 135 to
   have  a  priority  of  63.  This causes the request to be the next job
   processed.

        OPR>MODIFY PAPER-TAPE-PUNCH 135 PRIORITY 63<RET>
        OPR>
        8:51:21        --1 Job Modified--
        OPR>




















                                    2-52
                            BATCH SOFTWARE TASKS                            BATCH SOFTWARE TASKS


   2.11.7  Deleting Output Device Requests   2.11.7  Deleting Output Device Requests

   Whenever you need to delete an output request from the  output  queue,
   give   the   CANCEL   device-REQUEST  command,  where  device  can  be
   CARD-PUNCH, PAPER-TAPE-PUNCH, or PLOTTER.  You can  specify  a  single
   request-id  number,  the  user  name  for all jobs by that user, or an
   asterisk (*) for all output requests in the system.

   If you CANCEL an output request that is active on an output unit,  the
   output job is immediately deleted from the output unit.



                            ----- Example -----

   Give the CANCEL command to cancel output request  186  from  the  card
   punch output queue.

        OPR>CANCEL CARD-PUNCH 186<RET>
        OPR>
        10:25:11        --1 Job Canceled--
        OPR>



   2.11.8  Scheduling the Next Output Device Request   2.11.8  Scheduling the Next Output Device Request

   You can force an output queue to schedule a particular request  to  be
   processed  immediately  by  using  the NEXT command with BATCH-STREAM,
   CARD-PUNCH, PAPER-TAPE-PUNCH, PLOTTER or PRINTER as the keyword.  This
   command  starts  the  job  immediately  after  the  current request is
   finished.  The NEXT command does  not  alter  the  sequence  of  other
   requests in the queue.



                            ----- Example -----

   Give the NEXT command to make request 230 the next job to  be  printed
   on printer 0.

   OPR>NEXT PRINTER 0 REQUEST-ID 230
   OPR>
    8:53:37                 Printer 0  -- NEXT request #230 scheduled --
   OPR>





















                                    2-53





































































                                    3-1












                                 CHAPTER 3                                 CHAPTER 3

                         UNSCHEDULED SOFTWARE TASKS                         UNSCHEDULED SOFTWARE TASKS



   This chapter  describes  various  tasks  that  you  can  perform  when
   requested  or  needed.   Therefore,  these  tasks  are  considered  as
   unscheduled software tasks.  If any of these tasks are performed on  a
   regular  basis  at  your installation, decide upon a schedule for them
   with your System Manager.



   3.1  CONTROLLING THE SCHEDULER   3.1  CONTROLLING THE SCHEDULER

   As the operator of the TOPS-20 operating system, you may be instructed
   by  your  System  Manager  to  change  the scheduling scheme that your
   system is currently using.  The following  sub-sections  describe  the
   ways of temporarily changing the various scheduling schemes.



   3.1.1  Changing Class Scheduling   3.1.1  Changing Class Scheduling

   If your system is using class scheduling, you  may  override  whatever
   has  been  set in the n-CONFIG.CMD file for a specific class by giving
   the following OPR command:

        OPR>SET SCHEDULER CLASS n nn<RET>

   The first argument specifies the class number and the second  argument
   specifies  the  percentage  of  CPU  time  given  to  that class.  The
   percentage  of  CPU  time  allocated  cannot  exceed  100%.   Whatever
   percentage  of  CPU  time  is not allocated becomes part of the system
   windfall.  (Refer to the  TOPS-20  System  Manager's  Guide  for  more
   information on class scheduling.)



   3.1.1.1  Changing a Job's Scheduling Class   3.1.1.1  Changing a Job's Scheduling Class - If your system has  class
   scheduling  controlled  by  a  policy  program, you may change a job's
   scheduling class by giving the following OPR command:

        OPR>SET JOB n SCHEDULER-CLASS y<RET>

   The first argument specifies the job number and  the  second  argument
   specifies  the  class you want the job to run in.  When you issue this
   command, it temporarily places the job in the specified class.

                            ----- Example -----

   Change job 24 to run in scheduler class 3.

        OPR>SET JOB 24 SCHEDULER-CLASS 3<RET>


                                    3-1
                         UNSCHEDULED SOFTWARE TASKS                         UNSCHEDULED SOFTWARE TASKS


   3.1.2  Changing Batch-Class Scheduling   3.1.2  Changing Batch-Class Scheduling

   If your System Manager has specified a special  class  for  all  batch
   jobs,  you  may  change the class number or the percentage of CPU time
   allocated in  the  n-CONFIG.CMD  file  by  giving  the  following  OPR
   command:

        OPR>SET SCHEDULER BATCH-CLASS n<RET>

   The argument can be either a class number, the word BACKGROUND, or the
   word  NONE.   If  you enter a class number, the percentage of CPU time
   specified in the n-CONFIG.CMD file for that class  will  be  given  to
   batch  jobs.   For  example,  if you change the batch class to a class
   that has been set up with 50% of the CPU time,  then  batch  jobs  for
   that  class  receive 50% of the CPU time.  If this is the case and you
   do not want batch jobs to have that percentage of CPU time, you should
   first give the SET SCHEDULER CLASS command to change the percentage of
   CPU time for that class, and then give the SET  SCHEDULER  BATCH-CLASS
   command.

   You can  change  the  percentage  of  CPU  time  for  the  batch-class
   specified  in  the  n-CONFIG.CMD file by giving the BACKGROUND or NONE
   argument.  When you give the BACKGROUND argument, batch jobs for  that
   class  receive  the percentage of CPU time that has not been allocated
   to the other classes.  When you give the NONE argument, batch jobs for
   that  class  receive  no  CPU  time.   (Refer  to  the  TOPS-20 System
   Manager's Guide for more information on batch class scheduling.)



   3.1.3  Changing Bias-Control Scheduling   3.1.3  Changing Bias-Control Scheduling

   If your system is using  bias-control  scheduling,  you  may  override
   whatever has been set in the n-CONFIG.CMD file by giving the following
   OPR command:

        OPR>SET SCHEDULER BIAS-CONTROL n<RET>

   The argument is a integer from 1 to 20.  To allocate  higher  priority
   to  interactive jobs, you would set n in a range between 1 to 10, with
   1  being  the  highest  priority.   To  allocate  higher  priority  to
   compute-bound jobs, you would set n to be in a range between 11 to 20,
   with 20 being the highest priority.

                                    NOTE

           Remember these commands only  temporarily  change  the
           scheduling  scheme.  If the system has to be restarted
           for any reason, the scheduling scheme reverts to  what
           has been set up in the n-CONFIG.CMD file.




































                                    3-2
                         UNSCHEDULED SOFTWARE TASKS                         UNSCHEDULED SOFTWARE TASKS


   3.1.4  Displaying Scheduler Status   3.1.4  Displaying Scheduler Status

   At any time, you can display the status of the scheduler by giving the
   following OPR command:

        OPR>SHOW SCHEDULER<RET>

   When  you  issue  this  command  the  system  prints   the   following
   information:


         o  The class scheduling status


         o  The bias-control setting


         o  The batch class


         o  The class number


         o  The percentage of CPU time allocated to each class


         o  The percentage of CPU time being used by each class


         o  The load averages for each class


         o  The windfall allocation status


         o  The accounting  mechanism  (by  accounts  or  by  the  policy
            program)

   Refer to the TOPS-20 System Manager's Guide for  more  information  on
   scheduling.


                            ----- Example -----

   OPR>SHOW SCHEDULER<RET>
   OPR>
   11:29:00               -- System Scheduler Information --

                  Class Scheduler: On              Bias Control: 11
                                                   Batch Class: 1

                                               ------Load Averages------

                  CLASS     SHARE(%)   USE(%)  1-MIN     5-MIN     15-MIN
                    0         80        73      5.19      4.31      4.07
                    1         15        27      9.80      5.23      3.29
                    2          5         0      0.00      0.00      0.00

                  Windfall: Allocated            Classes by Account

   OPR>



   3.2  SETTING DEVICES ON-LINE   3.2  SETTING DEVICES ON-LINE

   If you have a DX20 channel controller installed and  on-line  at  your
   installation,  you  can  bring one of the devices listed below on-line
   with OPR after the device has been newly installed at your site.  This
   function  allows the system to accept the hardware address of a device
   that is not known to the monitor but is available for use.  You do not
   need to reload the TOPS-20 monitor.














                                    3-3
                         UNSCHEDULED SOFTWARE TASKS                         UNSCHEDULED SOFTWARE TASKS


   The devices that are interfaced through the DX20 are:

        1.  TX01 - tape controller

        2.  TX03 - channel selector

        3.  TX05 - tape drive selector

        4.  TU70 - tape drive

        5.  TU71 - tape drive

        6.  TU72 - tape drive

        7.  RP20 - disk drive

   In addition, when your DIGITAL Field Service Representative takes  one
   of  these  devices  off-line for repair of a hardware problem and then
   returns the device back to you for your control, you can give the  OPR
   command:

        SET ONLINE channel,unit,controller number<RET>

   to cause the system to recognize the device as on-line and  ready  for
   use  by  the system.  The address (ch,unit,cntrlr) separated by commas
   is:

        1.  Channel number (ch)

        2.  Device unit number (unit)

        3.  Controller number (cntrlr)

   The controller number can be  omitted  if  the  device  is  interfaced
   directly to the channel bus.



                              ----- Hint -----

   If the TOPS-20 monitor is reloaded, such as after a system crash,  you
   do  not  need  to  set  the  device  on-line  again.   The  device  is
   automatically recognized by the monitor as being on-line.



                            ----- Examples -----

        1.  Set the TX05  hardware  device  on-line  after  it  has  been
            installed   during  timesharing.   Specify  the  argument  of
            channel 1, unit 1, controller 1.

            OPR>SET ONLINE 1,1,1<RET>
            OPR>
            8:32:13        --Set Online Accepted--
            OPR>

        2.  Set the hardware device  on-line  after  your  DIGITAL  Field
            Service Representative has repaired the tape unit.

            OPR>SET ONLINE 1,2,1<RET>
            OPR>
            14:43:09        --Set Online Accepted--
            OPR>


                                    3-4
                         UNSCHEDULED SOFTWARE TASKS                         UNSCHEDULED SOFTWARE TASKS


   3.3  CONTROLLING THE ORION LOG BUFFER FILE   3.3  CONTROLLING THE ORION LOG BUFFER FILE

   ORION maintains  a  log  of  all  messages  sent  through  it.   ORION
   timestamps  and  identifies  the  type  of  message  and  provides any
   additional information available.  This function of ORION is  referred
   to as a Centralized Logging Facility.

   The ORION log buffer  file  contains  all  OPR-to-ORION  commands  and
   transactions  performed  at  the operator's console.  The OPR commands
   that control this logging facility are:

        1.  ENABLE LOGGING

        2.  DISABLE LOGGING

        3.  CLOSE LOG

   If your installation has TOPS-20 DECnet  software,  only  the  central
   site operator can issue any of the above OPR commands.

   The Centralized Logging Facility is on by default at  system  startup,
   but  can  be  disabled  by  placing the DISABLE LOGGING command in the
   SYSTEM.CMD file or by giving this command at OPR command level.

   To enable the Centralized Logging  Facility  again,  give  the  ENABLE
   LOGGING  command  at  OPR  command  level or place this command in the
   SYSTEM.CMD file.

   The  CLOSE  LOG  command  closes  the  current  log  buffer  file  and
   automatically  creates  a  new  log  buffer  file.  When the CLOSE LOG
   command is issued, the commands and transactions recorded in  the  log
   buffer  file  are  copied  to the ORION-SYSTEM.LOG file and the buffer
   file is cleared.  You can then print the ORION-SYSTEM.LOG file on  the
   line  printer to obtain a hard copy of all the operating processes for
   a given time period.

   The name of the log file is  determined  by  your  System  Manager  at
   GALGEN  time.   (Refer  to the TOPS-20 Software Installation Guide for
   the GALGEN procedures.) The default name is ORION-SYSTEM-LOG.nnn.



                            ----- Examples -----

        1.  Disable the logging facility for a period of  time  when  the
            system is operating stand-alone.

            OPR>DISABLE LOGGING<RET>
            OPR>
            8:52:12        --ORION Logging Disabled by JOB 6 OPERATOR
                              at terminal 14--
            OPR>

        2.  Close the current log buffer file and automatically create  a
            new log buffer file.

            OPR>CLOSE LOG<RET>

            OPR>







                                    3-5
                         UNSCHEDULED SOFTWARE TASKS                         UNSCHEDULED SOFTWARE TASKS


   3.4  INITIALIZING TAPES   3.4  INITIALIZING TAPES

   At various times, you are asked to initialize and/or  re-initialize  a
   magnetic tape.  When you initialize a tape, the system writes specific
   information on the tape pertaining to the identification of the  tape.
   When  you  initialize  a  tape  specifying  a TOPS-20, ANSI, or EBCDIC
   standard label, the system writes the  following  information  on  the
   tape:

        1.  A  standard   volume   label   that   contains   the   volume
            identification (volid) of the tape.

        2.  Standard header and trailer labels.  Later, when  a  file  is
            written   on   the   tape,   these  labels  contain  specific
            information pertaining to the file.

   When you initialize a tape as unlabeled, the system writes a record of
   80  null  characters  followed  by  two  tapemarks  on the tape.  This
   prevents the tape from running off the end of  the  reel  when  MOUNTR
   inspects it for a volume label.

   To initialize one or more tapes, give the following OPR command:

        OPR>SET TAPE-DRIVE MTAn:  INITIALIZE /switch:,/switch:,...<RET>

        where "n" is the unit number of the tape drive.

   The  following  table  describes  the  valid  switches  for  the   SET
   INITIALIZE command:


   Table 3-1:  SET INITIALIZE Switches   Table 3-1:  SET INITIALIZE Switches


         Switch                                Meaning         Switch                                Meaning


     /COUNT:nn                      specifies the number (nn) of  tapes
                                    to  be  initialized.   This  switch
                                    allows you to  initialize  multiple
                                    tapes  with  the  same  attributes.
                                    Every time you initialize  a  tape,
                                    the  system  asks  you  to  type  a
                                    volume   identifier.    When    the
                                    initialization process is complete,
                                    the system unloads  the  tape  from
                                    the   drive.   When  the  specified
                                    number   of   tapes    have    been
                                    initialized,  you  can use the tape
                                    drive   to   satisfy   user   mount
                                    requests.

     /DENSITY:nnnn                  specifies  the   density   of   the
                                    tape(s)   being  initialized.   The
                                    "nnnn" can be 200, 556, 800,  1600,
                                    or  6250.   If you do not give this
                                    switch,  the   system   uses   1600
                                    bits/in as the default.








                                    3-6
                         UNSCHEDULED SOFTWARE TASKS                         UNSCHEDULED SOFTWARE TASKS


   Table 3-1:  SET INITIALIZE Switches (Cont.)   Table 3-1:  SET INITIALIZE Switches (Cont.)


         Switch                                Meaning         Switch                                Meaning


     /INCREMENT:nn                  specifies the  numeric  value  (nn)
                                    that   is  used  to  increment  the
                                    volume identifiers.  This switch is
                                    valid  only when specified with the
                                    /VOLUME-ID switch.  If you  do  not
                                    give this switch, the system uses 1
                                    as the default.

     /LABEL-TYPE:type               specifies  the  type  of   standard
                                    volume  label  to be written on the
                                    tape.  The "type" can  be  TOPS-20,
                                    ANSI, EBCDIC, or UNLABELED.  If you
                                    do not specify a  label  type,  the
                                    system uses TOPS-20 as the default.

   /OVERRIDE-EXPIRATION:(YES or NO) specifies  whether  to  ignore  the
                                    expiration  date of the data on the
                                    tape.   If  you  specify  NO,   the
                                    system   does   not  allow  you  to
                                    initialize a tape whose  expiration
                                    date  has  not  yet  expired.  (The
                                    expiration  date  of  the  tape  is
                                    defined  as  the expiration date of
                                    the first file on the tape.) If you
                                    specify YES, the system initializes
                                    the tape  even  if  the  expiration
                                    date  has  not  been reached.  When
                                    you are initializing new tapes, you
                                    should   always   specify   YES  to
                                    prevent the tape from running away.
                                    If you do not give this switch, the
                                    system uses NO as the default.

     /OWNER:name                    specifies the name of the owner  of
                                    the   tape(s)   being  initialized.
                                    This switch is valid  only  if  the
                                    label  type  is TOPS-20.  If you do
                                    not give this switch, the  tape  is
                                    initialized as a scratch tape.

     /PROTECTION:nnnnnn             specifies a six-digit octal  number
                                    as the protection code of the tape.
                                    The number  (nnnnnn)  can  be  from
                                    000000 (no one except the owner can
                                    use  the   tape)   through   777777
                                    (anyone  can  use  the tape).  This
                                    switch is valid only if  the  label
                                    type  is  TOPS-20.   If  you do not
                                    give this switch, the  system  uses
                                    the  protection  code  of 777777 as
                                    the default.









                                    3-7
                         UNSCHEDULED SOFTWARE TASKS                         UNSCHEDULED SOFTWARE TASKS


   Table 3-1:  SET INITIALIZE Switches (Cont.)   Table 3-1:  SET INITIALIZE Switches (Cont.)


         Switch                                Meaning         Switch                                Meaning


     /TAPE-DISPOSITION:condition    specifies what is to be  done  with
                                    the   tape   after   it   has  been
                                    initialized.  The  "condition"  can
                                    be  either  HOLD or UNLOAD.  If you
                                    specify  HOLD,  the  tape   remains
                                    mounted  on  the  drive  after   it
                                    has  been  initialized.    If   you
                                    specify   UNLOAD,   the   tape   is
                                    unloaded from the  drive  after  it
                                    has  been initialized.  If you give
                                    the /COUNT:  switch  with  a  value
                                    greater       than      1,      the
                                    /TAPE-DISPOSITION  is  ignored  and
                                    UNLOAD  is assumed.  If this switch
                                    is  not  given,  the  system   uses
                                    UNLOAD as the default.

     /VOLUME-ID:volid               specifies the volume identifier for
                                    the  tape.  The  volid  can be from
                                    1 to 6  characters.   If  the volid
                                    contains  non-alphanumeric  charac-
                                    ters, you  must enclose  the  volid
                                    in double quotes (").


   When you use a tape drive for initializing tapes, the  tape  drive  is
   not  available  for  user  mount  requests.   When  the initialization
   process is completed, the tape drive automatically  becomes  available
   for user mount requests.  To force a tape drive out of initialize mode
   prematurely, refer to Part VI Section 3.5.7.

                            ----- Examples -----

        1.  A user (J.JONES) has requested a tape mount of an  ANSI  tape
            with  a volid of FOOBAR and has requested that you initialize
            the tape first.  The volume is initialized with  ANSI  labels
            and  a volid of FOOBAR.  The system default for density (1600
            BPI) is used.  When the tape is mounted  on  the  drive,  the
            tape  is  initialized  and the drive becomes available to the
|           user (/TAPE-DISPOSITION:HOLD).  Automatic Volume  Recognition
|           (AVR  - See Section 3.5.2) takes over and satisfies the mount
            request for FOOBAR.


















                                    3-8
                         UNSCHEDULED SOFTWARE TASKS                         UNSCHEDULED SOFTWARE TASKS


            OPR>
            12:11:34                       --Tape Mount Request # 31--
                            Mount ANSI volume FOOBAR, 9-track, 1600 BPI, WRITE-ENABLED
                            User J.JONES, Job 39, Terminal 13
                            User remarks: PLEASE INITIALIZE TAPE FIRST
            OPR>SET TAPE-DRIVE MTA3: INITIALIZE /LABEL-TYPE:ANSI-<RET>
            /TAPE-DISPOSITION:HOLD/VOLUME-ID:FOOBAR<RET>
            OPR>
            12:12:01          --Mount Tape To Be Initialized--
                             Mount tape volume FOOBAR for initialization on MTA3:
            OPR>

            When the initializing is completed,  the  system  issues  the
            following message:

            12:13:14        --MTA3: Volume FOOBAR Initialized--
                            Label Type: ANSI        Density:       1600
            OPR>
            12:13:19          --INITIALIZE Completed--
                            MTA3: available for user tape requests
            OPR>
            12:13:30          --MTA3: Volume FOOBAR, ANSI labeled tape mounted--
            OPR>
            12:13:33          --Tape Drive Given To Request 31--
                            MTA3: Volume FOOBAR now in use by
                            User J.JONES, Job 39, Terminal 13
            OPR>

        2.  You initialize multiple tapes on the same drive with  numeric
            volume  identifications.   This  sets  up the drive MTA0:  to
            initialize all tapes mounted on it with  volume-ids  starting
            at  100000  and incremented by one for each tape mounted.  As
            each  tape  is  mounted,  you  are  informed  of  the  volume
            information.

            OPR>SET TAPE-DRIVE MTA0: INITIALIZE /COUNT:10/OWNER:OPERATOR-<RET>
            /VOLUME-ID:100000<RET>
            OPR>
            13:20:05          --Mount Tape To Be Initialized--
                            Mount tape volume 100000 for initialization on MTA0:
            OPR>
            13:21:10          --MTA0: Volume 100000 Initialized--
                            Label type: TOPS-20      Density:        1600
                            Owner:  OPERATOR        Protection:     777777
            OPR>
            13:21:35          --Mount Tape To Be Initialized--
                            Mount tape volume 100001 for initialization on MTA0:
            OPR>
            13:23:01          --MTA0: Volume 100001 Initialized--
                            Label type: TOPS-20      Density:        1600
                            Owner:  OPERATOR        Protection:     777777
            OPR>
                       .
                       .
                       .
            13:40:23          --MTA0: Volume 100009 Initialized--
                            Label Type: TOPS-20      Density:        1600
                            Owner:  OPERATOR        Protection:     777777
            OPR>







                                    3-9
                         UNSCHEDULED SOFTWARE TASKS                         UNSCHEDULED SOFTWARE TASKS


            After you initialized the number of tapes, release  the  tape
            drive so that it can be used for user MOUNT requests.

            OPR>SET TAPE-DRIVE MTA0 AVAILABLE<RET>
            OPR>
            13:47:37          --INITIALIZE Complete--
                            MTA0: available for user tape requests
            OPR>

        3.  You initialize two tapes with non-numeric labels.

            OPR>SET TAPE-DRIVE MTA1: INITIALIZE /COUNT:2/DENSITY:800-<RET>
            /LABEL-TYPE:ANSI/PROTECTION:770077/VOLUME-ID:PAYMAS<RET>
            OPR>
            15:07:47          --Mount Tape To Be Initialized--
                            Mount tape volume PAYMAS for initialization on MTA1:
            OPR>
            15:09:43          --MTA1: Volume PAYMAS Initialized--
                            Label type:ANSI         Density: 800
            OPR>
            15:10:12  <18>    --Key In Volume Identifier--
                            What is the volume-id of the next tape to be
                            initialized on drive MTA1:
                              RESPOND n volid
            OPR>RESPOND 18 PAYMA1<RET>
            OPR>
            15:10:56          --Mount Tape To Be Initialized--
                            Mount Tape volume PAYMA1 for initialization on MTA1:
            OPR>
            15:13:34          --MTA1: Volume PAYMA1 Initialized--
                            Label type: ANSI        Density: 800
            OPR>
            15:14:27          --INITIALIZE Complete--
                            MTA1: available for user tape requests
            OPR>




   3.5  HANDLING USER MOUNT REQUESTS   3.5  HANDLING USER MOUNT REQUESTS

   There are two types of tapes you may be requested to  mount:   labeled
   tapes  and unlabeled tapes.  The differences in handling the two types
   of tape requests are explained in the  following  sections.   If  your
   system  has tape drive allocation enabled, the user must issue a MOUNT
   command to request that a tape be mounted.  When the  system  receives
   this request, OPR prints the following message:

        hh:mm:ss       -- TAPE MOUNT REQUEST#nn--
                     MOUNTlabel-typeVOLUMEvolid,n-track,nnnnBPI,mode
                     USER:username,JOBnn,TERMINALnn
                     VOLUMES IN SET setname:volid1,volid2,...
                     USER REMARK: text













                                    3-10
                         UNSCHEDULED SOFTWARE TASKS                         UNSCHEDULED SOFTWARE TASKS


   where:

        hh:mm:ss       specifies  the  time  the  operator  received  the
                       message.

        REQUEST#nn     specifies the request number assigned to the mount
                       request.

        label-type     specifies    the    type    of    label,    either
                       TOPS-20,ANSI,EBCDIC, or UNLABELED.

        VOLUME volid   specifies the internal and/or external name of the
                       tape.

        n-track        specifies the channel structure of the tape, i.e.,
                       9-track.

        nnnnBPI        specifies  the  density  at  which  the  data  was
                       recorded  on  the  tape.   The valid densities are
                       200,556,800,1600, and 6250.  If the user does  not
                       specify  a  density,  the  system uses 1600 as the
                       default.

        mode           specifies whether the  tape  is  write-enabled  or
                       read-only.

        username       specifies the name of  the  user  who  issued  the
                       MOUNT command.

        JOBnn          specifies the job number  the  user  was  assigned
                       when he logged onto the system.

        TERMINALnn     specifies the line number  of  the  terminal  from
                       which the user issued the MOUNT request.

    setname:volid1,    specifies  the  name  the  user  assigned   to   a
                       multi-volume  tape  set and the volume identifiers
                       for  each  tape  in  the  set.   This  information
                       appears  only  if  the  user  has requested that a
                       multi-volume tape set be mounted.

    USER'S REMARK:text specifies any remarks the user gave with the MOUNT
                       command.   This  information  appears  only if the
                       user gave a remark with the MOUNT command.

   If tape drive allocation is not enabled, the  user  issues  an  ASSIGN
   command  to  assign a tape drive to his job.  In this case, you do not
   receive a mount request message on the terminal running OPR.


















                                    3-11
                         UNSCHEDULED SOFTWARE TASKS                         UNSCHEDULED SOFTWARE TASKS


   3.5.1  Displaying Tape Drive Status   3.5.1  Displaying Tape Drive Status

   If you need to find out the status of one or all of the tape drives on
   your system, give the following OPR command:

        OPR>SHOW STATUS TAPE-DRIVE MTAn:  or /switch<RET>

   The switches for this command are:

    Switch                                       Meaning

     /ALL                    displays the status of all the  tape  drives
                             on  the  system.   This  switch  causes  the
                             system to print the following information:

                              o  The  unit  number  of  the  tape   drive
                                 (MTAn:)

                              o  The current state of the tape drive  (In
                                 Use, Loaded, or Unloaded)

                              o  The volid of the tape on the drive

                              o  The  request  number  assigned  to   the
                                 request

                              o  The job number assigned to the user

                              o  The name of the user who  has  the  tape
                                 mounted

                              o  The  status  of   AVR   on   the   drive
                                 (Yes=enabled or No=disabled)

                              o  The mode of the tape  (WRITE-ENABLED  or
                                 read-only)

                              o  The label-type  of  the  tape  (TOPS-20,
                                 ANSI, EBCDIC, or Unlabeled)

                              o  The  density  at  which  the  data   was
                                 written on the tape

                             /FREE displays  the  tape  drives  that  are
                             available  to  you for mounting tapes.  This
                             switch displays, for all  available  drives,
                             the same information as the /ALL switch.  In
                             addition, you are told  if  the  tape  is  a
                             scratch tape.

   /CHARACTERISTICS          displays the following information:

                              o  The physical unit number  of  the  tape,
                                 for example, MTA0:

                              o  The type of drive (9-track or 7-track)

                              o  The densities the drive supports








                                    3-12
                         UNSCHEDULED SOFTWARE TASKS                         UNSCHEDULED SOFTWARE TASKS


   If you do not give a physical device or one the  above  switches,  the
   display you see is similar to the following

                 OPR>
                 10:19:51     --Tape Drive Status--
                 DRIVE   STATE        VOLID     REQ#   JOB#   USER
                 -----   -----        -----     ----   ----   ----
                 MTA0:   In Use       DIST      145    8      LATTA
                 MTA1:   In Use       DBL01     148    8      LATTA
                 MTA3:   In Use       KEVINM    164    56     MCELMOYLE
                 MTA4:   Unloaded
                 MTA5:   Unloaded



                            ----- Examples -----

        1.  Give the SHOW STATUS TAPE-DRIVE command for tape drive MTA0:.

                 OPR>SHOW STATUS TAPE-DRIVE MTA0:<RET>
                 OPR>
                 12:26:45    --Tape Drive Status--
                 DRIVE   STATE        VOLID     REQ#   JOB#   USER
                 -----   -----        -----     ----   ----   ----
                 MTA0:   In Use       RICK2     212     56    R.ACE

            This example illustrates that drive MTA0:  is being  used  by
            user  R.ACE.  If the STATE of the drive had been "Loaded", it
            would mean that there is a tape on the drive,  but  that  the
            tape  was not being used at the time.  If this were the case,
            there would not be a number under the heading REQ#.   If  the
            STATE  of  the drive had been "Unloaded", it would mean there
            is no tape on the drive and the drive could be used to  mount
            a tape.

        2.  Give the SHOW STATUS TAPE DRIVE command with the /ALL switch.

                 OPR>SHOW STATUS TAPE-DRIVE/ALL<RET>
                 OPR>
                 11:20:02    --Tape Drive Status--
                 DRIVE   STATE        VOLID     REQ#   JOB#   USER
                 -----   -----        -----     ----   ----   ----
                 MTA0:   Unloaded
                         AVR: Yes
                 MTA1:   In Use       A         100    10     R.ACE
                         AVR: YES, WRITE:  YES, TOPS-20 labels, 1600 BPI
                 MTA2:   Unloaded
                         AVR: Yes
                 MTA3:   Unloaded
                         AVR: Yes
                 MTA4:   Unloaded
                         AVR: No
                 MTA5:   Loaded
                         AVR: Yes, Write:  Yes, Unlabeled
                 OPR>











                                    3-13
                         UNSCHEDULED SOFTWARE TASKS                         UNSCHEDULED SOFTWARE TASKS


        3.  Give the SHOW  STATUS  TAPE  DRIVE  command  with  the  /FREE
            switch.

                 OPR>SHOW STATUS TAPE-DRIVE /FREE<RET>
                 OPR>
                 11:18:56    --Tape Drive Status--
                 DRIVE   STATE    AVR  WRITE  VOLID   SCR  LBL TYPE  DENSITY
                 -----   -----    ---  -----  -----   ---  --------  -------
                 MTA0:   Unloaded Yes
                 MTA2:   Unloaded Yes
                 MTA3:   Unloaded Yes
                 MTA4:   Unloaded No
                 MTA5:   Loaded   Yes  Yes            No   Unlabeled
                 OPR>

        4.  Give  the  SHOW  STATUS   TAPE   DRIVE   command   with   the
            /CHARACTERISTICS switch.

                 OPR>SHOW STATUS TAPE-DRIVE /CHARACTERISTICS<RET>
                 OPR>
                 11:20:39    --Tape Drive Status--
                 DRIVE  TYPE     SUPPORTED DENSITIES
                 -----  ----     -------------------
                 MTA0:  9-TRACK  800, 1600
                 MTA1:  9-TRACK  800, 1600
                 MTA2:  9-TRACK  1600, 6250
                 MTA3:  9-TRACK  1600, 6250
                 MTA4:  7-TRACK  200, 556, 800
                 MTA5:  9-TRACK  800, 1600
                 OPR>




   3.5.2  Controlling Automatic Volume Recognition (AVR)   3.5.2  Controlling Automatic Volume Recognition (AVR)

   Automatic Volume Recognition (referred to as AVR) allows you to  mount
   a labeled tape without telling the system the volume identification of
   the tape.  When you mount a labeled tape  on  a  drive  that  has  AVR
   enabled, the system automatically reads the volume identifier from the
   volume label when the tape drive is brought on-line.

   If tape drive allocation is being used on  your  system,  then  it  is
   likely  that  AVR  has been enabled in the n-CONFIG.CMD file.  If, for
   some reason, you need to disable AVR for one or all tape drives,  give
   the following OPR command:

        OPR>DISABLE AUTOMATIC-VOLUME-RECOGNITION argument<RET>

        where the argument can be:

             MTAn:  (for a specific tape drive)
              or
             TAPE-DRIVES (for all tape drives)

   One reason for disabling AVR on a tape drive is to avoid runaway tapes
   when  you  are initializing tapes.  When you disable AVR, OPR does not
   print any message confirming that AVR has been disabled.  To check the
   status  of the tape drive, give the OPR command SHOW STATUS TAPE-DRIVE
   /ALL.






                                    3-14
                         UNSCHEDULED SOFTWARE TASKS                         UNSCHEDULED SOFTWARE TASKS


   You can enable AVR for one or more of the tape drives on  your  system
   by giving the following OPR command:

        OPR>ENABLE AUTOMATIC-VOLUME-RECOGNITION argument<RET>



                          ----- Restriction -----

                  You cannot ENABLE  or  DISABLE  AVR  for
                  7-track  tape drives.  If you attempt to
                  do  so,  the  system  will  ignore   the
                  command.   All  tapes mounted on 7-track
                  tape drives are  regarded  as  unlabeled
                  tapes.



                            ----- Example -----

            Disable AVR for tape drive 0.

                OPR>DISABLE AUTOMATIC-VOLUME-RECOGNITION MTA0:<RET>



   3.5.3  Mounting Labeled Tapes with AVR Enabled   3.5.3  Mounting Labeled Tapes with AVR Enabled

   When a user issues a MOUNT command for a labeled tape, you  receive  a
   message similar to the following:

        OPR>
        10:15:43        --Tape Mount Request # 12--
                      Mount Volume 001234, Read-Only
                      User HOVSEPIAN, Job 25,Terminal 2

   If the user has not already given you the tape, the  first  thing  you
   must  do  is physically locate the tape he requested.  When you locate
   the tape, mount the tape on a drive that supports the density the user
   requested in the MOUNT command.  When the tape is brought on-line, the
   system automatically reads the label and prints a message  similar  to
   the following on your terminal:

        OPR>
        10:15:43        --MTA0: Volume 001234 TOPS-20 labeled tape mounted--
        OPR>
        10:15:45        --MTA0: Given To Request 12--
                        Volume 001234 now in use by
                        User HOVSEPIAN, Job 25, Terminal 2

   When the user finishes using the tape drive, he issues a DISMOUNT TAPE
   command  to  release  the tape drive.  When he gives this command, the
   system prints a message similar to the following on your terminal.

        OPR>
        11:20:33      --Tape Drive Released by USER--
                     MTA0:  Volume 001234 being Unloaded
        OPR>








                                    3-15
                         UNSCHEDULED SOFTWARE TASKS                         UNSCHEDULED SOFTWARE TASKS


   If a tape has been mounted for a long period  of  time  without  being
   used,  it  is  possible that the user forgot to give the DISMOUNT TAPE
   command to release the tape drive.  If this is the  case,  check  with
   the  user to see if he is finished using the tape.  If he is, give the
   OPR command DISMOUNT TAPE.  When you give  this  command,  the  system
   prints a message similar to the following on your terminal:

        OPR>
        11:45:20      --MTA0:  Unloaded--

                                    NOTE

           Tape handling error messages are explained in Part  VI
           Section 1.4.7.




   3.5.4  Mounting Labeled Tapes With AVR Disabled   3.5.4  Mounting Labeled Tapes With AVR Disabled

   When a user issues a MOUNT command, you see the same mount request  as
   explained  in the previous section.  However, because AVR is disabled,
   the system does not automatically read the label.  Therefore, you must
   give  the  OPR  command  IDENTIFY  to  inform  the system of the label
   information.

   For example, a user requests a labeled tape whose volid is  112233  to
   be  mounted  on a tape drive.  You mount the tape on a tape drive that
   has AVR disabled, for  example,  MTA0:.   After  you  bring  the  tape
   on-line, give the following command:

        OPR>IDENTIFY MTA0:  VOLUME-ID 112233<RET>

   The above command tells the system that a labeled tape with the  volid
   of 112233 is mounted on tape drive MTA0:.

   If the user requests that a labeled tape be mounted as a scratch tape,
   give the following command:

        OPR>IDENTIFY MTA0:  SCRATCH<RET>

                                    NOTE

           When a user requests that a labeled tape be mounted as
           a  scratch  tape,  the  volid  in the mount request is
           replaced by the word SCRATCH.




   3.5.5  Mounting Unlabeled Tapes   3.5.5  Mounting Unlabeled Tapes

   When a user requests that an unlabeled  tape  be  mounted  on  a  tape
   drive,  the  mount  request  you  see  is  the same as the ones in the
   previous sections with the exception that the "label-type" is shown as
   unlabeled.   To  inform  the system that you are mounting an unlabeled
   tape, use the OPR command IDENTIFY.









                                    3-16
                         UNSCHEDULED SOFTWARE TASKS                         UNSCHEDULED SOFTWARE TASKS


   After you have physically located the tape and mounted it  on  a  free
   tape drive, give the IDENTIFY command to have the system associate the
   tape with the mount request.

   For example, a user requests that an unlabeled tape be mounted with  a
   volid  of  TEST01.   When  the  mount request is processed, the system
   prints the following message on your terminal:

        OPR>
        10:20:10      --Tape Mount Request #12--
                     Mount Unlabeled Volume TEST01
                     User Hovsepian, Job 21, Terminal 7
        OPR>

   When you receive this  request,  locate  and  mount  the  tape  on  an
   available tape drive and then give the following command.

        OPR>IDENTIFY MTAn:  VOLUME-ID TEST01<RET>

   where "n" is the unit number of the tape drive.

   You can also satisfy the mount request by giving the IDENTIFY  command
   with  the request number in place of the volid.  Using the above mount
   request, give the following command:

        OPR>IDENTIFY MTAn:  REQUEST-ID 12<RET>

   If the user requests that an unlabeled scratch tape be  mounted,  give
   the following command:

        OPR>IDENTIFY MTAn:  SCRATCH<RET>

                            ----- Example -----

            A user requests that you mount an unlabeled scratch tape  and
            you comply, as there is a tape drive available.

            OPR>
            12:25:09         --Tape Mount Request #57--
                            Mount Unlabeled scratch tape, WRITE-ENABLED
                            User SMITH, Job 43, Terminal 18
                            User's remark:  PLEASE SEND VOLID TO JOB 43
            OPR>

            You now mount and ready an unlabeled  scratch  tape  on  tape
            drive MTA2:.

            12:27:32        --MTA2:  Unlabeled tape mounted--
            OPR>

            Then reply to OPR with:

            OPR>IDENTIFY MTA2:  SCRATCH<RET>
            OPR>
            12:27:33         --MTA2:  Given To Request 57--
                            Volume SCRATCH tape now in use by
                            User SMITH, Job 43, Terminal 18
            OPR>

            You can now SEND the physical volume identification to job 43
            as the user requested.

            OPR>SEND JOB 43 VOLID IS SCR123<RET>
            OPR>


                                    3-17
                         UNSCHEDULED SOFTWARE TASKS                         UNSCHEDULED SOFTWARE TASKS


   3.5.6  Canceling Mount Requests   3.5.6  Canceling Mount Requests

   If you are unable to satisfy a user's mount request,  you  can  cancel
   the  mount  request by giving the OPR command CANCEL MOUNT-REQUEST nn.
   You should also notify the user why you could not satisfy the  request
   by giving the /REASON:  switch with the command.

   For example, you cancel a mount request because you could not find the
   requested tape.  To do this, give the following command:

        OPR>CANCEL MOUNT-REQUEST nn /REASON:I COULD NOT FIND THE TAPE

   where "nn" is the request number assigned to the mount request.



                            ----- Examples -----

            Cancel mount request 204.

            OPR>CANCEL MOUNT-REQUEST 204/REASON:I COULD NOT FIND THE
            TAPE<RET>
            OPR>
            11:49:19        --Mount Request 204 Canceled--



   3.5.7  Setting Tape Drives Available or Unavailable   3.5.7  Setting Tape Drives Available or Unavailable

   If tape drive allocation is enabled every time you start  the  system,
   all  tape  drives  are  under control of the MOUNTR program.  However,
   there may be times you want to release MOUNTR's control  of  the  tape
   drive.  To do this, you would give the following command:

        OPR>SET TAPE-DRIVE MTAn:  UNAVAILABLE<RET>

   where "n" is the unit number of the tape drive.

   The system prints:

        ENTER TEXT AND TERMINATE WITH ^Z

   This allows you to enter a comment giving a reason why you are setting
   the tape drive unavailable.

   When you give this command, MOUNTR releases control of the tape  drive
   and  users  can  assign  the  drive  to their jobs by using the ASSIGN
   command.  To return control of the tape  drive  to  MOUNTR,  give  the
   following command:

        OPR>SET TAPE DRIVE MTAn:  AVAILABLE<RET>



                            ----- Example -----

            Set MTA0:  unavailable because of a hardware problem.

            OPR>SET TAPE-DRIVE MTA0: UNAVAILABLE<RET>
            ENTER TEXT AND TERMINATE WITH ^Z
            TAPE DRIVE MTA0: IS LOSING VACUUM <CTRL/Z>

            OPR>








                                    3-18
                         UNSCHEDULED SOFTWARE TASKS                         UNSCHEDULED SOFTWARE TASKS


   3.6  ARCHIVING FILES WITH DUMPER   3.6  ARCHIVING FILES WITH DUMPER

   If your installation is using  the  archive/virtual  disk  system  for
   off-line  storage of files, you could be requested at various times to
   run the DUMPER program to copy files marked  for  archiving  onto  two
   tapes.   These  requests do not appear at OPR command level.  However,
   you can give the TOPS-20 command INFORMATION  ARCHIVE-STATUS  <*>*.*.*
   to display the files that users have requested to be archived.

        $INFORMATION ARCHIVE-STATUS <*>*.*.*<RET>
         <ACE>TEST01.TST Archive requested
         <BROWN>FOO.BAR Archive requested
         <HOVSEPIAN>OPR.TXT Archive requested
         <LATTA>COBOL.EXE Archive requested
         <SARTINI>CONTNT.EXE Archive requested
         <WOLFE>ABCD.LST Archive requested
               .
               .
               .
        $

                                    NOTE

           This command shows files for your connected  structure
           only.   To show those files for another structure, you
           must  include  the  structure  name  in  the   command
           (str:<*>*.*.*).

   You can archive each file separately using the DUMPER program with the
   following command format:

|       DUMPER>ARCHIVE str:<directory>filespec<RET>

   However, it is recommended that you wait until you have more than just
   one archive request to run DUMPER and archive files.

   If no filespec is given in the DUMPER command, all  files  marked  for
   archiving  on  the  connected  structure are copied to tape.  Thus the
   DUMPER command defaults to the following:

|       DUMPER>ARCHIVE str:<*>*.*.*<RET>

   You must use two tapes when you are archiving files.  With two  tapes,
   the  archive  provides a backup system in case one of the tapes is bad
   or if one of the tapes gets misplaced.  Your System Manager should set
   up  the  procedures  and  the  tapes that are to be used for archiving
   files.

|  Archiving  requires  that  DUMPER  make  two  runs  on  the  connected
|  structure.  When the files have been successfully copied to two tapes,
   DUMPER then deletes the contents of the  files  from  the  disk.   The
   following are the steps you must take to archive one or more files:

        1.  Physically mount and ready a tape that has been assigned  for
            archiving.











                                    3-19
                         UNSCHEDULED SOFTWARE TASKS                         UNSCHEDULED SOFTWARE TASKS


        2.  Type PUSH to OPR.

        3.  Type ENABLE.

        4.  Type MOUNT TAPE setname:  (setname is the name  you  assigned
            to   your   tape)   with   the   /WRITE-ENABLED  switch,  the
            /LABEL-TYPE:   switch,  the  /VOLIDS:   switch,  the  /NOWAIT
            switch,  and  any  additional  switches  desired to the MOUNT
            command.

        5.  When MOUNTR replies with  the  Tape  Mount  Request  and  the
            acknowledgment  of the unlabeled tape being mounted, type POP
            to return to OPR.

        6.  If you are using an unlabeled tape, give the IDENTIFY command
            to OPR to identify the tape drive to the mount request.

        7.  When MOUNTR replies with Tape Drive Given To Request  number,
            type PUSH to OPR.

        8.  After the system has assigned a tape drive, type DUMPER.

        9.  Type to DUMPER:

            TAPE MTn:
|           ARCHIVE str:<dir>filespec

       10.  DUMPER asks you two questions.  If the tape  has  never  been
            used  before  for  archiving,  you  should answer YES to both
            questions.  If the tape has been used before  for  archiving,
            you  should  answer  NO  to the first question and the second
            question does not appear (see the example below).

       11.  When DUMPER replies with the two Total lines,  type  EXIT  to
            DUMPER.

       12.  Type DISMOUNT MTn:.

       13.  Physically remove the tape from the tape drive.
|  
|      14.  Mount and ready the second tape for the  archive  and  repeat
|           Steps 4 through 13.

       15.  Type POP to return to OPR.

                            ----- Example -----

   The following is an example of the DUMPER program when used to archive
   files.   It is assumed that you have already mounted an unlabeled tape
   on MTA1:  and the tape has never been used before for archiving.

        OPR>PUSH<RET>

         TOPS-20 Command processor 6(772)
        @ENABLE<RET>
        $MOUNT TAPE ARCHVE: /WRITE-ENABLED/LABEL-TYPE:UNLABELED-      
        /VOLIDS:500100/NOWAIT<RET>
        [Waiting for Tape/Structure Mount]








                                    3-20
                         UNSCHEDULED SOFTWARE TASKS                         UNSCHEDULED SOFTWARE TASKS


   OPR prints on the CTY:

        14:43:18          --Tape Mount Request # 57--
                        Mount Unlabeled volume 500100, WRITE-ENABLED
                        User OPERATOR, Job 6, Terminal 1

        14:43:46          --MTA1: Unlabeled tape mounted--
        $POP      
        OPR>IDENTIFY MTA1: REQUEST-ID 57<RET>
        OPR>
        14:43:50          --MTA1: Given To Request 57--
                        Volume 500100 now in use by
                        User OPERATOR, Job 6, Terminal 1
        OPR>PUSH<RET>
        [Tape set ARCHVE, volume 500100 mounted]
        [ARCHVE: defined as MT0:]
        $DUMPER<RET>
        DUMPER>TAPE MT0:<RET>
|       DUMPER>FILES<RET>
|       DUMPER>ARCHIVE PS:<TODAY>*.*.*<RET>
        $Is this a new tape? YES<RET>
        $Are you sure? YES<RET>

|        DUMPER tape # 1, Fri 27-July-84 1354. ARCHIVE, volid T2
|  
|       PS:<TODAY>
|         PS:<TODAY>QE5.LIB.1
|         PS:<TODAY>QE5.TEC.1
|  
|       Pass 2 started.
|       Pass 2 completed.
|  
|  
|       Total files dumped:     2
|       Total pages dumped:     4
|       CPU time, seconds:      0
        DUMPER>EXIT<RET>
        $DISMOUNT MT0:<RET>
        [Tape dismounted]
        $
        15:21:09          --Tape Drive Released By User--
                        MTA1: Volume 500100 Being unloaded


                                    NOTE

           If you are using the terminal that OPR is running  on,
           it  is  possible to receive OPR messages while you are
           running the DUMPER program.

















                                    3-21
                         UNSCHEDULED SOFTWARE TASKS                         UNSCHEDULED SOFTWARE TASKS


   You can now mount and ready another tape for the  archive.   When  you
   PUSH  from  OPR  after  IDENTIFYing  the  mount  request, you can type
   CONTINUE to return to DUMPER.































































                                    3-22
                         UNSCHEDULED SOFTWARE TASKS                         UNSCHEDULED SOFTWARE TASKS


                                    NOTE

           When a file has been archived, the user who  requested
           the  archive  receives  a message in his MAIL.TXT file
           specifying that the file is archived.




   3.7  RUNNING THE REAPER PROGRAM   3.7  RUNNING THE REAPER PROGRAM

   The REAPER program is used to increase free disk space on the  system.
   REAPER frees this disk space by performing the following functions:

        1.  By marking files that  have  not  been  referenced  within  a
            specified period of time for involuntary migration

        2.  By deleting disk contents pertaining to archived or  migrated
            files that have not been referenced within a specified period
            of time

        3.  By trimming directories that are over  their  permanent  disk
            allocations

   In most cases to use the REAPER program, you would give  a  number  of
   commands,  one  for  each operation to be performed.  When all desired
   operations have been specified, you can give  the  BEGIN  command  and
   specify the path of files to be considered.

   Table 3-2 below and on the following pages describe the  commands  you
   can  give  to the REAPER program and what the REAPER program does when
   it is run.


   Table 3-2:  REAPER Commands   Table 3-2:  REAPER Commands


     BEGIN (Processing Files)

     specifies which files to process in the  file  system.   Normally,
     you can specify PS:<*>*.*.*, but you can also specify other paths,
     such as PS:<*>*.REL.* or  FOO:<TST*>*.*.*.   This  command  should
     only  be  given  after  all  desired  options have been specified.
     After the specified files have been processed, REAPER  prints  the
     total number of pages reclaimed and then exits.


     DELETE-CONTENTS (of old offline files)

     specifies that files, existing on both  disk  and  on  an  archive
     tape, that have not been referenced within a specified time period
     are to have their contents deleted from disk.  The time period  is
     specified  by  the PERIOD command (described below in this table).
     If the DELETE command is not  given,  the  disk  contents  of  the
     file(s) remain on the disk(s).











                                    3-23
                         UNSCHEDULED SOFTWARE TASKS                         UNSCHEDULED SOFTWARE TASKS


   Table 3-2:  REAPER Commands (Cont.)   Table 3-2:  REAPER Commands (Cont.)


     EXIT (to monitor)

     specifies to exit from the REAPER program, without processing  any
     files.


     LIST (output to file)

     specifies an output filespec for the listing produced  by  REAPER.
     This  listing  consists of the names of the files that were marked
     for migration and a list of tapes that have archived  or  migrated
     files.   If  a  tape  that was listed on a previous listing is not
     listed on the current listing, it means that the contents  of  the
     tape have expired and can be released for other purposes.  If this
     command is not given, the listing produced by REAPER is written to
     the file DSK:REAPER.LIST.


     MIGRATE (old files to offline storage)

     specifies that files not  referenced  within  the  specified  time
     period  are  to  be  marked  for  involuntary migration.  The time
     period is specified by the PERIOD command.  If the MIGRATE command
     is  not  given,  files  are not marked for migration and remain on
     disk.

     Files that are marked for migration have the disk contents deleted
     from  disk  when  you  run  the  DUMPER  program with the /MIGRATE
     switch.  (Refer to next section in this chapter.)


     ORDER (For trimming)

     specifies the order in which files that are marked  for  migration
     are  to  be  taken  when  trimming  a  directory  that is over its
     permanent  allocation.   This  order  list  is  made  up  of  file
     specifications,  such  as:  *.TMP.*, *.LST.*, and *.REL.*.  REAPER
     only uses the ORDER list if the TRIM command is given.

     Most users have their  own  MIGRATION  ORDER  file  in  their  own
     directory.   However,  you should always include this command when
     performing trimming operations.


     PERIOD (For migration)

     specifies a time limit in days within which files  should  not  be
     migrated or have their disk contents deleted.  Your System Manager
     should inform you of the number of days  to  be  entered  in  this
     command.   For  example,  if  PERIOD is 60 days, it means that all
     files older than 60 days are involuntarily migrated if the MIGRATE
     command  was  given  or  files  older than 60 days have their disk
     contents deleted if you gave the the DELETE command.

     If you do not give a PERIOD command, a default period of  60  days
     is assumed.







                                    3-24
                         UNSCHEDULED SOFTWARE TASKS                         UNSCHEDULED SOFTWARE TASKS


   Table 3-2:  REAPER Commands (Cont.)   Table 3-2:  REAPER Commands (Cont.)


     PURGE (Expired FDB's from disk)

|    specifies to delete and expunge the File Descriptor Block (FDB) of
     a  file  which  is  off-line  and  the  file's expiration date has
     arrived (or passed).  Sometime before the off-line expiration date
     is  reached,  a  message  is  sent  to  the user who owns the file
     indicating that the expiration of the file is  approaching.   This
     message is sent only once.


     SCAN (Only)            

     specifies that no files are actually DELETEd,MIGRATEd, or TRIMmed.
     Only a listing of the files and directories that would be deleted,
     migrated, and trimmed is produced if you were  to  run  REAPER  at
     this time.


     SKIP (Directories)

     specifies the directories that  are  not  to  be  considered  when
     performing  deletion,  migration,  or  trimming  operations.  Your
     System Manager should inform you of the directories that should be
     skipped.  If the SKIP command is not given, all directories on the
     structure are processed.


     TAKE (Commands from file)

     specifies a command file of REAPER commands that  REAPER  executes
     automatically.   This  file should be created when the software is
     installed.  The command file should  contain  your  installation's
     policies  toward  involuntary  migration.  If you do not specify a
     filespec   with   the   TAKE   command,   REAPER    defaults    to
     SYSTEM:REAPER.CMD  as  a filespec.  (See below for an example of a
     REAPER.CMD file.)


     TAPE (Check of tapes in use)

     specifies that the output listing containing a summary of the tape
     information  for  the files considered in the REAPER process.  The
     listing shows  all  tapes  referenced  and  the  number  of  valid
     (unexpired)  files  each  tape  has.  There is no distinction made
     between archive and migration tapes.


     TRIM (Directories over allocation)

     specifies that directories over their permanent allocation will be
     trimmed  down  to the size specified in their directory.  The user
     can specify the order in which the  files  should  be  trimmed  by
     entering  an  order  list  in  a file named MIGRATION.ORDER in the
     user's directory.  If the MIGRATION.ORDER file does not  exist  in
     the  user's  directory,  then  the  order of files for trimming is
     taken from the ORDER command you specify.







                                    3-25
                         UNSCHEDULED SOFTWARE TASKS                         UNSCHEDULED SOFTWARE TASKS


   The following is an example of a REAPER.CMD file with  comments  added
   to clarify the commands:

        ! Sample REAPER policy file - Created 17 Sept 79,
        ! Directories not to consider:
        SKIP PS:<*SUBSYS>,PS:<*SYSTEM>,PS:<UNSUPPORTED>
        PERIOD 60        !Specify date limit on files
        MIGRATE          !Files older than PERIOD days
        DELETE           !Delete unreferenced file contents older
                          !than PERIOD with tape backup
        TRIM             !Directories over permanent allocation
        ORDER *.TMP.*,*.LST.* !IN WHICH TO TAKE FILES WITH TRIM

   When REAPER completes its processing, four lines of text  are  printed
   on your terminal.  These lines specify the number of:

        1.  files and pages marked for migration

        2.  archived files and pages deleted from disk

        3.  temporary files and pages deleted

        4.  expired files and pages purged

   If REAPER does not  mark  any  files  for  migration,  it  prints  the
   following information:

        0 files marked for migration, 0 pages
        0 archive files deleted from disk, 0 pages
        0 temporary files deleted, 0 pages
        0 expired files purged, 0 pages

                            ----- Examples -----

        1.  The following is an  example  of  the  REAPER  program.   You
            specify  the SCAN and BEGIN commands.  REAPER defaults to the
            SYSTEM:REAPER.CMD file automatically for your  installation's
            migration  policies.  Within the BEGIN command, you can press
            CTRL/A and REAPER prints the current directory it is  working
            on.

            OPR>PUSH<RET>

             TOPS-20 Command processor 6(6037)
            @ENABLE<RET>
            $REAPER<RET>
            REAPER>SCAN<RET>
            REAPER>BEGIN<RET>
                  
             Working on PS:<WORK.DIRECTORY>
                  
             Working on PS:<LATTA.SNARK>
                  
             Working on PS:<XYZ.INP>

            169 files marked for migration, 3040 pages
            0 archive files deleted from disk, 0 pages
            0 temporary files deleted, 0 pages
            0 expired files purged, 0 pages
            $POP<RET>
            OPR>

            At this time, you can PRINT the file  REAPER.LIST  which  was
            written in your directory while REAPER was running.







                                    3-26
                         UNSCHEDULED SOFTWARE TASKS                         UNSCHEDULED SOFTWARE TASKS


        2.  The following is an example using the REAPER.CMD  file  shown
            above to migrate and trim files on the connected structure:

            OPR>PUSH<RET>

|            TOPS-20 Command processor 6(772)
            @ENABLE<RET>
            $REAPER<RET>
            REAPER>TAKE REAPER.CMD<RET>

   While REAPER is running, you cannot type POP to return to OPR.  If you
|  are  running  REAPER  as  a subjob of PTYCON, you can type <CTRL/X> to
   return to PTYCON and CONNECT back to OPR.  It is recommended that  you
   run  REAPER  either as a subjob of PTYCON or as a batch job because of
   the length of time it takes to process.

   When REAPER has completed its processing, REAPER lists the  number  of
   files and pages marked for migration, the number of files deleted, and
   the number of files purged.  You can then EXIT  from  REAPER  and  run
   DUMPER (explained in the next section).  For example:

            169 files marked for migration, 3040 pages
            12 archive files deleted from disk, 102 pages
            13 temporary files deleted, 236 pages
            2 expired files purged, 27 pages

            $POP      
            OPR>
|  
|  
|  
   3.8  MIGRATING FILES WITH DUMPER|  3.8  MIGRATING FILES WITH DUMPER
|  
|  Once a file has been marked for migration you  should  run  DUMPER  to
|  dump  the marked files to tape and delete (using the DELETE command in
|  REAPER) the files from disk.  The contents of the  files  are  deleted
|  after the second tape has been used for migration.
|  
|  Like archiving files, migration requires two  tapes.   Two  tapes  are
|  used  to  provide  a back-up system in case one of the tapes is bad or
|  gets misplaced.  Your System Manager should set up the  procedure  and
|  assign the tapes to be used for migrating files.

   You must do the following to migrate files with DUMPER:

        1.  Physically mount and ready a tape that has been assigned  for
            migrating files.

        2.  Type PUSH to OPR.

        3.  Type ENABLE.
|  
|       4.  Type MOUNT TAPE setname:  with the /WRITE-ENABLED switch, the
|           /LABEL-TYPE:    switch,   the   /VOLIDS:    switch,  and  any
|           additional switches desired to the MOUNT command.

        5.  When MOUNTR replies with  the  Tape  Mount  Request  and  the
            acknowledgement  of  the  unlabeled tape being mounted, press
            <RET> and type POP to return to OPR.







                                    3-27
                         UNSCHEDULED SOFTWARE TASKS                         UNSCHEDULED SOFTWARE TASKS


        6.  If you are using an unlabeled tape, give the IDENTIFY command
            to OPR to identify the tape drive for the mount request.

        7.  When MOUNTR replies with Tape Drive Given To Request  number,
            type PUSH to OPR.

        8.  After the system has displayed the defined tape drive for the
            setname:, type DUMPER.

        9.  Type to DUMPER:

            TAPE MTn:

|                LIST/MAIL filespec
|                MIGRATE str:<directory>filespec (for Migration)
|                MAIL filespec

       10.  DUMPER asks you two questions.  If the tape  has  never  been
            used  before  for  migration,  you  should answer YES to both
            questions.  If the tape has been used before  for  migration,
            you  should  answer  NO  to the first question and the second
            question does not appear (see the example below).

       11.  When DUMPER replies with the following messages:

                 TOTAL FILES dumped = nn
                 TOTAL Pages dumped = nn

            Type EXIT to DUMPER.

       12.  Type DISMOUNT MTn:

       13.  Physically remove the tape from the tape drive.

       14.  Mount and ready the second tape for the migration and  repeat
            Steps  4 through 12.  The migration of files is now complete,
            and those users who had files migrated receive a  message  in
            their MAIL.TXT files indicating the files that were migrated.
            If files in your directory were  migrated,  you  receive  the
            same message.

       15.  Type POP to return to OPR.



                            ----- Example -----

   The following is an example of the DUMPER program  that  was  used  to
   migrate  files.   It  is  assumed  that  you  have  already  mounted a
   unlabeled tape on MTA1:  and the tape(s) have never been  used  before
   for migration.















                                    3-28
                         UNSCHEDULED SOFTWARE TASKS                         UNSCHEDULED SOFTWARE TASKS


        OPR>PUSH<RET>

         TOPS-20 Command processor 6(772)
        @ENABLE<RET>
|       $MOUNT TAPE T1: /WRITE-ENABLED/LABEL-TYPE:UNLABELED-<RET>
|  
|       13:43:18          --Tape Mount Request # 57--
|                       Mount Unlabled volume 500100, WRITE-ENABLED
                        User OPERATOR, Job 6, Terminal 1

|       13:43:46          --MTA1: Unlabeled tape mounted--

        $POP<RET>
        OPR>IDENTIFY MTA1: REQUEST-ID 57<RET>
        OPR>
|       13:43:50          --MTA1: Given To Request 57--
                        Volume 500100 now in use by
                        User OPERATOR, Job 6, Terminial 1
        OPR>PUSH<RET>
|       [Tape set T1:, volume 500100 mounted]
|       [T1: defined as MT3:]
        $DUMPER<RET>
|       DUMPER>TAPE T1:<RET>
|       DUMPER>REWIND<RET>
|       DUMPER>FILES<RET>
|       DUMPER>LIST/MAIL TODAY.LST<RET>
|       DUMPER>MIGRATE (DISK FILES) PS:<TODAY>*.*.*<RET>
|        Is this a new tape? YES<RET>
|        Are you sure? YES<RET>
|  
|         DUMPER tape #1, Fri 27-Jul-84 1413. MIGRATION , volid T1
|  
|        PS:<TODAY>
|          PS:<TODAY>FTS.INIT.1
|          PS:<TODAY>INIT.CMD.1
|          PS:<TODAY>INT.MAC.1
|          PS:<TODAY>MS.INIT.1
|          PS:<TODAY>NFT.INIT.1
|          PS:<TODAY>SED.INIT.1
|          PS:<TODAY>TV.EXE.1
|          PS:<TODAY>TV.INI.1
|          PS:<TODAY>TV2.INI.1
|          PS:<TODAY>TVSM.INI.1
|  
|        Pass 2 started.
|        Pass 2 completed.
|  
|  
|        Total files dumped:     10
|        Total pages dumped:     38
|        CPU time, seconds:      1
|       DUMPER>MAIL TODAY.LST <RET>
|       DUMPER>EXIT
|  
|       $DISMOUNT T1:
|       [Tape dismounted, logical name T1: deleted]










                                    3-29
                         UNSCHEDULED SOFTWARE TASKS                         UNSCHEDULED SOFTWARE TASKS


   You can now mount and ready another tape for the migration.  When  you
   PUSH  from  OPR  after  identifying  the  mount  request, you can type
   CONTINUE to return to DUMPER.

|       $MOUNT TAPE T2: /WRITE-ENABLED/LABEL-TYPE:UNLABELED-<RET>
        /VOLIDS:500200/NOWAIT<RET>
|       [Mount request T2 queued, request #154]
|  
|       15:25:09          --Tape Mount Request # 154--
                        Mount Unlabled volume 500200, WRITE-ENABLED
                        User OPERATOR, Job 6, Terminal 1

        15:25:13          --MTA1: Unlabeled tape mounted--

        $POP<RET>
|       OPR>IDENTIFY MTA1: REQUEST-ID 154<RET>
        OPR>
|       15:27:12          --MTA1: Given To Request 154--
                        Volume 500200 now in use by
                        User OPERATOR, Job 6, Terminal 1
        OPR>PUSH<RET>
|       [Tape set T2:, volume 500200 mounted]
|       [T2: defined as MT3:]
        $CONTINUE<RET>
|       DUMPER>TAPE T2:<RET>
|       DUMPER>MIGRATE PS:<TODAY>*.*.*<RET>
        Is this a new tape? YES<RET>
        Are you sure? YES<RET>

|        DUMPER tape #1, Fri 27-Jul-84 1417. MIGRATION , volid T2
|  
|       PS:<TODAY>
|         PS:<TODAY>FTS.INIT.1
|         PS:<TODAY>INIT.CMD.1
|         PS:<TODAY>INT.MAC.1
|         PS:<TODAY>MS.INIT.1
|         PS:<TODAY>NFT.INIT.1
|         PS:<TODAY>SED.INIT.1
|         PS:<TODAY>TV.EXE.1
|         PS:<TODAY>TV.INI.1
|         PS:<TODAY>TV2.INI.1
|         PS:<TODAY>TVSM.INI.1
|  
|       Pass 2 started.
|       Pass 2 completed.
|  
|  
|       Total files dumped:     10
|       Total pages dumped:     38
|       CPU time, seconds:      2





















                                    3-30
                         UNSCHEDULED SOFTWARE TASKS                         UNSCHEDULED SOFTWARE TASKS


   3.9  RETRIEVING FILES WITH DUMPER   3.9  RETRIEVING FILES WITH DUMPER

|  Once a file is migrated or archived, the user cannot modify that  file
   unless  he  retrieves  the file with the TOPS-20 RETRIEVE command.  If
   the user wants to modify an archived file, he must first retrieve  the
   file  and then discard the tape archive status from the FDB.  When the
   user gives the RETRIEVE  command,  OPR  responds  with  the  following
   message:

        hh:mm:ss        File Retrieval n  --Retrieval Request--
                        str:<directory>filespec

   where n is the processor number processing the  request,  str: is  the
   requested   structure   name,  <directory>  is  the  requested  user's
   directory name, and filespec is the file specification.

   When a retrieval request is initially queued by a user, the request is
   stored  in  a  request  queue maintained by the system.  All retrieval
   requests are kept in the queue in order by the  archived  or  migrated
   tape   information.    This   information   consists   of  the  volume
   identification, the tape saveset number, and  the  tape  file  number.
   When each additional request is received by the system, the request is
   inserted in the proper sorted position within the queue.  Ordering the
   retrieval requests in this way reduces the amount of tape mounting and
   dismounting that must be performed by  you  when  you  run  DUMPER  to
   retrieve the requested files.

   To retrieve requested files with DUMPER, you must do the following:

        1.  Type PUSH to OPR.

        2.  Type ENABLE.

        3.  Run DUMPER and type:

            RETRIEVE str:<directory>filespec

        4.  When MOUNTR replies with  a  Tape  Mount  Request,  you  must
            physically   locate,  mount,  and  ready  the  tape  for  the
            retrieval.  MOUNTR obtains  the  tape  volid  from  the  file
            descriptor block (FDB) of each file requested for retrieval.

        5.  When MOUNTR replies that the tape is  mounted,  press  CTRL/C
            twice and then type POP to return to OPR.

        6.  If the label type is UNLABELED, give the IDENTIFY command  to
            OPR to identify the tape to MOUNTR.

        7.  After MOUNTR has displayed that the tape has  been  given  to
            the request number, type PUSH to OPR.

        8.  Type CONTINUE to return to the DUMPER program.

        9.  DUMPER then retrieves the files automatically and lists  them
            on your console.

       10.  When  the  retrievals  are  completed,  DUMPER  automatically
            unloads  the  tape.   If the retrievals require more than one
            tape,  DUMPER  unloads  and  requests  the  additional  tapes
            automatically.   Each  tape mount request has to be given the
            IDENTIFY  command  at  OPR  command  level.   You   have   to
            physically remove and mount each tape.









                                    3-31
                         UNSCHEDULED SOFTWARE TASKS                         UNSCHEDULED SOFTWARE TASKS


       11.  Type EXIT to DUMPER.

       12.  Type POP to return to OPR.

   The filespec (str:<directory>filespec)  in  the  RETRIEVE  command  is
   referred  to as the "file group descriptor".  This is because the file
   group descriptor can be one file specification  or  a  group  of  file
   specifications with or without the use of wildcard characters.

   When DUMPER retrieves file(s), retrieval requests in the request queue
   can be requeued for one of two reasons:

        1.  The   request    does    not    fall    within    the    path
            (str:<directory>filespec)  specified  by  you  in  the DUMPER
            RETRIEVE command.

        2.  The request called for a tape that had data errors on  it  or
            could not be mounted.

   Requests that are requeued have their time stamp zeroed out,  so  that
   DUMPER  reconsiders  the  request during the same retrieval operation.
   When all requests have been retrieved and there are no new requests to
   be  considered,  the  system informs DUMPER that the request queue has
   been exhausted.

                                  WARNING

|          If there are no files in the retrieval queue  and  you
|          give  the RETRIEVE command to DUMPER, DUMPER waits for
|          approximately  5  minutes.   DUMPER  then  aborts  the
|          RETRIEVAL request and sends the message:
|  
|               ?Assuming no requests in the retrieval queue.
|  
|          Before running DUMPER to retrieve  files,  you  should
|          give the SHOW QUEUES RETRIEVAL-REQUESTS command to OPR
|          to see if any retrievals have been requested.
|  
   If you are unable to locate the requested  tape  volume  or  the  tape
   volume is bad, perform the following steps:

        1.  Type CTRL/C twice and type POP to return to OPR.

        2.  Type CANCEL MOUNT-REQUEST nn (where nn is the  mount  request
            number).

        3.  Type PUSH and then type CONTINUE to return to DUMPER.

        4.  DUMPER displays the following message:

            ?Cannot mount tape, Mount refused by operator
            Try again?

        5.  Type NO, and DUMPER replies with:

|           Should I ask about this tape anymore during this run?
|  
|           If you answer no, other requests for the  tape  are  ignored.
|           If  you  answer  yes,  additional  requests  for the tape are
|           processed.

        6.  DUMPER then requests the next retrieval tape to be mounted.

        7.  You can then follow Steps 5 through 12 on the previous pages.


                                    3-32
                         UNSCHEDULED SOFTWARE TASKS                         UNSCHEDULED SOFTWARE TASKS


                            ----- Examples -----

        1.  Run DUMPER to retrieve only one file  as  requested  by  your
            System Manager.

            OPR>SHOW QUEUES RETRIEVAL-REQUESTS<RET>
            OPR>
            13:20:30            -- System Queues Listing --

            Retrieval Queue:
             Name   Req#    Tape 1  Tape 2  User
            -----   ----    ------  ------  ---------------------
            SCHEDU   27     400030  400040  MANAGER
            There is 1 job in the Queue (None in Progress)

            OPR>PUSH<RET>

             TOPS-20 Command processor 6(772)
            @ENABLE<RET>
            $DUMPER<RET>
            DUMPER>RETRIEVE PS:<MANAGER>SCHEDULE.TXT<RET>
            [Mounting tape volume 400040]

            13:22:00          --Tape Mount Request # 79--
                            Mount volume 400040, 9-TRACK, 1600 BPI, READ-ONLY
                            User OPERATOR, Job 6, Terminal 1
                            User's remark: RETRIEVAL TAPE


            Now physically locate tape volume 400040, mount the tape, and
            ready it on an available tape drive.

            13:25:00      --MTA1: Unlabeled tape mounted--
            ^C
             
             !
            <CTRL/C><CTRL/C>
            $POP<RET>
            OPR>IDENTIFY MTA1: REQUEST-ID 79<RET>
            OPR>
            13:26:34      --MTA1: Given to Request 79--
                        Volume 400040 now in use by
                        User OPERATOR, Job 6, Terminal 1
            OPR>PUSH<RET>
            $CONTINUE<RET>
            [Volume 400040 mounted]


            PS:<MANAGER>SCHEDULE.TXT.34;P777700;A341 (TO) PS:<MANAGER>SCHEDULE.TXT.34  [OK]


            12:40:54      --Tape Drive Released By User--
                        MTA1: Volume 400040 Being unloaded
            DUMPER>EXIT<RET>
            $POP<RET>
            OPR>






























                                    3-33
                         UNSCHEDULED SOFTWARE TASKS                         UNSCHEDULED SOFTWARE TASKS


        2.  Run DUMPER to retrieve all requests in the  retrieval  queue.
            In   addition,   two  tape  volumes  are  requested  for  the
            retrievals.

            OPR>PUSH<RET>

             TOPS-20 Command processor 6(772)
            @ENABLE<RET>
            $DUMPER<RET>
            DUMPER>RETRIEVE PS:<*>*.*.*<RET>
            [Mounting tape volume 23401]


            16:30:04          --Tape Mount Request # 97--
                            Mount volume 23401, 9-TRACK, 1600 BPI, READ-ONLY
                            User OPERATOR, Job 6, Terminal 1


            16:31:12          --MTA0: Unlabeled tape mounted--
              ^C
               !
            <CTRL/C><CTRL/C>
            $POP<RET>
            OPR>IDENTIFY MTA0: REQUEST-ID 97<RET>
            OPR>
            16:33:30          --MTA0: Given To Request 97--
                            Volume 23401 now in use by
                            User OPERATOR, Job 6, Terminal 1
            OPR>PUSH<RET>
            $CONTINUE<RET>
            [Volume 23401 mounted]




            PS:<SARTINI>CHAP01.RNO.1;P777700;A341 (TO) PS:<SARTINI>CHAP01.RNO.1    [OK]
            PS:<BROWN>YEARLY.CBL.3;P777700;A341 (TO) PS:<BROWN>YEARLY.CBL.3    [OK]
            PS:<HOVSEPIAN>OPR.TXT.5;P777700;A341 (TO) PS:<HOVSEPIAN>OPR.TXT.5    [OK]
            PS:<HURLEY>DECSPC.MEM.4;P777700;A341 (TO) PS:<HURLEY>DECSPC.MEM.4    [OK]
                        .
                        .
                        .
            PS:<TEEGARDEN>FORTRA.EXE.1;P777700;A341 (TO) PS:<TEEGARDEN>FORTRA.EXE.1    [OK]


            16:45:00      --Tape Drive Released By User--
                        MTA0: Volume 23401 Being unloaded

            16:45:03      -- Tape Mount Request # 98--
                        Mount volume 23402, 9-TRACK, 1600 BPI, READ-ONLY
                        User OPERATOR, Job 6, Terminal 1
                        User's remark: RETRIEVAL TAPE

            16:47:32      --MTA0: Unlabeled tape mounted--
              ^C
               !
            <CTRL/C><CTRL/C>
            $POP<RET>
            OPR>IDENTIFY MTA0: REQUEST-ID 98<RET>
            OPR>
            16:49:09      --MTA0: Given To Request 98--
                        Volume 23402 now in use by
                        User OPERATOR, Job 6, Terminal 1
            OPR>PUSH<RET>
            $CONTINUE<RET>
            [Volume 23402 mounted]




















                                    3-34
                         UNSCHEDULED SOFTWARE TASKS                         UNSCHEDULED SOFTWARE TASKS


            PS:<J.JONES>SAMPLE.MEM.2;P777700;A341 (TO)
            PS:<J.JONES>SAMPLE.MEM.2    [OK]
                      .
                      .
            PS:<ANDERSON>EXAM01.TST.5;P777700;A341 (TO)
            PS:<ANDERSON>EXAM01.TST.5    [OK]

            16:57:45          --Tape Drive Released By User--
                            MTA0: Volume 23402 Being unloaded
            DUMPER>EXIT<RET>
            $POP<RET>
            OPR>




   3.10  RESTORING DISK FILES WITH DUMPER   3.10  RESTORING DISK FILES WITH DUMPER

   If a user requests that you restore some files for him from a magnetic
   tape, be sure to find out:

        1.  What magnetic tape(s) to use.  You might have to use  a  tape
            containing a complete SAVE and some tapes from an INCREMENTAL
            SAVE.  You or the  user  should  look  through  the  terminal
            output kept for each DUMPER SAVE and determine which tapes to
            use.

        2.  What files to restore and what directory they are in.

        3.  What directory to put them into.

        4.  What special DUMPER status commands to use, if any.  (See the
            TOPS-20  User  Utilities  Guide  for details on DUMPER status
            commands.)
|  
|       5.  What version of DUMPER is being used.  Dumper may not restore
|           passwords correctly if you use an incorrect version of DUMPER
|           (see the TOPS-20  User  Utilities  for  details  on  password
|           encryption.)


                                    NOTE

           DUMPER does not work on a 7-track magnetic tape  drive
           (TU71).

   Then do the following:

        1.  Type PUSH to OPR.

        2.  Type ENABLE.

        3.  Type MOUNT TAPE setname:  with the /LABEL TYPE:  switch,  the
            /VOLIDS:   switch,  and the /NOWAIT switch.  The default mode
            is READ-ONLY.

        4.  If you are connected to another  structure,  CONNECT  to  the
            structure for the restore.

        5.  When MOUNTR replies with  the  Tape  Mount  Request  and  the
            acknowledgement  of  the  unlabeled tape being mounted, press
            <RET> and type POP to return to OPR.

        6.  If the label type is unlabeled, give the IDENTIFY command  to
            OPR to identify the tape drive to the mount request.

        7.  If the desired structure is not mounted for the restore, type
            PUSH to OPR, then give the command MOUNT STRUCTURE str:.


















                                    3-35
                         UNSCHEDULED SOFTWARE TASKS                         UNSCHEDULED SOFTWARE TASKS


        8.  When the system replies with  Tape  Drive  Given  To  Request
            number  (and  the structure is mounted), and after the system
            has displayed the message that defines the tape drive for the
            setname:, type DUMPER.

        9.  Type the following DUMPER commands.

            TAPE MTn:<RET>
            RESTORE str:<directory>filespec<RET>

            (See argument types for  filespecs  below  or  refer  to  the
            RESTORE command in the TOPS-20 User Utilities Guide.)

       10.  When DUMPER prompts again, type EXIT.

       11.  Type DISMOUNT TAPE MTn:.

       12.  Type DISABLE.

       13.  Type POP to return to OPR.

       14.  Remove the magnetic tape from the drive.

   Argument types for RESTORE:

        1.  To restore an entire user area, for example, to copy all  the
            files  of directory PS:<DIR> on tape to directory PS:<DIR> on
            disk:

            RESTORE PS:<DIR><RET>

        2.  To restore certain files on directory  PS:<DIR>  on  tape  to
            directory PS:<DIR> on disk:

            RESTORE PS:<DIR>file1,PS:<DIR>file2,...<RET>

        3.  To restore PS:<A>A.MAC to PS:<SOURCE>A.MAS and PS:<B>X.MAC to
            PS:<SOURCE>X.MAS:<RET>

            RESTORE <A>A.MAC <SOURCE>A.MAS,<B>X.MAC <SOURCE>X.MAS<RET>

        4.  To copy all files from PS:<SOURCES> on tape to  OLD:<SOURCES>
            on disk:

            (Be sure to MOUNT STRUCTURE OLD:  before you run DUMPER,  and
            DISMOUNT STRUCTURE OLD:  after you run DUMPER.)

            RESTORE PS:<SOURCES> OLD:<SOURCES><RET>

   In addition, you can specify either of two  optional  switches  before
   the file group descriptor.  These switches are as follows:

        1.  /NOTAPE-INFORMATION - specifies that no archive or  migration
            tape  information  is restored with the file(s).  This switch
            can be used when a  user  wishes  to  transfer  a  file  from
            another  system  to  his  disk  area  on  your  system.   The
            /NOTAPE-INFORMATION switch avoids bringing  tape  information
            from another system.

        2.  /TAPE-INFORMATION  -  specifies  that  tape  information   is
            restored  with  the  file(s).  This switch can be used when a
            user wishes to restore a file that was migrated  or  archived
            and  then  inadvertently  deleted  and expunged from his disk
            area.


                                    3-36
                         UNSCHEDULED SOFTWARE TASKS                         UNSCHEDULED SOFTWARE TASKS


   If you do not specify either switch, /TAPE-INFORMATION is the default.
   (For  more  information on DUMPER, refer to the TOPS-20 User Utilities
   Guide.)

                              ----- Hint -----

   If the user's files on the DUMPER tape(s) have  accounts  not  in  the
   installed ACCOUNTS-TABLE.BIN file, do the following:

        1.  Log in under the user who requested the file restoration  and
            specify a valid account for that user.

        2.  Follow Steps 3 through 9 in the procedure above, and type the
            DUMPER command:

                 ACCOUNT SYSTEM-DEFAULT<RET>

            before the RESTORE command to DUMPER.

        3.  Type LOGOUT.

                            ----- Example -----

   A user has requested a restore of all his files on structure MISC:.

        OPR>PUSH<RET>
         TOPS-20 Command processor 6(772)
        @ENABLE<RET>
        $MOUNT STRUCTURE MISC:<RET>

        18:13:12          --STRUCTURE MOUNTED--
                        Structure MISC mounted            

        $MOUNT TAPE DUMP09: /LABEL-TYPE:UNLABELED/VOLIDS:DUMP09/NOWAIT<RET>

        18:15:01          --Tape Mount Request # 115--
                        Mount Unlabeled volume DUMP09, READ-ONLY
                        User OPERATOR, Job 6, Terminal 1

        18:16:56          --MTA3: Unlabeled tape mounted--
        <RET>
        $POP<RET>
        OPR>IDENTIFY MTA3: REQUEST-ID 115<RET>
        OPR>
        18:19:20          --MTA3: Given To Request 115--
                        Volume DUMP09 now in use by
                        User OPERATOR, Job 6, Terminal 1
        OPR>PUSH<RET>
        [Tape set DUMP09, volume DUMP09 mounted]
        [DUMP09: defined as MT1:]
        $DUMPER<RET>
        DUMPER>TAPE MT1:<RET>
        DUMPER>RESTORE MISC:<SARTINI>*.*.*<RET>

        DUMPER tape # 1  Volid DUMP09, , Saturday, 14-Apr-79 1206
        MISC:<SARTINI>

        End of saveset
        DUMPER>EXIT<RET>
        $DISMOUNT TAPE MT1:<RET>
        [Tape dismounted]

        18:27:34          --Tape Drive Released By User--
                        MTA3: Volume DUMP09 Being unloaded
        $POP<RET>
        OPR>




















                                    3-37
                         UNSCHEDULED SOFTWARE TASKS                         UNSCHEDULED SOFTWARE TASKS


   3.11  ANSWERING STRUCTURE MOUNT REQUESTS WITH OPR   3.11  ANSWERING STRUCTURE MOUNT REQUESTS WITH OPR

   When a user issues a request to mount or dismount a structure with the
   TOPS-20  MOUNT  or  DISMOUNT command, ORION passes a message to OPR to
   inform you of  the  request.   You  can  then  respond  by  physically
   mounting  or dismounting the structure.  When the system receives this
   request, it has OPR  print  the  following  message  on  the  terminal
   running OPR:

        OPR>
        hh:mm:ss          --Structure Mount Request #nn--
                        Mount str: (alias ptr:)
                        User username, job nn, Terminal nn

                                   FREE DRIVES

|       DISK DRIVE INFORMATION                    DISK PACK INFORMATION
|             Chan-Cont   Disk     Mount                        Usage
|        Type   Drive    Status    Status   Count Name         Options
|        ---- --------- --------   ------   ----- ------------ -------------------------
|  
|       (List of available drives)

   where:

        hh:mm:ss         specifies the time  the  operator  received  the
                         message.

        Request#nn       specifies the request  number  assigned  to  the
                         mount request.

        Mount str:       specifies the physical name of the structure.

        User username    specifies the name of the user  who  issued  the
                         MOUNT request.

        Job nn,          specifies the job number the user  was  assigned
                         when he logged onto the system.

        Terminal nn      specifies the line number of the  terminal  from
                         which the user issued the MOUNT request.

        FREE DRIVES      specifies the disk drives that are available.

   The list of available disk drives contains those drives that meet  one
   of the following conditions:

        1.  The drive is off-line.

        2.  The drive has a nonrecognizable structure on it.

        3.  The drive is on-line, it has a recognizable structure on  it,
            no  user  has MOUNTed it, no user has CONNECTed to it, and no
            user has a file open on it.

   The list also provides the following information:

|       1.  The type of drive (RP04, RP06, RP07, RP20, RA60, or RA81).

        2.  The channel number of the drive.

        3.  The controller number of the drive.

        4.  The physical unit number of the drive.






















                                    3-38
                         UNSCHEDULED SOFTWARE TASKS                         UNSCHEDULED SOFTWARE TASKS


|       5.  The state of the drive (available/unavailable).
|  
|       6.  The mount status of the drive.
|  
|       7.  The mount count.
|  
|       8.  The structure name on the drive.
|  
|       9.  The attributes of the structure.
|  
|  You reply to a MOUNT request by doing the following:
|  
|       1.  Mount all the packs of the structure requested on any of  the
|           available   drives  in  the  list.   MOUNTR  then  makes  the
|           structure known to the system  and  cancels  the  outstanding
|           message.
|  
|           Once the structure is known  by  the  system,  OPR  prints  a
|           message similar to:
|  
|           OPR>
|           hh:mm:ss          --STRUCTURE MOUNTED--
|                           Structure str: (Alias:name) mounted
|           OPR>
|  
|           OPR  prints  the  preceding  message  only  after  you   have
|           physically mounted all the packs in the structure.
|  
|  
|                            ----- Hints -----
|  
|  OPR continues to handle other requests from other users, if you do not
|  respond  to  a  MOUNT  request with some action.  For example, if five
|  separate users request five different structure  MOUNTs  at  the  same
|  time, you can respond individually to each request in any order.































                                    3-39
                         UNSCHEDULED SOFTWARE TASKS                         UNSCHEDULED SOFTWARE TASKS


|  Sometimes you see a message similar to:
|  
|       OPR>
|       13:02:15          --STRUCTURE MOUNTED--
|                       Structure PS: (Alias:DIAG) mounted
|       OPR>
|  
|  without seeing a MOUNT request.  This happens when a user does a MOUNT
|  for  a  structure  that  the  system  found  on-line.  This is just an
|  informational message for you; it requires no action.
|  
|                           ----- Examples -----
|  
|       1.  In this example, a user wanted to MOUNT a structure  that  is
|           unavailable.   When  this  message  appears  on your console,
            CANCEL the MOUNT-REQUEST and give a reason.

            13:35:55          --MOUNT PROBLEM--
|                           Problem with structure ASDF: structure is set unavailable
                            User Konen, Job 32, Terminal 11

            13:36:01          --Structure Mount Request # 12--
                            Mount ASDF: (alias ASDF:)
                            User Konen, Job 32, Terminal 11

|                                           FREE DRIVES
|  
|           DISK DRIVE INFORMATION                   DISK PACK INFORMATION
|                 Chan-Cont   Disk    Mount    Mount               Usage
|           Type    Drive    Status   Status   Count Name         Options
|           ----  --------- --------  ------   ----- ------------ -------------------------
|           *RP06 0,  ,1    Avail     Offline
|           *RP07 1,  ,0    Avail     Free           FIAT   (1/1)
|            RP06 7,01,1    Avail     Free           CHIP   (1/1)
|            RA60 7,07,254  Avail     Free
|            RA81 7,08,18   Avail     Free           DRV18  (1/1)
|  
|           OPR>CANCEL MOUNT-REQUEST 12/REASON:ASDF IS UNAVAIABLE<RET>
            OPR>
            13:40:00          --Mount Request 12 Canceled--
            OPR>


        2.  In this example, a user has requested  that  structure  JACK:
            be MOUNTed.

            OPR>
|           12:40:15          --Structure Mount Request # 4--
|           Mount JACK: (alias JACK:)
|           User KOVALCIN, Job 2, Terminal 1
|  
|                                           FREE DRIVES
|  
|           DISK DRIVE INFORMATION                   DISK PACK INFORMATION
|                 Chan-Cont   Disk    Mount    Mount               Usage
|           Type    Drive    Status   Status   Count Name         Options
|           ----  --------- --------  ------   ----- ------------ -------------------------
|           *RP06 0,  ,1    Avail     Offline
|           *RP07 1,  ,0    Avail     Free                     FIAT   (1/1)
|            RP06 7,01,1    Avail     Free                     CHIP   (1/1)
|            RA60 7,07,254  Avail     Free
|            RA81 7,08,18   Avail     Free                     DRV18  (1/1)
|  
            OPR>


                                    3-40
                         UNSCHEDULED SOFTWARE TASKS                         UNSCHEDULED SOFTWARE TASKS


|           You can now physically  mount  JACK:   and  make  the  system
|           recognize  the  structure  as  being  on-line.   Request 4 is
|           canceled automatically and the user will be notified.

            OPR>
            12:43:33          --STRUCTURE MOUNTED--
|                           Structure JACK: (Alias:JACK) mounted
            OPR>


























































                                    3-41
                         UNSCHEDULED SOFTWARE TASKS                         UNSCHEDULED SOFTWARE TASKS


   3.11.1  Mounting a Structure with MOUNT   3.11.1  Mounting a Structure with MOUNT

   If you need to mount a structure, other than the structures  that  are
   normally  mounted  at  system  start-up,  you  should  give  the MOUNT
   command.  For example, to mount a structure called  SNARK,  you  would
   give the following command:

        @MOUNT STRUCTURE SNARK:<RET>

   If the structure you want to mount has the same  physical  name  as  a
   structure  that  is already mounted, you must assign an alias name for
   the structure you want to mount.  The alias name is placed  after  the
   word STRUCTURE followed by the /STRUCTURE-ID switch and actual name of
   the structure.  You must have WHEEL or OPERATOR privileges enabled  to
   perform  this  task.   For  example,  to specify an alias name for the
   structure SNARK:  you would give the following command:

        $MOUNT STRUCTURE CHECK:  /STRUCTURE-ID SNARK:<RET>

   In the above command you have mounted a structure  with  the  physical
   name  SNARK:  and the alias name CHECK:.  Any user wishing to use this
   structure has to refer to it by the structure name CHECK:.

   If a disk drive (RP04 or RP06) containing a structure, other than PS:,
   starts  to  have  hardware problems, you can remove the structure from
   the disk drive you must move the structure to an  available  drive  of
   the  same  type  but  you  do not have to give a DISMOUNT command.  If
   there are no available disk drives, and the structure you  are  moving
   is  necessary  for  normal system operation, you must first DISMOUNT a
   structure on another disk drive of the same type and  then  MOUNT  the
   necessary structure on that drive.

                                    NOTE

           When you assign an alias  name  to  a  structure,  the
           physical  name  of  the structure (which is written in
           the home blocks of the  structure)  does  not  change.
           Refer  to  the TOPS-20 System Manager's Guide for more
           information on alias names.

                            ----- Example -----

   A user from another installation wants to mount his  public  structure
   on  your  system.  Because you already have a public structure on your
   system, you must assign his structure an alias.

        OPR>PUSH<RET>
         TOPS-20 Command Processor 6(772)
        @ENABLE<RET>
        $MOUNT STRUCTURE CHECK: /STRUCTURE-ID PS:<RET>
        [Mount Request CHECK: QUEUED, Request-id 57]















                                    3-42
                         UNSCHEDULED SOFTWARE TASKS                         UNSCHEDULED SOFTWARE TASKS


   The terminal running OPR displays the following message:

        10:11:40       --Structure Mount Request # 57--
                        Mount PS: (alias CHECK:)
                        User OPERATOR, Job 6, Terminal 1

|                               FREE DRIVES
|  
|       DISK DRIVE INFORMATION                    DISK PACK INFORMATION
|             Chan-Cont    Disk    Mount    Mount               Usage
|        Type   Drive    Status    Status   Count Name         Options
|        ---- --------- --------   -------  ----- ------------ -------------------------
|        *RP06 0,  ,1   Avail      Offline
|        *RP07 1,  ,1   Avail      Free           FIAT   (1/1)
|         RP06 7,01,1   Avail      Free           CHIP   (1/1)
|         RA60 7,07,254 Avail      Offline
|         RA81 7,08,18  Avail      Free           DRV18  (1/1)

   Whether you mount the structure before or  after  the  MOUNT  command,
   when  the  system recognizes the structure as mounted and on-line, the
   following message appears on your terminal:

        Structure CHECK: mounted

   On the terminal running OPR, the following message is displayed.

        10:12:35          --STRUCTURE MOUNTED--
                        Structure PS: (Alias:CHECK) mounted


                                  WARNING

           If the system goes down  while  a  structure  with  an
           alias  name  is mounted, you should put the disk drive
           that the structure with  the  alias  name  is  mounted
           off-line  prior  to restarting the system.  The reason
           for this is that when the  system  is  restarted,  the
           monitor  looks  at  the physical name of the structure
           rather than the  alias  name  and  reports  errors  of
           duplicate  structures  mounted.   After the system has
           restarted, bring the disk drive back on-line and mount
           the structure again with an alias name.

                         ----- Error Message -----

        OPR>
        10:30:11          --MOUNT PROBLEM--
                        Problem with structure : Invalid structure name
                        User OPERATOR, Job 6, Terminal 1
        OPR>

   You have specified a structure name that is invalid and/or the  system
   cannot recognize the name specified.  You might have typed one or more
   non-alphanumeric  characters  in  the  name,  the  name  exceeds   six
   alphanumeric  characters,  or  the  structure  name  has the name of a
   system logical name.  Issue the  MOUNT  command  again,  specifying  a
   structure name that is valid and/or can be recognized by the system.









                                    3-43
                         UNSCHEDULED SOFTWARE TASKS                         UNSCHEDULED SOFTWARE TASKS


   3.11.2  Answering Structure DISMOUNT Requests with OPR   3.11.2  Answering Structure DISMOUNT Requests with OPR

|  When a user gives  a  valid  DISMOUNT  STRUCTURE  str:   command,  OPR
|  prints:

   OPR>
   hh:mm:ss      --STRUCTURE DISMOUNTED--
|               Structure PH4 dismounted

                 --DISMOUNT STRUCTURE--
|               Remove PH4:
                User HOVSEPIAN, Job 21, Terminal 25

|                               MOUNTED DRIVES
|  
|               DISK DRIVE INFORMATION            DISK PACK INFORMATION
|                     Chan-Cont   Disk    Mount    Mount              Usage
|                Type   Drive    Status   Status   Count Name         Options
|                ---- ---------  -------- ------   ----- ------------ -------------------
|                RP06 0,  ,3     Avail    Free     1     PH4    (1/1)

   The status display prints the following:
|  
|       1.  The type of disk.  An asterisk (*) to the left  of  the  disk
|           drive type indicates a disk drive has an external port.
|  
|       2.  The channel, controller, and drive number.
|  
|       3.  The state of the disk drive (available/unavailable).
|  
|       4.  The mount status of the disk drive.
|  
|       5.  The count of the number of users who requested a mount of the
|           structure.
|  
|       6.  The name of the structure.
|  
|       7.  The attributes of the structure.
|  
   You must answer a DISMOUNT request by doing one of the following:

        1.  If the following DISMOUNT message appears at your console,  a
            user  has issued a DISMOUNT STRUCTURE str: command.  However,
            other users are still using the structure.

            OPR>
            16:52:13 <19>    --DISMOUNT QUERY--
                            Removal of structure AHPA: (Alias AHPA:)
                            requested.
                            Other jobs are currently using it. Should
                            removal request be processed (YES or NO)?
                            User KONEN, Job 39, Terminal 11

            OPR>


            If you are to honor the DISMOUNT in  this  case,  you  should
            SEND a message to all other users that the structure is being
            dismounted.  Otherwise, answer the DISMOUNT  QUERY  with  NO.
            If you say "NO", the DISMOUNT request is deleted.

            Once all users have DISMOUNTed the structure,  you  can  then
            complete  the DISMOUNT by removing all packs of the structure
            from their drives after seeing the following message:


                                    3-44
                         UNSCHEDULED SOFTWARE TASKS                         UNSCHEDULED SOFTWARE TASKS


|           OPR>
|           14:36:06          -- STRUCTURE DISMOUNTED --
|                           Structure AP20 dismounted
|           OPR>
|           14:36:07          -- DISMOUNTED STRUCTURE --
|           Remove AP20: (alias AP20:)
|           User OPERATOR, Job 2, Terminal 233
|  
|           DISK DRIVE INFORMATION                   DISK PACK INFORMATION
|                 Chan-Cont   Disk    Mount    Mount               Usage
|            Type   Drive    Status   Status   Count Name         Options
|           ----  --------- --------  ------   ----- ------------ --------------------------
|           *RP06 0,  ,1    Avail     Mounted





















































                                    3-45
                         UNSCHEDULED SOFTWARE TASKS                         UNSCHEDULED SOFTWARE TASKS


        2.  If there is a list of free drives and  the  structure  to  be
            removed  appears  in  the  list,  remove  all  packs  in  the
            structure from their drives.

        3.  Do not do anything if you see the message:

            OPR>
            hh:mm:ss        --Message n ABORTED--
            OPR>
            hh:mm:ss          --STRUCTURE DISMOUNT ABORTED--
                              User name, Job number, Terminal number
            OPR>

            In this case, the user has canceled his own request.
|  
|       4.  If you need to MOUNT a structure that has been DISMOUNTed but
|           not  removed  from  the drive, use the MOUNT command in OPR>.
|           Type:
|  
|                OPR>MOUNT STRUCTURE alias /Structure-Id:xx<RET>
|  
|           OPR>MOUNT STRUCTURE AP20:/Structure-Id:AP20:<RET>
|  
|           OPR>
|  
|           11:50:16            -- Mount request by operator completed --
|                             Structure AP20: mounted as alias AP20




   3.11.3  Removing a Structure with DISMOUNT   3.11.3  Removing a Structure with DISMOUNT

   If you need to remove a structure from the  system  (perhaps  to  have
   maintenance done on a drive, to run CHECKD on a structure, or to mount
   another structure), perform the  following  procedures  in  the  order
   given below:

        1.  Whenever OPR outputs a list of packs for  removal,  check  if
            the  structure  you want to remove is in the list.  If it is,
            you can remove all the packs  in  the  structure  before  you
            respond  to  the  current  OPR  request.  If it is not in the
            list, go to Step 2.

        2.  If the structure does not appear in the  available  list,  do
            the following with OPR commands:

            a.  Type a SET STRUCTURE str: UNAVAILABLE, so  that  no  user
                can MOUNT the structure and no batch or print request can
                be scheduled for that structure.

            b.  If you intend to run CHECKD on the structure,  also  type
                SET STRUCTURE str: IGNORED.

            c.  Type a SEND ALL message to notify all users  to  DISMOUNT
                the structure by a certain time.
|  
|           d.  If you want to remove the  structure  from  the  drive(s)
|               after the time is up, type DISMOUNT STRUCTURE str: (with)
|               REMOVAL.  However, to run CHECKD on the structure, follow
                Step 3, a.  through d.  and then type CHECKD.





                                    3-46
                         UNSCHEDULED SOFTWARE TASKS                         UNSCHEDULED SOFTWARE TASKS


            e.  If OPR outputs the structure name in the  list  of  packs
                available  for  removal,  immediately set one pack of the
                structure off-line.  Otherwise, go to Step 3.

            f.  Remove the packs of the structure  from  the  drives  you
                need.


        3.  If the structure  does  not  appear  in  the  list  (item  1.
            above), you can forcibly dismount the structure by taking the
            following steps.
|  
|           a.  Type SHOW STATUS STRUCTURE str name:.

            b.  Type SEND ALL to give those users of the structure a last
                warning to DISMOUNT the structure.

            c.  Type SET STRUCTURE str: UNAVAILABLE.
|  
|           d.  Type DISMOUNT STRUCTURE str: (with) REMOVAL.

            e.  Because the structure now appears in the  OPR  output  of
                packs  available  for  removal,  remove  the packs of the
                structure from the drives you need.


   When you want OPR to mount a structure that has been set IGNORED,  set
   the structure to be ACKNOWLEDGED.






































                                    3-47
                         UNSCHEDULED SOFTWARE TASKS                         UNSCHEDULED SOFTWARE TASKS


                            ----- Example -----

   For example, if you want to remove a structure XYZ from the system  by
   4  P.M.,  and  there are currently users of the structure, declare the
   structure UNAVAILABLE about ten minutes before 4 P.M.  Then warn users
   to DISMOUNT XYZ.

        OPR>SET STRUCTURE XYZ: UNAVAILABLE<RET>
        OPR>
        15:48:03          --STRUCTURE STATUS SET--
                        XYZ: set UNAVAILABLE for use by system

        OPR>SEND ALL FINISH USING XYZ AND DISMOUNT IT IN 10 MIN.<RET>
        OPR>
        15:48:15
        From Operator Terminal 1: FINISH USING XYZ AND DISMOUNT IT IN 10 MIN.
        OPR>


   At 4 P.M.,  type the DISMOUNT command.

|       OPR>DISMOUNT STRUCTURE XYZ: (with) REMOVAL<RET>
        16:00:34          --STRUCTURE DISMOUNTED--
                          Structure XYZ: dismounted

        OPR>
|  
|  In a CFS-20 configuration, structures can be set EXCLUSIVE for use  by
|  one  system  or SHARED for use by both systems.  You do this by typing
|  the following OPR> commands:
|  
|       SET STRUCTURE str name:EXCLUSIVE<RET>
|  
|            or
|  
|       SET STRUCTURE str name:SHARED<RET>
|  
|  If you then need to dismount and remove  a  structure  from  a  CFS-20
|  configuration, perform the following steps in the order given below:
|  
|       1.  If the structure is set  EXCLUSIVE,  perform  steps  1  to  3
|           listed  above  and add REMOVAL to the DISMOUNT STRUCTURE str:
|           command.
|  
|       2.  If the structure is set SHARED, perform the following steps:
|  
|           a.  Type a SEND ALL message  to  notify  all  users  on  your
|               system to DISMOUNT the structure by a certain time.
|  
|           b.  Type a SEND ALL message to notify all users on the  other
|               systems to DISMOUNT the structure by a certain time.
|  
|           c.  Type DISMOUNT STRUCTURE str:  (with) NO-REMOVAL  for  the
|               other systems.
|  
|           d.  Type DISMOUNT STRUCTURE  str:   (with)  REMOVAL  on  your
|               system.
|  
|           e.  Remove the structure from the system.
|  
|  
|  
|                                   NOTE
|  
|          If the optional argument,  REMOVAL  or  NOREMOVAL,  is
|          omitted,  the  structure  will default to removal on a
|          non-CFS-20 system and non-removal on a CFS-20 system.
|  
|  
|  
|  
|                           ----- Examples -----
|  
|       1.  Give the DISMOUNT STRUCTURE AP20:  (with) NO-REMOVAL command.
|  
|           OPR>DISMOUNT STR AP20: (with) NO-REMOVAL<RET>
|           OPR>
|  
|           11:49:35  <2>     -- DISMOUNT QUERY --
|                           Dismount of structure AP20: (Alias AP20:) requested.
|                           Other jobs are currently using it. Should
|                           dismount request be processed (Yes or No)?
|                           User WONG, Job 37, Terminal 10
|           OPR>RES 2 YES<RET>
|  
|           OPR>[Structure AP20 has been dismounted]
|  
|           11:49:41          -- STRUCTURE DISMOUNTED --
|                           Structure AP20 dismounted
|  
|           11:49:41          -- DISMOUNT STRUCTURE --
|           Do not remove AP20: (alias AP20:0
|           Structure is set unavailable for mounting
|           User WONG, Job 37, Terminal 10
|           DISK DRIVE INFORMATION                  DISK PACK INFORMATION
|                 Chan-Cont   Disk    Mount   Mount              Usage
|            Type   Drive    Status  Status   Count Name         Options
|            ---- --------- -------- ------   ----- ------------ -------------------------
|           *RP06 0,  ,4    Avail    Free           AP20   (1/1)
                                    3-48
                         UNSCHEDULED SOFTWARE TASKS                         UNSCHEDULED SOFTWARE TASKS


|       2.  Give the DISMOUNT STRUCTURE AP20:  (with) REMOVAL command.
|  
|           OPR>DISMOUNT STRUCTURE AP20: (with) REMOVAL<RET>
|           OPR>
|           11:48:30  <1>     -- DISMOUNT QUERY --
|                           Dismount of structure AP20: (Alias AP20:) requested.
|                           Other jobs are currently using it. Should
|                           dismount request be processed (Yes or No)?
|                           User WONG, Job 37, Terminal 10
|           OPR>RES 1 YES<RET>
|           OPR>[Structure AP20 has been dismounted]
|  
|           11:48:36          -- STRUCTURE DISMOUNTED --
|                           Structure AP20 dismounted
|  
|           11:48:36          -- DISMOUNT STRUCTURE --
|           Remove AP20: (alias AP20:)
|           Structure is set unavailable for mounting until it has been removed
|           User WONG, Job 37, Terminal 10
|           DISK DRIVE INFORMATION                  DISK PACK INFORMATION
|                 Chan-Cont   Disk    Mount   Mount              Usage
|            Type   Drive    Status  Status   Count Name         Options
|            ---- --------- -------- ------   ----- ------------ -------------------------
|           *RP06 0,  ,4    Avail    Free           AP20   (1/1)



   3.11.4  Canceling Mount Requests   3.11.4  Canceling Mount Requests

   If you are unable to satisfy a user's mount request,  you  can  delete
   the  mount  request by giving the OPR command CANCEL MOUNT REQUEST nn.
   You should give a reason why you are canceling the mount request.  You
   can do this by giving the /REASON switch with the CANCEL command.

   For example, you cancel a mount request because there is  not  a  free
   drive.

        OPR>CANCEL MOUNT-REQUEST nn /REASON:THERE ARE NO FREE DRIVES<RET>

   where "nn" is the request number assigned to the mount request.


                            ----- Example -----

        Cancel mount request 204.

        OPR>
        OPR>CANCEL MOUNT-REQUEST 204/REASON:There are no disk drives available<RET>
        OPR>
        11:49:15          --Mount Request 204 Canceled--
















                                    3-49
                         UNSCHEDULED SOFTWARE TASKS                         UNSCHEDULED SOFTWARE TASKS


   3.11.5  Setting Disk Drives Available or Unavailable   3.11.5  Setting Disk Drives Available or Unavailable

   You can set a disk drive UNAVAILABLE for assignment by the  system  by
   giving the following OPR command:

        OPR>SET DISK-DRIVE CHANNEL n CONTROLLER n DRIVE n UNAVAILABLE<RET>

   where:

        CHANNEL n      specifies the channel number of the disk drive.

|       CONTROLLER n   specifies the controller for the disk drive.

        DRIVE n        specifies the physical unit number of the drive.

   When you give this command, the system prints:

        ENTER TEXT AND TERMINATE WITH ^Z

   The system now waits for you to type a reason explaining why  you  are
   setting  the  drive  unavailable.  A reason you would set a disk drive
   unavailable is that there was a hardware problem with the disk  drive.
|  It  is  also recommended that you set the structures on the disk drive
|  UNAVILABLE when you set the disk drive UNAVAILABLE.

   To set a disk drive AVAILABLE for assignment by the system,  give  the
   following command:

        OPR>SET DISK-DRIVE CHANNEL n DRIVE n AVAILABLE<RET>



                            ----- Examples -----

        1.  Set disk drive 4  on  channel  1  UNAVAILABLE  because  of  a
            hardware problem.

            OPR>SET DISK-DRIVE CHANNEL 1 DRIVE 4 UNAVAILABLE<RET>
            ENTER TEXT AND TERMINATE WITH ^Z
            DISK DRIVE 4 HAS A HARDWARE PROBLEM^Z
                                                !
                                             <CTRL/Z>

            OPR prints:

            OPR>
            17:30:39        --Disk Drive Set Unavailable--
                     Chan 1 Drive 4 set unavailable for mounting by MOUNTR
            OPR>

        2.  Set disk drive 4 on channel 1 AVAILABLE  after  the  hardware
            problem has been corrected.

            OPR>SET DISK DRIVE CHANNEL 1 DRIVE 4 AVAILABLE<RET>

            OPR prints:

            17:32:43        --Disk Drive Set Available--
                      Chan 1 Drive 4 set available for mounting by MOUNTR
            OPR>






                                    3-50
                         UNSCHEDULED SOFTWARE TASKS                         UNSCHEDULED SOFTWARE TASKS


   3.12  SETTING THE PORT CI AVAILABLE/UNAVAILABLE|  3.12  SETTING THE PORT CI AVAILABLE/UNAVAILABLE
|  
|  If your installation uses the CI for HSC50 disks or CFS, the  CI  port
|  is AVAILABLE by default.  There may be times, however, when the System
|  Manager determines that the CI port must be set UNAVAILABLE.   Setting
|  the  CI port UNAVAILABLE ends the system's use of the CI and any disks
|  that use the CI.
|  
|  Most often, the CI port is set UNAVAILABLE when  there  is  a  serious
|  hardware  problem and it is necessary to run diagnostics.  Setting the
|  CI port UNAVAILABLE is not a standard  procedure  and  should  not  be
|  performed without approval from the System Manager.
|  
|  To set the CI port UNAVAILABLE, perform the following steps:
|  
|       1.  Type SET PORT CI UNAVAILABLE <RET>.
|  
|       2.  Once you see the message that indicates which structures  are
|           affected,  send  a system message telling users when you plan
|           to set the CI  port  UNAVAILABLE  and  which  structures  are
|           affected.
|  
|       3.  Respond  to  the  message  indicating  which  structures  are
|           affected  by  typing RESPOND <RESPONSE NUMBER> and one of the
|           following:
|  
|           PROCEED - The  PROCEED  response  begins  the  SET  PORT   CI
|           UNAVAILABLE  procedure.  PROCEED is the standard response for
|           setting the CI port UNAVAILABLE.
|  
|           FORCE - The FORCE response dismounts all structures and  sets
|           the   CI   UNAVAILABLE   with  no  further  operator  action.
|           Structures are dismounted whether or not they are in use.
|  
|           ABORT - The  ABORT  response  cancels   the   SET   PORT   CI
|           UNAVAILABLE  procedure.   If  the  SET  PORT  CI  UNAVAILABLE
|           procedure is aborted at this time, system  operation  is  not
|           changed.
|  
|  EACH STRUCTURE AND DISK-DRIVE IS NOW HANDLED ON AN  INDIVIDUAL  BASIS.
|  DEPENDING ON THE MESSAGE YOU SEE, DO ONE OF THE FOLLOWING:
|  
|       4.  If a structure is on a dual-ported disk-drive:
|  
|           a.  You receive  a  message  indicating  that  the  drive  is
|               dual-ported.   Respond to the message by setting the port
|               switch to a single port following standard procedures and
|               then type one of the following:
|  
|               PROCEED - The PROCEED reponse  indicates  that  the  port
|               switch is set to one system and is no longer dual-ported.
|               The process of setting the CI port UNAVAILABLE continues.
|               You  DISMOUNT  any mounted structure by responding to the
|               request for DISMOUNT.
|  
|               FORCE - The FORCE response indicates that the  status  of
|               the disk drive should be ignored.  The port switch is not
|               changed but the process of  setting  the  CI  UNAVAILABLE
|               continues.   Use  caution  with  this  response.  CFS may
|               disallow use of a dual-ported disk if the FORCE  response
|               is given.  Any MOUNTed structure is DISMOUNTed.
|  
|               ABORT - The ABORT  response  terminates  the  process  of
|               setting  the  CI  port UNAVAILABLE.  All previous actions
|               remain, but the CI port remains AVAILABLE.

                                    3-51
                         UNSCHEDULED SOFTWARE TASKS                         UNSCHEDULED SOFTWARE TASKS


|       5.  If the structure is mounted on a disk drive connected to  the
|           CI:
|  
|           You have to DISMOUNT the structure.  DISMOUNT  the  structure
|           by responding to the request for DISMOUNT.
|  
|       6.  If the structure is not connected to a drive on the CI and is
|           not dual-ported:
|  
|           The structure is  set  EXCLUSIVE  to  your  system.   If  the
|           structure  cannot  be  set  EXCLUSIVE  by the system, you are
|           prompted for an action.  You have to DISMOUNT  the  structure
|           (with) REMOVAL from the other systems before the structure is
|           set EXCLUSIVE to your system.
|  
|       7.  When all structures  are  dismounted,  all  dual-ported  disk
|           drives  set,  and necessary structures are set EXCLUSIVE, you
|           see a message indicating that the CI port is set UNAVAILABLE.
|  
|       8.  The CI port  remains  UNAVAILABLE  until  you  set  the  port
|           AVAILABLE.
|  
|       9.  If at any point during the process, you refuse to dismount  a
|           structure or handle a dual-ported disk drive, the SET PORT CI
|           UNAVAILABLE procedure is aborted.  All previously  dismounted
|           structures   remain   dismounted  but  the  CI  port  remains
|           AVAILABLE.
|  
|  
|  
|          1.  At  any  point  during  the  procedure,  you   can
|              dismount  all  structures  at  one  time using the
|              DISMOUNT procedures in Section  3.11.3.   In  this
|              case,  when  you  type  PROCEED during the CI port
|              procedure, you are prompted  only  for  structures
|              that have been overlooked.
|  
|          2.  At any point during the procedure, you can set all
|              drives  that  are  dual-ported  to  a single port.
|              When  you  type  PROCEED  during   the   CI   port
|              procedure,  you  are only prompted for drives that
|              have been overlooked.
|  
|          3.  If you type the SET PORT  CI  UNAVAILABLE  command
|              and  your  installation  does  not  have a CI, you
|              receive an error message.
|  
|  
|  
|  
|  
|                           ----- Examples -----
|  
|       1.  Set the PORT CI Unavailable using the Proceed response.
|  
|           OPR>SET PORT CI UNAVAILABLE <RET>
|           OPR>
|           12:14:48  <1>     -- Port Unavailable Procedure Notice --
|           Setting CI Port 7 UNAVAILABLE
|  
|           The following structure(s) need to be dismounted or removed.
|  
|           DISK DRIVE INFORMATION                   DISK PACK INFORMATION
|                 Chan-Cont   Disk    Mount    Mount              Usage
|            Type   Drive    Status   Status   Count Name         Options

                                    3-52
                         UNSCHEDULED SOFTWARE TASKS                         UNSCHEDULED SOFTWARE TASKS


|            ---- --------- --------  ------   ----- ------------ --------------------------
|           *RP06 0,  ,2    Avail     Mounted  1     AP20   (1/1)
|            RP06 7,00,1    Avail     Mounted  1     DALE   (1/1)
|            RA81 7,07,5    Avail     Mounted  1     EXODUS (1/1)
|            RA60 7,07,254  Avail     Mounted  1     DRV354 (1/1)
|            RA81 7,07,18   Avail     Mounted  0     DRV18  (1/1)
|                 NOTE: Channel 7 indicates CI channel
|                 (*) indicates potential external port
|  
|           Type 'RESPOND <number> option' where 'option' is one of the
|           following:
|  
|                ABORT    To cancel Port Unavailable Procedure.
|                PROCEED  To follow  normal  port  unavailable  procedure
|                         verifying each structure change.
|                FORCE    To proceed with no further  notification.   Use
|                         this option with extreme caution.
|  
|           OPR>RESPOND 1 PROCEED <RET>
|           OPR>
|           12:15:33          -- Port Unavailable Procedure Notice --
|                           Structure CHIP set exclusive due to port unavailable operation
|           OPR>
|           12:15:34  <2>     -- Port Unavailable Procedure Notice --
|  
|           The following dual ported disk  drive  must  be  resolved  to
|           continue SET PORT CI UNAVAILABLE:
|  
|           DISK DRIVE INFORMATION                   DISK PACK INFORMATION
|                 Chan-Cont   Disk    Mount    Mount              Usage
|            Type   Drive    Status   Status   Count Name         Options
|            ---- -------   --------  ------   ----- ------------ -------------------------
|           *RP06 0,  ,2    Avail     Mounted  1     AP20   (1/1)
|                 (*) indicates potential external port
|  
|           After the dual-ported disk has been  resolved  Type  'RESPOND
|           <number> option' where 'option' is one of the following:
|  
|                ABORT    To cancel Port Unavailable Procedure.
|                PROCEED  The  drive  has  been  single  ported  to  this
|                         system.
|                FORCE    To proceed  and  ignore  the  porting  of  this
|                         drive.  The drive will be set unavailable.
|  
|           OPR>RESPOND 2 PROCEED <RET>
|           OPR>
|           12:17:49  <3>     -- Port Unavailable Procedure Notice --
|  
|           The following dual-ported disk  drive  must  be  resolved  to
|           continue SET PORT CI UNAVAILABLE:
|  
|           DISK DRIVE INFORMATION                   DISK PACK INFORMATION
|                 Chan-Cont   Disk     Mount   Mount              Usage
|            Type   Drive    Status   Status   Count Name         Options
|            ---- --------- --------  ------   ----- ------------ -------------------------
|           *RP07 1,  ,0    Avail     Offline
|                 (*) indicates potential external port
|  
|           After the dual ported disk has been  resolved  Type  'RESPOND
|           <number> option' where 'option' is one of the following:
|  
|                ABORT    To cancel Port Unavailable Procedure.
|                PROCEED  The  drive  has  been  single  ported  to  this
|                         system.
|                FORCE    To proceed  and  ignore  the  porting  of  this

                                    3-53
                         UNSCHEDULED SOFTWARE TASKS                         UNSCHEDULED SOFTWARE TASKS


|                         drive.  The drive will be set unavailable.
|  
|           OPR>RESPOND 4 FORCE
|           OPR>
|           12:19:22          -- Disk Drive Set Unavailable --
|                           Channel 1 Drive 0 set unavailable for mounting by MOUNTR
|           OPR>
|           12:19:23          -- Disk Drive Set Unavailable --
|                           Channel 7 Controller 0 Drive 1 set unavailable for mounting by MOUNTR
|  
|           12:19:23  <5>   -- Port Unavailable Procedure Notice --
|  
|           Dismount of structure DALE: (Alias DALE:) requested.
|           Other jobs are currently using it.
|           Should dismount request be processed (Yes or No)?
|           User WONG, Job 3, Terminal 1
|  
|           OPR>RESPOND 5 YES
|           OPR>
|  
|           12:20:00       -- DISMOUNT STRUCTURE SUCCEEDED AS PART OF PORT OPERATION --
|                        Structure DALE: (alias DALE:) dismounted
|                        User WONG, Job 3, Terminal 1
|  
|           12:20:01       -- Disk Drive Set Unavailable --
|                        Channel 7 Controller 7 Drive 5 set unavailable for mounting by MOUNTR
|  
|           12:20:01  <6>   -- Port Unavailable Procedure Notice --
|                                    .
|                                    .
|                                    .
|  
|           12:21:24       -- Port Unavailable Operation Completed --
|                        Port Set Unavailable
|  
|       2.  Set the PORT CI AVAILABLE
|  
|           OPR>SET PORT CI AVAILABLE <RET>
|           OPR>
|           02:22:10       -- Port Available Operation Completed --
|                        The following disk drive(s) have been returned to available:
|                        Channel 1 Drive 0 set to available
|                        Channel 7 Controller 0 Drive 1 set available
|                        Channel 7 Controller 7 Drive 5 set available
|                        Channel 7 Controller 7 Drive 376 set available
|                        Channel 7 Controller 7 Drive 22 set available
|                        Port set available
|  























                                    3-54
                         UNSCHEDULED SOFTWARE TASKS                         UNSCHEDULED SOFTWARE TASKS


   3.12.1  Displaying Disk Drive Status   3.12.1  Displaying Disk Drive Status

   You can display the status of the disk drives  with  the  SHOW  STATUS
   DISK-DRIVES  command.   With  this command, you can specify one of the
   following:

        1.  The /ALL switch, to display both FREE and MOUNTED disk drives
            and their current status

            OPR>SHOW STATUS DISK-DRIVES /ALL

        2.  The /FREE switch, to display all disk drives  that  are  FREE
            for mounting

            OPR>SHOW STATUS DISK-DRIVES /FREE

        3.  The /MOUNTED switch, to display those disk  drives  that  are
            currently mounted and being accessed

            OPR>SHOW STATUS DISK-DRIVES /MOUNTED

   If you do not specify any switch, the SHOW STATUS DISK-DRIVES  command
   defaults to /ALL.

|  The output from the SHOW STATUS  DISK-DRIVES  command  with  the  /ALL
|  switch specified displays:

        1.  The type of disk drive (RP04,  RP06,  RP07,  RP20,  RA60,  or
|           RA81).   An  asterisk (*) next to the type of drive indicates
|           that the disk drive is potentially dual-ported.

        2.  The channel, controller, and drive number.
|  
|       3.  The state of the disk-drive (Available/Unavailable).
|  
|       4.  The mount status of the disk drive.
|  
|       5.  The count number of users who have requested a mount  of  the
|           structure.
|  
|       6.  The name of the structure on the  drive  and  the  number  of
|           packs in the structure.
|  
|       7.  Any usage options, if these are specified.
|  
|  Information for both FREE and MOUNTED DISK-DRIVES is  shown  with  the
|  /ALL switch specified.
|  
|  The OUTPUT from the SHOW STATUS DISK-DRIVES  command  with  the  /FREE
|  switch  specified, displays information about drives that are free for
|  mounting.  There may be a structure on the drive but the structure has
|  not been mounted with the MOUNT command.
|  
|  The output from the SHOW STATUS DISK-DRIVES command with the  /MOUNTED
|  switch  specified displays information about drives that are currently
|  mounted.



                            ----- Examples -----

        1.  Specify the SHOW STATUS DISK-DRIVES command  with  the  /FREE
            switch.

            OPR>SHOW STATUS DISK-DRIVE /FREE<RET>
|           OPR>
|           12:11:15          -- Disk Drive Status --
|  
|                                   FREE DRIVES


                                    3-55
                         UNSCHEDULED SOFTWARE TASKS                         UNSCHEDULED SOFTWARE TASKS


|           DISK DRIVE INFORMATION                   DISK PACK INFORMATION
|                 Chan-Cont   Disk     Mount   Mount              Usage
|            Type   Drive    Status   Status   Count Name         Options
|            ---- --------- --------  ------   ----- ------------ -------------------------
|           *RP06 0,  ,1    Avail     Offline
|           *RP07 1,  ,0    Avail     Free           FIAT   (1/1)
|            RP06 7,01,1    Avail     Free           CHIP   (1/1)
|            RA60 7,07,254  Avail     Offline
|            RA81 7,08,18   Avail     Free           DRV18   (1/1)
|            RA81 7,08,5    Avail     Offline
|                 NOTE: Channel 7 indicates CI channel
|                 (*) indicates potential external port






















































                                    3-56
                         UNSCHEDULED SOFTWARE TASKS                         UNSCHEDULED SOFTWARE TASKS


        2.  Specify the SHOW STATUS DISK-DRIVES command with the /MOUNTED
            switch.

|           OPR>SHOW STATUS DISK-DRIVE /MOUNTED<RET>
|           OPR>
|           12:11:28          -- Disk Drive Status --
|  
|                                   MOUNTED DRIVES
|  
|           DISK DRIVE INFORMATION                   DISK PACK INFORMATION
|                 Chan-Cont   Disk    Mount    Mount              Usage
|            Type   Drive    Status   Status   Count Name         Options
|            ---- --------- --------  ------   ----- ------------ -------------------------
|            RP06 0,  ,0     Avail    Mounted  0     DALE   (1/1)
|           *RP06 0,  ,2     Avail    Mounted  1     AP20   (1/1)
|            RA81 7,07,5     Avail    Mounted  1     EXODUS (1/1)
|                 NOTE: Channel 7 indicates CI channel
|                 (*) indicates potential external port
|  
|  
|  
|  
   3.12.2  Displaying Structure Status|  3.12.2  Displaying Structure Status
|  
|  You can  display  the  status  of  structures  with  the  SHOW  STATUS
|  STRUCTURE  command.   With  this  command,  you can specify one of the
|  following:
|  
|       1.  The  /ALL  switch  to  display  both  MOUNTED  and  UNMOUNTED
|           structures and their current status.
|  
|                OPR>SHOW STATUS STRUCTURE /ALL
|  
|       2.  The /MOUNTED  switch  to  display  all  structures  that  are
|           currently mounted.
|  
|                OPR>SHOW STATUS STRUCTURE /MOUNTED
|  
|       3.  The /UNMOUNTED switch to display all structures that are free
|           for mounting.
|  
|                OPR>SHOW STATUS STRUCTURE /UNMOUNTED
|  
|       4.  The str: name argument to display information about a  single
|           structure.
|  
|                OPR>SHOW STATUS STRUCTURE str:
|  
|  If you do  not  specify  any  switch  or  argument,  the  SHOW  STATUS
|  STRUCTURE command defaults to /ALL.
|  
|  The output from the SHOW STATUS STRUCTURE command with the /ALL switch
|  specified displays:
|  
|       1.  The Alias name for the structure.
|  
|       2.  The physical name of the structure, if there is one.
|  
|       3.  The mount status of the structure (mounted or unmounted).
|  
|       4.  The count of the number of users who have requested  a  mount
|           of the structure.




                                    3-57
                         UNSCHEDULED SOFTWARE TASKS                         UNSCHEDULED SOFTWARE TASKS


|       5.  The availability of the structure.
|  
|       6.  The file count of the structure.
|  
|       7.  The    access    to    the    structure    (SHARED/EXCLUSIVE,
|           DOMESTIC/FOREIGN).
|  
|       8.  The     accounting     status      of      the      structure
|           (REGULATED/UNREGULATED)
|  
|  The output from the SHOW STATUS STRUCTURE command with the  /UNMOUNTED
|  switch  specified, displays information about structures that are free
|  for mounting.
|  
|  The output from the SHOW STATUS STRUCTURE command  with  the  /MOUNTED
|  switch  specified,  displays  information  about  structures  that are
|  currently mounted.
|  
|  The output from the SHOW STATUS STRUCTURE command with the str:   name
|  argument specified, displays:
|  
|       1.  Structure information about the single  structure,  including
|           alias,   name,   mount   status,  mount  count,  file  count,
|           availability, access, and accounting.
|  
|       2.  Disk  drive  information  for  the  drive(s)  on  which   the
|           structure   is   mounted.    This  includes  type  of  drive,
|           channel-controller-drive, availability of  the  drive,  mount
|           status, mount count, name of structure and number of packs in
|           the structure, and usage options.
|  
|       3.  A list of users who have mounted the structure.
|  
|       4.  A list of users who are accessing the structure.
|  
|       5.  A list of users who are connected to the structure.
|  
|                                   NOTE
|  
|          If you are requested to  remove  information  about  a
|          structure  from the structure tables, use the UNDEFINE
|          STRUCTURE command.  For information  on  the  UNDEFINE
|          STRUCTURE  command,  refer  to  the TOPS-20 Operator's
|          Command Language Reference Manual
|  
|  
|  
|                           ----- Examples -----
|  
|       1.  Specify the SHOW STATUS STRUCTURE command with  the  /MOUNTED
|           switch.
|  
|           OPR>SHOW STATUS STRUCTURE /MOUNTED <RET>
|           OPR>
|           20:14:04          -- Structure status --
|  
|                           MOUNTED STRUCTURES
|  
|                                 ATTRIBUTES:
|                         Mount   Mount File
|           Alias  Name   State   Count Count  Status           Access         Accounting
|           ------ ------ ------- ----- -----  --------   -------------------- -----------
|           DALE   DALE   Mounted  0     0     Avail      Shared               ## Primary Public Structure ##
|           AP20   AP20   Mounted  1     51    Avail      Shared               Foreign Regulated


                                    3-58
                         UNSCHEDULED SOFTWARE TASKS                         UNSCHEDULED SOFTWARE TASKS


|           EXODUS EXODUS Mounted  1     2     Avail      Shared               Foreign Regulated
|  
|       2.  Specify the SHOW STATUS STRUCTURE command with the /UNMOUNTED
|           switch.
|  
|           OPR>SHOW STATUS STRUCTURE /UNMOUNTED <RET>
|           OPR>
|           20:14:50          -- Structure status --
|  
|                         UNMOUNTED STRUCTURES
|  
|                                  ATTRIBUTES:
|                         Mount   Mount File
|           Alias  Name   State   Count Count  Status           Access         Accounting
|           ------ ------ ------- ----- -----  --------   -------------------- -----------
|           AP20                               Avail      Shared     Domestic  Regulated
|           DUMP                               Avail      Shared     Domestic  Unregulated
|           FARK                               Avail      Shared     Domestic  Unregulated
|           SIXOH                              Avail      Shared     Domestic  Unregulated
|           WARPIG                             Avail      Shared     Domestic  Unregulated
|           KL2136                             Avail      Shared     Domestic  Regulated
|           BASIC                              Avail      Shared     Domestic  Regulated
|           CBL74                              Avail      Shared     Domestic  Regulated
|           DLM62                              Avail      Shared     Domestic  Regulated
|  
|       3.  Specify the SHOW STATUS STRUCTURE command with the str:  name
|           argument.
|  
|           OPR>SHOW STATUS STRUCTURE DALE: <RET>
|           12:11:15          -- Structure status --
|  
|                                 ATTRIBUTES:
|                                       File
|           Alias  Name   State   Count Count  Status           Access         Accounting
|           ------ ------ ------- ----- -----  --------   -------------------- -----------
|           DALE   DALE   Mounted  0           Avail      Shared               ## Primary Public Structure ##
|  
|                    Disk information pertaining to mounted structure
|  
|           DISK DRIVE INFORMATION                   DISK PACK INFORMATION
|                 Chan-Cont   Disk     Mount   Mount              Usage
|            Type   Drive    Status   Status   Count Name         Options
|            ---- --------- --------  ------   ----- ------------ -------------------------
|            RP06 0,  ,0    Avail     Mounted  0     DALE   (1/1)
|  
|           Users who have MOUNTed this structure:
|           None.
|  
|           Users who are are ACCESSing this structure:
|           KOVALCIN, WONG.
|  
|           Users who are CONNECTed to this structure:
|           OPERATOR, KOVALCIN, WONG.
|  



   3.13  EXAMINING MOUNT-REQUESTS IN THE QUEUE   3.13  EXAMINING MOUNT-REQUESTS IN THE QUEUE

   Whenever a user submits a request  for  a  tape  or  disk  mount,  the
   request  is  placed  in  a  queue  where it waits for your response to
   either mount the tape or disk or delete the mount request.  To examine
   the  tape  and disk mount queue at any time, give the OPR command SHOW
   QUEUES MOUNT-REQUESTS.


                                    3-59
                         UNSCHEDULED SOFTWARE TASKS                         UNSCHEDULED SOFTWARE TASKS


   The output of the SHOW QUEUES MOUNT-REQUESTS command displays:
|  
|       1.  The name of the tape or disk volume
|  
|       2.  The status of the request
|  
|       3.  The type of request (Tape or Disk)
|  
|       4.  The density of the request
|  
|       5.  The write access requested
|  
|       6.  The number of the request
|  
|       7.  The number of the user's job who made the request
|  
|       8.  The name of the user
|  
|       9.  The label status of a tape (Labeled or unlabeled)
|  
   The status column displays the following:

        1.  Waiting, if a tape or disk request is waiting to be satisfied

        2.  A tape drive name (for example, MTA3:),  if  the  request  is
            currently for a tape drive

        3.  Dismount, if a tape or disk is being dismounted

        4.  Aborted, if a tape mount request has been deleted or  aborted
            and  the user has not yet given a dismount command to release
            the logical tape drive (MTn:)












































                                    3-60
                         UNSCHEDULED SOFTWARE TASKS                         UNSCHEDULED SOFTWARE TASKS


                            ----- Example -----

   Give the SHOW QUEUES MOUNT-REQUESTS command  to  display  the  current
   tape and disk requests in the queue.

|  OPR>SHOW QUEUES MOUNT-REQUESTS<RET>
|  
|  OPR>
|  11:37:10                -- System Queues Listing --
|  
|  Volume    Status   Type  Dens   Write    Req#  Job#             User
|  -------  --------  ----  ----  ------   -----  ----  -------------------------
|  JCR      Waiting   Tape  Defa  Locked       1   143  JROSSELL
|     Volume-set: JCR  Tape is unlabeled
|  JCR      Waiting   Tape  Defa  Locked       2   143  JROSSELL
|     Volume-set: JCR    Tape is labeled
|  There are 2 requests in the queue
|  
|  OPR>



   3.14  CREATING A STRUCTURE DURING TIMESHARING   3.14  CREATING A STRUCTURE DURING TIMESHARING

   During timesharing, you can create a structure by doing the following:

        1.  Obtain the number of formatted  disk  packs  needed  for  the
            structure.

        2.  Place the packs on any available  disk  drives  and  put  the
            drives on-line.

        3.  Type PUSH to OPR.

        4.  Run CHECKD.

        5.  Type CREATE structure name to CHECKD.

        6.  Answer the questions from CHECKD.

        7.  Type EXIT to CHECKD.

        8.  MOUNT STRUCTURE str:

   If this structure is to be used on a system other than a 2060, perform
   steps 9 through 11.  Otherwise, proceed at step 12.

        9.  Run CHECKD.
|  
|      10.  Type DISABLE LARGE-DIRECTORIES

       11.  Type EXIT to CHECKD.

       12.  Type DISABLE.

       13.  Type POP to return to OPR command level.

   If CHECKD is a subjob of PTYCON at your installation, you need only to
   CONNECT to the CHECKD subjob and perform Steps 5 through 8 above.

|  If your installation is part of a CFS-20 configuration, CHECKD may not
|  be  able  to  set  the structure Exclusive.  If this happens, you must
|  dismount the structure from the  other  systems  using  it.   Use  the
|  dismount  procedures  for  CFS-20  systems  in  Section  3.11.3.  Then
|  reissue the CHECKD command.











                                    3-61
                         UNSCHEDULED SOFTWARE TASKS                         UNSCHEDULED SOFTWARE TASKS


                                    NOTE

           When  you  create  a  structure,   you   destroy   any
           information  that  was previously on the disk packs in
           the structure.  If you want to  save  any  information
           from  an  old  structure, run DUMPER to save the files
           before you create the new structure on the  same  disk
           packs.

   When you are running CHECKD to create  a  structure,  first  type  the
   CREATE  command  and  specify  the  name  of the structure you want to
   create.  This  name  is  a  physical  identification  written  on  the
   structure by CHECKD.

   CHECKD then asks a series of questions.  For  each  question  you  can
   type ?  to get a help message.  The questions are:

   ENTER ALIAS:

        Type a 1 to 6 character alphanumeric name for the alias.  If  you
        do  not type a number, or if a structure has the same name as the
        structure you are creating, type the structure name as the alias.
        If another structure of the same name is mounted, press RETURN to
        get the default alias, CHECKD.  If another structure  is  mounted
        with the name CHECKD, use another name.  The alias is a temporary
        name that the system uses for your structure.

   HOW MANY UNITS IN THIS STRUCTURE?

        Type the number of disk packs that will be in the structure.

   CHANNEL , CONTROLLER AND UNIT NUMBER FOR LOGICAL UNIT n:

        This question is asked for each unit n in the structure.  Type in
        a  channel  number,  followed  by  a comma, the controller number
        followed by a comma, and a unit (or  drive)  number  to  indicate
        where unit n is mounted.

        The help message for this question is similar to:

        PAIR OF OCTAL NUMBERS FROM ONE OF THE FOLLOWING:

        TYPE  CHANNEL  CONTROLLER   UNIT   STRUCTURE NAME  LOGICAL UNIT
        ----  -------  ----------   ----   --------------  ------------ 
        RP06        1      -1          0   OFF-LINE
        RP06        1      -1          1   OFF-LINE
        RP04        1      -1          2   STR2            0 (1 OF 1)
        RP06        1      -1          5   OFF-LINE

        This output lists each drive that is available.  Thus, each  disk
        pack  for the structure you are creating must be on some drive in
        the list.  A structure name appears in the list if a disk pack is
        on-line and was formerly part of a structure.  Do not specify the
        drive for that pack if you still want data from that structure.

        If the help message does not eliminate confusion over channel and
        drive   correspondence,   consult   your  DIGITAL  Field  Service
        Representative.








                                    3-62
                         UNSCHEDULED SOFTWARE TASKS                         UNSCHEDULED SOFTWARE TASKS


   NUMBER OF PAGES TO ALLOCATE FOR SWAPPING?

        Type 0 if the structure is never going to be used as  the  public
        structure,  PS:.   Press ESCape to set the default value.  Type a
        decimal number between 2000 and 40000 to specify a number.

        If you have any question about the amount of swapping space,  see
        your  System Manager.  Note that swapping space is necessary on a
        public structure, but the default value  is  usually  sufficient.
        If  past  experience  has shown many SWAPPING SPACE LOW messages,
        you may need more swapping space.  Increasing the swapping  space
        here,  however,  may  not  be  sufficient,  because  the  maximum
        swapping space allocated within  the  monitor  takes  precedence.
        Thus, you might need a larger monitor or a tailored monitor.

   NUMBER OF PAGES TO ALLOCATE FOR THE FRONT END FILE SYSTEM?

        Type 0 if the structure  is  never  to  be  used  as  the  public
        structure,  PS:.   Press  ESCape  to get the default; the default
        should always be sufficient for the front-end file system.

   OWNER NAME?

        Type a 1- to 12-character alphanumeric name for the owner of  the
        structure.

   IS THIS A SYSTEM STRUCTURE FOR STARTUP?

        If this structure is to be used for  system  startup,  type  YES.
        Otherwise, type NO.

                                      NOTE

                The  following  question  only  appears  if   you
                answered YES to the above question.

   SERIAL NUMBER OF CPU STARTED FROM THIS STRUCTURE?

        Enter the serial number of the system this structure will be used
        on.

   When CHECKD finishes the CREATE function, it prompts again.  When  you
   are finished with CHECKD, type EXIT.


                            ----- Example -----

   In the following example, structure QWERTY  is  created  as  a  1-pack
   structure.  An ESCape was pressed to get the defaults for the swapping
   space allocation and the front-end file system.  Therefore, QWERTY can
   be used as a public structure.















                                    3-63
                         UNSCHEDULED SOFTWARE TASKS                         UNSCHEDULED SOFTWARE TASKS


   OPR>PUSH<RET>

    TOPS-20 Command Processor 6(772)
   @ENABLE<RET>
   $CHECKD<RET>
   CHECKD>CREATE (NEW FILE SYSTEM FOR) QWERTY<RET>
   ENTER ALIAS: QWERTY<RET>
   HOW MANY UNITS IN THIS STRUCTURE? 1<RET>
   CHANNEL , CONTROLLER, AND UNIT NUMBER FOR LOGICAL UNIT 0: ?      

   PAIR OF OCTAL NUMBERS FROM ONE OF THE FOLLOWING:

   TYPE  CHANNEL  CONTROLLER   UNIT   STRUCTURE NAME  LOGICAL UNIT
   ----  -------  ----------   ----   --------------  ------------ 

   RP06        1      -1          2   STR2            0 (1 OF 1)


   CHANNEL , CONTROLLER AND UNIT NUMBER FOR LOGICAL UNIT 0: 1,-1,2<RET>
   NUMBER OF PAGES TO ALLOCATE FOR SWAPPING? 3050<RET>
   NUMBER OF PAGES TO ALLOCATE FOR THE FRONT END FILE SYSTEM? 950<RET>
   OWNER NAME? KIRSCHEN<RET>
   IS THIS A SYSTEM STRUCTURE FOR STARTUP? NO<RET>

   [QWERTY: MOUNTED AS QWERTY:]

   [DISMOUNTING STRUCTURE - QWERTY:]

   CHECKD>EXIT<RET>
   $DISABLE<RET>
   @POP<RET>
   OPR>

                         ----- Error Messages -----

   ?INVALID CONFIRMATION

        You typed an invalid character within or after an argument.

   ? INVALID DECIMAL NUMBER

        You did not type a valid decimal number for the argument.

   ? NAME STRING GREATER THAN 12. CHARACTERS

        You typed more than 12 decimal characters for the owner name.

   ?WHEEL OR OPERATOR CAPABILITY REQUIRED

        You must have WHEEL or OPERATOR capability enabled.   Use  a  job
        logged  in under OPERATOR, which should have OPERATOR capability,
        and type ENABLE before you run CHECKD.














                                    3-64
                         UNSCHEDULED SOFTWARE TASKS                         UNSCHEDULED SOFTWARE TASKS


   3.15  COMMUNICATING WITH USERS   3.15  COMMUNICATING WITH USERS

   Timesharing and batch users often need  to  communicate  with  you  to
   perform  various  tasks,  to  obtain  help,  or to send messages.  The
   following sections tell you how to:

        1.  Respond to PLEASE requests with OPR

        2.  Help another user with SEND

        3.  Mail a message to a user with MAIL

        4.  Read any messages sent to you with RDMAIL




   3.15.1  Answering PLEASE Requests with OPR   3.15.1  Answering PLEASE Requests with OPR

   When a user sends a message  with  PLEASE,  you  receive  from  OPR  a
   message at the console terminal that is time-stamped and has a message
   number enclosed in angle brackets.  You should then answer the request
   with the RESPOND command in OPR.  If you are not at OPR command level,
   you must connect to the subjob running OPR  in  PTYCON  to  issue  the
   RESPOND command.

   If the user requested some form of physical action, such  as  changing
   the  forms  on  the  line  printer,  you  can make the change and then
   respond to let the user know that the change has been made.   You  can
   type  any response to this message.  However, you should pay attention
   to what the user said in the line of text and try to do what the  user
   requested.   If  further  communication  is necessary, you can use the
   TALK command, the MAIL program, or issue the SEND command in OPR.   If
   the request cannot be satisfied, you can respond with a refusal and/or
   text to explain why the request cannot be satisfied.

   The format of the request from the user appears as follows:

        hh:mm:ss    <n>    --Message from Timesharing User--
                         Job number User at Terminal nnn
                         one or more lines of text (or)
                         PLEASE line of text

   This request contains the word PLEASE if  the  user  sent  a  one-line
   message  with  the  PLEASE  program,  or the line contains one or more
   lines of text ending with a ^Z (Control Z).  This  message  can  be  a
   request  for action, a question, or a comment.  The user who sends you
   a PLEASE message should include a word or two for you  to  include  in
   the  RESPOND command to indicate that the request or question has been
   completed.  If the user does not include any word(s) for  the  RESPOND
   command,  you  can  RESPOND  in any way desired to answer the message.
   With some requests, this line  might  be  repeated  to  allow  you  to
   respond with different words for different circumstances.













                                    3-65
                         UNSCHEDULED SOFTWARE TASKS                         UNSCHEDULED SOFTWARE TASKS


                            ----- Examples -----

        1.  A user might ask when timesharing ends.  The message  appears
            as follows:

            OPR>
            12:32:09    <3>    --Message from Timesharing User--
                             JOB 32 BROWN at Terminal 114
                             PLEASE WHEN WILL TIMESHARING END?
                             RESPOND HH:MM:SS
            OPR>

            And, you can respond as follows:

            OPR>RESPOND 3 18:00:00<RET>
            OPR>


        2.  The following example shows what  appears  on  the  terminal,
            running  OPR  as  a  subjob  of  PTYCON  after a user sends a
            multi-line message with PLEASE.

            OPR>
            14:54:01    <13>    --Message from Timesharing User--
                              JOB 12 LATTA at Terminal 21
                              LOAD NARROW FORMS ON PRINTER 2
                              IF YOU ARE UNABLE, ABORT BATCH REQUEST 198
                              RESPOND OK WHEN DONE
                              RESPOND REFUSE IF CAN'T BE DONE
                              ^Z
            OPR>
            OPR>RESPOND 13 REFUSE<RET>
            OPR>ABORT BATCH-STREAM 1 /REQUEST-ID:198<RET>
            OPR>
            14:56:50        Batch-stream 1     JOB #66     --ABORTED--
                            Job TEST Req #198 for LATTA
                            No Reason Given with ERROR-PROCESSING

            OPR>




   3.15.2  Talking to Another User Immediately with SEND   3.15.2  Talking to Another User Immediately with SEND

   If a user indicates that help is needed from you to  use  some  system
   feature,  you can help the user with the OPR command SEND.  Connect to
   OPR from PTYCON and then give either of the following commands:

        OPR>SEND JOB n message<RET>

   or

        OPR>SEND TERMINAL n message<RET>












                                    3-66
                         UNSCHEDULED SOFTWARE TASKS                         UNSCHEDULED SOFTWARE TASKS


   where n is the number of the timesharing or batch  job  in  the  first
   command above, or the number of the user's terminal line in the second
   command above.

   The SEND command allows you the option of including the message either
   in  the  SEND  command  string  or  as  multiple lines terminated by a
   CTRL/Z.

   The SEND command does not link your job or terminal to the user's  job
   or  terminal.   If  the  user  is  waiting for input to a program, the
   message sent appears on the user's terminal, but it  does  not  affect
   the program he is running.



                            ----- Examples -----

        1.  Tell a user that a task he requested is now complete.

            OPR>SEND JOB 27<RET>
            ENTER TEXT AND TERMINATE WITH ^Z
            THE UPDATED FORTRAN SOURCE LIBRARY IS NOW ONLINE<RET>
            YOU MUST CONNECT TO MISC:^Z
                                      !
                                   <CTRL/Z>
            OPR>

        2.  Send a message to terminal 15 to notify  the  user  that  his
            batch requests are being held.

            OPR>SEND TERMINAL 15 YOUR BATCH REQUESTS ARE BEING HELD<RET>

            OPR>


                             ----- Hints -----

   Refer to the TOPS-20 Operator Command Language Reference Manual for  a
   complete description of the SEND command.

   If you need to link your terminal with the user's  terminal,  use  the
   TOPS-20  ADVISE  or  TALK  command.   Refer  to  the  TOPS-20 Commands
   Reference Manual for a description of these two commands.























                                    3-67
                         UNSCHEDULED SOFTWARE TASKS                         UNSCHEDULED SOFTWARE TASKS


   3.15.3  Mailing a Message for a User to Read Later   3.15.3  Mailing a Message for a User to Read Later

   You can send a message to one or more users by doing the following:

        1.  Type MAIL.

        2.  After TO:  type the names  of  the  users  to  whom  you  are
            mailing the message.

        3.  After CC:  type the names of  the  users  to  whom  you  want
            copies  of the message sent, or simply press RETURN if you do
            not want copies sent to anyone.

        4.  After SUBJECT:  type a few words to indicate the  subject  of
            the message.

        5.  After the line beginning  with  MESSAGE,  type  the  message,
            which  can  be  several  lines of text, and terminate it with
            ESCape or CTRL/Z.



                            ----- Example -----

   This example shows how to send a message to user JONES.   If  you  are
   going  to  do  this  from the terminal that is running OPR, first type
   PUSH to OPR.

        OPR>PUSH<RET>

         TOPS-20 Command processor 6(772)
        @MAIL<RET>

        TO: JONES<RET>
        CC:<RET>
        SUBJECT: USER'S GUIDE<RET>
        MESSAGE (TERMINATE WITH ESC OR CTRL/Z):

        WE NOW HAVE MORE COPIES AVAILABLE AT THE COMPUTER CENTER<RET>
        STOP BY IF YOU NEED ONE<RET>
        $
        <ESC>
             
        PROCESSING MAIL...
        NO ERRORS.
        -DONE-
        @POP<RET>
        OPR>

   If you want to follow TO:  or CC:  with  a  list  of  users,  separate
   their names with commas.  You can also specify one indirect file which
   contains a list of names separated by commas.  Precede the  file  name
   with "@", but be sure you put it last in the list.  For example:

        TO: SMITH,JONES,@LISTA.USR<RET>

   sends a message to SMITH,  JONES,  and  all  the  users  in  the  file
   LISTA.USR.   You  can  use recognition input on the user names and the
   filename.







                                    3-68
                         UNSCHEDULED SOFTWARE TASKS                         UNSCHEDULED SOFTWARE TASKS


   You can also use one indirect file for the  message  itself.   Precede
   the  filename  which  contains the message with "@" and follow it with
   CTRL/Z or <RET>.  You can use recognition on the filename.

   The following example shows the  use  of  an  indirect  file  for  the
   message:

        OPR>PUSH<RET>

         TOPS-20 Command processor 6(772)
        @MAIL<RET>

        TO: SMITH<RET>
        CC: MULLEN<RET>
        SUBJECT: TEST<RET>
        MESSAGE (TERMINATE WITH ESC OR CTRL/Z):

        @A.TST<RET>

        PROCESSING MAIL...
        NO ERRORS.
        -DONE-
        @POP<RET>
        OPR>

   Once you have sent the message, all users in the TO:  or CC:  list who
   are  logged  in are notified immediately that they have a message.  If
   they are not logged in, they are notified the next time they  log  in.
   The  users must read the message by running RDMAIL.  Consequently, the
   time when the message is actually read is up to the user.

   (Refer to the TOPS-20 User Utilities Guide for all error messages from
   MAIL.)



   3.15.4  Reading Your Messages with RDMAIL   3.15.4  Reading Your Messages with RDMAIL

   If someone sends you a message with MAIL,  you  are  notified,  either
   when  you log in or when the message is sent, that you have a message.
   You should read the message with RDMAIL.  To do this:

        1.  Type PUSH to OPR.

        2.  Run RDMAIL.

        3.  Press RETURN after DATE AND TIME (/H FOR HELP).

        4.  Type POP to return to OPR.

   Once you press RETURN after DATE AND TIME, any messages that you  have
   not read before are printed on your terminal.  If you want to read old
   messages, specify a date and time after the DATE AND TIME prompt.  The
   format for the date and time is explained when you type /H for HELP.

   (Refer to the TOPS-20 User Utilities Guide  for  more  information  on
   RDMAIL.)









                                    3-69
                         UNSCHEDULED SOFTWARE TASKS                         UNSCHEDULED SOFTWARE TASKS


                            ----- Example -----

        OPR>PUSH<RET>

         TOPS-20 Command processor 6(772)
        @RDMAIL<RET>
        DATE AND TIME (/H FOR HELP)
           --------
        DATE: 5-MAR-82 15:39
        FROM: WELLS
        TO: OPERATOR

           -----
        SUBJECT: FILES-ONLY DIRECTORY

        WHERE CAN I GET A FORM TO APPLY FOR A FILES-ONLY DIRECTORY?
           ========
        @POP<RET>
        OPR>



   3.16  HELPING A USER WITH TERMINAL PROBLEMS   3.16  HELPING A USER WITH TERMINAL PROBLEMS

   If you are notified by a user that his terminal is not responding, try
   the following:

        1.  Check the terminal speed.  Ask  the  user  for  his  terminal
            number,  or  if  the  user  is logged in, do a SYSTAT user to
            determine  the  terminal  number.    Then   type   the   file
            SYSTEM:n-CONFIG.CMD,  where  n is the TOPS-20 version number.
            Find the line referring to the terminal number and  see  what
            its  initial  speed should be.  If the terminal is designated
            for autobaud detection, the speed is 110, 150, 300, or  1200.
            Have  the user manually set the terminal for the proper speed
            and  then  try  again.   (Refer  to  the   TOPS-20   Software
            Installation  Guide  for more information on n-CONFIG.CMD and
            setting terminal speeds.)

        2.  If Step 1 does not work, be sure the user leaves the terminal
            set  at  the  speed specified in the n-CONFIG.CMD file.  Then
            type to OPR:

                 OPR>PUSH<RET>
                 @ENABLE<RET>
                 $^ESET TERMINAL t SPEED s<RET>
                 $POP<RET>
                 OPR>

            where t is the terminal number and s  is  the  speed  in  the
            n-CONFIG.CMD  file.  If there is a different input and output
            speed, you must enter both the input and output speeds.  Then
            have the user try again.

        3.  If Step 2 does not succeed because the user can not  set  the
            terminal  for  the  speed  in  the  n-CONFIG.CMD file, give a
            ^ESET TERMINAL command as above for a speed  which  the  user
            can  manually  set  for the terminal.  Then have the user try
            again.  If that succeeds and the terminal is going to be used
            permanently,     you    should    also    edit    the    file
            SYSTEM:n-CONFIG.CMD to change the speed for that terminal.





                                    3-70
                         UNSCHEDULED SOFTWARE TASKS                         UNSCHEDULED SOFTWARE TASKS


        4.  If none of the above works, the terminal is broken or the job
            is  hung.  Notify the user of his options, given below.  Then
            notify your System Manager and software specialist.

   If a terminal is not functioning correctly or a job is hung, the  user
   has the following options:

        1.  If he is not logged in, the user can simply look for  another
            terminal and log in.

        2.  If the user is logged in and  wants  the  same  job,  try  to
            unattach the user's job.  Type to OPR:

                 OPR>PUSH<RET>
                 @ENABLE<RET>
                 $UNATTACH (USER) name (JOB #) n<RET>
                 <RET> after [ATTACHED TO TTYxxx, CONFIRM]
                 $POP<RET>
                 OPR>

            where name is the user's name and n is the user's job number.

            The user should then try  to  attach  to  job  n  at  another
            terminal.  If the user is still unsuccessful, go to Step 3.

        3.  If the user is logged in, try to log the job out by typing to
            OPR:

                 OPR>PUSH<RET>
                 @ENABLE<RET>
                 $LOGOUT n<RET>
|                $<RET>
                 $POP<RET>
                 OPR>

            where n is the user's job number.  (Part V Section  3.16  has
            more  detail on logging out a job.) If LOGOUT succeeds within
            ten seconds and the terminal is  functioning  correctly,  the
            user  should then be able to log in at the same terminal.  If
            it does not succeed, go to Step 4 and report the  problem  to
            your software specialist.

                OPR>PUSH<RET>

                 TOPS-20 Command processor 6(772)
                @ENABLE<RET>
|               $LOGOUT 28<RET>
|               User TUCKER on TTY32, running EXEC
|               [Confirm]<RET>
                $POP<RET>
                OPR>

        4.  If the user is logged in and LOGOUT in Step 3  did  not  work
            because  of  system  software  problems, you can unattach the
            user by typing to OPR:

                OPR>PUSH<RET>
                @ENABLE<RET>
                $UNATTACH (USER) name (JOB #) n<RET>
                <RET> after [ATTACHED TO TTYxxx, CONFIRM]
                $POP<RET>
                OPR>

            where name is the user's name and n is the user's job number.


                                    3-71
                         UNSCHEDULED SOFTWARE TASKS                         UNSCHEDULED SOFTWARE TASKS


            The user should then be able to log in at the same  terminal.
            If the user cannot, there is a problem with the terminal, the
            terminal line, or the system.  Report the situation  to  your
            System  Manager.   The  user  must  try  another  terminal or
            terminal line.

                OPR>PUSH<RET>
                 TOPS-20 Command processor 6(772)
                @ENABLE<RET>
                $UNATTACH (USER) PORADA (JOB #) 23<RET>
                 [ATTACHED TO TTY105, CONFIRM]<RET>
                $SYSTAT 23<RET>
                  23   DET   EXEC    PORADA
                $POP<RET>
                OPR>

        5.  If the user can not find another  terminal,  he  can  request
            that  you  perform  some task for him.  If this is within the
            rules of your installation, perform the task.  You  might  do
            the  entire  task from the subjob O, you might ADVISE the job
            to do the task, or you might attach to the  user's  job  from
            the  subjob  O, perform the task, log out, and attach back to
            the subjob.  Be sure to give the correct password.

            To attach to a user's job, type to OPR:

                PUSH
                ENABLE
                ATTACH user n

            where user is the user's name and n is the user's job number.

                OPR>PUSH<RET>

                 TOPS-20 Command processor 6(772)
                @ENABLE<RET>
                $ATTACH (USER) POR (JOB #) 23<RET>
                 DETACHING JOB # 3
                $              !Perform task for user
                   .
                   .
                   .
                $LOGO<RET>
                KILLED JOB 23, USER POR, ACCOUNT 104, TTY 101,
                  AT 5-OCT-81 08:55:16,  USED 0:0:6 IN 0:5:1

                $ATTACH OPERATOR 3      
                $POP<RET>
                OPR>



                             ----- Hints -----

   More information on the ^ESET  TERMINAL  command  is  in  the  TOPS-20
   Operator's Command Language Reference Manual.

   Once a  user  establishes  terminal  communication,  he  can  use  the
   TERMINAL  SPEED  command  (in  the  TOPS-20 User's Guide) to specify a
   different speed and then manually set the  terminal  for  that  speed.
   This  procedure,  however,  does  not  change the default speed of the
   line.  You must edit SYSTEM:n-CONFIG.CMD to change the default speed.




                                    3-72
                         UNSCHEDULED SOFTWARE TASKS                         UNSCHEDULED SOFTWARE TASKS


   3.17  LOGGING OUT A USER WITH LOGOUT   3.17  LOGGING OUT A USER WITH LOGOUT

   To delete unwanted jobs from the system, type the command:

        LOGOUT n

   where n is the number of the job you want to delete.  You  must  first
   enable  your operator privileges.  Also, be absolutely sure that a job
   is unwanted before you log it out.

   The types of unwanted jobs should be listed  for  you  by  the  System
   Manager.   Then you can periodically give the SYSTAT command and check
   the output against the list to find any  unwanted  jobs.   A  possible
   list  of  unwanted  jobs  and  ways  of identifying them in the SYSTAT
   output are:

        1.  Jobs that have not used  any  runtime  over  a  certain  time
            period.   Periodically, use the command SYSTAT TIME or SYSTAT
            n TIME, where n is a job number, to see if the job's  runtime
            has increased.

        2.  All jobs that have been detached longer  than  five  minutes,
            provided  your  System  Manager  has decided not to allow any
            detached jobs and has sufficiently warned all users of  this.
            This   means   you  should  log  out  all  users  whose  line
            designation in the output from SYSTAT  is  DET,  which  means
            detached.  However, you are never able to log out SYSJOB.

        3.  A job that a user has requested you  to  log  out  due  to  a
            problem.   Be sure the request is valid.  Then check that the
            job number the user wants you to  log  out  belongs  to  that
            user.   Do this by typing PUSH to OPR and then type SYSTAT n.
            For example:

                OPR>PUSH<RET>

                 TOPS-20 Command processor 6(772)
                @SYSTAT n<RET>
                      .
                      .
                @POP<RET>
                OPR>

            where n is the job number, and check that the  user  name  is
            correct.  If the name is correct, you can log out the job.



                            ----- Example -----

            If you want to log out job 7 and you do not have any  subjobs
            defined other than OPR, type:

                OPR>PUSH<RET>

                 TOPS-20 Command processor 6(772)
                @ENABLE<RET>
|               $LOGOUT 28<RET>
|               User TUCKER on TTY32, running EXEC
|               [Confirm]<RET>
                $DISABLE<RET>
                @POP<RET>
                OPR>



                                    3-73
                         UNSCHEDULED SOFTWARE TASKS                         UNSCHEDULED SOFTWARE TASKS


                             ----- Hints -----

   Because there is no message printed on your terminal to indicate  that
   you  have  successfully  logged out another job, you can use SYSTAT to
   verify that the job is gone.  However, keep in mind that by  the  time
   you  give the SYSTAT command a user could already have that job number
   again.

   If you log out a job that was a subjob  of  PTYCON,  PTYCON  prints  a
   message about the subjob being killed.



                         ----- Error Messages -----

   ?ILLEGAL TO LOGOUT JOB 0

        You are not allowed to log out job 0 under which SYSJOB runs.

   ?THAT JOB DOES NOT EXIST

        You typed the wrong job number, or the job you  intended  to  log
        out is already logged out.

   ?WHEEL OR OPERATOR CAPABILITY REQUIRED TO LOGOUT ANOTHER JOB

        You must have WHEEL or OPERATOR capability.



   3.18  GENERATING ACCOUNTING REPORTS   3.18  GENERATING ACCOUNTING REPORTS

   The USAG20 and USAH20 programs allow you to produce accounting reports
   from  system  accounting  data.   The  CHKPNT  program  enables you to
   include disk usage in these reports  and  makes  the  accounting  data
   available  to  USAG20  and  USAH20.   In  addition, the CHKPNT program
   allows you to change the accounting periods during normal operation.

   These accounting functions are  discussed  briefly  in  the  following
   sub-sections.   You  can  find  more information in the TOPS-10 TOPS20
   USAGE File Specification.

   You must discuss with your System Manager the schedule  (if  any)  for
   performing these tasks.






















                                    3-74
                         UNSCHEDULED SOFTWARE TASKS                         UNSCHEDULED SOFTWARE TASKS


   3.18.1  Getting Disk and System Usage with CHKPNT   3.18.1  Getting Disk and System Usage with CHKPNT

   To include disk usage in the accounting reports and then make the disk
   and system usage available for reports, type to OPR:

        1.  PUSH

        2.  ENABLE

        3.  CHKPNT

        4.  DISK-STATISTICS structure:

            Repeat this command for each structure  for  which  you  want
            disk  usage.   If  you  omit  the  argument  structure:, your
            currently connected structure is used.

        5.  COPY (SYSTEM DATA TO) output file

            The output file can contain up  to  six  characters  for  the
            filename  and  three  characters  for  the file type.  It can
            later be used as the input  file  for  USAG20.   The  default
            filename is USAGE.OUT in your connected directory.

        6.  EXPUNGE (PROCESSED SYSTEM DATA)

        7.  EXIT

        8.  DISABLE

        9.  POP to return to OPR



                            ----- Example -----

        OPR>PUSH<RET>

         TOPS-20 Command processor 6(772)
        @ENABLE<RET>
        $CHKPNT<RET>
        CHKPNT>DISK-STATISTICS (FOR STRUCTURE) PS:<RET>
        CHKPNT>DISK-STATISTICS (FOR STRUCTURE) AK:<RET>
        CHKPNT>COPY (SYSTEM DATA TO) USAGE.OUT<RET>
        CHKPNT>EXPUNGE (PROCESSED SYSTEM DATA)<RET>
                [123 PAGES FREED]
        CHKPNT>EXIT (TO MONITOR)<RET>
        $DISABLE<RET>
        @POP<RET>
        OPR>

   If you do not want any reports on disk usage, omit Step 4 above.

   The EXPUNGE command to CHKPNT in  Step  6  deletes  and  expunges  all
   system  accounting data files already processed by the COPY command to
   CHKPNT.  If you want to save these files, you should rename them, copy
   them,  or  save them with DUMPER before you expunge them.  The file is
   called SYSTEM-DATA.BIN in PS:<ACCOUNTS>.  If you do not expunge  these
   files, the next COPY command to CHKPNT reprocesses them and makes them
   available to USAG20 or USAH20 again.






                                    3-75
                         UNSCHEDULED SOFTWARE TASKS                         UNSCHEDULED SOFTWARE TASKS


   If your System Manager wants to change the accounting  period  between
   shifts  to  bill users at a different rate for the next shift, you can
   give the following command to the CHKPNT program:

        CHANGE (ACCOUNTING SHIFT NOW)<RET>

   This command causes a session end entry followed  by  a  session-start
   entry  for  every  active  job  in  the  system.   There is no visible
   indication to the user that an accounting shift change has occurred.

                         ----- Error Messages -----

   ?CHKPNT: COULD NOT FIND SYSTEM-DATA FILE
   ? JSYS ERROR: DIRECTORY ACCESS PRIVILEGES REQUIRED

        You typed the COPY command, but you do  not  have  privileges  to
        read  the  SYSTEM-DATA  files.   Be sure you are connected to the
        subjob OPR, logged in under OPERATOR, and ENABLEd.

   ? CHKPNT: GARBAGE AT END-OF-COMMAND

        You did not press RETURN or LINE FEED after a command.

   ? CHKPNT: INVALID FILENAME SPECIFIED

        Your file specification  contained  an  invalid  filename  or  an
        unmounted structure.

   ? CHKPNT: INVALID STRUCTURE NAME GIVEN

        You specified an unmounted structure, you forgot the colon  after
        the structure name, or you omitted the structure name.

   ? CHKPNT: NO SUCH CHKPNT COMMAND AS "xxx"

        You typed an invalid CHKPNT command.



   3.18.2  Reporting Usage with USAG20   3.18.2  Reporting Usage with USAG20

   To get various cost summaries reported in a disk file, which can later
   be  printed  on  the  line printer and distributed, take the following
   steps.  First, be sure that you processed system accounting data  with
   the COPY command to CHKPNT.  You might or might not have included disk
   usage.   Second,  be  sure  you  have  USAG20.CHG  in  your  connected
   directory.   Your  System  Manager  should  have created USAG20.CHG by
   using the information  in  the  TOPS10/20  USAGE  File  Specification.
   Then, type to OPR:

        1.  PUSH

        2.  ENABLE

        3.  USAG20

        4.  input file specification

            This is the file output by the COPY command to CHKPNT in  the
            previous section.  The default is USAGE.OUT in your currently
            connected directory.





                                    3-76
                         UNSCHEDULED SOFTWARE TASKS                         UNSCHEDULED SOFTWARE TASKS


        5.  S or D

            S gives a report of system usage, and D  gives  a  report  of
            disk usage.  Press RETURN to get system usage, the default.

        6.  N or A

            N sorts the report by directory name, and A sorts the  report
            by account.  Press RETURN to get name, the default.

        7.  output file specification

            This is the file that contains the report.   The  default  is
            USAGE.RPT in your currently connected directory.

        8.  EXIT

        9.  PRINT output file specification/REPORT:argument

            The argument must correspond to the type of report requested.
            The type of report and arguments are:

                    Report             Argument

            System usage by name       NAME
            System usage by account    ACCOUNT
            Disk usage by name         DNAME
            Disk usage by account      DACCOUNT

       10.  DISABLE

       11.  POP to return to OPR

   If you want to produce different reports, after Step  5,  go  back  to
   Step 2.

   For easy identification you might use  an  output  file  specification
   that indicates the day or week of the report.



                            ----- Example -----

        OPR>PUSH<RET>

         TOPS-20 Command processor 6(772)
        @ENABLE<RET>
        $USAG20<RET>
        TOPS20 ACCOUNTING SYSTEM
        READ USAGE FILE: USAGE.OUT<RET>
         INPUT FILE NAME: USAGE .OUT
        REPORT BY [SYSTEM USAGE (S) OR DISK USAGE (D)]: S<RET>
        SORT BY [NAME (N) OR ACCOUNT (A)]: N<RET>
        WRITE TO FILE: USAGE.RPT<RET>
         OUTPUT FILE NAME: USAGE .RPT
        READ USAGE FILE: EXIT<RET>

        EXIT

        $PRINT USAGE.RPT/REPORT:NAME<RET>
        [LPT:USAGE=/SEQ:105/LIMIT:100, 1 FILE]
        $DISABLE<RET>
        @POP<RET>
        OPR>


                                    3-77
                         UNSCHEDULED SOFTWARE TASKS                         UNSCHEDULED SOFTWARE TASKS


                              ----- Hint -----

   Refer to the TOPS10/TOPS20 USAGE  File  Specification  for  additional
   accounting information.



                         ----- Error Messages -----

   FILE CHARGE-FILE [USAG20.CHG] CANNOT BE OPENED ON DEVICE DSK

        When you run USAG20, you must have the file  USAG20.CHG  in  your
        connected  directory.  This file, which is created by your System
        Manager, contains billing rates.

   FILE IN-FILE [inputfile] CANNOT BE OPENED ON DEVICE DSK

        The file that you want USAG20 to read must be in  your  connected
        directory.   Inputfile  is the filename and file type that USAG20
        interpreted from what you typed after READ USAGE FILE:  prompt.

   INCOMPLETE INPUT SPOOLER ENTRY

        USAG20 did not find all three records of an input-spooler  entry.
        Therefore, the other records of the entry are ignored.

   INCOMPLETE OUTPUT SPOOLER ENTRY

        USAG20 did not find all three records of an output-spooler entry.
        Therefore, the other records of the entry are ignored.

   INCOMPLETE SESSION ENTRY

        USAG20 did not  find  all  three  records  of  a  session  entry.
        Therefore, the other records of the entry are ignored.

   INPUT FILE ERROR:  inputfile

        You typed input file after the  READ  USAGE  FILE:   prompt,  but
        inputfile was not a valid filename and file type.

   OUTPUT FILE ERROR:  outputfile

        You typed outputfile after WRITE TO FILE:  prompt, but outputfile
        was not a valid filename and file type.





















                                    3-78












                                 CHAPTER 4                                 CHAPTER 4

                          SCHEDULED SOFTWARE TASKS                          SCHEDULED SOFTWARE TASKS



   As the operator, there  are  several  software  tasks  involving  both
   system  programs  and commands that you need to perform.  Some of them
   must be done on a daily basis and in a particular order.   Others  can
   be  done  less  frequently or only on request.  Your System Manager or
   operations staff should establish a daily schedule,  (perhaps  divided
   into  by operator shifts, and weekly, monthly, or yearly schedules, if
   appropriate).

   The following sections in Chapter 4  discuss  in  chronological  order
   possible  scheduled  software tasks.  These tasks are the tasks you do
   after you ready the system for timesharing.   You  should  follow  the
   schedule  given  to  you by your System Manager or operations staff to
   determine when you need to perform a task.

                                    NOTE

           For  you  to  perform  any  scheduled  software   task
           described  in  Chapter  4,  you  must  have  WHEEL  or
           OPERATOR capability.   If  either  capability  is  not
           needed  to  perform  the  task, it is mentioned in the
           description of the task.




   4.1  SETTING LOGINS-ALLOWED AND OPERATOR-IN-ATTENDANCE   4.1  SETTING LOGINS-ALLOWED AND OPERATOR-IN-ATTENDANCE

   When the system is started, you must allow LOGINs on  the  appropriate
   terminals  and  indicate  that  you are present.  To do this, take the
   following steps:

        1.  Type PUSH to OPR.

        2.  Type ENABLE.

        3.  Give the INFORMATION (ABOUT) SYSTEM-STATUS command.

        4.  Use ^ESET LOGINS-ALLOWED if you need to  change  the  set  of
            terminals for LOGINs.












                                    4-1
                          SCHEDULED SOFTWARE TASKS                          SCHEDULED SOFTWARE TASKS


        5.  Use ^ESET OPERATOR-IN-ATTENDANCE, if necessary,  to  indicate
            that you are present.

        6.  Type POP to return to OPR.

   You can also use this procedure later to change the set  of  terminals
   from  which  LOGINs  are allowed, or to indicate that there is not any
   operator  present.   (Details  on  ^ESET  LOGINS-ALLOWED   and   ^ESET
   OPERATOR-IN-ATTENDANCE   are   given  in  Chapter  3  of  the  TOPS-20
   Operator's Command Language Reference Manual.)



                            ----- Example -----

        OPR>PUSH<RET>

         TOPS-20 Command processor 6(772)
        @INFORMATION (ABOUT) SYSTEM-STATUS<RET>
         Operator is in attendance
         Remote logins allowed
         Local logins allowed
         Pseudo-terminal logins allowed
|        ARPANET terminal logins are not allowed
         DECnet terminal logins allowed
         Console terminal login allowed
         Accounting is being done
         Account validation is enabled
         Working set preloading is disabled
         Tape-drive allocation is enabled
         Automatic file-retrieval-waits allowed
|        Maximum offline-expiration is 90 days
         Scheduler bias-control setting is 11
         Class scheduling is disabled
        @

   Then to allow LOGINs on all terminals and indicate that an operator is
   present:

        @ENABLE<RET>
        $^ESET LOGINS-ALLOWED (ON) ANY-TERMINAL<RET>
        $^ESET OPERATOR-IN-ATTENDANCE<RET>
        $POP<RET>
        OPR>



                              ----- Hint -----

   You   can   put   the   initial   ^ESET   LOGINS-ALLOWED   and   ^ESET
   OPERATOR-IN-ATTENDANCE commands in the file SYSTEM:SYSJOB.RUN.  Decide
   with your System Manager what ^ESET commands, if any, need  to  be  in
   the  SYSJOB.RUN  file,  and  when  you  should manually change a ^ESET
   parameter.  It might be wise to put ^ESET LOGINS-ALLOWED  ANY  in  the
   SYSJOB.RUN  file,  but  to  make  the  operator  on  duty do the ^ESET
   OPERATOR-IN-ATTENDANCE.  Thus, if there is no operator  on  duty,  the
   status   is  NO  OPERATOR-IN-ATTENDANCE.   The  defaults,  before  the
   SYSJOB.RUN file is read, are LOGINS ALLOWED from the CONSOLE  TERMINAL
   and PSEUDO-TERMINALS with NO OPERATOR-IN-ATTENDANCE.







                                    4-2
                          SCHEDULED SOFTWARE TASKS                          SCHEDULED SOFTWARE TASKS


   4.2  CREATING THE MESSAGE OF THE DAY WITH MAIL   4.2  CREATING THE MESSAGE OF THE DAY WITH MAIL

   To send a message to all users of the system, do the following:

        1.  Type PUSH to OPR.

        2.  Enable capabilities.

        3.  Run MAIL.

        4.  After the TO:, type SYSTEM.

        5.  After the CC:, press RETURN.

        6.  Give the subject.

        7.  Type the message.

        8.  End the message with ESCape or CTRL/Z.

        9.  Type POP to return to OPR command level.

   The message is put into the file MAIL.TXT in PS:<SYSTEM>.  Then when a
   user   logs   in  to the system, the user receives on his terminal the
   messages that he has not seen before.  Also, as  soon  as  you  finish
   sending mail to SYSTEM, all on-line terminals receive the message:

        [NEW MESSAGE-OF-THE-DAY AVAILABLE]

   Users already logged in can then  read  the  new  message  by  running
   RDMAIL with the /M switch.



                            ----- Example -----

        OPR>PUSH<RET>

         TOPS-20 Command processor 6(772)
        @ENABLE<RET>
        $MAIL<RET>

        TO: SYSTEM<RET>
        CC:<RET>
        SUBJECT:CHRISTMAS<RET>
        MESSAGE (TERMINATE WITH ESC OR CTRL/Z):

        THE SYSTEM WILL BE UP FOR TIMESHARING ON CHRISTMAS DAY,<RET>
        BUT THERE WILL BE NO OPERATOR COVERAGE.<RET>
        <CTRL/Z>
        PROCESSING MAIL...
        NO ERRORS.
        -DONE-
        $POP<RET>
        OPR>











                                    4-3
                          SCHEDULED SOFTWARE TASKS                          SCHEDULED SOFTWARE TASKS


                             ----- Hints -----

   Never change the file PS:<SYSTEM>MAIL.TXT with an editor.  Always  use
   MAIL.

   If you receive a message from SYSJOB before or  while  trying  to  run
   MAIL, and the message indicates a problem with MAILER or INFO, restart
   MAILER or INFO (refer to Part VI, Section  1.8  or  2.8).   Then  type
   DIRECTORY MAIL.CPY.  If the file is not found, type UNDELETE MAIL.CPY.
   Then do the following:

        1.  Type GET SYS:MAIL.

        2.  Type REENTER.

        3.  After FILE NAME OF MESSAGE FILE:, type MAIL.CPY.

        4.  After -DONE-, type DISABLE.

                            ----- Example -----

        OPR>PUSH<RET>

         TOPS-20 Command processor 6(772)
        @ENABLE<RET>
        $GET SYS:MAIL<RET>
        $REENTER<RET>

        FILE NAME OF MESSAGE FILE:MAIL.CPY      

        PROCESSING MAIL...
        NO ERRORS.
        -DONE-
        $DISABLE<RET>
        @POP<RET>
        OPR>


                           ----- Error Messages -----

   ?COULD NOT SEND TO MAILER

        MAILER is hung or not running.  Restart it.

   ?MAILER DIED, MESSAGES NOT SENT

        Restart MAILER.

   PROCESSING MAIL...SYSTEM NOT SENT BECAUSE: reason

        The reason indicates why you could not send the mail.  Often, the
        reason  is WHEEL OR OPERATOR CAPABILITY REQUIRED.  If so, be sure
        that you are logged in under OPERATOR, which should have OPERATOR
        capability, and that you have typed ENABLE.

   PROCESSING MAIL...SYSTEM NOT SENT QUOTA EXCEEDED

        You cannot send the mail because the  directory  PS:<SYSTEM>  has
        exceeded its disk storage limit.







                                    4-4
                          SCHEDULED SOFTWARE TASKS                          SCHEDULED SOFTWARE TASKS


   4.3  ENTERING ACCOUNT VALIDATION DATA WITH EDIT   4.3  ENTERING ACCOUNT VALIDATION DATA WITH EDIT

   To initially create and later  update  account  validation  data,  use
   EDIT.   Create  or  modify account entries as you are directed by your
   System Manager.  Your System Manager  must  also  tell  you  the  file
   specification of the base account validation file, if one exists.

   Type to OPR>:

        1.  PUSH

        2.  ENABLE

        3.  CONNECT STR:<directory containing file>

        4.  EDIT file

        5.  Commands to EDIT to add or modify entries in the file

        6.  EU

        7.  CONNECT

        8.  DISABLE

        9.  POP

   The base account  validation  file  contains  entries  for  each  base
   account  in  the  system.   The  format  of  the entries for each base
   account is:

        ACCOUNT name/SUBACCOUNT:file specification
        USER user name, user name,...
        DIRECTORY structure:<directory>
        GROUP (ON STRUCTURE) structure:/USER:user group number
        GROUP (ON STRUCTURE) structure:/DIRECTORY:directory group number

   Part of the format is optional, and some entries  can  be  given  more
   than once.

   Each entry can also specify an expiration date with:

        /EXPIRES:dd-mm-yy hh:mm

   When you place /EXPIRES:  after an account name, user name, directory,
   or  group number, the expiration date applies to that item only.  When
   you place /EXPIRES:   immediately  after  USER,  the  expiration  date
   applies to all user names.

   The various entries are briefly described below.

   ACCOUNT             Specifies the name of the base account.

   /SUBACCOUNT:        Specifies the file containing additional data  for
                       the  base  account.  The ACCOUNT entry allows only
                       one /SUBACCOUNT:.

   USER                Specifies  users  who  are  allowed  to  use   the
                       account.   An argument of * means all users of the
                       system.






                                    4-5
                          SCHEDULED SOFTWARE TASKS                          SCHEDULED SOFTWARE TASKS


   DIRECTORY           Specifies a directory.  Anyone with  write  access
                       to  the directory can use the account.  A * can be
                       used for the structure or directory  to  mean  all
                       structures or directories.

   GROUP               Specifies that the account can be used by  certain
                       user or directory groups on a structure.

   /CLASS:n            Specifies the numeric (n) class an account is in.

   /USER:              Modifies GROUP and specifies that the account  can
                       be used by this user group.

   /DIRECTORY:         Modifies GROUP and specifies that the account  can
                       be used by this directory group.



                            ----- Example -----

   To add a new base account to PS:<ACCOUNTS>ACCOUNTS.TXT, type:

        OPR>PUSH<RET>

         TOPS-20 Command processor 6(772)
        @ENABLE<RET>
        $CONNECT <ACCOUNTS><RET>
        $EDIT ACCOUNTS.TXT<RET>
        Edit: ACCOUNTS.TXT.3
        *I10;10<RET>
        00010  ACCOUNT LUMBER/SUBACCOUNT:<FORESTRY>ACCTS.TXT<RET>
        00020   USER MILLER,JACK,HACKSAW<RET>
        00030   $
                !
              <ESC>
        *EU<RET>

        [ACCOUNTS.TXT.4]
        $CONNECT<RET>
        $DISABLE<RET>
        @POP<RET>
        OPR>



                              ----- Hint -----

   Refer to the TOPS-20 User's Guide for more  information  on  the  EDIT
   program.

















                                    4-6
                          SCHEDULED SOFTWARE TASKS                          SCHEDULED SOFTWARE TASKS


   4.4  UPDATING THE ACCOUNT VALIDATION DATA BASE WITH ACTGEN   4.4  UPDATING THE ACCOUNT VALIDATION DATA BASE WITH ACTGEN

   After you change account validation data with EDIT or after a  project
   administrator  changes  a  subaccount file, you must run ACTGEN before
   the new data is effective.

   Type to OPR>:

        1.  PUSH

        2.  ENABLE

        3.  CONNECT PS:<ACCOUNTS>

        4.  ACTGEN

        5.  TAKE file specification

            Specify the base account validation file used in the previous
            section.

        6.  INSTALL

        7.  EXIT

        8.  DELETE ACCOUNTS-TABLE.BIN

        9.  CONNECT

       10.  DISABLE

       11.  POP



                            ----- Example -----

        OPR>PUSH<RET>

         TOPS-20 Command Processor 6(772)
        @ENABLE<RET>
        $CONNECT PS:<ACCOUNTS><RET>
        $ACTGEN<RET>
        ACTGEN>TAKE (COMMANDS FROM) ACCOUNTS.TXT<RET>
        ACTGEN>INSTALL (NEW ACCOUNT VALIDATION DATA BASE)<RET>
        ACTGEN>EXIT (TO MONITOR)<RET>
        $DELETE ACCOUNTS-TABLE.BIN.*<RET>
         ACCOUNTS-TABLE.BIN.2 [OK]
        $CONNECT<RET>
        $DISABLE<RET>
        @POP<RET>
        OPR>














                                    4-7
                          SCHEDULED SOFTWARE TASKS                          SCHEDULED SOFTWARE TASKS


                         ----- Error Messages -----

   ? ACTGEN:  GARBAGE AT END-OF-COMMAND

        Press RETURN at the end of a command.

   ? ACTGEN:  INVALID FILE SPECIFICATION, FILE NOT FOUND

        The file you specified was not found.  Check the directory of the
        file.

   ? ACTGEN:  NO SUCH ACTGEN COMMAND AS "xxx"

        You typed the command "xxx" to ACTGEN and  it  was  not  a  valid
        command,  or  in  the  file you specified for the TAKE command to
        ACTGEN there is an invalid entry beginning with "xxx".

   ? INCORRECT FIELD: xxx  IN ENTRY: aaa
   IN FILE:        file specification

        In the file you specified for the TAKE  command  to  ACTGEN,  the
        field  xxx  was  incorrect  in entry aaa.  If the field is a file
        specification, check that the  file  exists  in  the  appropriate
        directory.



   4.5  ADDING, CHANGING, AND DELETING DIRECTORIES WITH ^ECREATE   4.5  ADDING, CHANGING, AND DELETING DIRECTORIES WITH ^ECREATE

   If you need to add a directory or user  name  to  the  system,  or  to
   change  some  directory  parameters,  or  delete  a directory from the
   system, use the ^ECREATE command.



   4.5.1  Adding Directories for Users   4.5.1  Adding Directories for Users


   To give users the ability to log in to the  system,  you  must  create
   directories  for  them  on  PS:,  the  public structure.  Use the name
   approved by your System Manager for the directory name for a user.

   If the directory name contains a  ".",  for  example,  <C.SMITH>,  the
   directory   is   actually   a   subdirectory.   Before  you  create  a
   subdirectory, you must first have created its superior  directory,  in
   this  case  <C>.   You  can  determine  the  superior  directory for a
   subdirectory by using the name of the subdirectory and eliminating the
   last  "."  and  the  characters  after  it.  For example, the superior
   directory for <AL.BROWN> is  <AL>,  and  the  superior  directory  for
   <B.BLACK.1> is <B.BLACK>.

   To create a directory with default parameters, type to OPR>:

        1.  PUSH

        2.  ENABLE

        3.  ^ECREATE PS:<directory> password

        4.  <RET> to finish

        5.  DISABLE

        6.  POP


                                    4-8
                          SCHEDULED SOFTWARE TASKS                          SCHEDULED SOFTWARE TASKS


                                    NOTE

           If you are connected to structure PS:   when  you  are
           creating  a  directory  to allow a user to log in, you
           can omit PS:  in the ^ECREATE command.

                            ----- Example -----

        OPR>PUSH<RET>

         TOPS-20 Command processor 6(772)
        @ENABLE<RET>
        $^ECREATE PS:<NATHANIEL> MATTHEW<RET>
        [NEW]
        $$<RET>
        $DISABLE<RET>
        @POP<RET>
        OPR>

   To create a directory with some nondefault values, type to OPR>:

        1.  PUSH

        2.  ENABLE

        3.  ^ECREATE PS:<directory>

        4.  PASSWORD password

        5.  Other nondefault parameters and arguments, if any

        6.  <RET> to finish

        7.  DISABLE

        8.  POP

   (Refer to  Chapter  3  of  the  TOPS-20  Operator's  Command  Language
   Reference  Manual  for  a  description  of  ^ECREATE  commands  to set
   directory parameters.)

                            ----- Example -----

   In this example, assume that subjob O is connected  to  structure  PS:
   and that <G> already exists and allows subdirectories.

        OPR>PUSH<RET>

         TOPS-20 Command processor 6(772)
        @ENABLE<RET>
        $^ECREATE <G.PLAZA><RET>
        [NEW]
        $$PASSWORD STACHIA<RET>
        $$ACCOUNT-DEFAULT TEXTILES<RET>
        $$WORKING (DISK STORAGE PAGE LIMIT) 900<RET>
        $$PERMANENT (DISK STORAGE PAGE LIMIT) 600<RET>
        $$<RET>
        $DISABLE<RET>
        @POP<RET>
        OPR>






                                    4-9
                          SCHEDULED SOFTWARE TASKS                          SCHEDULED SOFTWARE TASKS


   4.5.2  Adding Directories on Mountable Structures   4.5.2  Adding Directories on Mountable Structures

   To create a directory  which  a  user  can  CONNECT  to  or  ACCESS  a
   directory on a structure other than PS:, type to OPR>:

        1.  PUSH

        2.  ENABLE

        3.  MOUNT STRUCTURE STR:

        4.  ^ECREATE str:<directory>

        5.  Any nondefault parameters

        6.  <RET> to finish

        7.  DISMOUNT STRUCTURE STR:

        8.  DISABLE

        9.  POP

                            ----- Example -----

        OPR>PUSH<RET>

         TOPS-20 Command Processor 6(772)
        @ENABLE<RET>
        $MOUNT STRUCTURE 4SQM:<RET>
        STRUCTURE 4SQM: mounted
        $^ECREATE 4SQM:<TESTQ><RET>
        [NEW]
        $$PASSWORD KITS<RET>
        $$<RET>
        $DISMOUNT STRUCTURE 4SQM:<RET>
        STRUCTURE 4SQM: dismounted
        $DISABLE<RET>
        @POP<RET>
        OPR>



   4.5.3  Adding Files-Only Directories   4.5.3  Adding Files-Only Directories

   To create a directory that no one can log in to but that is used  only
   to store files, type to OPR>:

        1.  PUSH

        2.  ENABLE

        3.  ^ECREATE structure:<directory>

        4.  FILES-ONLY

        5.  Other nondefault parameters and arguments, if any

        6.  <RET> to finish

        7.  DISABLE

        8.  POP



                                    4-10
                          SCHEDULED SOFTWARE TASKS                          SCHEDULED SOFTWARE TASKS


   You can specify the structure name in Step 3 or omit  it  to  indicate
   your currently connected structure.



                            ----- Example -----

        OPR>PUSH<RET>

         TOPS-20 Command processor 6(772)
        @ENABLE<RET>
        $^ECREATE <FORTRAN-DATA><RET>
        [NEW]
        $$FILES-ONLY<RET>
        $$WORKING (DISK STORAGE PAGE LIMIT) 2000<RET>
        $$PERMANENT (DISK STORAGE PAGE LIMIT) 2000<RET>
        $$DIRECTORY-GROUP 17<RET>
        $$<RET>
        $DISABLE<RET>
        @POP<RET>
        OPR>



                              ----- Hint -----

   A password is optional for a  FILES-ONLY  directory.   (Refer  to  the
   TOPS-20  Operator's  Command  Language Reference Manual for additional
   information on the FILES-ONLY subcommand of the ^ECREATE command.)



   4.5.4  Changing Directory Parameters   4.5.4  Changing Directory Parameters

   To simply change a password, type to OPR>:

        1.  PUSH

        2.  ENABLE

        3.  ^ECREATE structure:<directory> new-password

        4.  DISABLE

        5.  POP

   You can omit the structure name in Step 3 if you are connected to  the
   structure containing the directory.



                            ----- Example -----

        OPR>PUSH<RET>

         TOPS-20 Command processor 6(772)
        @ENABLE<RET>
        $^ECREATE <MCKIE> PQXY<RET>
        [OLD]
        $$<RET>
        $DISABLE<RET>
        @POP<RET>
        OPR>



                                    4-11
                          SCHEDULED SOFTWARE TASKS                          SCHEDULED SOFTWARE TASKS


   To change other directory parameters, type to OPR>:

        1.  PUSH

        2.  ENABLE

        3.  ^ECREATE structure:<directory>

        4.  Parameters and new values

        5.  <RET> to finish

        6.  DISABLE

        7.  POP



                            ----- Example -----

        OPR>PUSH<RET>

         TOPS-20 Command processor 6(772)
        @ENABLE<RET>
        $^ECREATE QAT:<GOLDSTEIN><RET>
        [OLD]
        $$IPCF<RET>
        $$WORKING (DISK STORAGE PAGE LIMIT) 1000<RET>
        $$<RET>
        $DISABLE<RET>
        @POP<RET>
        OPR>



   4.5.5  Changing Directory Names   4.5.5  Changing Directory Names

   To change a directory name, create a temporary directory,  rename  the
   user's  files  into  it, list the parameters of the directory that you
   are changing, and then kill it.  Then create a new directory with  the
   correct  name and parameters, rename the user's files into it from the
   temporary directory, and kill the temporary directory.

   The procedure for changing a  directory  name  is  given  below.   The
   structure  argument  must  be the name of the structure containing the
   directory you want to change.  You can omit Steps  3  and  24  if  the
   structure is PS:.

   Type to OPR>:

        1.  PUSH

        2.  ENABLE

        3.  MOUNT STRUCTURE structure name:

        4.  CONNECT structure:

        5.  ^ECREATE <temporary-directory>

        6.  FILES-ONLY





                                    4-12
                          SCHEDULED SOFTWARE TASKS                          SCHEDULED SOFTWARE TASKS


        7.  Other directory parameters; be sure  that  the  disk  storage
            page  limits  are  large enough to accommodate the files from
            the old directory that you are changing

        8.  <RET> to finish creating the directory

        9.  RENAME
            <old-directory>*.*.* (TO BE) <temporary-directory>*.*.*

       10.  ^ECREATE <old-directory>

       11.  LIST

       12.  KILL

       13.  <RET> to [CONFIRM]

       14.  <RET> to finish killing the directory

       15.  ^ECREATE <new-directory>

       16.  Directory parameters output by LIST in Step 11

       17.  <RET> to finish creating the directory

       18.  RENAME<temporary-directory>*.*.* (TO BE) <new-directory>*.*.*

       19.  ^ECREATE <temporary-directory>

       20.  KILL

       21.  <RET> to [CONFIRM]

       22.  <RET> to finish killing the directory

       23.  CONNECT

       24.  DISMOUNT STRUCTURE str:

       25.  DISABLE

       26.  POP
























                                    4-13
                          SCHEDULED SOFTWARE TASKS                          SCHEDULED SOFTWARE TASKS


                            ----- Example -----

   This example shows how to change a directory on TST:   from  RINKO  to
   HRINKO.

        OPR>PUSH<RET>

         TOPS-20 Command processor 6(772)
        @ENABLE<RET>
        $MOUNT STRUCTURE TST:<RET>
        $CONNECT TST:<RET>
        $^ECREATE <TMPDIR><RET>
        [NEW]
        $$FILES-ONLY<RET>
        $$WORKING (DISK STORAGE PAGE LIMIT) 500<RET>
        $$PERMANENT (DISK STORAGE PAGE LIMIT) 500<RET>
        $$<RET>
        $RENAME (EXISTING FILE) <RINKO>*.*.* (TO BE) <TMPDIR>*.*.*<RET>
         <RINKO>A..2 => <TMPDIR>A..2 [OK]
         <RINKO>SORT.MAC.1 => <TMPDIR>SORT.MAC.1 [OK]
         <RINKO>TEST..1 => <TMPDIR>TEST..1 [OK]
        $^ECREATE <RINKO><RET>
        [OLD]
        $$LIST<RET>
         NAME <RINKO>
         WORKING DISK STORAGE PAGE LIMIT 350
         PERMANENT DISK STORAGE PAGE LIMIT 350
         NUMBER OF DIRECTORY 24
         LAST LOGIN 5-MAR-82 16:03:25

        $$KILL<RET>
        [CONFIRM]<RET>
        $$<RET>
        $^ECREATE <HRINKO><RET>
        [NEW]
        $$PASSWORD HELEN<RET>
        $$WORKING (DISK STORAGE PAGE LIMIT) 350<RET>
        $$PERMANENT (DISK STORAGE PAGE LIMIT) 350<RET>
        $$NUMBER (OF DIRECTORY) 24<RET>
        $$<RET>
        $RENAME (EXISTING FILE) <TMPDIR>*.*.* (TO BE) <HRINKO>*.*.*<RET>
         <TMPDIR>A..2 => <HRINKO>A..2 [OK]
         <TMPDIR>SORT.MAC.1 => <HRINKO>SORT.MAC.1 [OK]
         <TMPDIR>TEST..1 => <HRINKO>TEST..1 [OK]
        $^ECREATE <TMPDIR><RET>
        [OLD]
        $$KILL<RET>
        [CONFIRM]<RET>
        $$<RET>
        $CONNECT<RET>
        $DISMOUNT TST:<RET>
        $DISABLE<RET>
        $POP<RET>
        OPR>
        1:02:23            -- Structure TST: Dismounted --
        OPR>










                                    4-14
                          SCHEDULED SOFTWARE TASKS                          SCHEDULED SOFTWARE TASKS


   4.5.6  Deleting User Names or Directories   4.5.6  Deleting User Names or Directories

   To delete a user name or directory from the system, type to OPR>:

        1.  PUSH

        2.  ENABLE

        3.  ^ECREATE structure:<directory>

        4.  KILL

        5.  <RET> to [CONFIRM]

        6.  <RET> to finish

        7.  POP

   You can omit the structure name in Step 3 if you are connected to  the
   structure containing the directory.



                            ----- Example -----

        OPR>PUSH<RET>

         TOPS-20 Command processor 6(772)
        @ENABLE<RET>
        $^ECREATE BASIC:<HJOHN><RET>
        [OLD]
        $$KILL<RET>
        [CONFIRM]<RET>
        $$<RET>
        $POP<RET>
        OPR>


                                    NOTE

           When you kill a directory, you  delete  the  files  in
           that directory.  Do not kill a user's directory if the
           user is logged in, because you would not  be  able  to
           free  his job number until you reload TOPS-20.  If you
           need to log out the user, use the LOGOUT command,  and
           then  KILL  the  directory.   If  you  cannot  kill  a
           directory, see the KILL  subcommand  to  the  ^ECREATE
           command in Chapter 3 of the TOPS-20 Operator's Command
           Language Reference Manual.

   Your System Manager should have a form that new users can complete  to
   request  access  to  the system.  A sample form is printed on the next
   page.













                                    4-15
                          SCHEDULED SOFTWARE TASKS                          SCHEDULED SOFTWARE TASKS


                            USER ACCOUNT REQUEST


   REQUESTOR'S NAME:                                    DATE:

   SUPERVISOR:

                            --------------------

   NAME OF DIRECTORY:                                   PASSWORD:

   PERMANENT STORAGE ALLOCATION (PAGES):                ACCOUNT:

   WORKING STORAGE ALLOCATION (PAGES):

                            --------------------

   OPTIONAL ATTRIBUTES

   NUMBER OF GENERATIONS TO KEEP (DEFAULT IS 1):

   STANDARD FILE PROTECTION (DEFAULT IS 777700):

   PROTECTION OF DIRECTORY (DEFAULT IS 777700):

   DIRECTORY GROUPS:

|  USER-OF-GROUPS:

   MAXIMUM SUBDIRECTORIES ALLOWED:

   SUBDIRECTORY USER GROUPS ALLOWED:

   FILES-ONLY?

   CONFIDENTIAL INFORMATION ACCESS CAPABILITY?

   MAINTENANCE CAPABILITY?

   OPERATOR CAPABILITY?

   WHEEL CAPABILITY?

   IPCF CAPABILITY?

   ENQ-DEQ CAPABILITY?

                        DO NOT WRITE BELOW THIS LINE
                            --------------------

   APPROVED BY:                                         DATE:

   IMPLEMENTED BY:                                      DATE:

   DIRECTORY NUMBER ASSIGNED:











                                    4-16
                          SCHEDULED SOFTWARE TASKS                          SCHEDULED SOFTWARE TASKS


   4.6  DUMPING DIRECTORY PARAMETERS WITH DLUSER   4.6  DUMPING DIRECTORY PARAMETERS WITH DLUSER

   Once you add, change, or delete a directory, you should run DLUSER  to
   get  a  backup copy of the directory parameters defined with ^ECREATE.
   Also, if your installation allows users to change directory parameters
   with  SET DIRECTORY or to create subdirectories with BUILD, you should
   get this backup copy periodically at a time scheduled by  your  System
   Manager.   The backup copy can be used to restore directory parameters
   when you are recovering part of the file system.

   The following three sections explain how to dump directory parameters:

        1.  Dump directory parameters for the public structure, PS:,  and
            create  a  system  backup  tape.   This  tape  is helpful for
            restoring directories.  (See Part V Section 4.6.1)

        2.  Dump directory parameters  for  structures  other  than  PS:.
            Part V Section 4.6.2

        3.  Use DLUSER.  (See Part V Section 4.6.3)




   4.6.1  Dumping Directory Parameters for PS:   4.6.1  Dumping Directory Parameters for PS:

   You should put a backup copy of directory  parameters  for  PS:   onto
   magnetic   tape.    For   ease  in  restoring  the  directories  after
   re-creating the file  system,  you  should  also  have  the  following
   critical system programs on the same tape as the directory parameters.

        1.  PS:<SYSTEM>MONITR.EXE

        2.  SYSTEM:EXEC.EXE

        3.  SYS:DLUSER.EXE

        4.  SYS:DUMPER.EXE

        5.  All files from PS:<NEW-SYSTEM> and PS:<SYSTEM>

        6.  All files from PS:<NEW-SUBSYS> and PS:<SUBSYS>

        7.  All files from PS:UETP.LIB

   To dump user directories  from  PS:   with  DLUSER  and  put  them  on
   magnetic  tape  along  with the files listed above, type PUSH to OPR>.
   Then:

        1.  Type SUBMIT SYS:SYSTAP.CTL.

        2.  Wait until SYSTAP.LOG and SYSTAP.LPT are printed on the  line
            printer.

        3.  Look at the two printed files.  If there are errors, try  the
            SUBMIT command again or notify your System Manager.

        4.  Once the control file runs without  error,  file  the  backup
            tape along with the two listings.







                                    4-17
                          SCHEDULED SOFTWARE TASKS                          SCHEDULED SOFTWARE TASKS


                            ----- Example -----

        OPR>PUSH<RET>
         TOPS-20 Command processor 6(772)
        @SUBMIT SYS:SYSTAP.CTL<RET>
        [JOB SYSTAP QUEUED, REQUEST-ID 2745, LIMIT 0:05:00]
        @POP<RET>
        OPR>



   4.6.2  Dumping Directory Parameters for Other Structures   4.6.2  Dumping Directory Parameters for Other Structures

   If there are other structures in addition to PS:  on your system,  put
   a backup copy of the directory parameters for each of those structures
   into files SYSTEM:str.TXT, where str: is the relevant structure  name.
   You can also use OPR to MOUNT and DISMOUNT the structure.

   For each structure, type to OPR>:

        1.  PUSH

        2.  ENABLE

        3.  MOUNT STRUCTURE str:

        4.  DLUSER

        5.  STRUCTURE str:

        6.  DUMP SYSTEM:str.TXT

        7.  EXIT

        8.  DISMOUNT STRUCTURE str:

        9.  DISABLE

       10.  POP

                            ----- Example -----

   To get a backup copy of the directory parameters for SNARK:

        OPR>PUSH<RET>

         TOPS-20 Command Processor 6(772)
        @ENABLE<RET>
        $MOUNT STRUCTURE SNARK:<RET>
        $DLUSER<RET>
        DLUSER>STRUCTURE SNARK:<RET>
        DLUSER>DUMP PS:<SYSTEM>SNARK.TXT<RET>

        DONE.
        DLUSER>EXIT<RET>
        $DISMOUNT STRUCTURE SNARK:<RET>
        STRUCTURE SNARK: dismounted
        $DISABLE<RET>
        @POP<RET>
        OPR>






                                    4-18
                          SCHEDULED SOFTWARE TASKS                          SCHEDULED SOFTWARE TASKS


   4.6.3  Using DLUSER   4.6.3  Using DLUSER

   The following discussion gives more detail on DLUSER if  you  want  to
   run it from your terminal.

   Once DLUSER is running, it outputs DLUSER> as its prompt.  Then, after
   it  finishes  a  command, it outputs the prompt again.  You can type ?
   after the prompt to get a list of the DLUSER commands.   While  DLUSER
   is  processing a DUMP or LOAD command, you can find out what directory
   it is currently working on by typing CTRL/A.  When you type CTRL/A you
   receive the message:

        WORKING ON DIRECTORY structure:<directory>





















































                                    4-19
                          SCHEDULED SOFTWARE TASKS                          SCHEDULED SOFTWARE TASKS


   The commands to DLUSER are:

        DUMP filespec      specifies to dump directory parameters into  a
                           file  specification  (filespec).   The default
                           file specification is DSK:USERS.TXT.

        EXIT               specifies to exit from DLUSER  and  return  to
                           the monitor.

        HELP               specifies   to   display   a   help    message
                           summarizing  the  functions  and  commands  of
                           DLUSER.

        LOAD filespec      specifies to load directory parameters from  a
                           file specification (filespec).

        STRUCTURE name     specifies the structure name  (name)  that  is
                           used  for  the  DUMP  or  LOAD  command.   The
                           default is your connected structure.

                         ----- Error Messages -----

   ? GROUP BLOCK IS TOO SMALL, ABORTING ...

        If this error occurs, notify the person  responsible  for  system
        software at your installation.

   ? INVALID COMMAND CONFIRMATION

        You pressed a key other than RETURN or LINE FEED after a command.

   ? INVALID STRUCTURE NAME GIVEN

        You specified a structure that is not mounted, or you forgot  the
        colon after the structure name.

   ? NOT A DLUSER COMMAND

        The command that you typed is not a valid DLUSER command.

   ? UNABLE TO GET FIRST DIRECTORY

        There is a problem on the structure for  which  you  are  running
        DLUSER.   The  file  you are dumping is not complete.  Run CHECKD
        with the CHECK BITTABLE command to determine the problems on  the
        structure.

   ? UNABLE TO GET NEXT DIRECTORY

        There is a problem on the structure for  which  you  are  running
        DLUSER.   The  file  you are dumping is not complete.  Run CHECKD
        with the CHECK BITTABLE command to determine the problems on  the
        structure.



   4.7  GETTING INFORMATION ABOUT DIRECTORIES   4.7  GETTING INFORMATION ABOUT DIRECTORIES

   To check various  directory  parameters  or  to  provide  your  System
   Manager  with  certain directory information, you can use the ^ECREATE
   command, the ^EPRINT command, or the  ULIST  program.   The  following
   three sections show what each one can list for you.

   If you decide to change any parameters after you have listed them,  be
   sure to run DLUSER (Part V Section 4.6.3) and dump the directories.

                                    4-19
                          SCHEDULED SOFTWARE TASKS                          SCHEDULED SOFTWARE TASKS


   4.7.1  Listing Directory Parameters with ^ECREATE   4.7.1  Listing Directory Parameters with ^ECREATE

   If you expect to change some  directory  parameters,  this  method  is
   useful.

   To list all the parameters of one  directory,  use  the  LIST  VERBOSE
   command  to  ^ECREATE.   To  list only nondefaulted parameters for the
   directory, use the LIST command to ^ECREATE.  Type to OPR>:

        1.  PUSH

        2.  ENABLE

        3.  ^ECREATE structure:<directory>

        4.  LIST VERBOSE or LIST

        5.  DISABLE

        6.  POP

   You can omit the structure name in Step 3 if you are connected to  the
   structure   containing  the  directory.   You  can  also  change  some
   parameters  after  listing  them.   (See  Chapter  3  of  the  TOPS-20
   Operator's  Command  Language  Reference  Manual  for  details  on the
   ^ECREATE command.)

   The LIST VERBOSE sub-command to ^ECREATE outputs the same  information
   as  ^EPRINT  directory  VERBOSE, and LIST to ^ECREATE is equivalent to
   ^EPRINT directory.  The advantage of  using  the  LIST  subcommand  to
   ^ECREATE, instead of ^EPRINT, is that you can immediately give another
   subcommand to ^ECREATE.

                            ----- Examples -----

        1.  To list all parameters:

            OPR>PUSH<RET>

             TOPS-20 Command processor 6(772)
            @ENABLE<RET>
            $^ECREATE <HESS><RET>
            [OLD]
            $$LIST VERBOSE<RET>
             NAME <HESS>
             WORKING DISK STORAGE PAGE LIMIT 800
             PERMANENT DISK STORAGE PAGE LIMIT 300
             WHEEL
             NOT OPERATOR
             NOT CONFIDENTIAL INFORMATION ACCESS
             NOT MAINTENANCE
             NOT IPCF
             NOT ENQ-DEQ
             NOT FILES-ONLY
             NUMBER OF DIRECTORY 330
             DEFAULT FILE PROTECTION 777752
             ACCOUNT DEFAULT FOR LOGIN 841
             PROTECTION OF DIRECTORY 777740
             GENERATIONS TO KEEP 1
             MAXIMUM SUBDIRECTORIES ALLOWED 0
             LAST LOGIN 18-AUG-79 01:40:22
|            USER-OF-GROUPS 1
             DIRECTORY GROUPS - NONE SET
             SUBDIRECTORY USER GROUPS ALLOWED - NONE SET
|            TOPS-10 project-programmer number - none set

                                    4-20
                          SCHEDULED SOFTWARE TASKS                          SCHEDULED SOFTWARE TASKS


        2.  To list nondefaulted parameters:

            $^ECREATE (DIRECTORY NAME) ARCH:<MURPHY><RET>
            [OLD]
            $$LIST      
             NAME ARCH:<MURPHY>
             WORKING DISK STORAGE PAGE LIMIT 4000
             PERMANENT DISK STORAGE PAGE LIMIT 600
             IPCF
             NUMBER OF DIRECTORY 20
             GENERATIONS TO KEEP 3
             LAST LOGIN 19-AUG-79 11:51:30
|            USER-OF-GROUPS 1
|            TOPS-10 project-programmer number - none set

            $$<RET>




   4.7.2  Listing Directory Parameters with EPRINT   4.7.2  Listing Directory Parameters with EPRINT

   To list all the parameters of one directory, use the  ^EPRINT  command
   with  the  VERBOSE  subcommand.  To list only nondefaulted parameters,
   use ^EPRINT with no subcommands.  Type to OPR>:

        1.  PUSH

        2.  ENABLE

        3.  ^EPRINT structure:<directory>,
            VERBOSE
            <RET>

            or

            ^EPRINT structure:<directory>

        4.  POP

   You can omit the structure name in Step 3 if you are connected to  the
   structure containing the directory.

   After you get the list of parameters with ^EPRINT, you must  then  use
   ^ECREATE to change any of them.

                            ----- Examples -----

        1.  To list the nondefaulted parameters of a directory:

            OPR>PUSH<RET>

             TOPS-20 Command processor 6(772)
            @ENABLE<RET>
            $^EPRINT <N.ROSEN><RET>
             NAME PS:<N.ROSEN>
             WORKING DISK STORAGE PAGE LIMIT 1000
             PERMANENT DISK STORAGE PAGE LIMIT 150
             NUMBER OF DIRECTORY 344
             ACCOUNT DEFAULT FOR LOGIN LANGUAGES
             LAST LOGIN 26-AUG-79 06:19:11
|            TOPS-10 project-programmer number - none set




                                    4-21
                          SCHEDULED SOFTWARE TASKS                          SCHEDULED SOFTWARE TASKS


        2.  To list all the parameters of a directory:

            OPR>PUSH<RET>

             TOPS-20 Command processor 6(772)
            $^EPRINT <CPERLMAN>,<RET>
            $$VERBOSE<RET>
            $$<RET>
             Name GIDNEY:<CPERLMAN>
             Working disk storage page limit 50
             Permanent disk storage page limit 50
             not WHEEL
             OPERATOR
             not CONFIDENTIAL INFORMATION ACCESS
             not MAINTENANCE
             not IPCF
             not ENQ-DEQ
             not FILES-ONLY
             Number of directory 610
             Default file protection 777700
             Account default for LOGIN 341
             Protection of directory 777700
             Generations to keep 1
             Maximum subdirectories allowed 0
             Last LOGIN 1-Aug-83 12:23:50
             User of groups - none set
             Directory groups - none set
             Subdirectory user groups allowed - none set
|            Online expiration default 60 Days
|            Offline expiration default 90 Days
|            Remote aliases - none set
|            TOPS10 project-programmer number - none set

            $DISABLE<RET>
            @POP      
            OPR>




   4.7.3  Listing Directory Parameters with ULIST   4.7.3  Listing Directory Parameters with ULIST

   The ULIST program can give you four types of listings:

        1.  An alphabetic list of all directories on a structure and  all
            the directory parameters

        2.  A numeric list of directories on  a  structure  according  to
            directory numbers and all the directory parameters

        3.  A mini-listing containing only directory numbers and names on
            a structure

        4.  A  directory  group  listing  giving  groups  used,   highest
            directory  in  use,  first free directory, the directories in
            each group, the users having access to each group, the  users
            with   special   capabilities,   and   directories  that  are
            files-only.








                                    4-22
                          SCHEDULED SOFTWARE TASKS                          SCHEDULED SOFTWARE TASKS


   To run ULIST, you must have OPERATOR or WHEEL capability, but  you  do
   not need to type ENABLE.  Type PUSH to OPR> and type:

        1.  ULIST

        2.  ULIST commands, separated by <RET>,  to  select  the  desired
            type and format of listing

        3.  BEGIN to start the listing

        4.  EXIT to return to TOPS-20 command level

   When ULIST is running,  it  prompts  with  ULIST>  for  each  command.
   Follow  each  command  with <RET>.  To see the commands to ULIST, type
   HELP as the command.  For example:

        OPR>PUSH<RET>

         TOPS-20 Command processor 6(772)
        @ULIST<RET>
        ULIST>HELP<RET>

        COMMANDS ARE:

        ALPHABETIC (LIST OF USERS)
        BEGIN (LISTING)          [Starts outputting the listing]
        DIRECTORY (GROUP LISTING)
        EXIT (TO MONITOR)
        HELP
        MINI (LISTING FORMAT)    [Name & directory number only]
        NARROW (PAPER FORMAT)
        NUMERIC (LIST OF USERS)
        OUTPUT (TO FILE) FILE-SPEC
        PRINT (LISTING ON PRINTER)
        STRUCTURE (TO USE) STR-NAME
        WIDE (PAPER FORMAT)

        ASSUMED ARE: NUMERIC, WIDE, OMIT, AND OUTPUT TO TTY:
        ULIST>

   The  different  types  of  lists  are  obtained  with   the   commands
   ALPHABETIC,  NUMERIC,  MINI, and DIRECTORY.  These commands correspond
   to the explanations at the beginning of this section.  If you  do  not
   specify  the type of list, NUMERIC is assumed.  Each of these commands
   produces a different listing.

   If you want the output on narrow paper (80 columns), give  the  NARROW
   command because WIDE (132 columns) is the default.

   The listing is printed on your terminal, because output  to  TTY:   is
   the  default,  unless you give the OUTPUT or PRINT command.  The PRINT
   command gives you a listing on the line printer.  OUTPUT followed by a
   file  specification puts the listing into the file given.  The default
   file for the OUTPUT command is USERS.TXT.












                                    4-23
                          SCHEDULED SOFTWARE TASKS                          SCHEDULED SOFTWARE TASKS


                            ----- Examples -----

        1.  To produce a numeric list of directories on  structure  SNARK
            on the printer with narrow paper.

            OPR>PUSH<RET>

             TOPS-20 Command processor 6(772)
            @ULIST<RET>
            ULIST>PRINT<RET>
            ULIST>STRUCTURE SNARK:<RET>
            ULIST>NARROW<RET>
            ULIST>BEGIN<RET>
             DONE

            ULIST>EXIT<RET>
            @POP<RET>
            OPR>

            There may be a time lag before and after DONE is output.

            The line printer listing starts as follows:
        NAME,ACCOUNT    (STRUCTURE: SNARK)      WED 5-MAR-82     PAGE 1
|         DIR#   PRIVILEGES  LOGIN-QUOTA LOGOUT-QUOTA USER-OF-GROUPS  DIR-GROUPS
        (   MODES     DEF-FILE-PRO   DIR-PROT   DEF-FILE-RET )

        SNARK:<ROOT-DIRECTORY>
              1            0         4700         4700
        (600000000000 500000777700 500000777700            1 )
        SNARK:<SYSTEM>
              2            0         7000         7000
        (600000000000 500000777752 500000777740            0 )
        SNARK:<SUBSYS>
              3            0        10000         4800                      1
        (600000000000 500000777752 500000770000            1 )
        SNARK:<ACCOUNTS>
              4            0        10000        10000
        (600000000000 500000777700 500000777700            0 )
        SNARK:<OPERATOR>,390
              5       300000         2000         2000   2479,2480
        SNARK:<SPOOL>
              6            0         2000          150
        (600000000000 500000777700 500000777777            0 )
        SNARK:<TES>,QA
                      20       0              250         250        5,4,7 2,4
        (200000000000 500000777700 500000777740            1 )


            Thus,  the  listing  is  in  ascending  order  according   to
            directory   number.   The  line  beginning  and  ending  with
            parentheses is omitted if the values for  the  parameters  in
            that line are system defaults.














                                    4-24
                          SCHEDULED SOFTWARE TASKS                          SCHEDULED SOFTWARE TASKS


   For each directory the following values are given:

        NAME

             This is the directory name.

        ACCOUNT

             This is the default account for a user logging into the
             directory.

        DIR-#

             This is the number of the directory.

        PRIVILEGES

             This is the right half of the capability word (bits 18-35).

             Bit 18=1 allows WHEEL capability
             Bit 19=1 allows OPERATOR capability
             Bit 20=1 allows CONFIDENTIAL INFORMATION ACCESS capability
             Bit 21=1 allows MAINTENANCE capability
             Bit 22=1 allows IPCF capability
             Bit 23=1 allows ENQ-DEQ capability
             Bit 24=1 allows NET-WIZARD privileges
             Bit 25=1 allows NETWORK ABSOLUTE SOCKET privileges
             Bit 26=1 allows DECnet-20 access
             Bit 27=1 allows ARPANET access

        LOGIN-QUOTA

             This is the number of pages for working  disk  storage  page
             limit.

        LOGOUT-QUOTA

             This is the number of pages for permanent disk storage  page
             limit.

|       USER-OF-GROUPS
|  
|            This indicates which directory groups the user can access.

        DIR-GROUPS

             This indicates which directory groups this directory is in.

        MODES

             This is the mode word of the directory (bits 0 to 35).

             Bit  0=1  allows  a  FILES-ONLY  directory  Bit  1=1  allows
             ALPHANUMERIC ACCOUNTS Bit 2=1 allows REPEATED LOGIN MESSAGES

        DEF-FILE-PRO

             This is the default file protection.  Only the rightmost six
             octal digits are significant.







                                    4-25
                          SCHEDULED SOFTWARE TASKS                          SCHEDULED SOFTWARE TASKS


        DIR-PROT

             This is the default protection for the directory.  Only  the
             rightmost six octal digits are significant.

        DEF-FILE-RET

             This is the default number of generations of a file to keep.

        2.  To produce an alphabetic list  of  directories  on  structure
            SNARK  on  your terminal, on narrow paper, type the following
            commands:

            OPR>PUSH      

             TOPS-20 Command processor 6(772)
            @ULIST      
            ULIST>NARROW (PAPER FORMAT)      
            ULIST>STRUCTURE (TO USE) SNARK:      
            ULIST>ALPHABETIC (LIST OF USERS)      
            ULIST>BEGIN      
             DONE

            The listing on your terminal starts to appear as follows:

   ^LNAME,ACCOUNT (STRUCTURE: SNARK)      WED 5-MAR-81    PAGE 1

|    DIR-#   PRIVILEGES  LOGIN-QUOTA LOGOUT-QUOTA USER-OF-GROUPS  DIR-GROUPS
   (   MODES     DEF-FILE-PRO   DIR-PROT   DEF-FILE-RET )

   SNARK:<1A>,
        65            0          250          250
   SNARK:<BEN>
       611       400000         2500         2000
   (600000000000 500000777752 500000777740            1 )
   SNARK:<FIELD-IMAGE>,
       315            0         2000          250                       1
   (600000000000 500000777752 500000777740            1 )
                                               .
                                               .
                                               .

            The  output  is  alphabetical   by   directory   name.    The
            information  for  each  directory  is  identical to that in a
            numeric list.  The line beginning and ending with parentheses
            is  omitted if the values for the parameters in that line are
            system defaults.


        3.  To get a mini-listing on your terminal on narrow paper of the
            directories  on  the  public  structure,  type  the following
            commands:

            @ULIST<RET>
            ULIST>MINI<RET>
            ULIST>NARROW<RET>
            ULIST>BEGIN<RET>
             DONE








                                    4-26
                          SCHEDULED SOFTWARE TASKS                          SCHEDULED SOFTWARE TASKS


            The listing appears on your terminal as follows:

            List of structure: PS       Wednesday, 5 March 82   

             1 PS:<ROOT-DIRECTORY>
             2 PS:<SYSTEM>                   72 PS:<BROWN>
             3 PS:<SUBSYS>                   73 PS:<MULLEN.C>
             4 PS:<ACCOUNTS>                 74 PS:<MAINTENANCE>
             5 PS:<OPERATOR>                 75 PS:<TWAITS>
             6 PS:<SPOOL>                    76 PS:<DIPACE.1>
             7                               77 PS:<CALABI>
            10                              100 PS:<SKOGLUND>
            11                              101 PS:<2BOSACK>
            12                              102 PS:<BEERS>
            13                              103 PS:<LEACHE>
            14                              104 PS:<MILLER>
            15                              105 PS:<HOLLAND>
            16                              106 PS:<SAMBERG>
            17                              107 PS:<FREE4>
            20 PS:<FINER>                   110 PS:<VANDERHOOFT>


            The output is given in order of directory numbers, going down
            the page in columns.  Each entry has a directory number and a
            structure name:directory name,  which  may  be  blank  if  no
            directory has been created for that number.

        4.  To get a directory group listing for the public structure  on
            your terminal on narrow paper, type the following commands:

            @ULIST      
            ULIST>DIRECTORY      
            ULIST>NARROW      
            ULIST>BEGIN      
             DONE

            The listing appears on your terminal as follows:

                         USER AND DIRECTORY GROUPS ON STRUCTURE: PS

                            WEDNESDAY, 5 March 82



            THE FOLLOWING GROUPS ARE IN USE:

            1       2       3       2393

            THE HIGHEST DIRECTORY IN USE IS NUMBER: 605

            THE FIRST FREE DIRECTORY NUMBER IS: 60

            THE FOLLOWING DIRECTORIES ARE IN GROUP  1

            PS:<1FIELD-IMAGE>, PS:<1HURLEY>, PS:<1KIRSCHEN>,
            PS:<1MILLER>,
            PS:<1MONITOR>, PS:<1SOURCES>









                                    4-27
                          SCHEDULED SOFTWARE TASKS                          SCHEDULED SOFTWARE TASKS


            THE FOLLOWING USERS HAVE ACCESS TO GROUP  1

            PS:<BOSACK>, PS:<HALL>, PS:<HELLIWELL>, PS:<HESS>,
            PS:<HURLEY>,
            PS:<KIRSCHEN>


            THE FOLLOWING DIRECTORIES ARE IN GROUP  2

            PS:<ABEL>, PS:<EXERCISER>


            THE FOLLOWING USERS HAVE ACCESS TO GROUP  2

            PS:<ALUSIC>
                                          .
                                          .
                                          .

            THE FOLLOWING USERS ARE WHEELS:

            PS:<HALL>, PS:<HURLEY>, PS:<KIRSCHEN>, PS:<MCLEAN>,
            PS:<MILLER>,
            PS:<SNYDER>

            THE FOLLOWING USERS ARE OPERATORS:

            PS:<OPERATOR>

            THE FOLLOWING USERS HAVE CONFIDENTIAL INFORMATION ACCESS:

            PS:<MCLEAN>

            THE FOLLOWING DIRECTORIES ARE FILES-ONLY:

            PS:<1-UTILITIES>, PS:<1A-EXEC>, PS:<1A-MONITOR>,
            PS:<1A-UTILITIES>,
            PS:<ROOT-DIRECTORY>, PS:<SPOOL>, PS:<SUBSYS>, PS:<SYSTEM>,
            PS:<V-SOURCES>
                                          .
                                          .
                                          .

            ULIST>EXIT      
            @POP      
            OPR>




















                                    4-28
                          SCHEDULED SOFTWARE TASKS                          SCHEDULED SOFTWARE TASKS


                             ----- Error Messages -----

   ? INVALID STRUCTURE NAME GIVEN

        You specified a structure that is not mounted or you omitted
        the colon after the structure name.

   ? ULIST: CANNOT OPEN SPECIFIED FILE

        The file access protection is such that you can not write into
        the file.

   ? ULIST: GARBAGE AT END-OF-COMMAND

        You typed an illegal character within the command or at the
        end of the command.

   ? ULIST: INVALID FILE SPECIFICATION

        The file specification that you typed is not valid.

   ? ULIST: NO SUCH ULIST COMMAND AS "command typed"

        You typed something that is not a ULIST command. Type HELP after
        the prompt to get a list of commands.

   ? ULIST: NOT PRIVILEGED TO READ SYSTEM FILES

        You need OPERATOR or WHEEL capability to
        read the directory information.



   4.8  CHECKING SYSTEM STATUS   4.8  CHECKING SYSTEM STATUS

   While the system is running, you may have to check on  the  status  of
   certain  jobs,  system  statistics,  or  devices.  the following three
   sections discuss various ways of doing these tasks.



   4.8.1  Determining the Status of Jobs with SYSTAT   4.8.1  Determining the Status of Jobs with SYSTAT

   To get a summary of the jobs being used on the system, use the  SYSTAT
   command.   It  tells  you  the  job  number,  the terminal line number
   connected to that job, the program  being  run,  and  the  user.   The
   SYSTAT  command  can  also  be  followed  by an argument to get a more
   detailed summary or a specific part of the summary.  For example:

        @SYSTAT n

   where n is a job number, prints out information for job n only.

        @SYSTAT user

   where user is a user's name,  prints  out  information  for  the  jobs
   logged  in  by that user only.  (See the TOPS-20 User's Guide for more
   details on the SYSTAT command.)








                                    4-29
                          SCHEDULED SOFTWARE TASKS                          SCHEDULED SOFTWARE TASKS


                            ----- Examples -----

        1.  To get a summary of all jobs, type PUSH to OPR> and then type
            SYSTAT.

            OPR>PUSH<RET>

             TOPS-20 Command processor 6(772)
            @SYSTAT<RET>
             MON 15-JAN-79 14:56:21  UP 5:42:10
             21+6 JOBS   LOAD AV   3.43   3.72   4.26

            JOB  LINE  PROGRAM  USER
              2    13   MCO     HALL
              5    25   QUENCH  COHEN
              9    11   TV      PORCHER
             10    27   EXEC    CLARK
             11    56   FILCOM  KOHLBRENNER
             12    55   TV      EIBEN
             14    61   EXEC    FECZKO
             15     6   EXEC    POMMER
             16    14   EXEC    MILLER
             17    72   EXEC    BROWNE
             18    67   EXEC    1STUDENT
             19    24   EXEC    HURLEY
             20    22   DUMPER  MURPHY
             22   110   MACRO   MURPHY
             23    44   MACRO   DCAMPBELL
             24    63   EXEC    2STUDENT
             25    23   EXEC    MCKIE
             26    64   EXEC    3STUDENT

              4   107   DUMPER  OPERATOR
              7   103   LPTSPL  OPERATOR
              8   104   BATCON  OPERATOR
            @POP<RET>
            OPR>

        2.  To get a SYSTAT of job 10, type PUSH to OPR> and SYSTAT 10.

            OPR>PUSH<RET>

             TOPS-20 Command processor 6(772)
            @SYSTAT 10<RET>
              10    27  EXEC    CLARK
            @POP<RET>
            OPR>

        3.  To find out what jobs are running under OPERATOR,  type  PUSH
            to OPR> and SYSTAT OPERATOR.

            OPR>PUSH<RET>

             TOPS-20 Command processor 6(772)
            @SYSTAT OPERATOR<RET>

             0 DET  SYSJOB  OPERATOR
             1 101  PTYCON  OPERATOR
             4 217  OPR     OPERATOR
             7 103  LPTSPL  OPERATOR
             8 104  BATCON  OPERATOR
            @POP<RET>
            OPR>



                                    4-30
                          SCHEDULED SOFTWARE TASKS                          SCHEDULED SOFTWARE TASKS


   4.8.2  Watching System and Job Statistics with WATCH   4.8.2  Watching System and Job Statistics with WATCH

   The WATCH program allows you  to  periodically  print  TOPS-20  system
   statistics and/or a job summary.  Under any job, type the following:

        1.  ENABLE

        2.  WATCH

        3.  After OUTPUT TO FILE:, type the name of the file  to  contain
            the  output;  it  can be TTY:  if you want the output on your
            terminal.  If you type /H after OUTPUT TO FILE:, you  get  an
            explanation  of  the  WATCH output and another prompt for the
            output file.

        4.  Type YES or NO to the questions PRINT MONITOR STATISTICS  and
            PRINT  JOB  SUMMARY.  If you answer NO to both questions, you
            get the output for load averages only.

        5.  After TUNE MODE?, type YES or NO.   If  you  type  YES,  only
            users with WHEEL or OPERATOR privileges may request a display
            which  includes  Tune  Mode  statistics  lines  with   column
            headings  on  every  page.   If  you answer NO, all users can
            request a display which include headings and load averages.

        6.  For the TIME PERIOD (MM:SS), type the number of minutes  (mm)
            and  seconds  (ss)  to  specify  a  fixed time period.  Press
            RETURN for a variable time period.  Type ?  for a  help  text
            on  time  periods.   If you requested a variable time period,
            you must press RETURN again whenever you  want  more  output.
            Statistics  are  gathered  over  every fixed or variable time
            period and then output.


                                    NOTE

                  The length of the time  period  actually
                  used   may   not  be  exactly  what  you
                  specified,  because  the   printing   of
                  information  may delay the next sampling
                  period.  Do not make the time period too
                  small,   because  WATCH  itself  uses  a
                  considerable amount  of  time.   A  time
                  period of two minutes is reasonable.


   To stop WATCH from reporting the statistics,  type  two  CTRL/Cs.   To
   stop the WATCH program and the reporting of statistics, type RESET and
   press the RETURN key.  Then, if your output was to a  disk  file,  you
   can PRINT it on the line printer.

   For additional information on the WATCH program,  type  or  print  the
   SYS:WATCH.HLP file.













                                    4-31
                          SCHEDULED SOFTWARE TASKS                          SCHEDULED SOFTWARE TASKS


                            ----- Example -----

   This example shows the output for one  time  period  of  two  minutes.
   Note  that  you must type CTRL/C twice to exit from WATCH.  Otherwise,
   for this example, WATCH would print a report every two minutes.

        OPR>PUSH      

         TOPS-20 Command processor 6(772)
        @ENABLE<RET>
        $WATCH<RET>

        WATCH 4(3), /H for help.
        Output to file: /H      

   For a detailed description of the WATCH program, refer  to  the  WATCH
   Document.



   4.8.3  Getting Other Information   4.8.3  Getting Other Information

   The system command INFORMATION (ABOUT) has several different arguments
   to  give  you  information  on various system and job parameters.  For
   arguments useful to you as an operator, refer to  the  TOPS-20  User's
   Guide.








































                                    4-32
                          SCHEDULED SOFTWARE TASKS                          SCHEDULED SOFTWARE TASKS


                            ----- Examples -----

        1.  To get information about the current system-status:

            OPR>PUSH<RET>

            @INFORMATION (ABOUT) SYSTEM-STATUS<RET>
             Operator is in attendance
             Remote logins allowed
             Local logins allowed
             Pseudo-terminal logins allowed
             ARPANET terminal logins are not allowed
|            DECnet terminal logins allowed
             Console terminal login allowed
             Accounting is being done
             Account validation is enabled
             Working set preloading is disabled
|            Sending of system level zero messages is enabled
|            Sending of system level one messages is enabled
|            Job zero CTY output is enabled
             Tape-drive allocation is enabled
             Automatic file-retrieval-waits allowed
             Maximum offline-expiration is 90 days
             Scheduler bias-control setting is 11
             Class scheduling is disabled
            @

        2.  To get information about the structure named SNARK: :

            @INFORMATION (ABOUT) STRUCTURE (NAME) SNARK:<RET>
             STATUS OF STRUCTURE SNARK:
             MOUNT COUNT: 1, OPEN FILE COUNT: 0, UNITS IN STRUCTURE: 1
             DOMESTIC
             USERS WHO HAVE MOUNTED SNARK: HESS
             USERS ACCESSING SNARK: HESS
             NO USERS CONNECTED TO SNARK:
            @




   4.9  LISTING USER REMARKS WITH RDMAIL   4.9  LISTING USER REMARKS WITH RDMAIL

   To list users' comments that have been mailed  to  REMARKS,  type  the
   following commands:

        1.  PUSH to OPR>.

        2.  ENABLE capabilities.

        3.  Run RDMAIL.

        4.  Type Y to SPECIAL USER.

        5.  Type REMARKS to USER NAME.

        6.  Press RETURN to DATE AND TIME.

        7.  DISABLE capabilities.

        8.  POP to return to OPR>.





                                    4-33
                          SCHEDULED SOFTWARE TASKS                          SCHEDULED SOFTWARE TASKS


   All remarks that have not been read before  from  PS:<REMARKS>MAIL.TXT
   will be output on your terminal.

                                    NOTE

           If some  other  privileged  user  has  run  RDMAIL  on
           PS:<REMARKS> before you, in Step 5 above type the date
           and time you last did this task.



                            ----- Example -----

        OPR>PUSH<RET>

         TOPS-20 Command processor 6(772)
        @ENABLE<RET>
        $RDMAIL<RET>

        SPECIAL USER (Y OR N)? Y<RET>

        USER NAME: REMARKS<RET>
        DATE AND TIME  (/H FOR HELP)      
            .
            .
            .
        $DISABLE<RET>
        @POP<RET>
        OPR>

   The comments printed  on  your  terminal  should  be  distributed  and
   answered according to a method established by your System Manager.

   Sometimes you might need to perform other functions with  RDMAIL.   If
   you need to read all the remarks from PS:<REMARKS>MAIL.TXT, even those
   that you have listed before, type /A after DATE AND TIME.  If you need
   to read only those remarks created after a certain date and time, type
   after DATE AND TIME:

        mmm dd,yyyy hh:mm

   where:

          mmm = the first three letters of the month

           dd = the number for the day of the month

         yyyy = the year

        hh:mm = hour:minute (equal to 00:01 if omitted after the date)

   Other date formats can be accepted, but they are not recommended.

   To list the headings but not the text of the remarks,  type  date  and
   time, and then /P.  For example:











                                    4-34
                          SCHEDULED SOFTWARE TASKS                          SCHEDULED SOFTWARE TASKS


        OPR>PUSH<RET>

         TOPS-20 Command processor 6(772)
        @ENABLE<RET>
        $RDMAIL<RET>

        SPECIAL USER (Y OR N)? Y<RET>

        USER NAME: REMARKS<RET>
        DATE AND TIME  (/H FOR HELP) SEP 20,1979/P      
           --------
        DATE: 20-SEP-79 20:39
        FROM: MCKIE
        TO: HELLIWELL
        CC: LEWINE,WERME,HESS,REMARKS

        SUBJECT: The EXECs printing of EDIT files.
           --------
        DATE: 22-SEP-79 10:23
        FROM: OSMAN
        TO: MILLER,REMARKS,OSMAN

        SUBJECT: ALLOWING USERS TO STOP SPENDING MONEY ....
           --------
        $DISABLE<RET>
        @POP<RET>
        OPR>

   To list remarks and  pause  between  each  one,  type  date  and  time
   followed by /S.  You are asked to press RETURN to get the next remark.
   You can stop the program with CTRL/C.

   To get help with RDMAIL, type /H after DATE AND TIME.  For example:

        OPR>PUSH<RET>

         TOPS-20 Command processor 6(772)
        @ENABLE<RET>
        $RDMAIL<RET>

        SPECIAL USER (Y OR N)? Y<RET>

        USER NAME: REMARKS      
        DATE AND TIME  (/H FOR HELP) /H<RET>

        TYPE IN A DATE AND TIME IN TOPS-20 FORMAT AS FOLLOWS:

                        MMM DD,YYYY HH:MM
        OR
                        MMM DD,YYYY

                THE LATTER CASE WILL ASSUME TIME 00:01.
                (FOR EXAMPLE, A VALID DATE AND TIME IS MAR 16,1976 15:30)

        OR      TYPE AN EMPTY LINE AND GET ALL MESSAGES SINCE THE LAST
                READING OF THE MESSAGE FILE.

        /H PRINT THIS TEXT
        /A TYPES ALL MESSAGES IN THE FILE
        /P FOR PERUSING MESSAGES ONLY
        /S WILL CAUSE RDMAIL TO PAUSE AFTER EACH MESSAGE TYPED
        /M WILL USE THE MESSAGE OF THE DAY FILE FOR MESSAGE TYPE OUT
        /L WILL OUTPUT MESSAGES TO THE LINE PRINTER
        DATE AND TIME  (/H FOR HELP)


                                    4-35
                          SCHEDULED SOFTWARE TASKS                          SCHEDULED SOFTWARE TASKS


                              ----- Hint -----

   Because the file PS:<REMARKS>MAIL.TXT continues to get bigger as users
   MAIL  their  remarks,  you  should periodically RENAME it and save the
   renamed file on magnetic tape with DUMPER.



   4.10  REPORTING SYSTEM ERRORS WITH SPEAR   4.10  REPORTING SYSTEM ERRORS WITH SPEAR

   SPEAR is a program that selectively lists and  formats  parts  of  the
   system error file PS:<SYSTEM-ERROR>ERROR.SYS.  You should run it daily
   for summary information (see Example 1 below) and file  it  for  later
   reference   by  your  DIGITAL  Field  Service  Representative.   Then,
   whenever a piece of hardware seems to be failing, run SPEAR again  and
   request a detailed report for that device.

   To enter reports on users  and/or  devices  into  ERROR.SYS,  use  the
   REPORT  command at OPR command level.  Refer to the TOPS-20 Operator's
   Command Language Reference Manual for a complete  description  of  the
   OPR REPORT command.

   To run SPEAR, type the following to OPR>.

        1.  PUSH

        2.  SPEAR

        3.  Command lines to SPEAR

        4.  EXIT

        5.  POP

   When SPEAR is started, it prompts with the SPEAR prompt.  At that time
   you  can  type  a  command  line  to  SPEAR.   When SPEAR has finished
   processing one command line, it prompts again with the  SPEAR  prompt,
   so  you  can  give  another  command  line.   Type EXIT to leave SPEAR
   command level.

   To see the SPEAR help file on your terminal, type a "?" to  the  SPEAR
   prompt.

   SPEAR can also process commands from a disk file as well as from  your
   terminal.   This disk file, an indirect command file, is useful if you
   have a command line that you often use.  To make an  indirect  command
   file, create a file with the same command line that you would normally
   type to SPEAR from your terminal.  Then type the following to SPEAR:

        *@dev:name.typ

   where dev:  is the location of the file (default is DSK:) and name.typ
   is the name of the indirect command file.

   EXAMPLE   EXAMPLE

   @SPEAR<RET>
   Welcome to SPEAR for TOPS-20, Version 1.1(27)
   Type "?" for help.

   SPEAR> SUMMARIZE<RET>





                                    4-36
                          SCHEDULED SOFTWARE TASKS                          SCHEDULED SOFTWARE TASKS


   SUMMARIZE mode   SUMMARIZE mode

        Event file (SERR:ERROR.SYS):<RET>

        Time from (EARLIEST):<RET>

        Time to (LATEST): LATEST<RET>

        Report to (DSK:SUMMAR.RPT):<RET>

   Type <cr> to confirm (/GO):<RET>
   INFO - Summarizing SERR:ERROR.SYS
   INFO - Now sending summary to DSK:SUMMAR.RPT
   INFO - Summary output finished

   SPEAR>EXIT<RET>

   Refer to the TOPS-10/TOPS-20 SPEAR  Manual  for  more  information  on
   SPEAR.

                                    NOTE

           The arguments in parenthesis are the  default  to  the
           SPEAR program.




   4.11  BACKING UP DISK FILES WITH DUMPER   4.11  BACKING UP DISK FILES WITH DUMPER

   To minimize loss of disk files, you should put backup copies of  files
   on  magnetic  tape with DUMPER.  This should be done on a daily basis.
   You have the option of saving either all disk files or only those that
   have  not  been  saved  before  (called  an  incremental save).  It is
   advisable to save all files once a week and to do an incremental  save
   the  other  days.  An incremental save includes those files which have
|  not been saved since the last incremental save or  full  save.   Check
|  with  your  System  Manager  to  make sure that the correct version of
|  DUMPER is used to back up files.

   If your  installation  has  structures  other  than  PS:,  the  public
   structure,  be  sure  to  back  up files on those structures too.  Use
   different magnetic tapes for  different  structures,  and  follow  the
   procedure  for  a  full  save  or incremental save for each structure.
   (Refer to the TOPS-20 User Utilities Guide for details on  the  DUMPER
   utility program.)
|  
|  If your installation is part of  CFS,  you  must  run  DUMPER  on  the
|  processor that has a direct connection to the required tape drive.

















                                    4-37
                          SCHEDULED SOFTWARE TASKS                          SCHEDULED SOFTWARE TASKS


                                  WARNING

           When you are backing up the public structure never use
           a  labeled tape.  The reason for this is if the backup
           tape is the only method you have to BOOT  the  system,
           the  software  components  you  need  to read the tape
           label are not running.

   The following steps explain the DUMPER procedure with OPR  and  DUMPER
   commands.

                                    NOTE

           DUMPER does not work on a 7-track magnetic tape  drive
           (TU71).

   To save all disk files of a structure, do the following:

        1.  Type PUSH to OPR.

        2.  Type ENABLE.

        3.  Type MOUNT TAPE setname:  with the /WRITE-ENABLED switch, the
            /LABEL-TYPE:   switch,  and the /VOLIDS:  switch, the /NOWAIT
            switch, and any additional switches  desired  for  the  MOUNT
            command.  It is important to give as many volids as you think
            you need to backup all the files you want to save.

        4.  Physically mount and ready a tape that has been assigned  for
            DUMPER backups.

        5.  When MOUNTR replies with the Tape Mount Request and with  the
            acknowledgement  of  the  tape being mounted, press <RET> and
            type POP to return to OPR.

        6.  If it is an unlabeled tape, give the IDENTIFY command to  OPR
            to identify the tape drive to the mount request.

        7.  When MOUNTR replies with Tape Drive Given To Request  number,
            type PUSH to OPR.

        8.  If you want to save files from a structure  other  than  PS:,
            type MOUNT STRUCTURE str:.

        9.  After the system has displayed the defined tape drive for the
            setname:, type DUMPER.




















                                    4-38
                          SCHEDULED SOFTWARE TASKS                          SCHEDULED SOFTWARE TASKS


       10.  Type the following DUMPER commands:

            TAPE MTn:     or     TAPE setname:
            SAVE /FULL-INCREMENTAL str:

            Structure is the name of the structure for which you did  the
            MOUNT  above,  or  it  is  omitted  along  with  the colon to
            indicate your currently connected structure.

            As DUMPER starts to save files  for  each  directory  on  the
            structure, it prints the structure and directory name.

       11.  If you receive the message:

            [Mounting next tape volume]

            mount another tape as specified in the MOUNT TAPE command  on
            MTn  or  any  available tape drive.  Then press CTRL/C twice,
            POP to OPR, and IDENTIFY the tape drive to the mount request.

       12.  When MOUNTR replies  the  acknowledgment  that  the  tape  is
            mounted,  type PUSH to OPR, and type CONTINUE to continue the
            DUMPER backup process.

       13.  After DUMPER has finished the SAVE, DUMPER prints  two  total
            lines, and you are prompted with the DUMPER> prompt.

       14.  Type EXIT to DUMPER.

       15.  Type DISMOUNT TAPE MTn:  to rewind and unload the tape.   You
            can  also  type  DISMOUNT TAPE setname:  to rewind and unload
            the tape.

       16.  If you did a MOUNT STRUCTURE above, type  DISMOUNT  STRUCTURE
            str:.

       17.  Type DISABLE.

       18.  Type POP to return to OPR.

       19.  Physically remove the tape(s) from the drive(s).

       20.  Store the magnetic tapes and DUMPER's output to your terminal
            in the place decided upon by your System Manager.



                             ----- Hints -----

   If you do not specify enough volids to backup the  mounted  structure,
   the  system prompts you with the following when DUMPER reaches the end
   of the last reel specified in the MOUNT command:

        hh:mm:ss  <n>     --Key In Next Volume Identifier--
                        Supply next volume-id for tape set setname:
                        User username, Job n, Line n
                        Respond with either of:
                          VOLUME volid
                          REFUSE reason







                                    4-39
                          SCHEDULED SOFTWARE TASKS                          SCHEDULED SOFTWARE TASKS


   You must then press <RET>, type POP  to  return  to  OPR,  and  supply
   another  volid  by  giving  the  OPR  command RESPOND nn VOLUME volid.
   Another Tape Mount Request now appears.  You must then mount and ready
   the  tape and IDENTIFY the tape drive to the mount request.  Then PUSH
   and CONTINUE to return to DUMPER and the backup process.

   To save space due to inter-record gaps on the DUMPER  tapes,  you  can
   specify the following DUMPER command before you give the SAVE command:

        SET BLOCKING-FACTOR nn

   This command sets the number of logical records that are blocked  into
   a  single physical record.  The number (nn) must be in a range of 1 to
   15.  The default is 1.  The limits for  the  densities  (BPI)  are  as
   follows:

        1.  Density 200 - 1

        2.  Density 556 - 3

        3.  Density 800 - 4
|  
|       4.  Density 1600 - 10

        5.  Density 6250 - 15



                            ----- Example -----

   Run DUMPER to save all files on structure PS:  on an unlabeled tape.

        OPR>PUSH<RET>

         TOPS-20 Command processor 6(772)
        @ENABLE<RET>
        $MOUNT TAPE DUMPER: /LABEL-TYPE:UNLABELED/WRITE-ENABLED-<RET>
        /VOLIDS:DUMP01,DUMP02/NOWAIT<RET>
        [Waiting for Tape/Structure Mount]

        16:30:00          --Tape Mount Request # 102--
                        Mount Unlabeled volume DUMP01, WRITE-ENABLED
                        User OPERATOR, Job 6, Terminal 1

        16:30:03          --MTA0: Unlabeled tape mounted--
              
        $POP      
        OPR>IDENTIFY MTA0: REQUEST-ID 102      
        OPR>
        16:32:01          --MTA0: Given To Request 102--
                        Volume DUMP01 now in use by
                        User OPERATOR, Job 6, Terminal 1
        OPR>PUSH<RET>
        [Tape set DUMPER, volume DUMP01 mounted]
        [DUMPER: defined as MT0:]
        $DUMPER<RET>
        DUMPER>TAPE MT0:<RET>
|       DUMPER>SET BLOCKING-FACTOR 10<RET>
        DUMPER>SAVE /FULL-INCREMENTAL PS:<RET>







                                    4-40
                          SCHEDULED SOFTWARE TASKS                          SCHEDULED SOFTWARE TASKS


|       DUMPER tape # 1, Saturday, 14-Apr-84 1452.  , Volid DUMP01
        PS:<ACARLSON>
        PS:<ACCOUNTS>
        PS:<BAKER>
             .
             .
             .
        PS:<BLISS>
        [Mounting next tape volume]
        16:50:45         --Tape Drive Released By User--
                       MTA0: Volume DUMP01 Being unloaded

        16:51:01         --Tape Mount Request # 103--
                       Mount Unlabeled volume DUMP02, 9-TRACK,
                       WRITE-ENABLEd
                       User OPERATOR, Job 6, Terminal 1

        16:51:21         --MTA0: Unlabeled tape mounted--

        ^C
         ^
        <CTRL/C><CTRL/C>
        $POP<RET>
        OPR>IDENTIFY MTA0: REQUEST-ID 103<RET>
        OPR>
        16:52:45         --MTA0: Given to Request 103--
                       Volume DUMP02 now in use by
                       User OPERATOR, Job 6, Terminal 1
        OPR>PUSH<RET>
        $CONTINUE<RET>

|       DUMPER tape # 2, Saturday, 14-Apr-84 1401.  Volid DUMP02
        PS:<COX>
        PS:<DENNY>
        PS:<ELFSTROM>
             .
             .
             .
        PS:<ZINA>


        Total files dumped = 604
        Total pages dumped = 8835
        DUMPER>EXIT<RET>
        $DISMOUNT TAPE DUMPER:<RET>
        [Tape dismounted, logical name DUMPER: deleted]
        17:15:07         --Tape Drive Released By User--
                       MTA0: Volume DUMP02 Being unloaded
        $POP<RET>
        OPR>

   To do an incremental save of a structure, follow  the  same  steps  as
   described previously for a full save of a structure with the following
   exception:  at DUMPER command level, type

        SAVE /INCREMENTAL:1 str:

   where str:  is the structure name for the incremental save.








                                    4-41
                          SCHEDULED SOFTWARE TASKS                          SCHEDULED SOFTWARE TASKS


                            ----- Example -----

   Run DUMPER to do an incremental save on structure MISC:  on an unlabel
   tape.

        OPR>PUSH<RET>

         TOPS-20 Command processor 6(772)
        @ENABLE      
        $MOUNT TAPE INCRMT: /WRITE-ENABLED/LABEL-TYPE:UNLABELED-<RET>
        /VOLIDS:DUMP09/NOWAIT<RET>
        [Waiting for Tape/Structure Mount]

        17:18:00          --Tape Mount Request # 112--
                        Mount Unlabeled volume DUMP09, WRITE-ENABLED
                        User OPERATOR, Job 6, Terminal 1

        17:18:25          --MTA2: Unlabeled tape mounted--
              
        $POP      
        OPR>IDENTIFY MTA2: REQUEST-ID 112<RET>
        OPR>
        17:20:03          --MTA2: Given To Request 112--
                        Volume DUMP09 now in use by
                        User OPERATOR, Job 6, Terminal 1
        OPR>PUSH<RET>

        $mount structure misc      
        [Tape set INCRMT, volume DUMP09 mounted]
        [INCRMT: defined as MT1:]
        $DUMPER<RET>
        DUMPER>TAPE MT1:<RET>
        DUMPER>SAVE/INCREMENTAL:1 MISC:<RET>

|       DUMPER tape # 1, Saturday, 14-Apr-84 1206.  , Volid DUMP09

        MISC:<ACCOUNTS>
        MISC:<BARON>
        MISC:<BROWN>
        MISC:<HOVSEPIAN>
        MISC:<OPERATOR>
           .
           .
           .
        MISC:<PALL>
        MISC:<ROLAND>

        Total files dumped = 467
        Total pages dumped = 7721
        DUMPER>EXIT<RET>
        $DISMOUNT TAPE MT1:<RET>
        [Tape dismounted]

        17:31:52          --Tape Drive Released By User--
                        MTA2: Volume DUMP09 Being unloaded

        $DISMOUNT STRUCTURE MISC:<RET>

        17:32:31          --STRUCTURE DISMOUNTED--
                        Structure MISC: (Alias: MISC) dismounted
        $POP      
        OPR>




                                    4-42
                          SCHEDULED SOFTWARE TASKS                          SCHEDULED SOFTWARE TASKS


                             ----- Hints -----

   If you are saving disk files with DUMPER and the system  crashes,  you
   do  not  have  to start from the beginning after the system is started
   again.  Do the following:

        1.  Leave the tape positioned where it is.

        2.  Type PUSH to OPR>.

        3.  Type ENABLE.

        4.  Type MOUNT TAPE setname:  and specify the same switches  that
            were  specified  for  the tape mount before the system crash,
            but specify new tape volids.

        5.  Type POP to return to OPR and give the  IDENTIFY  command  to
            identify the tape drive to the mount request.  Then type PUSH
            to return to TOPS-20 command level.

        6.  If you are saving files from a structure other than PS:, type
            MOUNT STRUCTURE STR:.

        7.  Type DUMPER.

        8.  Type the following DUMPER commands:

            TAPE MTn:
            INIT <directory>
            SAVE/FULL-INCREMENTAL str: or SAVE /INCREMENTAL:n str:

            where directory is the last directory name output  by  DUMPER
            before  the  system  crashed and structure is the name of the
            structure for which you did the MOUNT above.   You  can  omit
            str:  to indicate your currently connected structure.

        9.  Follow Steps 11 through 20 above.

   If you are restoring files with DUMPER and the system crashes, you can
   use  the same technique stated above.  Simply replace the SAVE command
   and switches with RESTORE and appropriate switches.



   4.12  ENDING TIMESHARING WITH ^ECEASE   4.12  ENDING TIMESHARING WITH ^ECEASE

   As soon as you know the next scheduled time to  end  timesharing,  use
   the ^ECEASE command.  Type to OPR>:

        1.  PUSH

        2.  ENABLE

        3.  ^ECEASE (TIMESHARING AT) date time (RESUMING AT) date time
|  
|       4.  <RET> to confirm the shutdown

        5.  POP








                                    4-43
                          SCHEDULED SOFTWARE TASKS                          SCHEDULED SOFTWARE TASKS


                            ----- Examples -----

        1.  OPR>PUSH<RET>

             TOPS-20 Command processor 6(772)
            @ENABLE<RET>
            $^ECEASE 8-Feb-84 1900 8-Feb-84 2000<RET>
|           CLOYD shut down scheduled for 8-Feb-84 17:05:24
|           [Confirm]
|           $<RET>
            $POP<RET>
            OPR>

        2.  To cancel a ^ECEASE command, type ^ECEASE and press RETURN.

            OPR>PUSH<RET>

             TOPS-20 Command processor 6(772)
            @ENABLE<RET>
            $^ECEASE<RET>
            [SHUTDOWN CANCELLED]
            $POP<RET>
            OPR>

   If you also need to power down  the  hardware  after  timesharing  has
   finished, do the following:

        1.  Wait until SHUTDOWN COMPLETE is output on the CTY.

        2.  Type  CTRL/\  (control  backslash)  to  enter   the   console
            processor command language.

        3.  Give  the  SHUTDOWN  command  and  wait  for  the  **HALTED**
            message.

        4.  Unload all tape drives.

        5.  Power down the tape drives.

        6.  Stop all disk drives by  setting  the  START/STOP  switch  to
            STOP.

        7.  Turn off system power by setting the black  power  switch  to
            POWER OFF.






















                                    4-44
                                        














                                  PART VI                                  PART VI
                         ERROR RECOVERY PROCEDURES                         ERROR RECOVERY PROCEDURES



                                  ABSTRACT                                  ABSTRACT

|                 This  Chapter  describes  various  error
|                 recovery  procedures  for  the 2040S and
|                 2060 hardware systems.



                                      CONTENTS



   CHAPTER 1       ERROR RECOVERY PROCEDURES  

           1.1     AUTOMATICALLY RELOADING AND DUMPING THE SYSTEM . . 1-1
           1.2     MANUALLY RELOADING AND DUMPING THE SYSTEM  . . . . 1-2
           1.2.1     Scheduled Reloads  . . . . . . . . . . . . . . . 1-2
           1.2.2     Reloads and Dumps for a Hung or Looping System . 1-2
           1.3     SETTING THE CORRECT DATE AND TIME  . . . . . . . . 1-4
           1.4     ERROR MESSAGES AND ACTION TO TAKE  . . . . . . . . 1-5
           1.4.1     Device Error Messages  . . . . . . . . . . . . . 1-5
           1.4.2     BUGCHKs, BUGINFs, and BUGHLTs  . . . . . . . . . 1-6
           1.4.3     HOME Block or BAT Block Inconsistencies  . . . . 1-8
           1.4.4     Parity Errors  . . . . . . . . . . . . . . . .  1-11
           1.4.5     DX20 Error Messages  . . . . . . . . . . . . .  1-12
           1.4.6     Reaper Error Messages  . . . . . . . . . . . .  1-12
           1.4.7     Tape Handling Error Messages . . . . . . . . .  1-13
           1.4.8     Bootstrap Error Messages . . . . . . . . . . .  1-15
           1.5     RECOVERING THE FILE SYSTEM . . . . . . . . . . .  1-19
           1.5.1     Rebuilding a Directory Symbol Table with 
                     EXPUNGE  . . . . . . . . . . . . . . . . . . .  1-19
           1.5.2     Reconstructing a Directory . . . . . . . . . .  1-20
           1.5.3     Reconstructing the ROOT-DIRECTORY  . . . . . .  1-22
           1.5.4     Re-Creating the File System or a Structure . .  1-25
           1.6     DIAGNOSING YOUR SYSTEM FROM A REMOTE LOCATION VIA 
                   KLINIK . . . . . . . . . . . . . . . . . . . . .  1-28
           1.7     CORRECTING DISK SPACE WITH CHECKD  . . . . . . .  1-31
           1.7.1     Reports from CHECK BITTABLE  . . . . . . . . .  1-38
           1.8     RESTARTING PROGRAMS UNDER SYSJOB . . . . . . . .  1-43
           1.8.1     GALAXY Crash Recovery Procedures . . . . . . .  1-45
           1.9     HUNG CONSOLE TERMINAL (LA36) . . . . . . . . . .  1-49
           1.10    MEMORY CONFIGURATION FAILED  . . . . . . . . . .  1-49
           1.11    TOPS-20 MONITOR NOT FOUND  . . . . . . . . . . .  1-49
           1.12    PS NOT FOUND . . . . . . . . . . . . . . . . . .  1-50
           1.13    BOOTSTRAP LOAD FAILED  . . . . . . . . . . . . .  1-51
           1.14    MANUALLY RELOADING THE DX20  . . . . . . . . . .  1-51
   INDEX


                                    4-45
                                        


   TABLES

           1-1     GALAXY Component Crash Recovery Procedures . . .  1-45































































                                    4-46





































































                                    1-1












                                 CHAPTER 1                                 CHAPTER 1

                        ERROR RECOVERY PROCEDURES                        ERROR RECOVERY PROCEDURES  



   While the system is running, unexpected errors may  occur.   Sometimes
   the  system  tries  to  recover,  but other times you may have to take
   corrective action.  This chapter describes some of the errors that you
   may encounter and how to correct them.



   1.1  AUTOMATICALLY RELOADING AND DUMPING THE SYSTEM   1.1  AUTOMATICALLY RELOADING AND DUMPING THE SYSTEM

   Because there is one monitor (TOPS-20)  for  the  main  processor  and
   another  (RSX-20F) for the console front-end processor, it is possible
   for either one to crash (halt or hang) and for either one  to  restart
   the other.

   When TOPS-20 halts because of a BUGHLT (Part VI Section 1.4.2), it  is
   usually  reloaded and started by RSX-20F.  During automatic reloading,
   RSX-20F writes a KLERR entry containing information about the  central
   processor  at  the  time  of the crash.  Once TOPS-20 is running, this
   KLERR entry is appended to the ERROR.SYS file (Part V  Section  4.10).
   The  automatic  reloading  process  also  dumps  KL memory to the file
   PS:<SYSTEM>DUMP.EXE.  Once TOPS-20 is  running  again,  that  file  is
   automatically  copied to DUMP.CPY with a new generation number so that
   successive memory dumps do not destroy any  previous  ones.   DUMP.CPY
   and its generation number are output on the CTY when the COPY is done.

   When RSX-20F halts, it is usually reloaded by TOPS-20.  However,  some
   output  for  the  CTY  might  not get printed.  This output includes a
   BUGCHK or BUGINF, PTYCON  output,  and  PROBLEM  ON  DEVICE  messages.
   During   a  reload,  the  front-end  memory  is  dumped  to  the  file
   PS:<SYSTEM>0DUMP11.BIN.n, where n is the file generation  number.   On
   successive  dumps, the generation number is increased so that previous
   dumps are not overwritten.  The  filename,  including  the  generation
   number, is placed into ERROR.SYS (Part V Section 4.10).

   For automatic reload of TOPS-20, the front end assumes the  last  used
   bootstrap  device  and  BOOT.EXB  as  the KL bootstrap.  BOOT.EXB then
   reads in the default monitor, PS:<SYSTEM>MONITR.EXE.

   When a reload occurs, write as much information as possible about  the
   crash in the installation logbook.  Include the following:

        1.  Date and time of the crash

        2.  TOPS-20 or RSX-20F reload

        3.  Name of the BUGHLT, job number, and user name





                                    1-1
                        ERROR RECOVERY PROCEDURES                        ERROR RECOVERY PROCEDURES  


        4.  Names of the files containing the TOPS-20 monitor  before  it
            was run and the memory dump

   If your System Manager or software specialist decides  to  report  the
   crash to DIGITAL, you must provide:

        1.  The information for the crash from the logbook

        2.  A copy of the memory dump and the TOPS-20 monitor  before  it
            was  run.   Use  DUMPER -- NOT  in  interchange  mode -- on a
            9-track tape at 1600 bits/inch (63 rows/mm)

        3.  The CTY output when the crash occurred

        4.  For TOPS-20 crashes, the output  from  SPEAR  containing  the
            KLERR information


                              ----- Hint -----

   As soon as possible, memory dump files should be put on magnetic  tape
   with DUMPER and deleted from disk to free some space.



   1.2  MANUALLY RELOADING AND DUMPING THE SYSTEM   1.2  MANUALLY RELOADING AND DUMPING THE SYSTEM

   You must manually reload the system when it is time  for  a  scheduled
   reload  or  when  the  system  is  hung  or  looping, for example, not
   responding to users.



   1.2.1  Scheduled Reloads   1.2.1  Scheduled Reloads

   For scheduled reloads, you can use the  procedure  given  in  Part  IV
   Sections 1.2.1, 1.2.2, or 1.2.3.  However, if the system is running at
   the time you want to reload, you must:

        1.  Give a ^ECEASE command (Part V Section 4.12) and  wait  until
            the  system  is  down.   At  that  time, SHUTDOWN COMPLETE is
            printed on the CTY.

        2.  Type  CTRL/\  (control  backslash)  to  enter   the   console
            processor command language.

        3.  Give the SHUTDOWN command.

        4.  After the **HALTED** message, reload the system.




   1.2.2  Reloads and Dumps for a Hung or Looping System   1.2.2  Reloads and Dumps for a Hung or Looping System

   Determining whether it is TOPS-20 or RSX-20F that is hung  or  looping
   might  be  difficult.  If you are able to get to the console processor
   command language by typing CTRL/\, RSX-20F is probably okay.








                                    1-2
                        ERROR RECOVERY PROCEDURES                        ERROR RECOVERY PROCEDURES  


   Assuming that TOPS-20 is looping, try the following steps:

        1.  Type CTRL/\ to enter the console processor command  language.
            If you do not get to the PARSER, assume the front end is hung
            and proceed with the steps below for a hung  front  end.   If
            you get the PARSER prompt(PAR>), proceed with Step 2.

        2.  Type REPEAT 5;EXAMINE KL to print the current program counter
            (PC)  and  the  current  state of the priority interrupt (PI)
            system five times.  Save this output.

        3.  Type SHUTDOWN.  If you do not  get  the  message  **HALTED**,
            type CTRL/\ ABORT and press the RETURN key.

        4.  Reload via the switch register (Part IV,  Section  1.2.3)  to
            enter the dialog, and answer BOOT to the first question.

        5.  When BOOT prompts, type /D      to dump KL memory to the file
            PS:<SYSTEM>DUMP.EXE.   Later the file is automatically copied
            to another name.  When the copy is done,  note  the  filename
            printed on the CTY.

        6.  Press RETURN to load PS:<SYSTEM>MONITR.EXE, or type the  name
            of the monitor to be loaded.

        7.  Answer questions in the loading procedure  (Part  IV  Section
            1.2).

   Assuming the front end is hung, try the following:

        Manually halt the front end by pressing and then raising the HALT
        switch  which is to the right of the switch register.  Wait 10 to
        15 seconds; TOPS-20 may  try  to  reload  the  front  end.   Then
        consider the following three cases.

        1.  If RSX-20F reloaded successfully, and  everything  now  seems
            okay,  report  the  situation  to  your  System  Manager  and
            software  specialist.   A  dump  of   front-end   memory   is
            automatically  placed into the file PS:<SYSTEM>0DUMP11.BIN.n,
            where n is the file generation number.  The  filename,  along
            with the generation number, is entered in ERROR.SYS.

        2.  If RSX-20F is reloaded, but the  system  still  seems  to  be
            hung, try the procedure above for TOPS-20 looping.

        3.  If RSX-20F does not reload, for example, you do not  get  the
            following messages:

|                RSX-20F YB15-20 7:40 5-OCT-84

                 [SY0: REDIRECTED TO dev:]
                 [dev: MOUNTED]

            and the console light is on,  TOPS-20  is  probably  looping.
            You  should  then  follow  the  procedure  above  for TOPS-20
            looping.  You could also  wait  about  five  minutes  to  let
            TOPS-20  get  a  BUGHLT,  so that the front end automatically
            reloads  it.   However,  if  RSX-20F  does  not  successfully
            reload, you lose the EXAMINE KL output.  If you let the front
            end reload TOPS-20, once the system is up,  be  sure  to  run
            SPEAR to get KLERR information.





                                    1-3
                        ERROR RECOVERY PROCEDURES                        ERROR RECOVERY PROCEDURES  


                              ----- Hint -----

   Be sure to log any reloads  in  your  installation's  system  logbook.
   Include the following:

        1.  Any information about the reason for reloading

        2.  When and how the reload was done

        3.  Attachment of EXAMINE KL output, if any

        4.  Whether KL or front-end memory was dumped and to which  files
            they were dumped

   To report the crash to DIGITAL, supply the above information,  a  copy
   of the TOPS-20 monitor before it was run, any memory dumps on magnetic
   tape, and any SPEAR output containing KLERR information.



   1.3  SETTING THE CORRECT DATE AND TIME   1.3  SETTING THE CORRECT DATE AND TIME

   If you notice that  the  date  and  time  printed  by  the  system  is
   incorrect,  immediately  notify  your  System Manager.  For accounting
   purposes, he may want you to reload the system.  However, he may  want
   you  to  correct  only the date and time.  You can change the date and
   time with ^ESET DATE-AND-TIME.  If you need to  change  the  date,  be
   sure  you first warn all users via ^ESEND that you are going to change
   the date, because that action may affect their work.

   To correct the date and time, type the following commands:

        1.  PUSH to OPR

        2.  ENABLE your capabilities

        3.  ^ESEND * DATE AND TIME WILL BE SET BACK TO MAKE THEM CORRECT

        4.  ^ESET DATE-AND-TIME date time

        5.  DAYTIME

        6.  POP

   (For valid date and time formats,  see  the  ^ECEASE  command  in  the
   TOPS-20  Operator's  Command Language Reference Manual.  Also, see the
   same manual for more detail on ^ESET and ^ESEND.)

                            ----- Example -----

        OPR>PUSH<RET>

|        TOPS-20 Command Processor 6(514)
        @ENABLE (CAPABILITIES)<RET>
        $^ESEND * DATE AND TIME WILL BE SET BACK TO MAKE THEM CORRECT<RET>

        [FROM OPERATOR: DATE AND TIME WILL BE SET BACK TO MAKE THEM CORRECT]
|       $ESET DATE-AND-TIME (TO) 3-MAR-84 1047<RET>
        $DAYTIME<RET>
        $POP<RET>
        OPR>





                                    1-4
                        ERROR RECOVERY PROCEDURES                        ERROR RECOVERY PROCEDURES  


   1.4  ERROR MESSAGES AND ACTION TO TAKE   1.4  ERROR MESSAGES AND ACTION TO TAKE

   Error messages come from many different sources.  Those from  programs
   are usually documented with the task involving that program.  The next
   eight sections discuss device error messages,  BUGCHKs,  BUGINFs,  and
   BUGHLTs  from  TOPS-20,  HOME  and  BAT  block  messages  from  the KL
   bootstrap  and  from  TOPS-20,  TOPS-20  parity  errors,  DX20   error
   messages,  REAPER  error  messages,  tape handling error messages, and
   bootstrap error messages.



   1.4.1  Device Error Messages   1.4.1  Device Error Messages

   When problems occur on various devices,  you  receive  on  the  CTY  a
   message  beginning  with  %PROBLEM  ON  DEVICE.  The message continues
   printing every minute until you correct  the  problem.   The  specific
   messages and their corrective actions are given below.

   %PROBLEM ON DEVICE: MTAn, S.N.=s, ACCESS PATH: CHN=c, cont=t, UNI=u

           n = logical unit number
           s = serial number
           c = channel number
        cont = TM02, TM03, or DX20
           t = number of the TM02, TM03, or DX20
           u = physical unit number on the controller

        There is a problem with the magnetic tape drive, logical unit  n.
        Check  if  the drive has lost vacuum, if the tape has run off the
        reel, or if the drive is not on-line.  Warn the  user  if  vacuum
        was lost.

   %PROBLEM ON DEVICE PCDR0

        There is a problem with the card reader.  Check  if  one  of  the
        following error indicator lights is lit:

        1.  READ CHECK

            A card edge is torn, column 0 or 81 is punched, or two  cards
            were  picked  at the same time.  To correct the problem for a
            faulty card, remove the card and press RESET to  restart  the
            reader.  If no cards are faulty, reread the last two cards in
            the output stacker.  If READ CHECK  occurs  for  every  card,
            notify your DIGITAL Field Service Representative.

        2.  PICK CHECK

            A card edge is damaged, webs are torn, or cards  are  stapled
            together.   If  a  card is damaged, remove it and restart the
            reader by pressing RESET.  If no cards are damaged, check for
            excessive  warpage of the card deck or a buildup of ink glaze
            on the picker face.  If webs are torn,  notify  your  DIGITAL
            Field Service Representative.

        3.  STACK CHECK

            Either there is a badly mutilated card or there is a  jam  in
            the  card  track.  To fix the problem, remove the bad card or
            correct the jam and restart the reader by pressing RESET.















                                    1-5
                        ERROR RECOVERY PROCEDURES                        ERROR RECOVERY PROCEDURES  


        4.  HOPPER CHECK

            Either the input hopper is empty or  the  output  stacker  is
            full.   To  correct  the  problem,  load  the input hopper or
            unload the output stacker.

   %PROBLEM ON DEVICE PLPTn

        There is a problem with  line  printer  unit  n.   Check  if  the
        printer is on-line, has paper, or has any error lights on.

   %PROBLEM ON DEVICE: RP0n, STR=t, S.N.=s, ACCESS PATH: CHN=c, UNI=u

|       n = 4, 6, 7, 20, 60 or 81 for the type of disk drive
        t = structure name
        s = serial number
        c = channel number
        u = unit number

        There is a problem with a disk drive.  Check if it is READY or if
        any  error lights are on.  If STNDBY is lit, turn the drive power
        OFF and then ON.  If UNSAFE  is  lit,  you  should  contact  your
        DIGITAL  Field  Service  Representative,  as  there  could  be  a
        hardware problem.

                            ----- Example -----

   %PROBLEM ON DEVICE: MTA1, S.N=0024, ACCESS PATH: CHN=0, TM02=5, UNI=2
|  
|                                   NOTE
|  
|          If the disk drive is on the CI or is served  by  MSCP,
|          the  output  will  also  show  what  node the disk was
|          connected to.



   1.4.2  BUGCHKs, BUGINFs, and BUGHLTs   1.4.2  BUGCHKs, BUGINFs, and BUGHLTs

   When TOPS-20 encounters certain questionable situations, it  generates
   a  BUGCHK  or BUGINF.  Then, some informational messages are output on
   the CTY, and TOPS-20 continues.  When TOPS-20 encounters  a  situation
   from  which  it  is  not advisable to continue, it generates a BUGHLT.
   TOPS-20 is then reloaded and restarted by the front end.

   When a BUGCHK is encountered, the following is output on the CTY:

        ********************
        *BUGCHK "name" AT dd-mmm-yy hh:mm:ss
        *message
        *JOB: n, USER: user-name
        *ADDITIONAL DATA: data, data, data, data
        ********************

   The lines beginning with JOB: or ADDITIONAL DATA: may not appear.  The
   system then continues.

   The output is similar for BUGINFs.

                            ----- Example -----

        ********************
        *BUGCHK "P2RAE1" AT 3-MAR-79 13:26:32
        *PHYH2 - RH20 REGISTER ACCESS ERROR READING REGISTER
        *ADDITIONAL DATA: 10005210602, 407415
        ********************










                                    1-6
                        ERROR RECOVERY PROCEDURES                        ERROR RECOVERY PROCEDURES  


                                    NOTE

                  After a power-fail restart,  the  system
                  prints   BUGCHK   "PWRRES",  the  system
                  continues,  but  all  jobs   that   were
                  attached to a terminal are detached.  If
                  the detached jobs are  not  attached  to
                  within  five  minutes,  they  are logged
                  out.


   When a BUGHLT occurs, the following is output on the CTY.

        %DECSYSTEM-20 NOT RUNNING

        **********
        *BUGHLT "name" at date and time
        *JOB number, User: User name
        **********

|  You can find the message corresponding to the  BUGHLT  "name"  in  the
|  document,  BUGHLT Documentation.  The message pertaining to the BUGHLT
   is not printed on the CTY.  The front-end then reloads and starts  the
   TOPS-20 monitor.

                            ----- Example -----

        %DECSYSTEM-20 NOT RUNNING

        **********
|       *BUGHLT "KPALVH" AT 5-MAR-84 12:53
        *JOB: 000000000032, USER: LEACHE
        **********


        KL HALTED


        RE-BOOT REQUESTED
        KLERR -- VERSION V02-02 RUNNING
        KLERR -- KL IN HALT LOOP
        KLERR -- KL ERROR OTHER THAN CLOCK ERROR STOP
        KLERR -- KL VMA: 000000 065334    PC: 000000 065334
        KLERR -- PI STATE: OFF , PI ON: 177 , PI HLD: 000 , PI GEN: 000
        KLERR -- EXIT FROM KLERR
|       KLI -- VERSION YB15-12 RUNNING
        KLI -- BOOTSTRAP LOADED AND STARTED


        [PS MOUNTED]

        SYSTEM RESTARTING, WAIT...
        COPYING PREVIOUS SYSTEM DUMP TO:
        <SYSTEM>DUMP.CPY.1
        RUNNING DDMP

   This printout is followed  by  other  messages  as  in  normal  system
   loading.

   When a crash is reported to DIGITAL, the CTY output similar to that in
   the above example should be saved and sent with the report.





                                    1-7
                        ERROR RECOVERY PROCEDURES                        ERROR RECOVERY PROCEDURES  


   Whenever the system encounters a BUGCHK beginning with DIR, it  prints
   a  directory  number  after  ADDITIONAL  DATA.  You should then try to
   rebuild that directory's symbol table (Part VI Section 1.5.1).  If the
   rebuild fails to correct the problem, proceed with the instructions at
   the end of Part VI Section 1.5.1.  It is important to take  corrective
   action in this case so that files do not get lost.


                                    NOTE

           When the console front end  crashes,  it  is  reloaded
           automatically and the message [DECSYSTEM-20 CONTINUED]
           is printed.  You do not get a BUGHLT, but you may have
           to retype some of your last input.




   1.4.3  HOME Block or BAT Block Inconsistencies   1.4.3  HOME Block or BAT Block Inconsistencies

   When the KL bootstrap is loaded and started,  it  checks  the  primary
   HOME  blocks  on the disk packs for certain information.  It checks if
   the public structure has been mounted  and  if  the  public  structure
   contains all the proper units for the structure.

   If the public structure has not been properly mounted, you may get the
   following error messages from the bootstrap:

   ERROR:      ?DUPL STR UNI

   Reason:     There are two mounted disk packs claiming to have the same
               logical unit number.

   Recovery:   Check to see if you have the proper  disk  packs  mounted.
               If  the  proper disk packs are mounted and the error still
               continues to occur, contact your  software  specialist  or
               DIGITAL Field Service Representative.


   ERROR:      ?HOME BLKS BAD

   Reason:     The logical unit number is out of range.

   Recovery:   Check to see if you have the proper  disk  packs  mounted.
               If  the  proper disk packs are mounted and the error still
               continues to occur, contact your  software  specialist  or
               DIGITAL Field Service Representative.


   ERROR:      ?MISSING UNIT

   Reason:     One or more logical units are missing from the structure.

   Recovery:   Check to see if all the proper disk packs are mounted.  If
               all  the  proper  disk  packs  are  mounted  and the error
               continues to occur, contact your  software  specialist  or
               DIGITAL Field Service Representative.









                                    1-8
                        ERROR RECOVERY PROCEDURES                        ERROR RECOVERY PROCEDURES  


   After any of the above errors, BOOT prompts again.  To load a  TOPS-20
   monitor, type the monitor filename or press RETURN to get the default.
   If the proper packs are mounted and an  error  still  occurs,  consult
   your software specialist or Field Service Representative.



            HOME  Block  Message   1.4.3.1  HOME  Block  Message - Once  the  bootstrap  is  loaded   and
   started,  TOPS-20  also checks the HOME blocks on the disk packs.  The
   following messages may occur.


                        ----- Warning Messages -----

   % BACKUP HOME BLOCK ON "PS" LOGICAL UNIT n IS INCORRECT

        TOPS-20 continues to run using the other HOME block.

   %COPYING PRIMARY HOME BLOCK TO SECONDARY ON PS UNIT n

        Because the secondary HOME block is incorrect, TOPS-20 copies the
        primary HOME block to the secondary HOME block.

   %COPYING SECONDARY HOME BLOCK TO PRIMARY ON PS UNIT n

        Because the primary HOME block is incorrect, TOPS-20  copies  the
        secondary HOME block to the primary HOME block.

   % PRIMARY HOME BLOCK ON "PS" LOGICAL UNIT n IS INCORRECT

        TOPS-20 continues to run using the other HOME block.


                         ----- Error Messages -----

   ERROR:      ?INCONSISTENT SET OF PACKS COMPOSING STRUCTURE PS.

   Reason:     A logical unit number is out of range.

   Recovery:   Be sure you have the proper disk packs  mounted.   If  the
               proper  disk  packs are mounted and the error continues to
               occur, contact your software specialist or  DIGITAL  Field
               Service Representative.


   ERROR:      ?LOGICAL UNIT n MISSING FROM STRUCTURE PS.

   Reason:     One or more logical units are missing from  the  structure
               PS.

   Recovery:   This error could be caused by a hardware problem.  Be sure
               you  have  the  proper  disk packs mounted.  If the proper
               disk packs are mounted and the error continues  to  occur,
               contact  your software specialist or DIGITAL Field Service
               Representative.


   ERROR:      ?LOGICAL UNIT n OF STRUCTURE PS IS WRITE LOCKED.

   Reason:     The switch on the  disk  drive  is  in  the  WRITE  LOCKED
               position.

   Recovery:   Be sure the proper disk pack is mounted, then position the
               switch to the WRITE ENABLED position.


                                    1-9
                        ERROR RECOVERY PROCEDURES                        ERROR RECOVERY PROCEDURES  


   ERROR:      ?MORE THAN 1 LOGICAL UNIT n IN STRUCTURE PS.

   Reason:     There are two disk packs mounted claiming to have the same
               logical unit number.

   Recovery:   This error could be caused by a hardware problem.  Be sure
               you  have  the  proper  disk packs mounted.  If the proper
               disk packs are mounted and the error continues  to  occur,
               contact  your software specialist or DIGITAL Field Service
               Representative.

   After any of the above errors, you get the message HAVE  THE  PROBLEMS
   MENTIONED  ABOVE  BEEN  CORRECTED  YET:.   If  you  believe  you  have
   corrected them, type Y to continue.

   Once the system succeeds in the HOME block check, it prints:

        [PS MOUNTED]



            BAT  Block  Messages   1.4.3.2  BAT  Block  Messages - Then  TOPS-20  checks  the  BAT   (bad
   allocation  table)  blocks on the disk packs.  The BAT blocks indicate
   what areas of the disk have been  found  to  be  bad.   The  following
   messages may occur.

                        ----- Warning Messages -----

   %BAT BLOCK FULL ON PS UNIT n

        The monitor continues to run with no space in the  BAT  block  to
        mark  bad  areas  of the disk.  Inform your DIGITAL Field Service
        Representative so that he can  correct  the  problem.   You  then
        should reformat the pack and re-create the file system.

   %BAT BLOCKS DO NOT COMPARE ON PS UNIT n

        The BAT blocks on unit n look valid, but they are not  the  same.
        When  BAT  blocks  are  updated,  the  primary one is done first.
        Therefore, if the system crashes  before  the  secondary  one  is
        updated, they are different.  In this case, the primary BAT block
        is copied into the secondary one.

   %COPYING PRIMARY BAT BLOCKS TO SECONDARY ON PS UNIT n

        See explanation above.

   %COPYING SECONDARY BAT BLOCK TO PRIMARY ON PS UNIT n

        If the primary BAT block is  not  valid,  the  secondary  one  is
        copied to it.

   ?PS UNIT n HAS NO CONSISTENT BAT BLOCKS

        The monitor continues and assumes that the  structure  was  built
        not to have BAT blocks.










                                    1-10
                        ERROR RECOVERY PROCEDURES                        ERROR RECOVERY PROCEDURES  


   1.4.4  Parity Errors   1.4.4  Parity Errors

   When TOPS-20 encounters a  parity  error,  it  prints  out  a  message
   beginning with:

        AR OR ARX PARITY ERROR

   or

        MPE DETECTED BY x, PC=n, y

   where x is a device or APR, n is the PC value, and y is either MONITOR
   or USER.

   Other applicable information for each message is then printed  on  the
   CTY.  The same information is also entered in ERROR.SYS.

   If any of these parity errors occurs, save the  CTY  output  from  the
   errors and notify your DIGITAL Field Service Representative.


                                    NOTE

                  As  memory  parity  errors  occur,   the
                  system   may   decide  not  to  use  the
                  affected memory pages.


                            ----- Examples -----

   The following output shows the information from both types  of  parity
   errors:

        MPE DETECTED BY APR   , PC=000000,,023247, MONITOR
        ERA = 002001,,437564

        SBUS DIAGS

        CNTRLR FNC 0          FNC 1
        000000 006000,,000000 036300,,036012
        000001 006000,,000000 036300,,036005
        000002 006000,,000000 036301,,036012
        000003 006000,,000000 036301,,036005


           LOC    CONTENTS
         01000002 000000,,020120
         01000004 000000,,354140
         01000006 000000,,073302
         01000010 000000,,537122
         01000014 000000,,451660
         01000016 000000,,066330
         01000020 000000,,062313
         01000032 000000,,044730
         01000036 000000,,062500
         01000044 000000,,564734

        122 ERRORS FOUND.








                                    1-11
                        ERROR RECOVERY PROCEDURES                        ERROR RECOVERY PROCEDURES  


        LOGAND ADR = 000001,,000000
        LOGOR  ADR = 000001,,777776
        LOGAND DATA = 000000,,000000
        LOGOR  DATA = 777777,,777777


        AR OR ARX PARITY ERROR
        PFW= 773000,,401564 MAP WORD= 503001,,437564
        BAD DATA= 000000,,000000
        CORE PAGE 001437 DISABLED



   1.4.5  DX20 Error Messages   1.4.5  DX20 Error Messages

   If there is a problem in loading the DX20 at system start-up time, you
   see a message similar to one of the following on the CTY:

        ?CHN:n DX20:m CRAM VERIFY
        GOOD data BAD data XOR data

        ?CHN:n DX20:m WORK MEM VER
        GOOD data BAD data XOR data

                n = the number of the RH20 to which the DX20 is connected
                m = the number of the DX20
             data = an octal number

   If you see a message similar to one of the above, save the message and
   call  your  DIGITAL  Field Service Representative.  The information in
   the message can help him solve the problem.  You can continue  running
   the system, but do not use the DX20.



   1.4.6  Reaper Error Messages   1.4.6  Reaper Error Messages

   The following is a list of the error messages that can occur when  you
   run the REAPER program, along with their recovery procedures:


                         ----- Error Messages -----

   ERROR:     BAD PERIOD

   Reason:    There was an non-numeric character in the PERIOD command.

   Recovery:  Correct the PERIOD command and  continue  with  the  REAPER
              program.


   ERROR:     BAD DIRECTORY NAME IN SKIP LIST

   Reason:    A non-existent or incorrect directory name was specified in
              the SKIP command.

   Recovery:  Remove or correct the directory name and continue with  the
              REAPER program.








                                    1-12
                        ERROR RECOVERY PROCEDURES                        ERROR RECOVERY PROCEDURES  


   ERROR:     SKIP SPACE FULL

   Reason:    You have more than 75 directories in the SKIP list.

   Recovery:  Check to see if you can remove any of the directories  that
              are  currently  in  the  SKIP  list.   If  you  cannot, the
              directory you were trying to add cannot be entered into the
              SKIP list.


   ERROR:     BAD FILESPEC IN ORDER LIST

   Reason:    An incorrect file specification or  separator  was  entered
              into the ORDER command.

   Recovery:  Correct the invalid file specification  and  continue  with
              the REAPER program.


   ERROR:     BAD FILESPEC IN LIST COMMAND

   Reason:    An invalid or incorrect file specification was entered into
              the list command.

   Recovery:  Correct the invalid file specification  and  continue  with
              the REAPER program.


   ERROR:     TAKE FILE NOT FOUND

   Reason:    The file you gave in the TAKE command does not exist.

   Recovery:  First, be sure you are connected to the correct  structure.
              Then make sure you gave the correct filename.

              If both of the above are correct, then the file you gave in
              the TAKE command must have been deleted.  Recreate the TAKE
              file and continue with the REAPER program.



   1.4.7  Tape Handling Error Messages   1.4.7  Tape Handling Error Messages

   This section describes the recovery procedures for the  various  error
   messages that can appear when you are using tapes.  The following list
   of the error messages, the  reason  for  the  error  message  and  the
   recovery procedure.

                         ----- Error Messages -----

   ERROR:     --TAPE WRITE PROTECT ERROR--
              MTAn:  VOLUME VOLID
              order WRITE RING AND REMOUNT TAPE
                   where "order" is either INSERT or REMOVE

   Reason:    A user requested a  volume  to  be  write-enabled  and  the
              volume was mounted write-protected, or vice versa.

   Recovery:  If the volume should be write-protected, remove  the  write
              ring and physically remount the tape.  If the volume should
              be write-enabled, insert  the  write  ring  and  physically
              remount the tape.




                                    1-13
                        ERROR RECOVERY PROCEDURES                        ERROR RECOVERY PROCEDURES  


   ERROR:     --NO RING IN SCRATCH TAPE--
              UNLOADING DRIVE MTAn:  VOLUME VOLID
              REMOUNT SCRATCH TAPE WITH WRITE RING

   Reason:    A scratch tape was mounted without a write ring.

   Recovery:  Insert a write ring and physically remount the tape.


   ERROR:     --REMOUNT TAPE VOLUME--
              MTAn:  VOLUME VOLID BEING UNLOADED
              REMOUNT VOLUME volid ON density BPI DRIVE

   Reason:    A user requested an unlabeled  tape  to  be  mounted  at  a
              specific  density, and the drive it was mounted on does not
              support that density.

   Recovery:  Remove the tape from the current drive and mount  it  on  a
              drive that supports the specified density.


   ERROR:     --TAPE DRIVE TIMED OUT--
              MTAn:  OPERATION TIMED OUT

   Reason:    A tape input/output request issued by MOUNTR took too  long
              to  execute.   This  is an informational message that could
              indicate a problem with a tape drive or a problem with  the
              software.

   Recovery:  Retry the operation.  If the  error  still  persists,  call
              your DIGITAL Field Service Representative.


   ERROR:     --TAPE POSITIONING ERROR--
              MTAn:  POSITIONING OPERATION FAILED

   Reason:    While trying to position a volume to a specific  file,  the
              monitor  reported  an  error to MOUNTR.  This error message
              could indicate a bad tape or a bad tape drive.

   Recovery:  Retry the operation.  If the  error  still  persists,  call
              your DIGITAL Field Service Representative.


   ERROR:     --TAPE ERROR WRITING LABELS--
              ERROR WRITING LABELS ON MTAn:  VOLUME VOLID

   Reason:    The software encountered an error  while  trying  to  write
              volume  header labels on a tape.  A bad tape drive or a bad
              tape could cause this error.

   Recovery:  There are two recovery procedures for this type  of  error.
              (1)  Mount  the  tape  on another drive and try again.  (2)
              Initialize another volume at the same density,  label-type,
              and VOLID; then use this volume instead of the one that had
              the error.










                                    1-14
                        ERROR RECOVERY PROCEDURES                        ERROR RECOVERY PROCEDURES  


   ERROR:     --MOUNTR SYSTEM TASK ERROR--
              BAD IPCF MESSAGE RECEIVED FROM component
                   (component = ORION or QUASAR)

   Reason:    MOUNTR received an unrecognized  or  incorrectly  formatted
              IPCF message from either ORION or QUASAR.

   Recovery:  Call your software specialist.


   ERROR:     ?MOUNTR CRASHING, PC=n
              SAVING MOUNTR CORE IMAGE ON FILE <SPOOL> MOUNTR-CRASH.EXE.n

   Reason:    MOUNTR detected an internal error that it could not handle.
              A  copy  of the MOUNTR program at the time of the error has
              been saved in the directory PS:<SPOOL> for analysis.

   Recovery:  Call your software specialist.



   1.4.8  Bootstrap Error Messages   1.4.8  Bootstrap Error Messages

   This section describes the error recovery procedures for  the  various
   error  messages that can appear when you are trying to boot the system
   from disk or tape.  The following are the error messages,  the  reason
   for  the  error  message,  and  the  recovery  procedure.   All of the
   following error messages are preceded by ?BOOT:.



                         ----- Error Messages -----


   ERROR:     HALT

   Reason:    BOOT or MTBOOT halts only if it is unable to determine  how
              much   physical  KL10  memory  is  present.   This  message
              indicates incorrect memory configuration  or  interleaving,
              or  memory  hardware  problems.   This situation should not
              ordinarily occur.

   Recovery:  Reconfigure memory and check that  memory  interleaving  is
              correct.   If  the  error  recurs,  call your DIGITAL Field
              Service Representative.


   ERROR:     ?NO READY TAPE DRIVE AVAILABLE

   Reason:    MTBOOT was not  able  to  find  any  magnetic  tape  drives
              on-line  and ready.  This commonly occurs when the operator
              forgets to press the on-line  switch  on  the  drive  after
              mounting the tape.

   Recovery:  Check that the magnetic tape  drive  is  on-line.   If  the
              error  recurs  when  the  drive  is on-line, it indicates a
              hardware malfunction.   Call  your  DIGITAL  Field  Service
              Representative if the problem persists.








                                    1-15
                        ERROR RECOVERY PROCEDURES                        ERROR RECOVERY PROCEDURES  


   ERROR:     ?HARD DISK ERROR

   Reason:    A disk hardware error occurred during a  disk  input/output
              transfer.

   Recovery:  Call your DIGITAL Field Service Representative.


   ERROR:     ?HARD TAPE ERROR

   Reason:    A hardware error occurred while MTBOOT tried to  read  from
              magnetic  tape.   MTBOOT  attempts  the  read operation 100
              times before reporting the error.   Any  of  the  following
              three reasons can cause this error:

              1.  A dirty read head on the magnetic tape drive

              2.  A corrupted or damaged magnetic tape

              3.  Hardware problems,  probably  with  the  magnetic  tape
                  drive

   Recovery:  Read the magnetic  tape  on  another  tape  drive  to  help
              determine if the tape or the tape drive is the problem.  If
              the magnetic tape drive is causing  the  error,  clean  the
              tape  drive  heads.   Refer to the instructions in the tape
              drive operator's guide.  If the tape drive still causes the
              error,  it probably indicates a hardware malfunction.  Call
              your DIGITAL Field Service Representative.

              If the magnetic tape is causing the error, use another copy
              of the monitor tape to reload the system.


   ERROR:     ?BAD HOME BLOCK

   Reason:    The Home block on the  structure  that  BOOT  is  currently
              using  is damaged.  This usually indicates severe structure
              damage.

   Recovery:  Use another copy of the structure,  if  available,  rebuild
              the structure, or reinstall the system.


   ERROR:     ?MORE THAN 1 BOOTABLE STRUCTURE FOUND

   Reason:    BOOT found duplicate bootable structures online.

   Recovery:  Place drives with  duplicate  bootable  structures  offline
              until after system startup.


   ERROR:     ?STRUCTURE NOT FOUND:STR:

   Reason:    BOOT  failed  to  find  a  structure,  on  line,  with  the
              structure   name   you   specified,  or  hardware  problems
              prevented BOOT from finding the structure you specified.

   Recovery:  Make sure the disk drive the structure  is  mounted  on  is
              on-line.  If it is on-line, use another copy of BOOT or the
              monitor.  If the problem still occurs,  call  your  DIGITAL
              Field Service Representative.




                                    1-16
                        ERROR RECOVERY PROCEDURES                        ERROR RECOVERY PROCEDURES  


   ERROR:     ?COMMAND ERROR

   Reason:    BOOT or MTBOOT was not able to decipher the command.   This
              is generally the result of a typing mistake.

   Recovery:  Retype the command.


   ERROR:     ?FILE NOT FOUND:FILESPEC

   Reason:    BOOT failed to find the file you specified.  The file  name
              was  incorrectly  entered,  the  file  does  not  exist, or
              root-directory or the directory you specified to BOOT  does
              not contain the expected format.

   Recovery:  Retype the file name, if that was  incorrectly  typed.   If
              that  is  not  the problem, check to make sure the file has
              not been deleted, or that the directory the file resides in
              is not damaged.


   ERROR:     ?MEMORY REFERENCE FAILED

   Reason:    BOOT  or  MTBOOT  encountered  an  illegal  address.   This
              usually indicates a hardware problem.

   Recovery:  Run the BOOT program again.  If the problem  still  occurs,
              call your DIGITAL Field Service Representative.


   ERROR:     ?FILE NOT IN .EXE FORMAT

   Reason:    BOOT or MTBOOT is currently attempting to load a file  that
              is in an incorrect format.  This message could be caused by
              several reasons.  They are:

               o  the wrong filename was specified

               o  the file could be damaged

               o  the file was generated by CSAVE

               o  the file is not an executable file


   Recovery:  Use another copy of the monitor file.


   ERROR:     ?FILE'S .EXE DIRECTORY IS LONGER THAN 1 PAGE

   Reason:    BOOT found that the .EXE directory was larger than one page
              while dumping.

   Recovery:  Use another copy of the .EXE file.


   ERROR:     IO ERROR - TEXT

   Reason:    A hardware error occurred during an I/O transfer.







                                    1-17
                        ERROR RECOVERY PROCEDURES                        ERROR RECOVERY PROCEDURES  


   Recovery:  Run the BOOT program again.  If the error still occurs call
              your DIGITAL Field Service Representative.


   ERROR:     ?UNKNOWN SWITCH

   Reason:    You specified an invalid switch.

   Recovery:  Retype the command with the correct switch.


   ERROR:     ?INVALID NUMERIC VALUE

   Reason:    You specified a non-numeric argument to a switch  expecting
              a numeric argument.

   Recovery:  Retype the command with the correct numeric argument.


   ERROR:     ?CANNOT FIND BOOTABLE STRUCTURE

   Reason:    There is no valid bootable structure  on-line  or  hardware
              problems  have  prevented  BOOT  from  finding  a  bootable
              structure.

   Recovery:  Make sure the door on the disk drive is closed, and correct
              disk pack is mounted and on-line.  Try running BOOT several
              times.  If problem still occurs, call  your  DIGITAL  Field
              Service Representative.


   ERROR:     ?NO STRUCTURE ID

   Reason:    The structure you specified is  missing  its  structure  ID
              from its HOME blocks.

   Recovery:  Notify your system manager.  If no person at your site  has
              the  expertise  to  correct this problem, call your DIGITAL
              Software Specialist.


   ERROR:     ?DUMP  ERROR - DUMP.EXE  IS  TO  SMALL:   RECONFIGURE  WITH
              MAKDMP

   Reason:    The pre-allocated file DUMP.EXE is not large enough to hold
              all of the memory pages that the BOOT program is attempting
              to dump.   Either  someone  has  recently  run  MAKDMP  and
              specified  a file size that is too small, or new memory has
              recently been added to the system and DUMP.EXE has not been
              configured to accomodate the new memory.

              The dump you receive could be missing pages.

   Recovery:  Run the MAKDMP program to reconfigure DUMP.EXE.












                                    1-18
                        ERROR RECOVERY PROCEDURES                        ERROR RECOVERY PROCEDURES  


                                    NOTE

           If none of the above error messages appear on the  CTY
           and  there  is  a  problem with the bootstrap program,
           refer to Part VI Section 1.13.




   1.5  RECOVERING THE FILE SYSTEM   1.5  RECOVERING THE FILE SYSTEM

   Problems of different degrees  of  severity  can  occur  in  the  file
   system.  The following sections discuss the simple cases of rebuilding
   a directory symbol table (Part VI Section 1.5.1) and reconstructing  a
   directory   (Part  VI  Section  1.5.2),  the  more  complex  cases  of
   reconstructing  the  ROOT-DIRECTORY  (Part  VI  Section   1.5.3)   and
   re-creating  a structure (Part VI Section 1.5.4), and the most complex
   case of re-creating the entire file system (Part VI Section 1.5.4).



   1.5.1  Rebuilding a Directory Symbol Table with EXPUNGE   1.5.1  Rebuilding a Directory Symbol Table with EXPUNGE

   When TOPS-20 processes a BUGCHK, BUGINF, or BUGHLT beginning with DIR,
   and  outputs  the  number of the directory and its structure in SIXBIT
   after ADDITIONAL DATA, try to rebuild the directory symbol table.

                                    NOTE

           For rebuilding directory  number  1  (ROOT-DIRECTORY),
           refer to Part VI Section 1.5.3.

   To rebuild a directory symbol table, do the following:

        1.  Look at the two  numbers  after  ADDITIONAL  DATA.   Use  the
            second  number  to  determine the structure for the following
            procedure.  If you are at OPR> command level,  type  PUSH  to
            OPR and type the following commands:

                 @RESET<RET>
                 @DDT<RET>
                 DDT         <ESC>          <CTRL/C>
                               !               !
                 SECOND NUMBER $6T;    PS     ^C

            The $ above means press ESCAPE.  After $6T;, DDT outputs  the
            name of the structure.

        2.  Find  the  directory  name  corresponding  to  the  directory
            number,  that is, the first number after ADDITIONAL DATA.  Do
            this by looking at a numeric ULIST  listing  for  the  proper
            structure.














                                    1-19
                        ERROR RECOVERY PROCEDURES                        ERROR RECOVERY PROCEDURES  


        3.  Type PUSH to OPR, then type:

                 ENABLE<RET>
                 EXPUNGE str:<directory>,<RET>
                 REBUILD<RET>
                 <RET>
                 POP<RET>

            where structure and directory are names, not numbers.

   Rebuilding the symbol table should eliminate any further BUGs for that
   directory.  If it does not, reconstruct the directory (Part VI Section
   1.5.2).



   1.5.2  Reconstructing a Directory   1.5.2  Reconstructing a Directory

   If there was a problem with a directory and the procedures in Part  VI
   Section  1.5.1 did not eliminate the problem, you must reconstruct the
   directory by doing the following:

        1.  Try to save the directory's files with DUMPER.

                                    NOTE

           If the directory is a critical one, for which there is
           no  acceptable  backup,  and you cannot save the files
           with DUMPER, notify a DIGITAL software specialist.  He
           might   be   able  to  recover  most  or  all  of  the
           directory's contents.


        2.  Kill the directory with ^ECREATE and the KILL subcommand.  If
            that  fails,  see  Part  VI  Section  1.5.2.1  to  delete the
            directory with the DELETE command.

        3.  Continue with  Part  VI  Section  1.5.2.2  to  re-create  the
            directory and restore its files.



            Deleting a Directory   1.5.2.1  Deleting a Directory - If  you   must   reconstruct   a   bad
   directory  and  you  cannot  kill it with ^ECREATE, type the following
   commands:

        1.  PUSH to OPR

        2.  ENABLE your capabilities

        3.  DELETE structure:file specification,

                                    NOTE

           Do  not  forget  the  ","  (comma)  after   the   file
           specification if you want to enter subcommand level.










                                    1-20
                        ERROR RECOVERY PROCEDURES                        ERROR RECOVERY PROCEDURES  


        4.  DIRECTORY

        5.  <RET>

        6.  POP

   Structure is the name of the structure containing the  bad  directory.
   Determine  the file specification by doing the following on a piece of
   paper.

        1.  Write the name of the bad directory.  Some examples might be:

                 <MUMBLE.FOO>
                 <COT>
                 <A.YOW.1>

        2.  If the name of the bad directory does not contain a ".",  use
            "ROOT-DIRECTORY." as a prefix for the name.  For example:

                 <COT> becomes <ROOT-DIRECTORY.COT>

        3.  The name now contains a "." either because it did  originally
            or  because of Step 2.  Scan the name until you find the last
            ".".  Replace the "." with ">".  For example:

                 <MUMBLE.FOO> becomes <MUMBLE>FOO>
                 <ROOT-DIRECTORY.COT> becomes <ROOT-DIRECTORY>COT>
                 <A.YOW.1> becomes <A.YOW>1>

        4.  Replace the final ">" with ".DIRECTORY".  For example:

                 <MUMBLE>FOO> becomes <MUMBLE>FOO.DIRECTORY
                 <ROOT-DIRECTORY>COT> becomes <ROOT-DIRECTORY>COT.DIRECTORY
                 <A.YOW>1> becomes <A.YOW>1.DIRECTORY

   Then type the file specification you obtained at the end of Step 4  in
   the procedure for deleting a directory.

   If you typed the DELETE command and got the message:

        name.DIRECTORY FILE CANNOT BE EXPUNGED BECAUSE IT IS CURRENTLY OPEN

   plan to stop timesharing by doing a ^ECEASE.  After the  downtime  you
   specified in ^ECEASE occurs, type PUSH to OPR.  Then type:

        1.  DELETE str:file specification,

        2.  DIRECTORY

        3.  <RET>

        4.  ^ESET LOGINS ANY

        5.  ^ESET OPERATOR-IN-ATTENDANCE

        6.  PTYCON

        7.  GET SYSTEM:PTYCON.ATO








                                    1-21
                        ERROR RECOVERY PROCEDURES                        ERROR RECOVERY PROCEDURES  


                            ----- Example -----

   To delete the bad directory <MUMBLE.FOO> on structure PS:.

        OPR>PUSH<RET>
         TOPS-20 Command Processor 5(514)
        @ENABLE (CAPABILITIES)<RET>
        $DELETE PS:<MUMBLE>FOO.DIRECTORY,<RET>
        $$DIRECTORY<RET>
        $$<RET>
        @POP<RET>
        OPR>



            Re-Creating a Directory and Restoring Its Files   1.5.2.2  Re-Creating a Directory and Restoring Its Files -  After  you
   have  killed  or deleted a directory that needs reconstruction, do the
   following:

        1.  To re-create the directory, run DLUSER  to  load  the  latest
            file you dumped with DLUSER for the structure involved.

        2.  To restore the files of the directory you killed or  deleted,
            use  the  DUMPER  save you just did in Part VI Section 1.5.2,
            Step 1, or the most recent DUMPER  magnetic  tape  containing
            those files and run DUMPER to restore them.

        3.  If you deleted the  directory,  run  CHECKD  with  the  CHECK
            BITTABLE command and then with the RELEASE command to release
            lost pages.



                                    NOTE

                  Never  run  CHECKD  with   the   RELEASE
                  command    if    a    directory    needs
                  reconstruction.  First, reconstruct  the
                  directory.



   1.5.3  Reconstructing the ROOT-DIRECTORY   1.5.3  Reconstructing the ROOT-DIRECTORY

   When you get a BUGCHK or  BUGHLT  beginning  with  DIR  that  involves
   directory  number  1,  or  when  you  get  the BUGHLTS BADROT, BADXT1,
   FILIRD, or FILMAP, try reconstructing <ROOT-DIRECTORY>.   Notify  your
   System Manager and software specialist of this before you do anything.

   To determine the structure involved, see step 1  of  Part  VI  Section
|  1.5.1.   If  the  structure is not PS, run CHECKD with the RECONSTRUCT
   ROOT-DIRECTORY command (Part VI, Section 1.7) and specify  the  proper
   structure.   If  the  structure is PS, you must tell the system to use
   the backup <ROOT-DIRECTORY> and rebuild <ROOT-DIRECTORY> by doing  the
   following:

        1.  Type CTRL/\ to enter the PARSER.

        2.  Type SHUTDOWN to the PARSER.  (If SHUTDOWN does not  succeed,
            type ABORT.)

        3.  Mount system floppy A in drive 0.




                                    1-22
                        ERROR RECOVERY PROCEDURES                        ERROR RECOVERY PROCEDURES  


        4.  Mount system floppy B in drive 1.

        5.  Mount your most recent system backup tape on MTA0.  If you do
            not  have  a  system  backup  tape, use your TOPS-20 Software
            Installation Tape.

        6.  Be sure the front-end HALT switch is in the ENABLE position.

        7.  Set switches 0, 1, and 2 in the switch register.

        8.  Press the switches SW REG and ENABLE simultaneously.

        9.  Type YES to ENTER DIALOG.

       10.  Type YES to RELOAD MICROCODE.

       11.  If your system has cache, you  will  see  RECONFIGURE  CACHE;
            type ALL.

       12.  Type ALL to CONFIGURE KL MEMORY.

       13.  Type MTBOOT to LOAD KL BOOTSTRAP.

       14.  Type NO to WRITE CONFIGURATION FILE.

       15.  Type /L after MTBOOT>.

       16.  Type /G143 after MTBOOT>.

       17.  Type N to DO YOU WANT TO  REPLACE  THE  FILE  SYSTEM  ON  THE
            SYSTEM STRUCTURE.

       18.  TYPE Y to RECONSTRUCT ROOT-DIRECTORY.

       19.  Type the current date and time after ENTER CURRENT  DATE  AND
            TIME.

       20.  Type Y to IS THIS CORRECT if you entered the correct date and
            time.  Otherwise, type N and enter the date and time again.

       21.  Type RECONSTRUCT ROOT-DIRECTORY after WHY RELOAD.

   Then CHECKD runs and outputs:

        [REBUILDING BIT TABLE]

        [WORKING ON STRUCTURE - PS:]

   The remaining steps and output are the same as in any system reload.



























                                    1-23
                        ERROR RECOVERY PROCEDURES                        ERROR RECOVERY PROCEDURES  


                            ----- Example -----

        PAR>SHUTDOWN
        **HALTED**

        %DECSYSTEM-20 NOT RUNNING

|       RSX-20F YB15-20 8:55 5-MAR-84

        [SY0: REDIRECTED TO DX0:]
        [DX0: MOUNTED]
        [DX1: MOUNTED]
|       KLI -- VERSION YB15-12 RUNNING
        KLI>YES
        KLI -- KL10 S/N: 2123., MODEL B, 60 HERTZ
        KLI -- KL10 HARDWARE ENVIRONMENT:
                MOS MASTER OSCILLATOR
                EXTENDED ADDRESSING
                INTERNAL CHANNELS
                CACHE
        KLI -- ENTER DIALOG [NO,YES,EXIT,BOOT]?
        KLI>YES<RET>
        KLI -- RELOAD MICROCODE [YES,VERIFY,NO]?
        KLI>YES<RET>
|       KLI -- MICROCODE VERSION 352 LOADED
        KLI -- RECONFIGURE CACHE [FILE,ALL,YES,NO]?
        KLI>ALL<RET>
        KLI -- CONFIGURE KL MEMORY [FILE,ALL,YES,NO]?
        KLI>ALL<RET>
        LOGICAL MEMORY CONFIGURATION
         ADDRESS         SIZE   INT   TYPE   CONTROLLER
        00000000         768K    4    MF20       11
        KLI -- LOAD KL BOOTSTRAP [YES,NO,FILENAME]>?
        KLI>MTBOOT<RET>
        KLI--WRITE CONFIGURATION FILE [YES,NO]
        KLI>NO<RET>
        KLI -- BOOTSTRAP LOADED AND STARTED

        MTBOOT>/L<RET>

        MTBOOT/G143<RET>

        [FOR ADDITIONAL INFORMATION TYPE "?" TO ANY OF THE FOLLOWING
        QUESTIONS.]

        DO YOU WANT TO REPLACE THE FILE SYSTEM ON THE SYSTEM STRUCTURE?N<RET>

|       [BOOT:LOADING] [OK]

        [PS MOUNTED]
        RECONSTRUCT ROOT-DIRECTORY?Y

        [RECONSTRUCTION PHASE 1 COMPLETED]

        SYSTEM RESTARTING, WAIT...
|       ENTER CURRENT DATE AND TIME: 5-MAR-84 10:25<RET>

|       YOU HAVE ENTERED MONDAY, 5-MAR-84 10:25AM,
         IS THIS CORRECT (Y,N) Y<RET>
        WHY RELOAD? MA<RET>
        [REBUILDING BIT TABLE]

        [WORKING ON STRUCTURE - PS:]
             .
             .
             .










                                    1-24
                        ERROR RECOVERY PROCEDURES                        ERROR RECOVERY PROCEDURES  


   1.5.4  Re-Creating the File System or a Structure   1.5.4  Re-Creating the File System or a Structure

   You should re-create the file system or a structure only when:

        1.  You have tried reconstructing  PS:<ROOT-DIRECTORY>,  but  the
            file  system or structure is still in such bad shape that the
            system or structure cannot be used, and

        2.  Your System Manager has agreed that you should re-create  the
            file system or structure.

   If reconstructing PS:<ROOT-DIRECTORY> did not solve the  problem,  you
   must re-create the file system, that is, both the public structure and
   front-end file  system.   (Refer  to  Part  VI  Section  1.5.4.1.)  If
   reconstruction  of  a  ROOT-DIRECTORY  on  any other structure did not
   succeed in solving the problem, just re-create that structure.  (Refer
   to Part VI Section 1.5.4.2.)



            Re-Creating the Public Structure and Front-End File System   1.5.4.1  Re-Creating the Public Structure and Front-End File System - 
   You  should  re-create the file system on the public structure only at
   your System Manager's request or approval.  This request usually comes
   if the file system is in such bad shape that the system cannot be used
   and reconstruction of  the  <ROOT-DIRECTORY>  failed  to  correct  the
   problem.

   To re-create the file system on the public structure, you need:

        1.  The disk packs your System Manager chooses for the  new  file
            system

        2.  The latest system backup tape

        3.  The latest DUMPER magnetic tapes (full and  incremental  save
            sets) of the public structure
|  
|       4.  The TOPS-20 Installation Guide

        5.  System floppies A, B, and C

   Then do the following:

        1.  Type CTRL/\.

        2.  Type SHUTDOWN.  (If SHUTDOWN doesn't succeed, type ABORT.)

        3.  Mount system floppy A in drive 0.

        4.  Mount system floppy B in drive 1.

        5.  Mount your latest system backup tape on MTA0.  If you do  not
            have  a  backup  tape, use your TOPS-20 Software Installation
            Tape.












                                    1-25
                        ERROR RECOVERY PROCEDURES                        ERROR RECOVERY PROCEDURES  


        6.  Follow Steps 11 (Set the Switch Register  to  7)  through  18
            (Type  MTBOOT) in the TOPS-20 Software Installation Guide and
            Step 36 (Type /L) through 63 (Give the DUMPER Command:   TAPE
|           MTA0:)  of  Chapter  2 in the TOPS-20 KL10 Model Installation
            Guide.

        7.  After  the  DUMPER>  prompt,  type   RESTORE   (TAPE   FILES)
            PS:<*>*.*.* (TO) <RET>.

        8.  Again, after the DUMPER> prompt, type  RESTORE  (TAPE  FILES)
            PS:<*>*.*.* (TO) <RET>.

        9.  After the DUMPER> prompt, type REWIND <RET>.

       10.  Remove the tape on MTA0, and mount the  first  tape  of  your
            latest full DUMPER save set.

       11.  After the DUMPER> prompt, type CREATE <RET>.

                                    NOTE

           The DUMPER CREATE command obtains its attributes  from
           tape information stored on the backup tape.


       12.  After  the  DUMPER>  prompt,  type   RESTORE   (TAPE   FILES)
            PS:<*>*.*.* (TO) <RET>.

       13.  If there are additional tapes, mount the  next  tape  of  the
            save set.  Then type TAPE MTAn:, where n is the number of the
            drive on which you mounted the next tape to be read.   Repeat
            this step until all tapes of the save set have been read.

       14.  If there are incremental save sets,  you  must  restore  them
            too.  For each save set, repeat Steps 11, 12, and 13.

       15.  Re-create  the  front-end  file  system  by   following   the
|           directions   in  Chapter  4  of  the  TOPS-20  KL10  Model  B
|           Installation Guide.

       16.  Reload the system using the DISK  and  ENABLE  load  switches
            (Part IV Section 1.2.1).



            Re-Creating Other Structures   1.5.4.2  Re-Creating Other Structures - If a structure other than  PS:
   had  problems and <ROOT-DIRECTORY> reconstruction did not fix them, at
   your System Manager's request or approval,  you  must  re-create  that
   structure.   Then  restore  its  directories  and  files.  This entire
   procedure can be done during timesharing.  First, be sure you have:

        1.  The disk packs  your  System  Manager  chooses  for  the  new
            structure

        2.  The latest DUMPER magnetic tapes (full and  incremental  save
            sets) for that structure










                                    1-26
                        ERROR RECOVERY PROCEDURES                        ERROR RECOVERY PROCEDURES  


   Then, do the following:

        1.  Type SET STRUCTURE str:  UNAVAILABLE to OPR to prevent  other
            users from MOUNTing the structure.

        2.  Type PUSH to OPR.

        3.  ENABLE your capabilities.

        4.  Follow the procedures in Part V Section 3.13  to  create  the
            structure.

        5.  Type MOUNT STRUCTURE str: to mount the structure.

        6.  Type DLUSER<RET>.

        7.  Type LOAD SYSTEM:str.TXT  to  restore  directory  parameters.
            You  should  have  previously  saved these parameters (Part V
            Section 4.6).

        8.  If tape drive allocation is enabled, you must use  the  MOUNT
            command  to have the system assign you a tape drive.  If tape
            drive allocation is disabled, or if the SET TAPE DRIVE  MTAn:
            UNAVAILABLE command is used, you can assign a tape drive with
            the ASSIGN command.

        9.  Mount the first tape of your latest full DUMPER save set  for
            this structure on MTAn.

       10.  Type DUMPER<RET>.

                                    NOTE

                        See Hint below.


       11.  After the DUMPER> prompt, type TAPE MTAn:  (or MTn:,  if  the
            tape  drive is under MOUNTR control) where n is the number of
            the drive you assigned.

       12.  After the DUMPER> prompt, type CREATE<RET>.

                                    NOTE

           The DUMPER CREATE command obtains its attributes  from
           tape information stored on the backup tape.


       13.  After  the  DUMPER>  prompt,  type   RESTORE   (TAPE   FILES)
            str:<*>*.*.* (TO)<RET>.

       14.  If there are additional tapes, mount the  next  tape  of  the
            save  set.   Then,  type TAPE MTAn:, where n is the number of
            the drive on which you mounted the  next  tape  to  be  read.
            Repeat  this  step  until all tapes of the save set have been
            read.










                                    1-27
                        ERROR RECOVERY PROCEDURES                        ERROR RECOVERY PROCEDURES  


       15.  If there are incremental save sets,  you  must  restore  them
            too.  For each save set, repeat Steps 12, 13, and 14.

       16.  Type POP<RET>.

       17.  Type SET STRUCTURE str:  AVAILABLE  to  OPR  to  allow  other
            users to MOUNT the structure.

                              ----- Hint -----

   If the DUMPER tapes have files with  accounts  not  in  the  installed
   ACCOUNTS-TABLE.BIN  file,  you  must  restore  the tapes while account
   validation is disabled.  To do this:

        1.  Type PUSH to OPR.

        2.  ENABLE your capabilities.

        3.  Stop timesharing with ^ECEASE.

        4.  Edit   n-CONFIG.CMD   to    have    the    command    DISABLE
            ACCOUNT-VALIDATION.    (See   the   TOPS-20   KL10   Model  B
|           Installation Guide, Chapter 3, to edit n-CONFIG.CMD.)

        5.  Type CTRL/\ and SHUTDOWN.

        6.  Reload the system.

        7.  ATTACH to the operator job 1.

        8.  Type PUSH to OPR.

        9.  Type ENABLE and ^ESET NO LOGINS-ALLOWED ANY.

       10.  Follow Steps 10 through 15 above.

       11.  Edit   n-CONFIG.CMD    to    have    the    command    ENABLE
            ACCOUNT-VALIDATION.

       12.  Type CTRL/\ and SHUTDOWN.

       13.  Reload the system.

   Alternatively, you  may  restore  the  files  by  using  your  current
   account,  that  is,  the account set in your last LOGIN or SET ACCOUNT
   command.  However, all files on the structure have that  account.   To
   restore  the  files,  continue  with  Step 11 at the beginning of this
   section (... type TAPE  MTAn: ...),  but  type  ACCOUNT SYSTEM-DEFAULT
   before the RESTORE command in Step 13.



   1.6  DIAGNOSING YOUR SYSTEM FROM A REMOTE LOCATION VIA KLINIK   1.6  DIAGNOSING YOUR SYSTEM FROM A REMOTE LOCATION VIA KLINIK

   To  allow  a  DIGITAL  Field  Service  Representative  or  a  software
   specialist  to  diagnose  a  problem  in  your  system  from  a remote
   location, you must allow access via the KLINIK link.  First, determine
   with the person doing the diagnosis, the following conditions:

        1.  Usage of the link -- a timesharing terminal or remote CTY

        2.  Password, if use is a remote CTY




                                    1-28
                        ERROR RECOVERY PROCEDURES                        ERROR RECOVERY PROCEDURES  


        3.  Time period to access the KLINIK link

        4.  Highest console mode, if usage is a remote CTY.

   Then type:

        1.  <CTRL/\>

        2.  SET KLINIK

        3.  USER or REMOTE

        4.  Password, if you typed REMOTE above

        5.  Access window open date

        6.  Access window open time

        7.  Access window close date

        8.  Access window close time

        9.  Highest console mode, if you typed REMOTE above

       10.  QUIT

                            ----- Example -----

   This example shows the SET KLINIK command used  to  allow  the  KLINIK
   link  to  be  used  as a remote CTY, to establish the password FGH for
   gaining access, to allow access between the current time and 24  hours
   later, and to allow MAINTENANCE as the highest console mode.


        PAR>SET KLINIK<RET>
        KLINIK MODE: REMOTE<RET>
        PASSWORD: FGH<RET>
        ACCESS WINDOW OPEN DATE: 
        ACCESS WINDOW OPEN TIME: 
        ACCESS WINDOW CLOSE DATE: 
        ACCESS WINDOW CLOSE TIME: 
        HIGHEST CONSOLE MODE: MAINTENANCE
         KLINIK INACTIVE
|        ACCESS WINDOW OPEN: 5-MAR-84 12:47
|        ACCESS WINDOW CLOSED: 5-MAR-84 12:47
         KLINIK MODE: REMOTE
         HIGHEST CONSOLE MODE: MAINTENANCE
        PAR>QUIT<RET>

   To terminate an active KLINIK link, type:

        1.  <CTRL/\>

        2.  CLEAR KLINIK

        3.  DISCONNECT

        4.  QUIT








                                    1-29
                        ERROR RECOVERY PROCEDURES                        ERROR RECOVERY PROCEDURES  


                            ----- Example -----


        <CTRL/\>
        PAR>CLEAR KLINIK<RET>
         KLINIK DISABLED

        KLD -- KLINIK ACCESS TERMINATED BY OPERATOR

        PAR>DISCONNECT<RET>

        KLD -- KLINIK LINE DISCONNECTED

        PAR>QUIT<RET>

                             ----- Hints -----

   To find out what KLINIK parameters have been set, type WHAT KLINIK  to
   the PARSER.

                                               _______  ______  _________|  See PARSER COMMANDS in Section 4.4 of  the  RSX-20F  System  Reference
   ______|  Manual  for  more information on CLEAR KLINIK, DISCONNECT, SET KLINIK,
|  and WHAT KLINIK.

                         ----- Error Messages -----

                                                          _______  ______|  See PARSER ERROR  MESSAGES  in  Section  4.5  of  the  RSX-20F  System
   _________ ______|  Reference Manual.

                        ----- KLINIK Messages -----

   KLD -- KLINIK ACCESS TERMINATED BY OPERATOR

          If the KLINIK link is active and the CLEAR  KLINIK  command  is
          given,  this message is output on the CTY and the remote KLINIK
          terminal.  This indicates that the  KLINIK  access  window  has
          been  closed,  the  KLINIK  link  has  been terminated, and the
          KLINIK parameters have been cleared.

   KLD -- KLINIK DISCONNECT

          This message is  output  on  the  CTY  and  the  remote  KLINIK
          terminal after you give the DISCONNECT command to the PARSER to
          terminate KLINIK access and hang up the modem.

   KLR -- KLINIK LINE CONNECTED TO RSX-20F MODE LIMIT c

          This message is output on the CTY  and  on  the  remote  KLINIK
          terminal  when  the  remote KLINIK user specifies REMOTE KLINIK
          MODE during the KLINIK link access procedure.  The MODE LIMIT c
          is  MAINTENANCE,  PROGRAMMER,  or OPERATOR as you specified for
          HIGHEST CONSOLE MODE in the SET KLINIK command.

   KLR -- KLINIK LINE CONNECTED TO TOPS-20

          This message is output on the CTY  and  on  the  remote  KLINIK
          terminal  when a remote KLINIK user is trying to gain access to
          the KLINIK link in USER KLINIK MODE.   You  can  then  use  the
          remote KLINIK terminal for timesharing on TOPS-20.







                                    1-30
                        ERROR RECOVERY PROCEDURES                        ERROR RECOVERY PROCEDURES  


   KLR -- KLINIK LOGON TIMEOUT -- LOGON ABORTED
   KLD -- KLINIK LINE DISCONNECTED

          If you specified REMOTE KLINIK MODE  in  the  last  SET  KLINIK
          command  and  the remote KLINIK user can not supply the correct
          password in five attempts within two minutes, this  message  is
          output  on  the CTY and the remote KLINIK terminal.  The remote
          KLINIK user must dial  again  and  go  through  the  validation
          sequence again to try to gain KLINIK access.

   KLR -- KLINIK RING - KLINIK WINDOW CLOSED

          This message is printed  on  the  CTY  and  the  remote  KLINIK
          terminal  when a remote user tries to gain access to the KLINIK
          link but the access window is closed or not defined.

   KLR -- KLINIK RING -- VALIDATING ACCESS

          If you specified REMOTE KLINIK MODE  in  the  last  SET  KLINIK
          command and a remote user has just dialed to try to gain access
          to the KLINIK link, this message is printed on the CTY.

   SAV -- *DIAG* -- KLINIK LINE ACTIVE IN USER MODE

          This message is printed on the CTY and  on  the  remote  KLINIK
          terminal  if  RSX-20F is reloaded and the KLINIK link is active
          in user mode.

   SAV -- *DIAG* -- KLINIK LINE ACTIVE IN REMOTE MODE
   SAV -- *DIAG* -- KLINIK LINE CONNECTED TO SYSTEM CONSOLE

          This message is printed  on  the  CTY  and  the  remote  KLINIK
          terminal  if  RSX-20F is reloaded and the KLINIK link is active
          in remote mode.

   SAV -- *FATAL* -- PROTOCOLS NOT RUNNING

          There may be a serious software or hardware problem.   However,
          first try to reload the system.



   1.7  CORRECTING DISK SPACE WITH CHECKD   1.7  CORRECTING DISK SPACE WITH CHECKD

   CHECKD is run automatically at system load time when certain  problems
   are found on the public structure.  CHECKD is also run when you answer
   YES to the RUN CHECKD question at system STARTUP time.

|  Type the following commands to run the CHECKD program  during  regular
|  timesharing.

        1.  PUSH to OPR

        2.  ENABLE your capabilities












                                    1-31
                        ERROR RECOVERY PROCEDURES                        ERROR RECOVERY PROCEDURES  


        3.  CHECKD

        4.  Commands to CHECKD terminated by a <RET>

        5.  EXIT command to CHECKD

        6.  POP


                                  CAUTION

           Before you run CHECKD on PS:, be sure  that  you  have
           only  one  structure  named  PS:   on the disk drives.
           Otherwise, there can be confusion over which structure
           is used.

           If your system has two structures named PS:   on-line,
           where  one  is  just spinning and the other is already
           recognized by the system,  (that  is  mounted  as  the
           public  structure)  and you want to run CHECKD on PS:,
           CHECKD chooses the structure that  is  just  spinning.
           If  CHECKD does not find a PS:  that is just spinning,
           it uses the already recognized public structure.

   Some CHECKD commands should not be used if there are other users using
   the structure.  These commands are:

        1.  CHECK BITTABLE

        2.  REBUILD

        3.  RECONSTRUCT INDEX-TABLE

        4.  RECONSTRUCT ROOT-DIRECTORY

        5.  SCAN

   If there are other users on the structure and the structure is PS:, do
   a  ^ECEASE  and  wait for the message SHUTDOWN COMPLETE before running
   CHECKD.  If the structure is other than PS:, turn to  Part  V  Section
   3.11.3 before running CHECKD.

   If you do not specify a structure in a  CHECKD  command,  CHECKD  uses
   your  connected  structure.   Note  that  at  any time while CHECKD is
   processing directories, you can type CTRL/A to find out  the  name  of
   the directory currently being checked.

   The following commands can be given to CHECKD.


















                                    1-32
                        ERROR RECOVERY PROCEDURES                        ERROR RECOVERY PROCEDURES  


   CHECK BITTABLE (CONSISTENCY OF) str:

                                    NOTE

|          Perform CHECK BITTABLE on PS:  at system startup  time
|          by  answering  YES  to  CHECKD.  Never issue the CHECK
|          BITTABLE command during regular timesharing.

        This command causes the structure's bit  table,  which  indicates
        what  disk  space  is  used, to be checked against the disk space
        that each file  on  the  structure  claims  to  have  used.   Any
        discrepancies  are  listed on your terminal, and the addresses of
        lost pages are written into the file str:<dir>str-LOST-PAGES.BIN,
        where  str  and  dir  are your connected structure and directory.
        This command also executes the CHECK DIRECTORY command to CHECKD.
        (See Part VI Section 1.7.1 for more detail on CHECK BITTABLE.)


                                    NOTE

             If you see in the error report any  messages  with
             MULTIPLY   ASSIGNED   DISK  ADDRESS  (meaning  the
             address is used  by  more  than  one  file),  take
             immediate  action.   Refer  to the SCAN command in
             CHECKD (later in this section),  and  perform  the
             steps discussed there.


   CHECK DIRECTORY (CONSISTENCY OF) str:

        This command checks the validity of certain information  in  each
        directory  on  the  structure.   If  an error occurs, the monitor
        rebuilds  the  symbol  table  on  the  specified  structure   and
        recomputes  the amount of disk space used for directories needing
        such action.  If a symbol table is being rebuilt, CHECKD outputs:

             % REBUILDING SYMBOL TABLE FOR structure:<directory>

        If the rebuild is successful, CHECKD then outputs [OK] at the end
        of the message.  Otherwise, it outputs [FAILED].


   CREATE (NEW FILE SYSTEM FOR) str:

        This command creates the file structure according  to  parameters
        that you specify to the questions asked by CHECKD.


   DISABLE
   ENABLE Enables or disables one of the following features.
















                                    1-33
                        ERROR RECOVERY PROCEDURES                        ERROR RECOVERY PROCEDURES  


        AUTOMATIC STARTUP
             Marks the structure  as  the  primary  public  structure  at
             system startup time.  The serial number of the CPU for which
             this is the primary public structure is requested.

        BAT-BLOCK-DELETE
             Allows a verification pass of the  disk  to  delete  entries
             from  the  BAT BLOCKs.  If this feature is disabled, entries
             will only be added.

        ECC-ERROR-MAPPING
             Controls whether ECC errors will be added to the BAT  blocks
             during a verification pass on the disk.  This includes pages
             for which the first attempt to  read  the  page  with  error
             correction  enabled  failed,  but  one  of  the  following 7
             retries was successful.  It is strongly suggested that  this
             switch be ENABLED.

        LARGE DIRECTORIES
             Controls whether directories may  contain  huge  amounts  of
             files  or  not.   Use DISABLE to guarantee that a particular
             structure can be used  on  small  and  large  systems.   Use
             ENABLE  to  allow  directories to grow large on a structure.
             Note that if a directory grows large, the structure will  no
             longer be usable on a small system.

        SOFT-ERROR-MAPPING
             Controls whether soft errors will be added to the BAT blocks
             during  a  verification  pass  on the disk.  Soft errors are
             defined as failure to read the disk without  ECC  correction
             or system error recovery (reading with offset).

        WRITE-VERIFICATION (OF) DATA
             Controls read after write verification of pages  written  to
             the  data space on a disk.  Note that using this feature may
             cause serious performance problems.

        WRITE-VERIFICATION (OF) SWAPPING
             Controls read after write verification of pages  written  to
             the  swapping space on a disk.  Note that using this feature
             may cause serious performance problems.

|       PASSWORD-ENCRYPTION
|            Controls whether passwords are encrypted or not.


   EXIT (TO MONITOR)

        This command returns you to system command level.


   HELP

        This command prints out a help text.












                                    1-34
                        ERROR RECOVERY PROCEDURES                        ERROR RECOVERY PROCEDURES  


   LIMIT (NUMBER OF FILES PER DIRECTORY ON) str:

        This command limits the number of  directories  and  files  on  a
        structure.  It also guarantees that if the structure is used on a
        2040S or 2060, it can later be used on a 2040 or 2050.   However,
        the  command  disallows  the 2040S or 2060 feature of adding more
        directories and files than a 2040 or 2050 can support.


   REBUILD (BIT TABLE OF) str:

        This command is for use by your software specialist.  It  is  not
        recommended  for  operator  use.   It causes the bit table on the
        specified structure to be completely rebuilt.


                                    NOTE

                  No one should  be  using  the  structure
                  when   REBUILD  is  used.   Also,  if  a
                  directory   needs   reconstruction,   it
                  should  be  reconstructed before REBUILD
                  is used.


   RECONSTRUCT INDEX-TABLE (OF) str:

        This command is for use by your software specialist.  It  is  not
        recommended  for  operator  use.   This command repairs a damaged
        index  table  file  (str:<ROOT-DIRECTORY>INDEX-TABLE.BIN).   This
        command  cannot  be  used  during timesharing and should never be
        used on your public structure.


   RECONSTRUCT ROOT-DIRECTORY (OF) str:

        This  command  reconstructs  <ROOT-DIRECTORY>  on  the  specified
        structure.

                                      NOTE

                Do  not   use   this   command   to   reconstruct
                <ROOT-DIRECTORY>  on  the public structure.  (See
                Part VI, Section 1.5.3.)

   RELEASE (LOST PAGES FROM) file specification (FOR) str:

        This command allows you to free lost pages while other users  are
        on  the system.  When CHECKD reports lost pages, you should first
        resolve any errors indicated by CHECKD (Part  VI  Section  1.7.1)
        and  run  CHECKD  again  with CHECK BITTABLE to see if errors are
        gone.  Then, run CHECKD under <OPERATOR> and  use  this  command.
        Press  RETURN  for  the  file  specification to indicate the file
        str:<dir>str-LOST-PAGES.BIN.n,  where  str  and  dir   are   your
        connected structure and directory, and n is the latest generation
        of the file.  You may also type the name of the file.

        Then, after you EXIT from CHECKD, type:

   EXPUNGE

        to expunge all generations of the file.




                                    1-35
                        ERROR RECOVERY PROCEDURES                        ERROR RECOVERY PROCEDURES  


                                    NOTE

                  If  a  directory  needs  reconstruction,
                  reconstruct   it  and  issue  the  CHECK
                  BITTABLE command  before  you  ever  use
                  RELEASE.

                  Use the RELEASE command  with  only  the
                  most  current  generation  of  the  lost
                  pages file.


   SCAN (FOR DISK ADDRESSES IN) file specification (FOR) str:

        This command scans the structure  for  addresses  listed  in  the
        specified  file.   Instead  of  specifying  a file containing the
        addresses, you can type TTY:<RET>, type  addresses  separated  by
        <RET>,  and  end  with  CTRL/Z.   The  output  from  the  command
        indicates which files contain the disk addresses specified.  This
        command  is  especially  important  if the CHECK BITTABLE command
        outputs  a  message  indicating  that  an  address  is   multiply
        assigned.

        Use the SCAN command  when  there  are  no  other  users  on  the
        structure  involved.  Therefore, whenever CHECKD finds a multiply
        assigned address on PS:, you should do the following as  soon  as
        possible.  (If the structure is not PS:, remove the structure and
        then follow Steps 4 through 6 below.)

        1.  Type PUSH to OPR.

        2.  ENABLE your capabilities.

        3.  Give the ^ECEASE command  to  stop  timesharing  as  soon  as
            possible.

        4.  Run CHECKD.

        5.  Give the SCAN command to  CHECKD  and  specify  the  multiply
            assigned  address/addresses  as indicated above.  When CHECKD
            finds an address for which it  is  searching,  it  outputs  a
            message  like  the  error  report at the beginning of Part VI
            Section 1.7.1.  The error field contains FOUND DISK  ADDRESS.
            For  each file in which CHECKD found an address, it outputs a
            summary line of the form:

                 n SEARCH ADDRESSES FOUND.

        6.  After CHECKD outputs the names of the  files  containing  the
            multiply  assigned address/addresses, try to copy each of the
            files involved to another directory (perhaps  PS:<OPERATOR>).
            (Do  not use RENAME on the original files.)  Then, delete the
            original files, using the FORGET subcommand to  DELETE.   For
            example:

                 $DELETE filespec1,filespec2,<RET>
                 $$FORGET<RET>
                 $$<RET>
                 $







                                    1-36
                        ERROR RECOVERY PROCEDURES                        ERROR RECOVERY PROCEDURES  


        7.  Type ^ESET LOGINS ANY.

        8.  Run PTYCON.

        9.  Type GET SYSTEM:PTYCON.ATO.

       10.  Using MAIL or SEND, notify the owners of  the  deleted  files
            and discuss salvaging their files either from the copy, if it
            was successful, or from a DUMPER tape.

   UNLIMIT (NUMBER OF FILES PER DIRECTORY ON) str:

        This command allows a 2040S or 2060 to create on a structure more
        directories  and  files than a non-2060 can support.  The command
        is used to allow this feature on a structure that was  previously
        limited (the LIMIT command was given for the structure).

                             ----- Hints -----

   When CHECKD is run automatically at system load time because  of  disk
   problems  or  when  you  answer YES to the RUN CHECKD question, CHECKD
   performs the CHECK BITTABLE and CHECK DIRECTORY functions.  You should
   answer  YES  to  the  RUN CHECKD question periodically, perhaps once a
   day, and  always  after  a  disastrous  hardware  failure.   When  the
   standard  PTYCON.ATO  file  is used, one of the operator jobs runs the
   CHECK DIRECTORY function of CHECKD immediately  after  the  system  is
   reloaded.

                          ----- Requirement -----

   OPERATOR or WHEEL capability must be enabled and the CTRL/C capability
   set.

                         ----- Error Messages -----

   ERROR:     ?CHECKD:  STRUCTURE NOT FOUND

   Reason:    CHECKD could not find the structure you specified.

   Recovery:  Be sure you have the proper disk packs mounted and  reissue
              the command.


   ERROR:     ?INVALID COMMAND CONFIRMATION

   Reason:    You pressed a character other than the RETURN  key  at  the
              end of the command.

   Recovery:  Reissue the command and execute the command by pressing the
              RETURN key.


   ERROR:     ?JSYS ERROR:  message

   Reason:    A JSYS that CHECKD was executing failed.

   Recovery:  Refer to Appendix A of the TOPS-20 Monitor Calls  Reference
              Manual for the message.


   ERROR:     ?NOT A CHECKD COMMAND

   Reason:    The command that you typed to CHECKD is not a valid  CHECKD
              command.


                                    1-37
                        ERROR RECOVERY PROCEDURES                        ERROR RECOVERY PROCEDURES  


   Recovery:  Reissue the correct command.


   ERROR:     WHEEL OR OPERATOR CAPABILITY REQUIRED

   Reason:    You tried to run the CHECKD  program  without  OPERATOR  or
              WHEEL capability.

   Recovery:  If you are a privileged  user,  enable  your  capabilities;
              otherwise,  use  a  job  logged  in  under OPERATOR, (which
              should have operator capability) type ENABLE, and rerun the
              CHECKD program.



   1.7.1  Reports from CHECK BITTABLE   1.7.1  Reports from CHECK BITTABLE

   When CHECKD finds  errors  during  the  CHECK  BITTABLE  function,  it
   outputs error reports in the format:

        error(including address n): page type
        SUMMARY FOR FILE file
        m    error type
        - - - - - - -

   Pay close attention to the error portion of the report, and  take  any
   action indicated in the explanation for that error.  The page-type and
   error-type  information  is  for  your  software  specialist,   System
   Manager, or owner of the file.

   CHECKD first checks special system blocks, then  swapping  space,  and
   finally  file  pages.   If  an  error occurs in checking the first two
   types of disk usage, the error report includes for each  disk  address
   in error only the first line of the error report format.

   The possible errors output in  a  report  are  discussed  first.   The
   following  conventions  are used in the list of those errors and their
   explanations below:

           n = the number of a sector; the sector is a location on a disk
               pack  relative  to  the beginning of a structure (also the
               number to use in the SCAN command to CHECKD)

        page = four consecutive sectors or the  minimum  allocation  unit
               for disk space

                               ----- Error Messages -----

   ERROR:     DISK ADDRESS n MARKED IN BAT BLOCKS

   Reason:    A page used by the TOPS-20 file system is marked in the BAT
              (bad  allocation  table)  blocks.   This means a hard error
              occurred on this page.

   Recovery:  Try to copy the file.   Then  delete  the  file  using  the
              DELETE  command  with  the  FORGET subcommand.  Notify your
              System Manager or the owner of the file that the data in  a
              page  may  have been in error.  If the copy was successful,
              try recovering the file.  Otherwise, recover the file  from
              the most recent backup tape.






                                    1-38
                        ERROR RECOVERY PROCEDURES                        ERROR RECOVERY PROCEDURES  


   ERROR:     DISK ADDRESS n NOT IN BIT TABLE

   Reason:    A page used by the file system was not assigned in the  bit
              table.

   Recovery:  CHECKD corrects this error automatically.


   ERROR:     ILLEGAL DISK ADDRESS n

   Reason:    CHECKD found a disk address too large for the size  of  the
              structure.

   Recovery:  Try to copy the file.   Then  type  ENABLE  and  press  the
              RETURN  key.  Delete the file using the DELETE command with
              the FORGET subcommand.  Notify your System Manager  or  the
              owner  of the file that data in the file may have contained
              errors.  If the copy was  successful,  try  recovering  the
              file.   Otherwise,  recover  the  file from the most recent
              backup tape.


   ERROR:     MULTIPLY ASSIGNED DISK ADDRESS n

   Reason:    CHECKD found a page that was already assigned.  This  means
              two or more files are using the same disk address or a file
              is uing a disk address previously  assigned  to  a  special
              file system block or to the swapping space.

   Recovery:  Use the CHECKD command SCAN to indicate which files contain
              the  disk  address  specified.   (Refer to the SCAN command
              Part VI Section 1.7 to resolve this problem.)

   If any of the preceding errors occur, CHECKD also outputs a page type.
   This  indicates  the  usage of the page containing the disk address in
   error.  The page types are:

        FILE PAGE n
        LONG FILE PAGE TABLE
        PAGE TABLE
        SPECIAL SYSTEM BLOCKS
        SWAPPING SPACE

   If CHECKD has reported errors for a file, it then outputs:

        SUMMARY FOR FILE file

   where file is a complete file specification.  CHECKD follows this with
   summary  lines containing each type of error that has occurred for the
   file, and how many times the error occurred.  Note that one error  can
   sometimes  cause  two  summary  lines.  The error types in the summary
   are:

        ASSIGNED PAGES MARKED IN BAT BLOCKS
        DISK READ ERRORS
        FAULTY ADDRESSES IN LONG FILE PAGE TABLE
        FAULTY ADDRESSES IN PAGE TABLE
        FAULTY LONG FILE PAGE TABLE ADDRESSES IN FDB
        FAULTY PAGE TABLE ADDRESSES IN FDB
        FILE ADDRESSES NOT IN BIT TABLE
        ILLEGAL ADDRESSES
        LONG FILE PAGE TABLES UNREADABLE
        MULTIPLY ASSIGNED ADDRESSES
        PAGE TABLES UNREADABLE


                                    1-39
                        ERROR RECOVERY PROCEDURES                        ERROR RECOVERY PROCEDURES  


   The last summary line for a file is followed by line of dashes.   Then
   other error reports may follow.

   Once CHECKD has finished checking all the files, it  outputs  a  final
   summary of page counts as follows:

        LOCAL COUNT OF FILE PAGES: i
        LOCAL COUNT OF OVERHEAD PAGES: j
        LOCAL COUNT OF USED PAGES: k

        SYSTEM COUNT BEFORE CHECKD: l
        SYSTEM COUNT AFTER CHECKD: m

   In the above final summary:

        i = number of pages used for data
        j = number of pages used for overhead for the structure; includes
            special system blocks, swapping pages, and overhead pages for
            files
        k = number of pages that CHECKD found to be used
        l = number of pages that the  system  indicated  as  used  before
            CHECKD was run
        m = number of pages that  the  system  indicated  as  used  after
            CHECKD was run

   If there are no errors, i plus j should equal k, and m minus k  should
   equal  lost  pages (discussed later in this section).  If m is greater
   than l, CHECKD found one or more pages that were used but not assigned
   in  the  system  bit  table.   CHECKD assigns them, and m reflects the
   count.

   During the last part of the CHECK BITTABLE function, CHECKD compares a
   bit  table  it  created  with the system bit table for the appropriate
   structure.  CHECKD then compares information in the  two  tables.   If
   page  counts  disagree,  or if the system bit table says a page is not
   used but CHECKD says it is used, CHECKD outputs:

        ?BIT TABLES INCONSISTENT AT CYLINDER n

   Cylinder n is an area on a disk pack.  This message  indicates  either
   an  error  in  CHECKD  or  the monitor or that someone else is running
   CHECKD which they should not be.

   If the system bit table says that a page is used but CHECKD says it is
   not used, CHECKD counts the page as a lost page.  It then outputs:

        THERE ARE n LOST PAGES
        ADDRESSES ARE IN FILE file

   where n is the number of lost pages found and file is the name of  the
   file containing the addresses of those pages.  The file name is of the
   form  str:<dir>str-LOST-PAGES.BIN.n,  where  str  and  dir  are   your
   currently  connected  structure and directory.  If the file is written
   at system load time, it is PS:<OPERATOR>PS-LOST-PAGES.BIN.n.

   If CHECKD reported an illegal disk address or a multiply assigned disk
   address,  it  does  not  write  the lost page addresses in a file.  It
   outputs:

        %SUPPRESSED WRITING OF LOST PAGES FILE , TOO MANY ERRORS

   If you get this message, correct the errors and run  CHECKD  with  the
|  CHECK  BITTABLE function again to get a lost-pages file.  It should be
|  noted that the structure remains mounted with the alias name of CHECKD


                                    1-40
                        ERROR RECOVERY PROCEDURES                        ERROR RECOVERY PROCEDURES  


|  even  though  the  SHOW  STATUS  DISK-DRIVES  command  will  show  the
|  structure mounted with its actual name and no indication  that  it  is
|  still mounted as CHECKD.































































                                    1-41
                        ERROR RECOVERY PROCEDURES                        ERROR RECOVERY PROCEDURES  


   To regain disk space counted as lost pages, see the RELEASE command to
   CHECKD (Part VI Section 1.7).

   If there are no lost pages, CHECKD outputs:

        THERE ARE NO LOST PAGES

   If CHECKD finds certain directory inconsistencies which  cause  it  to
   try rebuilding a directory symbol table, it outputs:

        % REBUILDING SYMBOL TABLE FOR str:<directory>

   If the rebuild is successful,  CHECKD  outputs  [OK].   Otherwise,  it
   outputs [FAILED].  It is normal for CHECKD to occasionally rebuild the
   symbol table for <ROOT-DIRECTORY> to account for the space used when a
   directory expands by a page.

   If the rebuild fails, you should try to save,  with  DUMPER,  all  the
   files  in  the directory involved.  Then follow the procedures in Part
   VI Sections 1.5.2.1 and 1.5.2.2.  After that,  discuss  salvaging  the
   files with their owners.

   If you get any of the following messages from CHECKD, perform the same
   procedure  as when a rebuild fails.  In the messages, str:<dir> is the
   structure and directory name of the inconsistent directory.

        ACTBAD: ILLEGAL FORMAT FOR ACCOUNT BLOCK IN DIRECTORY str:<dir>

        DR0CHK: ILLEGAL FORMAT FOR PAGE 0 IN DIRECTORY str:<dir>

        EXTBAD: ILLEGAL FORMAT FOR EXTENSION BLOCK IN DIRECTORY str:<dir>

        FDBBAD: ILLEGAL FORMAT FDB IN DIRECTORY str:<dir>

        NAMBAD: ILLEGAL FORMAT FOR NAME BLOCK IN DIRECTORY str:<dir>

        OPENF FAILED ON DIRECTORY str:<dir> - SKIPPED

        RCDIR FAILED ON DIRECTORY str:<dir> - SKIPPED

        UNSBAD: ILLEGAL FORMAT FOR ACCOUNT BLOCK IN DIRECTORY str:<dir>

                            ----- Examples -----

     1. RUN CHECKD? Y<RET>
        [CHECKING FILE CONSISTENCY]

        [WORKING ON STRUCTURE - PS:]

        DISK ADDRESS 4 MARKED IN BAT BLOCKS: SPECIAL SYSTEM BLOCKS
        - - - - - - -
        DISK ADDRESS 443264 MARKED IN BAT BLOCKS: SWAPPING SPACE
        DISK ADDRESS 444574 MARKED IN BAT BLOCKS: SWAPPING SPACE
        - - - - - - -
        DISK ADDRESS 220754 MARKED IN BAT BLOCKS: FILE PAGE 50
        SUMMARY FOR FILE PS:<FIELD-IMAGE>COBOL.EXE.4
        1    ASSIGNED PAGES MARKED IN BAT BLOCKS
        - - - - - - -
        % REBUILDING SYMBOL TABLE FOR PS:<ROOT-DIRECTORY> [OK]
        DISK ADDRESS 1350340 MARKED IN BAT BLOCKS: FILE PAGE 1
        SUMMARY FOR FILE PS:<TOTTON>XPL.PAT.1
        1    ASSIGNED PAGES MARKED IN BAT BLOCKS
        - - - - - - -



                                    1-42
                        ERROR RECOVERY PROCEDURES                        ERROR RECOVERY PROCEDURES  


        LOCAL COUNT OF FILE PAGES: 129711
        LOCAL COUNT OF OVERHEAD PAGES: 15858
        LOCAL COUNT OF USED PAGES: 145569

        SYSTEM COUNT BEFORE CHECKD: 146671
        SYSTEM COUNT AFTER CHECKD: 146671

        THERE ARE 1086 LOST PAGES

        ADDRESSES ARE IN FILE PS:<OPERATOR>PS-LOST-PAGES.BIN.1


     2. DISK ADDRESS 220754 MARKED IN BAT BLOCKS: FILE PAGE 50
        SUMMARY FOR FILE PS:<FIELD-IMAGE>COBOL.EXE.4
        1    ASSIGNED PAGES MARKED IN BAT BLOCKS
        - - - - - - -
        MULTIPLY ASSIGNED DISK ADDRESS 1403114: FILE PAGE 2762
        SUMMARY FOR FILE PS:<RMSQA-TEST>FOOREL1..4
        1    FAULTY ADDRESSES IN PAGE TABLE
        1    MULTIPLY ASSIGNED ADDRESSES
        - - - - - - -

        MULTIPLY ASSIGNED DISK ADDRESS 261534: FILE PAGE 52

        SUMMARY FOR FILE PS:<RMSQA-TEST>RMSSYM.UNV.14
        1    FAULTY ADDRESSES IN PAGE TABLE
        1    MULTIPLY ASSIGNED ADDRESSES
        - - - - - - -
        % REBUILDING SYMBOL TABLE FOR PS:<ROOT-DIRECTORY> [OK]
        DISK ADDRESS 1350340 MARKED IN BAT BLOCKS: FILE PAGE 1
        SUMMARY FOR FILE PS:<UNSUPPORTED>TV.EXE.7
        1    ASSIGNED PAGES MARKED IN BAT BLOCKS
        - - - - - - -

        LOCAL COUNT OF FILE PAGES: 125793
        LOCAL COUNT OF OVERHEAD PAGES: 15216
        LOCAL COUNT OF USED PAGES: 141007

        SYSTEM COUNT BEFORE CHECKD: 141149
        SYSTEM COUNT AFTER CHECKD: 141149

        THERE ARE 137 LOST PAGES
        % SUPPRESSED WRITING OF LOST PAGES FILE , TOO MANY ERRORS



   1.8  RESTARTING PROGRAMS UNDER SYSJOB   1.8  RESTARTING PROGRAMS UNDER SYSJOB

   When you receive a fatal error message  on  the  CTY  from  a  program
   running under SYSJOB, you must restart it by giving commands to SYSJOB
   via the ^ESPEAK command.  The format of the message follows:

        ** SYSJOB: SUBJOB CRASHED, DATA FOLLOWS: **
          n process state AT m  date time
          Jsys error:message
          FORK ACS:  a  b  c  d

              n = number of the process
        process = name of the process, e.g., INFO
          state = CRASHED or HALTED
              m = PC value
           abcd = content of accumulators 1 to 4




                                    1-43
                        ERROR RECOVERY PROCEDURES                        ERROR RECOVERY PROCEDURES  


   Also, if you type the SYSJOB  STATUS  command  via  ^ESPEAK  (see  the
   _______  __________ _______ ________ _________ ______   TOPS-20  Operator's Command Language Reference Manual) and there is no
   entry for a program normally run under SYSJOB, you must  restart  that
   program.

   The following programs run as processes under SYSJOB:

        1.  ORION

        2.  QUASAR

        3.  MOUNTR

        4.  INFO

        5.  MAILER

        6.  MAPPER

        7.  LPTSPL

        8.  CDRIVE

        9.  SPRINT

   To restart a program under SYSJOB, type the following commands:

        1.  PUSH to OPR

        2.  ENABLE your capabilities

        3.  ^ESPEAK

        4.  RUN SYS:program

        5.  CTRL/Z

        6.  POP

                                    NOTE

           Programs running under SYSJOB must be restarted in the
           same order as they are in the SYSJOB.RUN file.

                            ----- Example -----

        OPR>PUSH<RET>
|        TOPS-20 Command Processor 6(514)
        @ENABLE<RET>
        $^ESPEAK<RET>
         [PLEASE TYPE SYSJOB COMMANDS - END WITH ^Z]
        RUN SYS:INFO
        <CTRL/Z>
        $POP<RET>
        OPR>

                             ----- Hints -----

|  If you restart  QUASAR,  you  must  also  restart  all  spoolers,  for
|  example,  MOUNTR,  CDRIVE,  LPTSPL,  BATCON,  and SPRINT (if they were
|  previously running).  To restart ORION, you must restart all OPRs.  To
|  do this simply run OPR and type any OPR command.




                                    1-44
                        ERROR RECOVERY PROCEDURES                        ERROR RECOVERY PROCEDURES  


   1.8.1  GALAXY Crash Recovery Procedures   1.8.1  GALAXY Crash Recovery Procedures

   GALAXY programs may stop performing useful work for one of the reasons
   listed  below.   When  a  program  stops  processing, this stoppage is
   referred to as a "crash".  This section describes how you can  recover
   from a GALAXY program crash.

   Reasons for program crashes are:

        1.  A monitor call (JSYS) that should not fail  takes  the  error
            return and a error occurs.

        2.  An error is  detected  by  the  built-in  consistency  checks
            within the various components of GALAXY and a error occurs.

        3.  An undetected  error  eventually  causes  an  illegal  memory
            reference and a error occurs.

   You should take one of the following steps should a  GALAXY  component
   (program)  crash.   It  is  assumed that GALAXY is running as multiple
   forks under SYSJOB.  All GALAXY components  whose  error  generates  a
   file  in  PS:<SPOOL> which contains the core image of the component at
   the time of the crash.  The filename is XXXXXX-YYY-CRASH.EXE where:

        XXXXXX - is the name of  the  component  that  crashed,  such  as
                 BATCON or ORION.

        YYY - the 3-character error name.


   Table 1-1:  GALAXY Component Crash Recovery Procedures   Table 1-1:  GALAXY Component Crash Recovery Procedures


     Component                             Recovery


     LPTSPL            If LPTSPL crashes, it will  automatically  restart
                       the jobs which were being processed at the time of
                       the crash from the page  number  recorded  in  the
                       last  checkpoint.  At the CTY, issue the following
                       commands:

                       ^ESPEAK
                       STATUS
                       ^Z

                       Now, using the process number specified for LPTSPL
                       in  the  STATUS  display,  kill off all the LPTSPL
                       processes using the SYSJOB PURGE  command.   There
                       is  one  PURGE  command  required  for each LPTSPL
                       process running under SYSJOB.

                       ^ESPEAK
                       PURGE <fork number>
                       PURGE <fork number>
                       ^Z

                       Now, restart all  the  LPTSPL  jobs  under  SYSJOB
                       using  the  SYSJOB  RUN command.  There is one RUN
                       command required for each line printer you want to
                       start.





                                    1-45
                        ERROR RECOVERY PROCEDURES                        ERROR RECOVERY PROCEDURES  


   Table 1-1:  GALAXY Component Crash Recovery Procedures (Cont.)   Table 1-1:  GALAXY Component Crash Recovery Procedures (Cont.)


     Component                             Recovery


     LPTSPL (Cont.)    ^ESPEAK
                       RUN SYS:LPTSPL
                       RUN SYS:LPTSPL
                       ^Z

                       The line printer  spooler(s)  is  now  ready  to
                       process   user  requests  again.   If  required,
                       re-issue the OPR START commands to  restart  the
                       LPT processing.


     CDRIVE            If CDRIVE crashes, all jobs currently being read
                       from  the card reader will be lost and will have
                       to be restarted.  To restart CDRIVE,  issue  the
                       following commands:

                       ^ESPEAK
                       KILL CDRIVE
                       RUN SYS:CDRIVE
                       ^Z

                       The card reader spooler is  now  ready  to  read
                       cards  again.   If  required,  re-issue  the OPR
                       START commands to restart the CDR processing.


     SPRINT            If SPRINT crashes, it can be  restarted  without
                       loss  of  data.   To  restart  SPRINT, issue the
                       following commands:

                       ^ESPEAK
                       KILL SPRINT
                       RUN SYS:SPRINT
                       ^Z

                       The card reader  interpreter  is  now  ready  to
                       start  processing  spooled card decks again.  No
                       OPR commands are necessary  (or  available)  for
                       controlling SPRINT.


     SPROUT            If SPROUT  crashes,  all  jobs  currently  being
                       processed  are  restarted  from the beginning of
                       the current file.  To restart SPROUT, issue  the
                       following commands:

                       ^ESPEAK
                       KILL SPROUT
                       RUN SYS:SPROUT
                       ^Z

                       The card punch/plot  spooler  is  now  ready  to
                       start   processing   user  requests  again.   If
                       required, re-issue the  OPR  START  commands  to
                       restart the CDP/PLT processing.





                                    1-46
                        ERROR RECOVERY PROCEDURES                        ERROR RECOVERY PROCEDURES  


   Table 1-1:  GALAXY Component Crash Recovery Procedures (Cont.)   Table 1-1:  GALAXY Component Crash Recovery Procedures (Cont.)


     Component                             Recovery


     ORION             If ORION crashes, the only indication of the crash
                       will  be  the  dump which gets printed on the CTY.
                       After ORION is restarted, all OPR programs running
                       at   that   time   will  automatically  reset  the
                       OPR/ORION link with the first command typed to the
                       OPRs.   The  first command that re-establishes the
                       OPR/ORION link will be lost.

                       Any DN60 Termination  remote  stations  should  be
                       shut  down and restarted.  To restart ORION, issue
                       the following commands:

                       ^ESPEAK
                       KILL ORION
                       RUN SYS:ORION
                       ^Z

                       The operator controller program is  now  ready  to
                       process  OPR  commands  and  route messages to the
                       appropriate processors.


     OPR               If OPR crashes, just restart it ($R OPR).


     BATCON            If BATCON crashes, first display the batch  stream
                       status  from  OPR.   For all active batch streams,
                       issue a LOGOUT command for each job running  under
                       batch.   Logging  the jobs off will not delete the
                       queue entry.  The batch job will be restarted when
                       BATCON  is  restarted.  When all active batch jobs
                       have been logged out, issue the following commands
                       to restart it:

                       ^ESPEAK
                       KILL BATCON
                       RUN SYS:BATCON
                       ^Z

                       The batch controller is now ready to process  user
                       requests  again.   If  required,  re-issue the OPR
                       START commands to restart the batch processing.


















                                    1-47
                        ERROR RECOVERY PROCEDURES                        ERROR RECOVERY PROCEDURES  


   Table 1-1:  GALAXY Component Crash Recovery Procedures (Cont.)   Table 1-1:  GALAXY Component Crash Recovery Procedures (Cont.)


     Component                             Recovery


     QUASAR            If  QUASAR  crashes,  user  requests   for   queue
                       services  will  not  be  lost.  QUASAR maintains a
                       queue on PS:<SPOOL> which contains copies  of  all
                       outstanding user requests.  Restarting QUASAR is a
                       problem, however.  QUASAR also maintains a list of
                       all  running  GALAXY  processors.   If  QUASAR  is
                       restarted, it no longer knows about  the  rest  of
                       the  GALAXY  spoolers.   To  restart QUASAR, first
                       determine what batch jobs were running at the time
                       of  the  crash  and log them out.  Next, issue the
                       following commands to restart QUASAR:

                       ^ESPEAK
                       KILL QUASAR
                       RUN SYS:QUASAR
                       ^Z

                       The request controller is  now  ready  to  process
                       user  requests  again.  However, since QUASAR does
                       not know  about  any  running  spoolers,  ALL  the
                       spoolers must also be restarted.  In addition, you
                       must  restart   MOUNTR,   the   mountable   device
                       processor.   Follow  the  instructions  above  for
                       restarting  the   following   spoolers:    LPTSPL,
                       BATCON, CDRIVE, SPRINT, SPROUT.

                       Assuming that MOUNTR is also running under SYSJOB,
                       issue the following commands to restart it:

                       ^ESPEAK
                       KILL MOUNTR
                       RUN SYS:MOUNTR
                       ^Z

                       After the spoolers and MOUNTR are  restarted,  you
                       must  run  OPR and give the TAKE command using the
                       SYSTEM.CMD file and any other command  files  used
                       for  system  startup.   This  will  restart normal
                       GALAXY processing.


   If you were trying to run MAIL and you received a message from  SYSJOB
   indicating a problem with MAILER or INFO, restart MAILER or INFO.

















                                    1-48
                        ERROR RECOVERY PROCEDURES                        ERROR RECOVERY PROCEDURES  


   1.9  HUNG CONSOLE TERMINAL (LA36)   1.9  HUNG CONSOLE TERMINAL (LA36)

   If you are trying to type at the CTY and no characters  are  printing,
   do the following:

        1.  Be sure the terminal is plugged in.

        2.  Be sure the CTY has paper.  If it  does  not,  replenish  the
            paper supply.  If you still get no characters printed, switch
            the terminal to LOCAL and then back to line.

        3.  Check the fuse on the vertical panel under the keyboard.

        4.  Try the terminal in LOCAL.

        5.  Be sure it is ON LINE and set for the correct speed.

        6.  If there is a CAPS LOCK key, be sure it is pressed down.

        7.  See if CTRL/\ (control backslash) gets you into  the  console
            processor  command language.  If it does, type QUIT or CTRL/Z
            to return to TOPS-20.

        8.  Check to see if other terminals are working.

   If you try all the above and still fail to get any echo from the  CTY,
   try  reloading  the  system via DISK or FLOPPY.  If that fails, notify
   your DIGITAL Field Service Representative.



   1.10  MEMORY CONFIGURATION FAILED   1.10  MEMORY CONFIGURATION FAILED

   When memory is being configured, it is possible  to  receive  a  fatal
   error message in the form of:

        KLI--?FATAL MEMORY CONFIGURATION ERROR-CODE "XXX"
        where "xxx" = the diagnostic error code

   If this error occurs, KLI asks you if you  want  to  configure  memory
   again.   Type  FORCE  and  press  the  RETURN key.  If the error still
   persists, call your DIGITAL Field Service Representative.



   1.11  TOPS-20 MONITOR NOT FOUND   1.11  TOPS-20 MONITOR NOT FOUND

   If you are loading the  system  using  the  KL  bootstrap  that  reads
   TOPS-20  from  disk and, after the message KLI -- BOOTSTRAP LOADED AND
   STARTED, you get:

        ?FIL NOT FND

   the bootstrap was not able to find on disk the  TOPS-20  monitor  that
   you  specified.  Unless you specified a name after a BOOT> prompt, the
   file not found was PS:<SYSTEM>MONITR.EXE.










                                    1-49
                        ERROR RECOVERY PROCEDURES                        ERROR RECOVERY PROCEDURES  


   Consider the following:

        1.  If you specified a nondefault monitor name, be sure you typed
            the correct directory name and filename.

        2.  Be sure you have loaded a bootstrap that loads a monitor from
            disk.

        3.  Be sure the appropriate disk packs are mounted and  that  the
            drives are on-line.

        4.  If you wanted the default monitor, you must try  to  load  it
            from  magnetic  tape  (Part IV Section 1.3.2) using your most
            recent system backup tape (Part IV Section 1.1.6.1).   Either
            the file PS:<SYSTEM>MONITR.EXE has been destroyed on the disk
            or some other problem possibly a hardware error, has affected
            the file system.

        5.  If the system comes up for timesharing  after  you  load  the
            monitor from magnetic tape, chances are that only the monitor
            file on disk was bad.  You should restore a good copy of  the
            monitor from a DUMPER tape to PS:<SYSTEM>.

        6.  If the system does not come up for timesharing, it is  likely
            that  there are problems with the file system.  First consult
            your software specialist.  He may  want  to  investigate  the
            situation     before    recommending    reconstructing    the
            ROOT-DIRECTORY or the lengthy procedure  of  re-creating  the
            file system.




   1.12  PS NOT FOUND   1.12  PS NOT FOUND

   During a system reload, if you see the message:

        PS NOT FOUND. WHAT IS THE NAME OF THE PUBLIC STRUCTURE?

   the system was not able to find a structure named PS:.  You must  then
   type  the  name  of  the  structure  that  is  going  to be the public
   structure.  As long as the TOPS-20  monitor  continues  to  run,  that
   structure  will  be  known  as  PS:.  It will not be recognized by its
   original name that you typed in answer to the question.  Note that the
   public  structure  must  have swapping space, usually a front-end file
   system,  an  appropriately  installed  <SYSTEM>  and   <SUBSYS>,   and
   directories to allow users to log in.

                            ----- Example -----

   To designate the structure 2136: as the public structure when  PS: was
   not found:

        PS NOT FOUND. WHAT IS THE NAME OF THE PUBLIC STRUCTURE? 2136

        [2136 MOUNTED AS PS]










                                    1-50
                        ERROR RECOVERY PROCEDURES                        ERROR RECOVERY PROCEDURES  


   1.13  BOOTSTRAP LOAD FAILED   1.13  BOOTSTRAP LOAD FAILED

   If the bootstrap failed to load during a  system  reload,  you  should
   zero memory and then try to reload again.  This is sometimes necessary
   after a power failure but should occur infrequently.  If  the  problem
   continues, call your DIGITAL Field Service Representative.

   To zero or clear memory, type the following at the CTY.

        1.  <CTRL/\>

        2.  ABORT

        3.  SET CONSOLE PROGRAMMER

        4.  ZERO 0>address

            where address is the maximum memory address on your system

                            ----- Example -----

        <CTRL/\>
        PAR>ABORT<RET>
        PAR%SET CONSOLE PROGRAMMER<RET>
         CONSOLE MODE: PROGRAMMER
        PAR%ZERO 0>777777<RET>
        PAR%



   1.14  MANUALLY RELOADING THE DX20   1.14  MANUALLY RELOADING THE DX20

   The DX20 is usually started when you load the system.   At  that  time
   the BOOT or MTBOOT program loads and starts the microcode in the DX20.
   However, in  the  following  situations,  you  must  reload  the  DX20
   manually:

        1.  If the DX20 has been taken off-line for maintenance  and  you
            do not want to reload the entire system to reload the DX20

        2.  If you are told to load a specific DX20 microcode  file  that
            is different from the one BOOT or MTBOOT would load

        3.  If you have users complaining that none of  the  TU70  series
            magnetic  tape  drives  or  RP20  disk  drives  on a DX20 are
            working

        4.  If the DX20 loses power

   To manually reload the DX20, type the following commands:

        1.  PUSH to OPR

        2.  ENABLE your capabilities

        3.  DX20LD

        4.  SYS:DXMCA (for tape) or SYS:DXMCE (for RP20 disks)

        5.  /E

        6.  POP

   The above steps reset the DX20, load the microcode file  SYS:DXMCA.ADX
   or  SYS:DXMCE.ADX,  verify  the  microcode,  start  it,  and exit from
   DX20LD.
                                    1-51
                        ERROR RECOVERY PROCEDURES                        ERROR RECOVERY PROCEDURES  


                            ----- Example -----

        OPR>PUSH<RET>
|        TOPS-20 Command Processor 6(514)
        @ENABLE<RET>
        $DX20LD<RET>
        FILE: SYS:DXMCA<RET>

        DX20 SELECTED:    RH20=2  DX20=0
                MICROCODE LOADED
                MICROCODE VERIFIED
                MICROCODE VERSION  1 (0)
                DX20 STARTED AT ADDRESS 1
        FILE: /E<RET>
        $POP<RET>
        OPR>

   The preceding steps and example show the most common  use  of  DX20LD.
   However,  there  are switches in DX20LD for specific functions.  After
   FILE:, the DX20LD prompt, you can type a command line in the form of a
   file specification followed by switches and <RET>.

   The file specification for the DX20 microcode is  SYS:DXMCA.ADX.   The
   default  directory  is  your  connected  directory.  Note that neither
   recognition nor the help facility (typing ?) is available in DX20LD.

   After a command line is processed or an error occurs,  DX20LD  prompts
   again for another command line.

   The DX20LD switches and their functions are:

        /C        If you specify a DX20 microcode  file  before  /C,  the
                  DX20  memory  is  cleared  and the microcode is loaded,
                  verified, and started.  If you do not specify  a  file,
                  only DX20 memory is cleared.

        /D:CD     The functions specified are done on RH20 controller  c,
                  DX20  d,  where c and d are octal numbers.  If you omit
                  /D, DX20LD looks for a DX20.  If only one is found,  it
                  is  used.   However,  if more than one is found, DX20LD
                  outputs an error message which says to use /D.

        /E        DX20LD exits to TOPS-20 command level.

        /L        The file specified is loaded into the DX20.

        /R        Specifies DX20 for RP20 disk drives.

        /S:N      The DX20 is started at location  n  in  the  microcode,
                  where  n  is  an  octal  number.   The default starting
                  address is 1.

        /T        Specifies DX20 for TU70 tape drives.

        /V        The DX20 memory is verified against the file specified.
                  Do  this  verification  only  after  loading and before
                  starting the DX20.

   You can use the switches in combination.  However, if you  use  /L  or
   /V,  the  functions  of only the specified switches are performed.  If
   you specify a file and /C or /S without /L or /V, the file  is  loaded
   into  the  DX20  and  verified,  and  the  functions  of the specified
   switches are performed.  If you do not use any switches, the  DX20  is
   reset and the file you specified is loaded, verified, and started.


                                    1-52
                        ERROR RECOVERY PROCEDURES                        ERROR RECOVERY PROCEDURES  


                          ----- Requirement -----

   OPERATOR, WHEEL, or MAINTENANCE capability must be enabled


                         ----- Error Messages -----

   ERROR:     ?1ST CHARACTER IN DATALINE WRONG

   Reason:    The first character in the line of data DX20LD  reads  from
              SYS:DXMCA.ADX  must  be  a  semicolon,  a  W,  or a C.  You
              probably entered the wrong filename.  If the  filename  was
              entered correctly, the file is probably corrupted.

   Recovery:  Retype the filename correctly.  If the  error  recurs,  use
              another copy of SYS:DXMCA.ADX.


   ERROR:     ?2ND CHARACTER IN DATALINE WRONG

   Reason:    The character which follows a C or W in the first  position
              in the line of data DX20LD reads from SYS:DXMCS.ADX must be
              a space.  If the file name was entered correctly, the  file
              is probably corrupted.

   Recovery:  Retype the file name.  If the  error  recurs,  use  another
              copy of SYS:DXMCA.ADX.


   ERROR:     ?CHECKSUM ERROR IN DATALINE

   Reason:    The checksum  DX20LD  computed  on  the  line  of  data  in
              SYS:DXMCA.ADX  does not match the checksum in SYS:DXMCA.ADX
              for  that  line  of  data.   The  .ADX  file  is   probably
              corrupted.

   Recovery:  Use another copy of SYS:DXMCA.ADX.


   ERROR:     ?COLON ILLEGAL FOR SWITCH

   Reason:    The switch you specified does not accept a colon.

   Recovery:  Retype the command or file name and switches correctly.


   ERROR:     ?COMMAND STRING TOO LONG

   Reason:    The command line you typed is too long.  It  must  be  less
              than 100 characters.

   Recovery:  Type a command line that is less than 100 characters long.


   ERROR:     ?CRAM PARITY ERROR DURING VERIFICATION

   Reason:    You specified the switch /V and a parity error occurred  in
              the DX-20 during the verification procedure.

   Recovery:  Call your DIGITAL Field Service Representative.






                                    1-53
                        ERROR RECOVERY PROCEDURES                        ERROR RECOVERY PROCEDURES  


   ERROR:     ?CRAM VERIFICATION - NO MATCH

   Reason:    You  specified  the  /V  switch,  and  the  disk  file  you
              specified  did  not match the file in the DX20 CRAM memory.
              The filename specified was wrong, or the data in  the  DX20
              is incorrect.

   Recovery:  Retype the correct filename and  switches.   If  the  error
              recurs, use another copy of SYS:DXMCA.ADX.


   ERROR:     ?/D SWITCH REQUIRES AN OCTAL NUMBER

   Reason:    You did not use octal numbers after the /D switch.

   Recovery:  Retype the file name, the /D switch, and the octal  numbers
              of the RH controller and the DX20 you want to use.


   ERROR:     ?FORMAT ERROR IN DATALINE

   Reason:    The data words in the file you specified are  delimited  by
              carriage returns; they should be delimited by commas.

   Recovery:  Retype the file name.  If the  error  recurs,  use  another
              copy of SYS:DXMCA.ADX.


   ERROR:     ?ILLEGAL SWITCH

   Reason:    The switch you specified is not a valid switch for DX20LD.

   Recovery:  Retype the file name and correct switch.


   ERROR:     ?INVALID SWITCH (2ND CHARACTER MUST BE A SPACE OR A COLON)

   Reason:    You must type a space or a colon  after  typing  the  first
              letter  of  the switch.  For example, you cannot use /VE to
              verify; you must use /V.

   Recovery:  Retype the file name and the correct switch.


   ERROR:     ?  JSYS ERROR:  FILE DOES NOT EXIST

   Reason:    The file you specified does not exist.  Perhaps  you  typed
              the  wrong  file  name.  The standard file specification to
              use is SYS:DXMCA.ADX.  If you do not specify a  file  type,
              the default is .ADX.

   Recovery:  Retype the correct file name.


   ERROR:     ?  JSYS ERROR:  WHEEL, OPERATOR, OR MAINTENANCE  CAPABILITY
              REQUIRED

   Reason:    You must have WHEEL, OPERATOR,  or  MAINTENANCE  capability
              enabled to run DX20LD.

   Recovery:  Log  in  to  <OPERATOR>,   which   should   have   OPERATOR
              capability.  Type ENABLE, then run DX20LD.




                                    1-54
                        ERROR RECOVERY PROCEDURES                        ERROR RECOVERY PROCEDURES  


   ERROR:     ?MORE THAN ONE DX20 FOUND - USE /D SWITCH

   Reason:    If your system has more than one DX20, you must use the  /D
              switch to specify the DX20 number.

   Recovery:  Retype the file name, the /D switch, and the octal  numbers
              of the RH controller and the DX20 you want to use.


   ERROR:     ?NO DX20 WAS FOUND

   Reason:    DX20LD could not find a DX20.  Either the hardware  is  not
              connected  to the system, or hardware problems exist in the
              DX20 or the RH20.

   Recovery:  If the  error  recurs,  call  your  DIGITAL  Field  Service
              Representative.


   ERROR:     ?SPECIFIED DEVICE IS NOT A DX20

   Reason:    The RH20 you specified does not have a DX20.   Perhaps  you
              typed the wrong controller (RH20) number.

   Recovery:  Retype the file name and  the  /D  switch  with  the  octal
              numbers of the RH controller and DX20 you want to use.


   ERROR:     ?SPECIFIED RH20 DOES NOT EXIST

   Reason:    The RH20 you specified in the /D  switch  does  not  exist.
              Perhaps you typed the wrong controller number.

   Recovery:  Retype the file name and  the  /D  switch  with  the  octal
              numbers  of the RH controller and the DX20 you want to use.
              If the  error  recurs,  call  your  DIGITAL  Field  Service
              Representative.


   ERROR:     ?TOO MANY WORDS IN DATALINE

   Reason:    The data in the .ADX file you specified contains more  than
              32  words.   You  typed the wrong file name, or the file is
              corrupted.

   Recovery:  Retype the file name.  If the  error  recurs,  use  another
              copy of SYS:DXMCA.ADX.


   ERROR:     ?/V OR /L SWITCH WITH NO FILE NAME SPECIFIED

   Reason:    You used a /V or a /L switch and did not specify  the  name
              of  a file.  You must specify the name of an .ADX file when
              you use the /V or /L switches.

   Recovery:  Type the file name and the /V or /L switch.










                                    1-55
                        ERROR RECOVERY PROCEDURES                        ERROR RECOVERY PROCEDURES  


   ERROR:     ?WORKING MEMORY VERIFICATION - NO MATCH

   Reason:    You used the /V switch and the file you specified  did  not
              match what was in the working section of DX20 memory.  This
              could happen if you verify the contents of the  DX20  after
              you load the .ADX file and start to execute it.

   Recovery:  Verify the contents of the DX20 after loading the .ADX file
              but before executing it.

























































                                    1-56
                        ERROR RECOVERY PROCEDURES                        ERROR RECOVERY PROCEDURES  


   vi
   operator's guide

   1
   1
   2040 error recovery procedures
   2050 error recovery procedures
   2060 error recovery procedures
   automatically reloading the system
   automatically dumping the system
   klerr
   error.sys file
   ps:<system>dump.exe
   dump.cpy
   ps:<system>odump11.bin
   generation number
   boot.exb
   installation logbook
   p 2
   manually reloading the system
   manually dumping the system
   scheduled reloads
   Ecease command
   shutdown complete
   shutdown command
   reloading hung system
   reloading looping system
   p 4
   SPEAR output
   setting correct date
   setting correct time
   Eset command
   Esend command
   daytime command
   Ecease command
   p 5
   error messages
   %problem on device
   device corrective actions
   magnetic tape problems
   card reader problems
   read check
   pick check
   stack check
   card jam
   p 6
   hopper check
   line printer problem
   disk drive problem
   bugchks
   buginfs
   bughlts
   p 7
   power-fail restart
   crash report
   p 8
   kl bootstrap
   home block inconsistencies
   bat block inconsistencies
   bootstrap error messages
   p 9
   home block warning messages
   home block error messages
   p 10


                                    1-57
                        ERROR RECOVERY PROCEDURES                        ERROR RECOVERY PROCEDURES  


   bat block warning messages
   p 11
   parity errors
   error.sys file
   p 12
   dx20 error messages
   reaper error messages
   p 13
   tape error messages
   p 15
   bootstrap error messages
   p 18
   recovering the file system
   rebuilding a directory symbol table
   expunge command
   ddt
   ulist
   p 19
   reconstructing a directory
   deleting a directory
   Ecreate command
   p 21
   recreating, and restoring directories
   reconstructing root-directory
   p 24
   re-creating a file system
   re-creating a file file structure
   recreating the public structure
   recreating the front-end file system
   p 25
   recreating other file structures
   p 28
   terminating klinik
   p 29
   klinik messa9000 p 31
   checkd commands
   check bittable command
   rebuild command
   reconstruct index-table command
   reconstruct root-directory command
   scan command
   p 32
   check directory command
   p 33
   limit command
   release command
   p 35
   unlimit command
   checkd error messages
   p 36
   check bittable reports
   check bittable error messages
   p 40
   restarting programs under sysjob
   Espeak command
   p 41
   sysjob status command
   programs under sysjob
   sysjob.run file
   p 42
   hung console
   local switch
   memory configuration failed
   tops-20 monitor not found


                                    1-58
                        ERROR RECOVERY PROCEDURES                        ERROR RECOVERY PROCEDURES  


   p 43
   ps not found
   p 44
   bootstrap failed
   clearing memory
   console mode
   manually loading dx20
   dx20 microcode
   dx20 not working
   dx20ld
   sys:dxmca
   sys:dxmca.adx
   p 45
   dx20 switches
   p 46
   dx20 error messages
   p 47
   dx20 error messages
   p 48
   dx20 error messages
   s 2
   1
   2020 error recovery procedures
   automatically reloading the system
   automatically dumping the system
   forced reload
   default monitor
   ps:<system>monitor.exe
   ps:<system>dump.exe
   dump.cpy
   installation logbook
   p 2
   manually reloading the system
   manually dumping the system
   scheduled reloads
   Ecease command
   shutdown complete
   ctrl/ command
   sh command
   _*_*halted_*_* message
   reloading a hung system
   reloading a looping system
   lock switch
   unlock position
   p 3
   Ecease command
   logging reloads
   SPEAR output
   setting the correct date
   setting the correct time
   Eset command
   Esend command
   correcting the date
   correcting the time
   daytime command
   reset command
   exit command
   p 4
   error messages
   device error messages
   device corrective action
   %problem on device
   magnetic tape problem
   line printer problem


                                    1-59
                        ERROR RECOVERY PROCEDURES                        ERROR RECOVERY PROCEDURES  


   disk drive problem
   p 5
   card reader problem
   read check
   pick check
   stack check
   hopper check
   bugchks
   buginfs
   bughlts
   p 6
   home block inconsistencies
   bat block inconsistencies
   bootstrap error messages
   p 7
   home block messages
   home block warning messages
   p 8
   home block error messages
   bat block messages
   p 9
   bat block warning messages
   memory parity errors
   mpedev bugchk
   fatmpe bughlt
   error.sys
   p 10
   reaper error messages
   p 11
   tape error messages
   p 12
   recovering the file system
   rebuilding a directory symbol table
   p 13
   ddt
   ulist
   reconstructing a directory
   p 14
   deleting a directory
   Ecreate command
   p 15
   recreating a directory
   restoring files
   dluser
   checkd
   check bittable
   release command
   p 16
   reconstructing root-directory
   recreating the file system
   recreating a structure
   p 17
   recreating the public structure
   p 18
   recreating other structures
   account system-default
   klinik
   remote diagnosis switch
   protect position
   klinik link
   disable position
   p 21
   checkd command
   check bittable command


                                    1-60
                        ERROR RECOVERY PROCEDURES                        ERROR RECOVERY PROCEDURES  


   rebuild command
   reconstruct index-table command
   reconstruct root-directory command
   scan command
   p 22
   check bittable command
   checking bit table
   check directory command
   checking directory information
   checkd create command
   checkd exit command
   p 23
   checkd help command
   rebuild command
   reconstruct index-table command
   reconstruct root-directory command
   release command
   p 24
   scan command
   scanning a structure
   scanning for addresses
   p 25
   checkd error messages
   check bittable reports
   number of sector
   check bittable error messages
   p 30
   restarting programs under sysjob
   Espeak command
   p 31
   sysjob status command
   programs under sysjob
   sysjob.run file
   p 32
   hung console
   local switch
   tops-20 monitor not found
   p 33
   ps not found
   bootstrap load failed
   bootstrap failed during a reload
   p 34
   clearing memory























                                    1-61
                        ERROR RECOVERY PROCEDURES                        ERROR RECOVERY PROCEDURES  









                                  CONTENTS


                                    NOTE

           The information previously found in Appendixes  A,  B,
           and  C  has been removed.  PARSER information is found
           in the RSX-20F System  Reference  Manual,  Chapter  4.
           KLINIT  information  is  found  in  the RSX-20F System
           Reference Manual,  Chapter  5.   BUGHLT,  BUGINF,  and
           BUGCHK information is found in the BUGHLT Document.

                                      CONTENTS



   APPENDIX A      PARSER


   APPENDIX B      KLINIT


   APPENDIX C      BUGHLT, BUGINF, AND BUGCHK NAMES AND DESCRIPTIONS  

   Appendixes D and E have been deleted.
   INDEX

































                                    1-62
|  
|  
|  
|  
|  
|  
|  
|  
|  
|  
|  
|  
                                 APPENDIX A|                                APPENDIX A
|  
                                   PARSER|                                  PARSER
|  
|  
|  
|  The information in this appendix has been removed  from  this  manual.
|  It  can  now  be  found  in  Chapter 4 of the RSX-20F System Reference
|  Manual.
|  
|  This page replaces Appendix A, pages A-1 through A-29.














































                                    A-1
|  




































































                                    B-1
|  
|  
|  
|  
|  
|  
|  
|  
|  
|  
|  
|  
                                 APPENDIX B|                                APPENDIX B
|  
                                   KLINIT|                                  KLINIT
|  
|  
|  
|  The information in this appendix has been removed  from  this  manual.
|  It  can  now  be  found  in  Chapter 5 of the RSX-20F System Reference
|  Manual.
|  
|  This page replaces Appendix B, pages B-1 through B-26.














































                                    B-1
|  




































































                                    C-1
|  
|  
|  
|  
|  
|  
|  
|  
|  
|  
|  
|  
                                 APPENDIX C|                                APPENDIX C
|  
            BUGHLT, BUGINF, AND BUGCHK NAMES AND DESCRIPTIONS|           BUGHLT, BUGINF, AND BUGCHK NAMES AND DESCRIPTIONS  
|  
|  
|  
|  The information in this appendix has been removed  from  this  manual.
|  It can now be found in the BUGCHK Document.
|  
|  This page replaces Appendix C, pages C-1 through C-8.















































                                    C-1
            BUGHLT, BUGINF, AND BUGCHK NAMES AND DESCRIPTIONS|           BUGHLT, BUGINF, AND BUGCHK NAMES AND DESCRIPTIONS  


                   Appendixes D and E have been deleted.o                  Appendixes D and E have been deleted.

































































                                    C-2
